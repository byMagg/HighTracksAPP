"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6845],{6845:(b,u,c)=>{c.r(u),c.d(u,{TrackPage:()=>P});var l=c(5861),m=c(6895),g=c(433),o=c(650),_=c(8175),t=c(4650),d=c(8672);function f(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"ion-fab-button",7),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.handleDeleteAlert(r._id))}),t._UZ(1,"ion-icon",8),t.qZA()}}function C(e,a){if(1&e&&(t.TgZ(0,"ion-item")(1,"ion-label")(2,"h3"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA()(),t.YNc(8,f,2,0,"ion-fab-button",6),t.qZA()),2&e){const n=a.$implicit,i=t.oxw();t.xp6(3),t.hij("@",n.author,""),t.xp6(2),t.Oqu(n.text),t.xp6(2),t.Oqu(n.score),t.xp6(1),t.Q6J("ngIf",i.hideDelete)}}let h=(()=>{class e{constructor(n,i){this.apiService=n,this.alertController=i,this.score=0,this.hideDelete=_.e.logged}ngOnInit(){this.getComments()}sendComment(){var n=this;return(0,l.Z)(function*(){if(n.trackId&&n.author&&n.text){let i={_id:"",author:n.author,text:n.text,score:n.score};console.log(i),(yield n.apiService.insertComment(n.trackId,i))&&(n.getComments(),n.author=void 0,n.text=void 0,n.score=0)}})()}getComments(){var n=this;return(0,l.Z)(function*(){n.trackId&&(n.comments=yield n.apiService.getComments(n.trackId))})()}deleteComment(n){var i=this;return(0,l.Z)(function*(){i.trackId&&(yield i.apiService.deleteComment(i.trackId,n))&&i.getComments()})()}handleDeleteAlert(n){this.alertController.create({header:"Confirmar eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que quieres eliminar este comentario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"confirm",handler:()=>{this.deleteComment(n)}}]}).then(i=>i.present())}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.j),t.Y36(o.Br))},e.\u0275cmp=t.Xpm({type:e,selectors:[["comments"]],inputs:{trackId:"trackId"},standalone:!0,features:[t.jDz],decls:23,vars:8,consts:[["position","floating"],["type","text","aria-label","Autor",3,"ngModel","ngModelChange"],["aria-label","Comentario",3,"ngModel","ngModelChange"],["aria-label","Range with ticks",3,"ngModel","ticks","snaps","min","max","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"],["color","danger","size","small",3,"click",4,"ngIf"],["color","danger","size","small",3,"click"],["name","close-circle"]],template:function(n,i){1&n&&(t.TgZ(0,"section")(1,"article")(2,"h2"),t._uU(3,"A\xf1adir comentarios"),t.qZA(),t.TgZ(4,"ion-item")(5,"ion-label",0),t._uU(6,"Autor"),t.qZA(),t.TgZ(7,"ion-input",1),t.NdJ("ngModelChange",function(s){return i.author=s}),t.qZA()(),t.TgZ(8,"ion-item")(9,"ion-label",0),t._uU(10,"Comentario"),t.qZA(),t.TgZ(11,"ion-textarea",2),t.NdJ("ngModelChange",function(s){return i.text=s}),t.qZA()(),t.TgZ(12,"ion-item")(13,"ion-label",0),t._uU(14,"Puntuaci\xf3n"),t.qZA(),t.TgZ(15,"ion-range",3),t.NdJ("ngModelChange",function(s){return i.score=s}),t.qZA()(),t.TgZ(16,"ion-button",4),t.NdJ("click",function(){return i.sendComment()}),t._uU(17,"A\xf1adir"),t.qZA()(),t.TgZ(18,"article")(19,"h2"),t._uU(20,"Comentarios"),t.qZA(),t.TgZ(21,"ion-list"),t.YNc(22,C,9,4,"ion-item",5),t.qZA()()()),2&n&&(t.xp6(7),t.Q6J("ngModel",i.author),t.xp6(4),t.Q6J("ngModel",i.text),t.xp6(4),t.Q6J("ngModel",i.score)("ticks",!0)("snaps",!0)("min",0)("max",5),t.xp6(7),t.Q6J("ngForOf",i.comments))},dependencies:[o.Pc,o.YG,o.W4,o.gu,o.pK,o.Ie,o.Q$,o.q_,o.I_,o.g2,o.QI,o.j9,m.ez,m.sg,m.O5,g.u5,g.JJ,g.On],styles:["section[_ngcontent-%COMP%]{width:100%}ion-range[_ngcontent-%COMP%]{padding:0 20px}"]}),e})();var x=c(1194);function Z(e,a){if(1&e&&(t.TgZ(0,"ion-title"),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Oqu(n.track.name)}}function k(e,a){if(1&e&&t._UZ(0,"ion-img",13),2&e){const n=t.oxw(2);t.s9C("src",n.track.album.images[1].url)}}function T(e,a){if(1&e&&t._UZ(0,"ion-img",13),2&e){const n=t.oxw(2);t.s9C("src",n.track.album.images[0].url)}}function v(e,a){if(1&e&&t._UZ(0,"ion-img",13),2&e){const n=t.oxw(2);t.Q6J("src","data:image/jpeg;base64,"+n.track.album.images[0].imageBase64String)}}function M(e,a){if(1&e&&(t.TgZ(0,"h1"),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(n.name)}}function A(e,a){if(1&e&&(t.TgZ(0,"div",5)(1,"div")(2,"ion-card"),t.YNc(3,k,1,1,"ion-img",6),t.YNc(4,T,1,1,"ion-img",6),t.YNc(5,v,1,1,"ion-img",6),t.qZA()(),t.TgZ(6,"div",7)(7,"div",8),t.YNc(8,M,2,1,"h1",9),t.qZA(),t.TgZ(9,"div",10)(10,"div")(11,"span"),t._uU(12),t.ALo(13,"date"),t.qZA()(),t.TgZ(14,"div")(15,"span"),t._uU(16),t.qZA()()(),t.TgZ(17,"audio",11),t._UZ(18,"source",12),t.qZA()()()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.track.album.images[1]),t.xp6(1),t.Q6J("ngIf",!n.track.album.images[1]&&n.track.album.images[0].url),t.xp6(1),t.Q6J("ngIf",n.track.album.images[0].imageBase64String),t.xp6(3),t.Q6J("ngForOf",n.track.album.artists),t.xp6(4),t.hij("",t.xi3(13,7,n.track.duration_ms,"mm:ss")," min"),t.xp6(4),t.Oqu(n.track.album.release_date),t.xp6(2),t.s9C("src",n.track.preview_url,t.LSH)}}let P=(()=>{class e{constructor(n,i){var r=this;this.apiService=n,this.route=i,this.route.params.subscribe(function(){var s=(0,l.Z)(function*(p){r.trackId=p.id,null!=r.trackId&&(r.track=yield r.apiService.getTrack(r.trackId))});return function(p){return s.apply(this,arguments)}}())}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.j),t.Y36(x.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-track"]],standalone:!0,features:[t.jDz],decls:8,vars:3,consts:[["slot","start"],["defaultHref","/tracks"],[4,"ngIf"],["id","container",4,"ngIf"],[3,"trackId"],["id","container"],[3,"src",4,"ngIf"],["id","info"],["id","artist"],[4,"ngFor","ngForOf"],["id","main-info"],["controls",""],["type","audio/mpeg",3,"src"],[3,"src"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.YNc(4,Z,2,1,"ion-title",2),t.qZA()(),t.TgZ(5,"ion-content"),t.YNc(6,A,19,10,"div",3),t._UZ(7,"comments",4),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngIf",i.track),t.xp6(2),t.Q6J("ngIf",i.track),t.xp6(1),t.Q6J("trackId",i.trackId))},dependencies:[m.ez,m.sg,m.O5,m.uU,g.u5,o.Pc,o.oU,o.Sm,o.PM,o.W2,o.Gu,o.Xz,o.wd,o.sr,o.cs,h],styles:["ion-card[_ngcontent-%COMP%]{height:100%}ion-img[_ngcontent-%COMP%]{aspect-ratio:1/1}#container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}#info[_ngcontent-%COMP%]{display:grid;align-items:center;max-width:450px}#info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex}#info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding:15px}#main-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#000;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;color:#fff;text-align:center;border-radius:5px;margin:0 auto;padding:5px}#main-info[_ngcontent-%COMP%]{display:flex;margin:20px 0;gap:10px}#artist[_ngcontent-%COMP%]{display:flex}comments[_ngcontent-%COMP%]{display:flex;width:80%;margin:0 auto;max-width:500px}#artist[_ngcontent-%COMP%]{display:flex;align-items:center;gap:30px}@media (max-width: 600px){#container[_ngcontent-%COMP%]{flex-direction:column}}"]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8672],{7423:(ee,I,b)=>{b.d(I,{Uw:()=>P,fo:()=>n,xz:()=>S});var d=b(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var L=(()=>{return(r=L||(L={})).Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE",L;var r})();class S extends Error{constructor(e,t,a){super(e),this.message=e,this.code=t,this.data=a}}const y=r=>{var e,t,a,l,i;const f=r.CapacitorCustomPlatform||null,c=r.Capacitor||{},v=c.Plugins=c.Plugins||{},h=r.CapacitorPlatforms,j=(null===(e=null==h?void 0:h.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==f?f.name:(r=>{var e,t;return null!=r&&r.androidBridge?"android":null!==(t=null===(e=null==r?void 0:r.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(r)),ae=(null===(t=null==h?void 0:h.currentPlatform)||void 0===t?void 0:t.isNativePlatform)||(()=>"web"!==j()),le=(null===(a=null==h?void 0:h.currentPlatform)||void 0===a?void 0:a.isPluginAvailable)||(g=>{const m=D.get(g);return!!(null!=m&&m.platforms.has(j())||X(g))}),X=(null===(l=null==h?void 0:h.currentPlatform)||void 0===l?void 0:l.getPluginHeader)||(g=>{var m;return null===(m=c.PluginHeaders)||void 0===m?void 0:m.find(G=>G.name===g)}),D=new Map,ge=(null===(i=null==h?void 0:h.currentPlatform)||void 0===i?void 0:i.registerPlugin)||((g,m={})=>{const G=D.get(g);if(G)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),G.proxy;const Z=j(),B=X(g);let A;const me=function(){var p=(0,d.Z)(function*(){return!A&&Z in m?A=A="function"==typeof m[Z]?yield m[Z]():m[Z]:null!==f&&!A&&"web"in m&&(A=A="function"==typeof m.web?yield m.web():m.web),A});return function(){return p.apply(this,arguments)}}(),K=p=>{let w;const C=(...T)=>{const U=me().then(E=>{const O=((p,w)=>{var C,T;if(!B){if(p)return null===(T=p[w])||void 0===T?void 0:T.bind(p);throw new S(`"${g}" plugin is not implemented on ${Z}`,L.Unimplemented)}{const U=null==B?void 0:B.methods.find(E=>w===E.name);if(U)return"promise"===U.rtype?E=>c.nativePromise(g,w.toString(),E):(E,O)=>c.nativeCallback(g,w.toString(),E,O);if(p)return null===(C=p[w])||void 0===C?void 0:C.bind(p)}})(E,p);if(O){const H=O(...T);return w=null==H?void 0:H.remove,H}throw new S(`"${g}.${p}()" is not implemented on ${Z}`,L.Unimplemented)});return"addListener"===p&&(U.remove=(0,d.Z)(function*(){return w()})),U};return C.toString=()=>`${p.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:p,writable:!1,configurable:!1}),C},N=K("addListener"),q=K("removeListener"),pe=(p,w)=>{const C=N({eventName:p},w),T=function(){var E=(0,d.Z)(function*(){const O=yield C;q({eventName:p,callbackId:O},w)});return function(){return E.apply(this,arguments)}}(),U=new Promise(E=>C.then(()=>E({remove:T})));return U.remove=(0,d.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield T()}),U},V=new Proxy({},{get(p,w){switch(w){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return B?pe:N;case"removeListener":return q;default:return K(w)}}});return v[g]=V,D.set(g,{name:g,proxy:V,platforms:new Set([...Object.keys(m),...B?[Z]:[]])}),V});return c.convertFileSrc||(c.convertFileSrc=g=>g),c.getPlatform=j,c.handleError=g=>r.console.error(g),c.isNativePlatform=ae,c.isPluginAvailable=le,c.pluginMethodNoop=(g,m,G)=>Promise.reject(`${G} does not have an implementation of "${m}".`),c.registerPlugin=ge,c.Exception=S,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},o=(r=>r.Capacitor=y(r))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),n=o.registerPlugin;class P{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){var a=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const f=function(){var v=(0,d.Z)(function*(){return a.removeListener(e,t)});return function(){return v.apply(this,arguments)}}(),c=Promise.resolve({remove:f});return Object.defineProperty(c,"remove",{value:(v=(0,d.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield f()}),function(){return v.apply(this,arguments)})}),c;var v}removeAllListeners(){var e=this;return(0,d.Z)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t){const a=this.listeners[e];a&&a.forEach(l=>l(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:a=>{this.notifyListeners(t,a)}}}unimplemented(e="not implemented"){return new o.Exception(e,L.Unimplemented)}unavailable(e="not available"){return new o.Exception(e,L.Unavailable)}removeListener(e,t){var a=this;return(0,d.Z)(function*(){const l=a.listeners[e];if(!l)return;const i=l.indexOf(t);a.listeners[e].splice(i,1),a.listeners[e].length||a.removeWindowListener(a.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Y=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Q=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class te extends P{getCookies(){return(0,d.Z)(function*(){const e=document.cookie,t={};return e.split(";").forEach(a=>{if(a.length<=0)return;let[l,i]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=Q(l).trim(),i=Q(i).trim(),t[l]=i}),t})()}setCookie(e){return(0,d.Z)(function*(){try{const t=Y(e.key),a=Y(e.value),l=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),f=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${a||""}${l}; path=${i}; ${f};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,d.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,d.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,d.Z)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}n("CapacitorCookies",{web:()=>new te});const re=function(){var r=(0,d.Z)(function*(e){return new Promise((t,a)=>{const l=new FileReader;l.onload=()=>{const i=l.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},l.onerror=i=>a(i),l.readAsDataURL(e)})});return function(t){return r.apply(this,arguments)}}();class se extends P{request(e){return(0,d.Z)(function*(){const t=((r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),l=((r={})=>{const e=Object.keys(r);return Object.keys(r).map(l=>l.toLocaleLowerCase()).reduce((l,i,f)=>(l[i]=r[e[f]],l),{})})(r.headers)["content-type"]||"";if("string"==typeof r.data)t.body=r.data;else if(l.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[f,c]of Object.entries(r.data||{}))i.set(f,c);t.body=i.toString()}else if(l.includes("multipart/form-data")){const i=new FormData;if(r.data instanceof FormData)r.data.forEach((c,v)=>{i.append(v,c)});else for(const c of Object.keys(r.data))i.append(c,r.data[c]);t.body=i;const f=new Headers(t.headers);f.delete("content-type"),t.headers=f}else(l.includes("application/json")||"object"==typeof r.data)&&(t.body=JSON.stringify(r.data));return t})(e,e.webFetchExtra),a=((r,e=!0)=>r?Object.entries(r).reduce((a,l)=>{const[i,f]=l;let c,v;return Array.isArray(f)?(v="",f.forEach(h=>{c=e?encodeURIComponent(h):h,v+=`${i}=${c}&`}),v.slice(0,-1)):(c=e?encodeURIComponent(f):f,v=`${i}=${c}`),`${a}&${v}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),l=a?`${e.url}?${a}`:e.url,i=yield fetch(l,t),f=i.headers.get("content-type")||"";let v,h,{responseType:c="text"}=i.ok?e:{};switch(f.includes("application/json")&&(c="json"),c){case"arraybuffer":case"blob":h=yield i.blob(),v=yield re(h);break;case"json":v=yield i.json();break;default:v=yield i.text()}const z={};return i.headers.forEach((j,F)=>{z[F]=j}),{data:v,headers:z,status:i.status,url:i.url}})()}get(e){var t=this;return(0,d.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,d.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,d.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,d.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,d.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}n("CapacitorHttp",{web:()=>new se})},8672:(ee,I,b)=>{b.d(I,{j:()=>M});var d=b(5861),k=b(529),$=b(9808),W=b(2340),x=b(4650),J=b(7556);const L=(0,b(7423).fo)("Geolocation",{web:()=>b.e(4561).then(b.bind(b,4561)).then(y=>new y.GeolocationWeb)});let S=(()=>{class y{constructor(){this.coords={latitude:0,longitude:0,accuracy:0}}getLocation(){var o=this;return(0,d.Z)(function*(){const n=yield L.getCurrentPosition();return o.coords.latitude=n.coords.latitude,o.coords.latitude=n.coords.longitude,o.coords.accuracy=n.coords.accuracy,o.coords})()}}return y.\u0275fac=function(o){return new(o||y)},y.\u0275prov=x.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})(),M=(()=>{class y{constructor(o,n,s){this.http=o,this.authService=n,this.geoService=s,this.url=W.N.url,this.token=this.authService.getJWT()}getRecommendations(){var o=this;return(0,d.Z)(function*(){const s={tracks:(yield o.getTracks()).map(u=>u.name)};try{const u=(yield(0,$.n)(o.http.put(`${o.url}recommendations`,s,{headers:{Authorization:`Bearer ${o.token}`}}))).tracks;return console.log(u),u}catch(u){return u instanceof k.UA&&500===u.status&&console.log("Error updating track"),[]}})()}searchTracksSpotify(o,n=0){var s=this;return(0,d.Z)(function*(){try{return(yield(0,$.n)(s.http.get(`${s.url}search/${encodeURI(o)}?offset=${n}`))).tracks.items.map(P=>({_id:P.id,...P,id:void 0}))}catch(u){return console.log(u),[]}})()}searchTracks(o,n="name"){var s=this;return(0,d.Z)(function*(){try{return yield(0,$.n)(s.http.get(`${s.url}tracks/search?${n}=${encodeURI(o)}`,{headers:{Authorization:`Bearer ${s.token}`}}))}catch(u){if(u instanceof k.UA){if(404===u.status)throw new Error("Track not found");if(500===u.status)throw new Error("Error getting track");if(0===u.status)throw new Error("Error connecting to server")}throw u}})()}getTrack(o){var n=this;return(0,d.Z)(function*(){try{return yield(0,$.n)(n.http.get(`${n.url}tracks/${o}`,{headers:{Authorization:`Bearer ${n.token}`}}))}catch(s){if(s instanceof k.UA){if(404===s.status)throw new Error("Track not found");if(500===s.status)throw new Error("Error getting track");if(0===s.status)throw new Error("Error connecting to server")}throw s}})()}getTracks(){var o=this;return(0,d.Z)(function*(){try{return yield(0,$.n)(o.http.get(`${o.url}tracks/`,{headers:{Authorization:`Bearer ${o.token}`}}))}catch(n){if(n instanceof k.UA){if(500===n.status)throw new Error("Error getting track");if(0===n.status)throw new Error("Error connecting to server")}}return[]})()}insertTrack(o){var n=this;return(0,d.Z)(function*(){let s;try{s=yield n.geoService.getLocation()}catch(P){P instanceof GeolocationPositionError&&console.log("Error getting location")}o.location=s;const u=[o];try{return yield(0,$.n)(n.http.post(`${n.url}tracks/`,u,{headers:{Authorization:`Bearer ${n.token}`}})),!0}catch(P){if(P instanceof k.UA&&400===P.status)throw Error("Track already exists");return!1}})()}insertTracks(o){var n=this;return(0,d.Z)(function*(){let s;try{s=yield n.geoService.getLocation()}catch(u){u instanceof GeolocationPositionError&&console.log("Error getting location")}s&&o.forEach(u=>u.location=s);try{return yield(0,$.n)(n.http.post(`${n.url}tracks/`,o,{headers:{Authorization:`Bearer ${n.token}`}})),!0}catch(u){if(u instanceof k.UA&&400===u.status)throw Error("Track already exists");return!1}})()}insertComment(o,n){var s=this;return(0,d.Z)(function*(){let u;try{u=yield s.geoService.getLocation()}catch(P){P instanceof GeolocationPositionError&&console.log("Error getting location")}n.location=u,console.log(n);try{return yield(0,$.n)(s.http.post(`${s.url}tracks/${o}/comments`,n,{headers:{Authorization:`Bearer ${s.token}`}})),!0}catch(P){return P instanceof k.UA&&404===P.status&&console.log("Track not found"),!1}})()}updateTrack(o){var n=this;return(0,d.Z)(function*(){try{return yield(0,$.n)(n.http.put(`${n.url}tracks/${o._id}`,o,{headers:{Authorization:`Bearer ${n.token}`}})),!0}catch(s){return s instanceof k.UA&&(404===s.status&&console.log("Track not found"),500===s.status&&console.log("Error updating track")),!1}})()}deleteTrack(o){var n=this;return(0,d.Z)(function*(){try{return yield(0,$.n)(n.http.delete(`${n.url}tracks/${o}`,{headers:{Authorization:`Bearer ${n.token}`}})),!0}catch(s){return s instanceof k.UA&&(404===s.status&&console.log("Track not found"),500===s.status&&console.log("Error deleting track")),!1}})()}getComments(o){var n=this;return(0,d.Z)(function*(){let s=[];try{s=yield(0,$.n)(n.http.get(`${n.url}tracks/${o}/comments`,{headers:{Authorization:`Bearer ${n.token}`}})),console.log(s)}catch(u){u instanceof k.UA&&(404===u.status&&console.log("Track not found"),500===u.status&&console.log("Error getting comments"))}return s})()}deleteComment(o,n){var s=this;return(0,d.Z)(function*(){try{return yield(0,$.n)(s.http.delete(`${s.url}tracks/${o}/comments/${n}`,{headers:{Authorization:`Bearer ${s.token}`}})),!0}catch(u){return u instanceof k.UA&&(404===u.status&&console.log("Track not found"),500===u.status&&console.log("Error deleting comment")),!1}})()}}return y.\u0275fac=function(o){return new(o||y)(x.LFG(k.eN),x.LFG(J.e),x.LFG(S))},y.\u0275prov=x.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()}}]);
(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(In,Et,j)=>{"use strict";j.d(Et,{nm:()=>se});var _=j(4976);j(4650),j(259);var Y=j(5861),it=j(6881),tt=j(4859),Pt=j(2090),Ve=j(1877);const ke=new Map,Ne={activated:!1,tokenObservers:[]},De={initialized:!1,enabled:!1};function He(mt){return ke.get(mt)||Object.assign({},Ne)}function Tt(){return De}const dt="https://content-firebaseappcheck.googleapis.com/v1",Fe="exchangeDebugToken",je={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ht{constructor(ot,xt,tn,dn,fr){if(this.operation=ot,this.retryPolicy=xt,this.getWaitDuration=tn,this.lowerBound=dn,this.upperBound=fr,this.pending=null,this.nextErrorWaitInterval=dn,dn>fr)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ot){var xt=this;return(0,Y.Z)(function*(){xt.stop();try{xt.pending=new Pt.BH,yield function Ct(mt){return new Promise(ot=>{setTimeout(ot,mt)})}(xt.getNextRun(ot)),xt.pending.resolve(),yield xt.pending.promise,xt.pending=new Pt.BH,yield xt.operation(),xt.pending.resolve(),yield xt.pending.promise,xt.process(!0).catch(()=>{})}catch(tn){xt.retryPolicy(tn)?xt.process(!1).catch(()=>{}):xt.stop()}})()}getNextRun(ot){if(ot)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const xt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),xt}}}const zt=new Pt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gn(mt,ot){return On.apply(this,arguments)}function On(){return(On=(0,Y.Z)(function*({url:mt,body:ot},xt){const tn={"Content-Type":"application/json"},dn=xt.getImmediate({optional:!0});if(dn){const _i=yield dn.getHeartbeatsHeader();_i&&(tn["X-Firebase-Client"]=_i)}const fr={method:"POST",body:JSON.stringify(ot),headers:tn};let Er,Ir;try{Er=yield fetch(mt,fr)}catch(_i){throw zt.create("fetch-network-error",{originalErrorMessage:null==_i?void 0:_i.message})}if(200!==Er.status)throw zt.create("fetch-status-error",{httpStatus:Er.status});try{Ir=yield Er.json()}catch(_i){throw zt.create("fetch-parse-error",{originalErrorMessage:null==_i?void 0:_i.message})}const ei=Ir.ttl.match(/^([\d.]+)(s)$/);if(!ei||!ei[2]||isNaN(Number(ei[1])))throw zt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ir.ttl}`});const vs=1e3*Number(ei[1]),Oo=Date.now();return{token:Ir.token,expireTimeMillis:Oo+vs,issuedAtTimeMillis:Oo}})).apply(this,arguments)}const Cn="firebase-app-check-database",hr=1,_r="firebase-app-check-store";let bn=null;function Gn(mt,ot){return qn.apply(this,arguments)}function qn(){return(qn=(0,Y.Z)(function*(mt,ot){const tn=(yield function zn(){return bn||(bn=new Promise((mt,ot)=>{try{const xt=indexedDB.open(Cn,hr);xt.onsuccess=tn=>{mt(tn.target.result)},xt.onerror=tn=>{var dn;ot(zt.create("storage-open",{originalErrorMessage:null===(dn=tn.target.error)||void 0===dn?void 0:dn.message}))},xt.onupgradeneeded=tn=>{0===tn.oldVersion&&tn.target.result.createObjectStore(_r,{keyPath:"compositeKey"})}}catch(xt){ot(zt.create("storage-open",{originalErrorMessage:null==xt?void 0:xt.message}))}}),bn)}()).transaction(_r,"readwrite"),fr=tn.objectStore(_r).put({compositeKey:mt,value:ot});return new Promise((Er,Ir)=>{fr.onsuccess=ei=>{Er()},tn.onerror=ei=>{var vs;Ir(zt.create("storage-set",{originalErrorMessage:null===(vs=ei.target.error)||void 0===vs?void 0:vs.message}))}})})).apply(this,arguments)}const Jr=new Ve.Yd("@firebase/app-check");function zr(mt,ot){return(0,Pt.hl)()?function Cr(mt,ot){return Gn(function on(mt){return`${mt.options.appId}-${mt.name}`}(mt),ot)}(mt,ot).catch(xt=>{Jr.warn(`Failed to write token to IndexedDB. Error: ${xt}`)}):Promise.resolve()}function ur(){return lr.apply(this,arguments)}function lr(){return(lr=(0,Y.Z)(function*(){const mt=Tt();if(mt.enabled&&mt.token)return mt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ai={error:"UNKNOWN_ERROR"};function mr(mt){return Pt.US.encodeString(JSON.stringify(mt),!1)}function Kt(mt){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,Y.Z)(function*(mt,ot=!1){const xt=mt.app;!function kt(mt){if(!He(mt).activated)throw zt.create("use-before-activation",{appName:mt.name})}(xt);const tn=He(xt);let fr,dn=tn.token;if(dn&&!lt(dn)&&(tn.token=void 0,dn=void 0),!dn){const ei=yield tn.cachedTokenPromise;ei&&(lt(ei)?dn=ei:yield zr(xt,void 0))}if(!ot&&dn&&lt(dn))return{token:dn.token};let Ir,Er=!1;if(function gi(){return Tt().enabled}()){tn.exchangeTokenPromise||(tn.exchangeTokenPromise=gn(function cn(mt,ot){const{projectId:xt,appId:tn,apiKey:dn}=mt.options;return{url:`${dt}/projects/${xt}/apps/${tn}:${Fe}?key=${dn}`,body:{debug_token:ot}}}(xt,yield ur()),mt.heartbeatServiceProvider).finally(()=>{tn.exchangeTokenPromise=void 0}),Er=!0);const ei=yield tn.exchangeTokenPromise;return yield zr(xt,ei),tn.token=ei,{token:ei.token}}try{tn.exchangeTokenPromise||(tn.exchangeTokenPromise=tn.provider.getToken().finally(()=>{tn.exchangeTokenPromise=void 0}),Er=!0),dn=yield He(xt).exchangeTokenPromise}catch(ei){"appCheck/throttled"===ei.code?Jr.warn(ei.message):Jr.error(ei),fr=ei}return dn?fr?Ir=lt(dn)?{token:dn.token,internalError:fr}:un(fr):(Ir={token:dn.token},tn.token=dn,yield zr(xt,dn)):Ir=un(fr),Er&&function Ot(mt,ot){const xt=He(mt).tokenObservers;for(const tn of xt)try{"EXTERNAL"===tn.type&&null!=ot.error?tn.error(ot.error):tn.next(ot)}catch{}}(xt,Ir),Ir})).apply(this,arguments)}function we(mt,ot){const xt=He(mt),tn=xt.tokenObservers.filter(dn=>dn.next!==ot);0===tn.length&&xt.tokenRefresher&&xt.tokenRefresher.isRunning()&&xt.tokenRefresher.stop(),xt.tokenObservers=tn}function Ie(mt){const{app:ot}=mt,xt=He(ot);let tn=xt.tokenRefresher;tn||(tn=function Ye(mt){const{app:ot}=mt;return new ht((0,Y.Z)(function*(){let tn;if(tn=He(ot).token?yield Kt(mt,!0):yield Kt(mt),tn.error)throw tn.error;if(tn.internalError)throw tn.internalError}),()=>!0,()=>{const xt=He(ot);if(xt.token){let tn=xt.token.issuedAtTimeMillis+.5*(xt.token.expireTimeMillis-xt.token.issuedAtTimeMillis)+3e5;return tn=Math.min(tn,xt.token.expireTimeMillis-3e5),Math.max(0,tn-Date.now())}return 0},je.RETRIAL_MIN_WAIT,je.RETRIAL_MAX_WAIT)}(mt),xt.tokenRefresher=tn),!tn.isRunning()&&xt.isTokenAutoRefreshEnabled&&tn.start()}function lt(mt){return mt.expireTimeMillis-Date.now()>0}function un(mt){return{token:mr(Ai),error:mt}}class ut{constructor(ot,xt){this.app=ot,this.heartbeatServiceProvider=xt}_delete(){const{tokenObservers:ot}=He(this.app);for(const xt of ot)we(this.app,xt.next);return Promise.resolve()}}const kr="app-check-internal";!function Ci(){(0,it._registerComponent)(new tt.wA("app-check",mt=>function Ke(mt,ot){return new ut(mt,ot)}(mt.getProvider("app").getImmediate(),mt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((mt,ot,xt)=>{mt.getProvider(kr).initialize()})),(0,it._registerComponent)(new tt.wA(kr,mt=>function _e(mt){return{getToken:ot=>Kt(mt,ot),addTokenListener:ot=>function qt(mt,ot,xt,tn){const{app:dn}=mt,fr=He(dn);if(fr.tokenObservers=[...fr.tokenObservers,{next:xt,error:tn,type:ot}],fr.token&&lt(fr.token)){const Ir=fr.token;Promise.resolve().then(()=>{xt({token:Ir.token}),Ie(mt)}).catch(()=>{})}fr.cachedTokenPromise.then(()=>Ie(mt))}(mt,"INTERNAL",ot),removeTokenListener:ot=>we(mt.app,ot)}}(mt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,it.registerVersion)("@firebase/app-check","0.7.0")}();class se{constructor(){return(0,_.vb)("app-check")}}typeof window<"u"&&window},1205:(In,Et,j)=>{"use strict";j.d(Et,{zQ:()=>dt,ww:()=>Mt,rT:()=>De,f7:()=>pt,L6:()=>ke,_Q:()=>Ne,lh:()=>He,Qv:()=>Ve,nw:()=>Tt});var _=j(4650),y=j(7579),ee=j(9646),le=j(9751),$e=j(8996),Ae=j(6451),ve=j(5363),Ue=j(3900),Ge=j(4004),Ee=j(6063);class de extends y.x{constructor(Fe=1/0,je=1/0,Be=Ee.l){super(),this._bufferSize=Fe,this._windowTime=je,this._timestampProvider=Be,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=je===1/0,this._bufferSize=Math.max(1,Fe),this._windowTime=Math.max(1,je)}next(Fe){const{isStopped:je,_buffer:Be,_infiniteTimeWindow:ht,_timestampProvider:Ct,_windowTime:nn}=this;je||(Be.push(Fe),!ht&&Be.push(Ct.now()+nn)),this._trimBuffer(),super.next(Fe)}_subscribe(Fe){this._throwIfClosed(),this._trimBuffer();const je=this._innerSubscribe(Fe),{_infiniteTimeWindow:Be,_buffer:ht}=this,Ct=ht.slice();for(let nn=0;nn<Ct.length&&!Fe.closed;nn+=Be?1:2)Fe.next(Ct[nn]);return this._checkFinalizedStatuses(Fe),je}_trimBuffer(){const{_bufferSize:Fe,_timestampProvider:je,_buffer:Be,_infiniteTimeWindow:ht}=this,Ct=(ht?1:2)*Fe;if(Fe<1/0&&Ct<Be.length&&Be.splice(0,Be.length-Ct),!ht){const nn=je.now();let zt=0;for(let Dn=1;Dn<Be.length&&Be[Dn]<=nn;Dn+=2)zt=Dn;zt&&Be.splice(0,zt+1)}}}var ye=j(3099);function We(yt,Fe,je){let Be,ht=!1;return yt&&"object"==typeof yt?({bufferSize:Be=1/0,windowTime:Fe=1/0,refCount:ht=!1,scheduler:je}=yt):Be=null!=yt?yt:1/0,(0,ye.B)({connector:()=>new de(Be,Fe,je),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ht})}var Oe=j(590),Je=j(576);function wt(yt,Fe){return(0,Je.m)(Fe)?(0,Ue.w)(()=>yt,Fe):(0,Ue.w)(()=>yt)}var Se=j(9468),xe=j(9300),ue=j(4976),_t=j(2011),Y=j(6895),it=j(6217),tt=j(9260);const Ve=new _.OlP("angularfire2.auth.use-emulator"),ke=new _.OlP("angularfire2.auth.settings"),Ne=new _.OlP("angularfire2.auth.tenant-id"),De=new _.OlP("angularfire2.auth.langugage-code"),He=new _.OlP("angularfire2.auth.use-device-language"),pt=new _.OlP("angularfire.auth.persistence"),Tt=(yt,Fe,je,Be,ht,Ct,nn,zt)=>(0,_t.cc)(`${yt.name}.auth`,"AngularFireAuth",yt.name,()=>{const Dn=Fe.runOutsideAngular(()=>yt.auth());if(je&&Dn.useEmulator(...je),Be&&(Dn.tenantId=Be),Dn.languageCode=ht,Ct&&Dn.useDeviceLanguage(),nn)for(const[kt,Re]of Object.entries(nn))Dn.settings[kt]=Re;return zt&&Dn.setPersistence(zt),Dn},[je,Be,ht,Ct,nn,zt]);let dt=(()=>{class yt{constructor(je,Be,ht,Ct,nn,zt,Dn,kt,Re,At,gn,On){const Yn=new y.x,xn=(0,ee.of)(void 0).pipe((0,ve.Q)(nn.outsideAngular),(0,Ue.w)(()=>Ct.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,3042)))),(0,Ge.U)(()=>(0,_t.on)(je,Ct,Be)),(0,Ge.U)(cn=>Tt(cn,Ct,zt,kt,Re,At,Dn,gn)),We({bufferSize:1,refCount:!1}));if((0,Y.PM)(ht))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ee.of)(null);else{xn.pipe((0,Oe.P)()).subscribe();const Cn=xn.pipe((0,Ue.w)(tr=>tr.getRedirectResult().then(bn=>bn,()=>null)),ue.iC,We({bufferSize:1,refCount:!1})),hr=xn.pipe((0,Ue.w)(tr=>new le.y(bn=>({unsubscribe:Ct.runOutsideAngular(()=>tr.onAuthStateChanged(zn=>bn.next(zn),zn=>bn.error(zn),()=>bn.complete()))})))),_r=xn.pipe((0,Ue.w)(tr=>new le.y(bn=>({unsubscribe:Ct.runOutsideAngular(()=>tr.onIdTokenChanged(zn=>bn.next(zn),zn=>bn.error(zn),()=>bn.complete()))}))));this.authState=Cn.pipe(wt(hr),(0,Se.R)(nn.outsideAngular),(0,ve.Q)(nn.insideAngular)),this.user=Cn.pipe(wt(_r),(0,Se.R)(nn.outsideAngular),(0,ve.Q)(nn.insideAngular)),this.idToken=this.user.pipe((0,Ue.w)(tr=>tr?(0,$e.D)(tr.getIdToken()):(0,ee.of)(null))),this.idTokenResult=this.user.pipe((0,Ue.w)(tr=>tr?(0,$e.D)(tr.getIdTokenResult()):(0,ee.of)(null))),this.credential=(0,Ae.T)(Cn,Yn,this.authState.pipe((0,xe.h)(tr=>!tr))).pipe((0,Ge.U)(tr=>null!=tr&&tr.user?tr:null),(0,Se.R)(nn.outsideAngular),(0,ve.Q)(nn.insideAngular))}return(0,_t.pX)(this,xn,Ct,{spy:{apply:(cn,Cn,hr)=>{(cn.startsWith("signIn")||cn.startsWith("createUser"))&&hr.then(_r=>Yn.next(_r))}}})}}return yt.\u0275fac=function(je){return new(je||yt)(_.LFG(_t.Dh),_.LFG(_t.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ue.HU),_.LFG(Ve,8),_.LFG(ke,8),_.LFG(Ne,8),_.LFG(De,8),_.LFG(He,8),_.LFG(pt,8),_.LFG(it.nm,8))},yt.\u0275prov=_.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"any"}),yt})(),Mt=(()=>{class yt{constructor(){tt.Z.registerVersion("angularfire",ue.q4.full,"auth-compat")}}return yt.\u0275fac=function(je){return new(je||yt)},yt.\u0275mod=_.oAB({type:yt}),yt.\u0275inj=_.cJS({providers:[dt]}),yt})()},1762:(In,Et,j)=>{"use strict";j.d(Et,{ST:()=>Ip,yb:()=>d_});var _=j(4650),y=j(4986),ee=j(9751),le=j(8996),$e=j(9646),Ae=j(4976),ve=j(8675),Ue=j(4482),Ge=j(5403);function Ee(){return(0,Ue.e)((r,e)=>{let t,s=!1;r.subscribe((0,Ge.x)(e,c=>{const f=t;t=c,s&&e.next([f,c]),s=!0}))})}var ke,de=j(4004),ye=j(5026),We=j(1884),Oe=j(9300),Je=j(2011),wt=j(6895),xe=(j(3042),j(3942)),ue=j(5861),_t=j(6881),Y=j(4859),it=j(1877),tt=j(2090),Pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ve={},Ne=Ne||{},De=Pt||self;function He(){}function pt(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Tt(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Mt="closure_uid_"+(1e9*Math.random()>>>0),yt=0;function Fe(r,e,t){return r.call.apply(r.bind,arguments)}function je(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),r.apply(e,c)}}return function(){return r.apply(e,arguments)}}function Be(r,e,t){return(Be=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fe:je).apply(null,arguments)}function ht(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function Ct(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,c,f){for(var E=Array(arguments.length-2),k=2;k<arguments.length;k++)E[k-2]=arguments[k];return e.prototype[c].apply(s,E)}}function nn(){this.s=this.s,this.o=this.o}nn.prototype.s=!1,nn.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function dt(r){Object.prototype.hasOwnProperty.call(r,Mt)&&r[Mt]||(r[Mt]=++yt)}(this)},nn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dn=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function kt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function Re(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(pt(s)){const c=r.length||0,f=s.length||0;r.length=c+f;for(let E=0;E<f;E++)r[c+E]=s[E]}else r.push(s)}}function At(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var gn=function(){if(!De.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{De.addEventListener("test",He,e),De.removeEventListener("test",He,e)}catch{}return r}();function On(r){return/^[\s\xa0]*$/.test(r)}var Yn=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function xn(r,e){return r<e?-1:r>e?1:0}function cn(){var r=De.navigator;return r&&(r=r.userAgent)?r:""}function Cn(r){return-1!=cn().indexOf(r)}function hr(r){return hr[" "](r),r}function _r(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}hr[" "]=He;var Gn,r,tr=Cn("Opera"),bn=Cn("Trident")||Cn("MSIE"),zn=Cn("Edge"),yi=zn||bn,Cr=Cn("Gecko")&&!(-1!=cn().toLowerCase().indexOf("webkit")&&!Cn("Edge"))&&!(Cn("Trident")||Cn("MSIE"))&&!Cn("Edge"),di=-1!=cn().toLowerCase().indexOf("webkit")&&!Cn("Edge");function wi(){var r=De.document;return r?r.documentMode:void 0}e:{var qn="",ln=(r=cn(),Cr?/rv:([^\);]+)(\)|;)/.exec(r):zn?/Edge\/([\d\.]+)/.exec(r):bn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):di?/WebKit\/(\S+)/.exec(r):tr?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(ln&&(qn=ln?ln[1]:""),bn){var yn=wi();if(null!=yn&&yn>parseFloat(qn)){Gn=String(yn);break e}}Gn=qn}var on={},zr=De.document&&bn&&(wi()||parseInt(Gn,10))||void 0;function pi(r,e){if(At.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Cr){e:{try{hr(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Lr[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&pi.$.h.call(this)}}Ct(pi,At);var Lr={2:"touch",3:"pen",4:"mouse"};pi.prototype.h=function(){pi.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var gi="closure_listenable_"+(1e6*Math.random()|0),ur=0;function lr(r,e,t,s,c){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=c,this.key=++ur,this.fa=this.ia=!1}function yr(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Ai(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function mr(r){const e={};for(const t in r)e[t]=r[t];return e}const Kt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ze(r,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)r[t]=s[t];for(let f=0;f<Kt.length;f++)t=Kt[f],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function rt(r){this.src=r,this.g={},this.h=0}function Jt(r,e){var t=e.type;if(t in r.g){var f,s=r.g[t],c=Dn(s,e);(f=0<=c)&&Array.prototype.splice.call(s,c,1),f&&(yr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function qt(r,e,t,s){for(var c=0;c<r.length;++c){var f=r[c];if(!f.fa&&f.listener==e&&f.capture==!!t&&f.la==s)return c}return-1}rt.prototype.add=function(r,e,t,s,c){var f=r.toString();(r=this.g[f])||(r=this.g[f]=[],this.h++);var E=qt(r,e,s,c);return-1<E?(e=r[E],t||(e.ia=!1)):((e=new lr(e,this.src,f,!!s,c)).ia=t,r.push(e)),e};var we="closure_lm_"+(1e6*Math.random()|0),Ie={};function Ye(r,e,t,s,c){if(s&&s.once)return un(r,e,t,s,c);if(Array.isArray(e)){for(var f=0;f<e.length;f++)Ye(r,e[f],t,s,c);return null}return t=Ce(t),r&&r[gi]?r.O(e,t,Tt(s)?!!s.capture:!!s,c):Ot(r,e,t,!1,s,c)}function Ot(r,e,t,s,c,f){if(!e)throw Error("Invalid event type");var E=Tt(c)?!!c.capture:!!c,k=Nt(r);if(k||(r[we]=k=new rt(r)),(t=k.add(e,t,s,E,f)).proxy)return t;if(s=function lt(){const e=gt;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)gn||(c=E),void 0===c&&(c=!1),r.addEventListener(e.toString(),s,c);else if(r.attachEvent)r.attachEvent(_e(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function un(r,e,t,s,c){if(Array.isArray(e)){for(var f=0;f<e.length;f++)un(r,e[f],t,s,c);return null}return t=Ce(t),r&&r[gi]?r.P(e,t,Tt(s)?!!s.capture:!!s,c):Ot(r,e,t,!0,s,c)}function ut(r,e,t,s,c){if(Array.isArray(e))for(var f=0;f<e.length;f++)ut(r,e[f],t,s,c);else s=Tt(s)?!!s.capture:!!s,t=Ce(t),r&&r[gi]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=qt(f=r.g[e],t,s,c))&&(yr(f[t]),Array.prototype.splice.call(f,t,1),0==f.length&&(delete r.g[e],r.h--))):r&&(r=Nt(r))&&(e=r.g[e.toString()],r=-1,e&&(r=qt(e,t,s,c)),(t=-1<r?e[r]:null)&&Ke(t))}function Ke(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[gi])Jt(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(_e(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Nt(e))?(Jt(t,r),0==t.h&&(t.src=null,e[we]=null)):yr(r)}}}function _e(r){return r in Ie?Ie[r]:Ie[r]="on"+r}function gt(r,e){if(r.fa)r=!0;else{e=new pi(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Ke(r),r=t.call(s,e)}return r}function Nt(r){return(r=r[we])instanceof rt?r:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(r){return"function"==typeof r?r:(r[he]||(r[he]=function(e){return r.handleEvent(e)}),r[he])}function St(){nn.call(this),this.i=new rt(this),this.S=this,this.J=null}function It(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new At(e,r);else if(e instanceof At)e.target=e.target||r;else{var c=e;Ze(e=new At(s,r),c)}if(c=!0,t)for(var f=t.length-1;0<=f;f--){var E=e.g=t[f];c=Xt(E,s,!0,e)&&c}if(c=Xt(E=e.g=r,s,!0,e)&&c,c=Xt(E,s,!1,e)&&c,t)for(f=0;f<t.length;f++)c=Xt(E=e.g=t[f],s,!1,e)&&c}function Xt(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,f=0;f<e.length;++f){var E=e[f];if(E&&!E.fa&&E.capture==t){var k=E.listener,G=E.la||E.src;E.ia&&Jt(r.i,E),c=!1!==k.call(G,s)&&c}}return c&&!s.defaultPrevented}Ct(St,nn),St.prototype[gi]=!0,St.prototype.removeEventListener=function(r,e,t,s){ut(this,r,e,t,s)},St.prototype.N=function(){if(St.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)yr(t[s]);delete r.g[e],r.h--}}this.J=null},St.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},St.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Xe=De.JSON.stringify;function ze(){var r=Xn;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Qn,Gt=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new pn,r=>r.reset());class pn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kn(r){De.setTimeout(()=>{throw r},0)}function wn(r,e){Qn||function Jn(){var r=De.Promise.resolve(void 0);Qn=function(){r.then(ys)}}(),Wn||(Qn(),Wn=!0),Xn.add(r,e)}var Wn=!1,Xn=new class bt{constructor(){this.h=this.g=null}add(e,t){const s=Gt.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function ys(){for(var r;r=ze();){try{r.h.call(r.g)}catch(t){kn(t)}var e=Gt;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Wn=!1}function vi(r,e){St.call(this),this.h=r||1,this.g=e||De,this.j=Be(this.qb,this),this.l=Date.now()}function Vi(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function ji(r,e,t){if("function"==typeof r)t&&(r=Be(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Be(r.handleEvent,r)}return 2147483647<Number(e)?-1:De.setTimeout(r,e||0)}function An(r){r.g=ji(()=>{r.g=null,r.i&&(r.i=!1,An(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Ct(vi,St),(ke=vi.prototype).ga=!1,ke.T=null,ke.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),It(this,"tick"),this.ga&&(Vi(this),this.start()))}},ke.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ke.N=function(){vi.$.N.call(this),Vi(this),delete this.g};class cr extends nn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:An(this)}N(){super.N(),this.g&&(De.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ri(r){nn.call(this),this.h=r,this.g={}}Ct(ri,nn);var qi=[];function kr(r,e,t,s){Array.isArray(t)||(t&&(qi[0]=t.toString()),t=qi);for(var c=0;c<t.length;c++){var f=Ye(e,t[c],s||r.handleEvent,!1,r.h||r);if(!f)break;r.g[f.key]=f}}function Ci(r){Ai(r.g,function(e,t){this.g.hasOwnProperty(t)&&Ke(e)},r),r.g={}}function Li(){this.g=!0}function be(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function me(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var f=c[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var E=1;E<c.length;E++)c[E]=""}}}return Xe(t)}catch{return e}}(r,t)+(s?" "+s:"")})}ri.prototype.N=function(){ri.$.N.call(this),Ci(this)},ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Li.prototype.Ea=function(){this.g=!1},Li.prototype.info=function(){};var et={},Qe=null;function Vt(){return Qe=Qe||new St}function Lt(r){At.call(this,et.Ta,r)}function Qt(r){const e=Vt();It(e,new Lt(e))}function an(r,e){At.call(this,et.STAT_EVENT,r),this.stat=e}function vn(r){const e=Vt();It(e,new an(e,r))}function rr(r,e){At.call(this,et.Ua,r),this.size=e}function er(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return De.setTimeout(function(){r()},e)}et.Ta="serverreachability",Ct(Lt,At),et.STAT_EVENT="statevent",Ct(an,At),et.Ua="timingevent",Ct(rr,At);var vr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Wr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $i(){}function ot(){}$i.prototype.h=null;var fr,xt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function tn(){At.call(this,"d")}function dn(){At.call(this,"c")}function Er(){}function Ir(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new ri(this),this.P=vs,this.V=new vi(r=yi?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}Ct(tn,At),Ct(dn,At),Ct(Er,$i),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},fr=new Er;var vs=45e3,Oo={},_i={};function Ss(r,e,t){r.L=1,r.v=ks(ss(e)),r.s=t,r.S=!0,Hi(r,null)}function Hi(r,e){r.G=Date.now(),oo(r),r.A=ss(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Pi(t.i,"t",s),r.C=0,t=r.l.I,r.h=new ei,r.g=Aa(r.l,t?e:null,!r.s),0<r.O&&(r.M=new cr(Be(r.Pa,r,r.g),r.O)),kr(r.U,r.g,"readystatechange",r.nb),e=r.I?mr(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),Qt(),function Ur(r,e,t,s,c,f){r.info(function(){if(r.g)if(f)for(var E="",k=f.split("&"),G=0;G<k.length;G++){var J=k[G].split("=");if(1<J.length){var ce=J[0];J=J[1];var nt=ce.split("_");E=2<=nt.length&&"type"==nt[1]?E+(ce+"=")+J+"&":E+(ce+"=redacted&")}}else E=null;else E=f;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+E})}(r.j,r.u,r.A,r.m,r.W,r.s)}function jo(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function ua(r,e,t){let c,s=!0;for(;!r.J&&r.C<t.length;){if(c=Yi(r,t),c==_i){4==e&&(r.o=4,vn(14),s=!1),be(r.j,r.m,null,"[Incomplete Response]");break}if(c==Oo){r.o=4,vn(15),be(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}be(r.j,r.m,c,null),ao(r,c)}jo(r)&&c!=_i&&c!=Oo&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,vn(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Fo(e),e.L=!0,vn(11))):(be(r.j,r.m,t,"[Invalid Chunked Response]"),As(r),ko(r))}function Yi(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?_i:(t=Number(e.substring(t,s)),isNaN(t)?Oo:(s+=1)+t>e.length?_i:(e=e.substr(s,t),r.C=s+t,e))}function oo(r){r.Y=Date.now()+r.P,Os(r,r.P)}function Os(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=er(Be(r.lb,r),e)}function Da(r){r.B&&(De.clearTimeout(r.B),r.B=null)}function ko(r){0==r.l.H||r.J||as(r.l,r)}function As(r){Da(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,Vi(r.V),Ci(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function ao(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||Do(t.h,r)))if(!r.K&&Do(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;ga(t),ml(t)}zo(t),vn(18)}}else t.Fa=c[1],0<t.Fa-t.V&&37500>c[2]&&t.M&&0==t.A&&!t.v&&(t.v=er(Be(t.ib,t),6e3));if(1>=Xi(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Go(t,11)}else if((r.K||t.g==r)&&ga(t),!On(e))for(c=t.Ja.g.parse(e),e=0;e<c.length;e++){let J=c[e];if(t.V=J[0],J=J[1],2==t.H)if("c"==J[0]){t.J=J[1],t.oa=J[2];const ce=J[3];null!=ce&&(t.qa=ce,t.j.info("VER="+t.qa));const nt=J[4];null!=nt&&(t.Ga=nt,t.j.info("SVER="+t.Ga));const Bt=J[5];null!=Bt&&"number"==typeof Bt&&0<Bt&&(t.K=s=1.5*Bt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const fn=r.g;if(fn){const Mn=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mn){var f=s.h;f.g||-1==Mn.indexOf("spdy")&&-1==Mn.indexOf("quic")&&-1==Mn.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Gi(f,f.h),f.h=null))}if(s.F){const Fn=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fn&&(s.Da=Fn,ti(s.G,s.F,Fn))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var E=r;if((s=t).wa=hs(s,s.I?s.oa:null,s.Y),E.K){Ua(s.h,E);var k=E,G=s.K;G&&k.setTimeout(G),k.B&&(Da(k),oo(k)),s.g=E}else Sa(s);0<t.i.length&&Ta(t)}else"stop"!=J[0]&&"close"!=J[0]||Go(t,7);else 3==t.H&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?Go(t,7):Ys(t):"noop"!=J[0]&&t.l&&t.l.Aa(J),t.A=0)}Qt()}catch{}}function lo(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(pt(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function Qa(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(pt(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function da(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(pt(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),c=s.length,f=0;f<c;f++)e.call(void 0,s[f],t&&t[f],r)}(ke=Ir.prototype).setTimeout=function(r){this.P=r},ke.nb=function(r){r=r.target;const e=this.M;e&&3==xi(r)?e.l():this.Pa(r)},ke.Pa=function(r){try{if(r==this.g)e:{const ce=xi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ce)&&(3!=ce||yi||this.g&&(this.h.h||this.g.ja()||Va(this.g)))){this.J||4!=ce||7==e||Qt(),Da(this);var t=this.g.da();this.aa=t;t:if(jo(this)){var s=Va(this.g);r="";var c=s.length,f=4==xi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){As(this),ko(this);var E="";break t}this.h.i=new De.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:f&&e==c-1});s.splice(0,c),this.h.g+=r,this.C=0,E=this.h.g}else E=this.g.ja();if(this.i=200==t,function se(r,e,t,s,c,f,E){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+f+" "+E})}(this.j,this.u,this.A,this.m,this.W,ce,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var k,G=this.g;if((k=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!On(k)){var J=k;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,vn(12),As(this),ko(this);break e}be(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ao(this,t)}this.S?(ua(this,ce,E),yi&&this.i&&3==ce&&(kr(this.U,this.V,"tick",this.mb),this.V.start())):(be(this.j,this.m,E,null),ao(this,E)),4==ce&&As(this),this.i&&!this.J&&(4==ce?as(this.l,this):(this.i=!1,oo(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,vn(12)):(this.o=0,vn(13)),As(this),ko(this)}}}catch{}},ke.mb=function(){if(this.g){var r=xi(this.g),e=this.g.ja();this.C<e.length&&(Da(this),ua(this,r,e),this.i&&4!=r&&oo(this))}},ke.cancel=function(){this.J=!0,As(this)},ke.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function qe(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Qt(),vn(17)),As(this),this.o=2,ko(this)):Os(this,this.Y-r)};var us=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ws(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ws){this.h=void 0!==e?e:r.h,Ba(this,r.j),this.s=r.s,this.g=r.g,Ho(this,r.m),this.l=r.l,e=r.i;var t=new xs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),co(this,t),this.o=r.o}else r&&(t=String(r).match(us))?(this.h=!!e,Ba(this,t[1]||"",!0),this.s=uo(t[2]||""),this.g=uo(t[3]||"",!0),Ho(this,t[4]),this.l=uo(t[5]||"",!0),co(this,t[6]||"",!0),this.o=uo(t[7]||"")):(this.h=!!e,this.i=new xs(null,this.h))}function ss(r){return new Ws(r)}function Ba(r,e,t){r.j=t?uo(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Ho(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function co(r,e,t){e instanceof xs?(r.i=e,function go(r,e){e&&!r.j&&(zi(r),r.i=null,r.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(Zi(this,s),Pi(this,c,t))},r)),r.j=e}(r.i,r.h)):(t||(e=ho(e,No)),r.i=new xs(e,r.h))}function ti(r,e,t){r.i.set(e,t)}function ks(r){return ti(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function uo(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function ho(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,fa),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function fa(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Ws.prototype.toString=function(){var r=[],e=this.j;e&&r.push(ho(e,fo,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(ho(e,fo,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(ho(t,"/"==t.charAt(0)?ta:_s,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",ho(t,na)),r.join("")};var fo=/[#\/\?@]/g,_s=/[#\?:]/g,ta=/[#\?]/g,No=/[#\?@]/g,na=/#/g;function xs(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function zi(r){r.g||(r.g=new Map,r.h=0,r.i&&function ha(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),c=null;if(0<=s){var f=r[t].substring(0,s);c=r[t].substring(s+1)}else f=r[t];e(f,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zi(r,e){zi(r),e=po(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function bo(r,e){return zi(r),e=po(r,e),r.g.has(e)}function Pi(r,e,t){Zi(r,e),0<t.length&&(r.i=null,r.g.set(po(r,e),kt(t)),r.h+=t.length)}function po(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function ra(r){this.l=r||Ja,r=De.PerformanceNavigationTiming?0<(r=De.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(De.g&&De.g.Ka&&De.g.Ka()&&De.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ke=xs.prototype).add=function(r,e){zi(this),this.i=null,r=po(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},ke.forEach=function(r,e){zi(this),this.g.forEach(function(t,s){t.forEach(function(c){r.call(e,c,s,this)},this)},this)},ke.sa=function(){zi(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const c=r[s];for(let f=0;f<c.length;f++)t.push(e[s])}return t},ke.Z=function(r){zi(this);let e=[];if("string"==typeof r)bo(this,r)&&(e=e.concat(this.g.get(po(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},ke.set=function(r,e){return zi(this),this.i=null,bo(this,r=po(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},ke.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const f=encodeURIComponent(String(s)),E=this.Z(s);for(s=0;s<E.length;s++){var c=f;""!==E[s]&&(c+="="+encodeURIComponent(String(E[s]))),r.push(c)}}return this.i=r.join("&")};var Ja=10;function os(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Xi(r){return r.h?1:r.g?r.g.size:0}function Do(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Gi(r,e){r.g?r.g.add(e):r.h=e}function Ua(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Ns(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return kt(r.i)}function To(){}function ia(){this.g=new To}function Tr(r,e,t){const s=t||"";try{lo(r,function(c,f){let E=c;Tt(c)&&(E=Xe(c)),e.push(s+f+"="+encodeURIComponent(E))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function pa(r,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch{}}function sa(r){this.l=r.fc||null,this.j=r.ob||!1}function b(r,e){St.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=q,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ra.prototype.cancel=function(){if(this.i=Ns(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},To.prototype.stringify=function(r){return De.JSON.stringify(r,void 0)},To.prototype.parse=function(r){return De.JSON.parse(r,void 0)},Ct(sa,$i),sa.prototype.g=function(){return new b(this.l,this.j)},sa.prototype.i=function(r){return function(){return r}}({}),Ct(b,St);var q=0;function T(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function W(r){r.readyState=4,r.l=null,r.j=null,r.A=null,ge(r)}function ge(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(ke=b.prototype).open=function(r,e){if(this.readyState!=q)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,ge(this)},ke.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||De).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,W(this)),this.readyState=q},ke.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,ge(this)),this.g&&(this.readyState=3,ge(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof De.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;T(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},ke.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?W(this):ge(this),3==this.readyState&&T(this)}},ke.Za=function(r){this.g&&(this.response=this.responseText=r,W(this))},ke.Ya=function(r){this.g&&(this.response=r,W(this))},ke.ka=function(){this.g&&W(this)},ke.setRequestHeader=function(r,e){this.v.append(r,e)},ke.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},ke.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(b.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var M=De.JSON.parse;function F(r){St.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=L,this.L=this.M=!1}Ct(F,St);var L="",ne=/^https?$/i,vt=["POST","PUT"];function $r(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,ii(r),ds(r)}function ii(r){r.F||(r.F=!0,It(r,"complete"),It(r,"error"))}function Qi(r){if(r.h&&typeof Ne<"u"&&(!r.C[1]||4!=xi(r)||2!=r.da()))if(r.v&&4==xi(r))ji(r.La,0,r);else if(It(r,"readystatechange"),4==xi(r)){r.h=!1;try{const k=r.da();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===k){var c=String(r.I).match(us)[1]||null;if(!c&&De.self&&De.self.location){var f=De.self.location.protocol;c=f.substr(0,f.length-1)}s=!ne.test(c?c.toLowerCase():"")}t=s}if(t)It(r,"complete"),It(r,"success");else{r.m=6;try{var E=2<xi(r)?r.g.statusText:""}catch{E=""}r.j=E+" ["+r.da()+"]",ii(r)}}finally{ds(r)}}}function ds(r,e){if(r.g){Ao(r);const t=r.g,s=r.C[0]?He:null;r.g=null,r.C=null,e||It(r,"ready");try{t.onreadystatechange=s}catch{}}}function Ao(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(De.clearTimeout(r.A),r.A=null)}function xi(r){return r.g?r.g.readyState:0}function Va(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case L:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function ts(r){let e="";return Ai(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Ks(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ts(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ti(r,e,t))}function qs(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function oa(r){this.Ga=0,this.i=[],this.j=new Li,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qs("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qs("baseRetryDelayMs",5e3,r),this.hb=qs("retryDelaySeedMs",1e4,r),this.eb=qs("forwardChannelMaxRetries",2,r),this.xa=qs("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new ra(r&&r.concurrentRequestLimit),this.Ja=new ia,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Ys(r){if(el(r),3==r.H){var e=r.W++,t=ss(r.G);ti(t,"SID",r.J),ti(t,"RID",e),ti(t,"TYPE","terminate"),Rs(r,t),(e=new Ir(r,r.j,e,void 0)).L=2,e.v=ks(ss(t)),t=!1,De.navigator&&De.navigator.sendBeacon&&(t=De.navigator.sendBeacon(e.v.toString(),"")),!t&&De.Image&&((new Image).src=e.v,t=!0),t||(e.g=Aa(e.l,null),e.g.ha(e.v)),e.G=Date.now(),oo(e)}Zs(r)}function ml(r){r.g&&(Fo(r),r.g.cancel(),r.g=null)}function el(r){ml(r),r.u&&(De.clearTimeout(r.u),r.u=null),ga(r),r.h.cancel(),r.m&&("number"==typeof r.m&&De.clearTimeout(r.m),r.m=null)}function Ta(r){os(r.h)||r.m||(r.m=!0,wn(r.Na,r),r.C=0)}function ns(r,e){var t;t=e?e.m:r.W++;const s=ss(r.G);ti(s,"SID",r.J),ti(s,"RID",t),ti(s,"AID",r.V),Rs(r,s),r.o&&r.s&&Ks(s,r.o,r.s),t=new Ir(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=tl(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Gi(r.h,t),Ss(t,s,e)}function Rs(r,e){r.ma&&Ai(r.ma,function(t,s){ti(e,s,t)}),r.l&&lo({},function(t,s){ti(e,s,t)})}function tl(r,e,t){t=Math.min(r.i.length,t);var s=r.l?Be(r.l.Va,r.l,r):null;e:{var c=r.i;let f=-1;for(;;){const E=["count="+t];-1==f?0<t?(f=c[0].h,E.push("ofs="+f)):f=0:E.push("ofs="+f);let k=!0;for(let G=0;G<t;G++){let J=c[G].h;const ce=c[G].g;if(J-=f,0>J)f=Math.max(0,c[G].h-100),k=!1;else try{Tr(ce,E,"req"+J+"_")}catch{s&&s(ce)}}if(k){s=E.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function Sa(r){r.g||r.u||(r.ba=1,wn(r.Ma,r),r.A=0)}function zo(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=er(Be(r.Ma,r),xo(r,r.A)),r.A++,0))}function Fo(r){null!=r.B&&(De.clearTimeout(r.B),r.B=null)}function nl(r){r.g=new Ir(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=ss(r.wa);ti(e,"RID","rpc"),ti(e,"SID",r.J),ti(e,"CI",r.M?"0":"1"),ti(e,"AID",r.V),ti(e,"TYPE","xmlhttp"),Rs(r,e),r.o&&r.s&&Ks(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=ks(ss(e)),t.s=null,t.S=!0,Hi(t,r)}function ga(r){null!=r.v&&(De.clearTimeout(r.v),r.v=null)}function as(r,e){var t=null;if(r.g==e){ga(r),Fo(r),r.g=null;var s=2}else{if(!Do(r.h,e))return;t=e.F,Ua(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var c=r.C;It(s=Vt(),new rr(s,t)),Ta(r)}else Sa(r);else if(3==(c=e.o)||0==c&&0<r.ta||!(1==s&&function ja(r,e){return!(Xi(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=er(Be(r.Na,r,e),xo(r,r.C)),r.C++,0)))}(r,e)||2==s&&zo(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),c){case 1:Go(r,5);break;case 4:Go(r,10);break;case 3:Go(r,6);break;default:Go(r,2)}}function xo(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function Go(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=Be(r.pb,r);t||(t=new Ws("//www.google.com/images/cleardot.gif"),De.location&&"http"==De.location.protocol||Ba(t,"https"),ks(t)),function So(r,e){const t=new Li;if(De.Image){const s=new Image;s.onload=ht(pa,t,s,"TestLoadImage: loaded",!0,e),s.onerror=ht(pa,t,s,"TestLoadImage: error",!1,e),s.onabort=ht(pa,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=ht(pa,t,s,"TestLoadImage: timeout",!1,e),De.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else vn(2);r.H=0,r.l&&r.l.za(e),Zs(r),el(r)}function Zs(r){if(r.H=0,r.pa=[],r.l){const e=Ns(r.h);(0!=e.length||0!=r.i.length)&&(Re(r.pa,e),Re(r.pa,r.i),r.h.i.length=0,kt(r.i),r.i.length=0),r.l.ya()}}function hs(r,e,t){var s=t instanceof Ws?ss(t):new Ws(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Ho(s,s.m);else{var c=De.location;s=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var f=new Ws(null,void 0);s&&Ba(f,s),e&&(f.g=e),c&&Ho(f,c),t&&(f.l=t),s=f}return e=r.Da,(t=r.F)&&e&&ti(s,t,e),ti(s,"VER",r.qa),Rs(r,s),s}function Aa(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new F(t&&r.Ha&&!r.va?new sa({ob:!0}):r.va)).Oa(r.I),e}function ls(){}function Fs(){if(bn&&!(10<=Number(zr)))throw Error("Environmental error: no available transport.")}function Vr(r,e){St.call(this),this.g=new oa(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!On(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!On(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Lo(this)}function Ro(r){tn.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function xa(){dn.call(this),this.status=1}function Lo(r){this.g=r}function mo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function jl(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)s[c]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(c=0;16>c;++c)s[c]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var f=r.g[3],E=(e=r.g[0])+(f^(t=r.g[1])&((c=r.g[2])^f))+s[0]+3614090360&4294967295;E=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=t+(E<<7&4294967295|E>>>25))+((E=f+(c^e&(t^c))+s[1]+3905402710&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^f&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(f^e))+s[3]+3250441966&4294967295)<<22&4294967295|E>>>10))+((E=e+(f^t&(c^f))+s[4]+4118548399&4294967295)<<7&4294967295|E>>>25))+((E=f+(c^e&(t^c))+s[5]+1200080426&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^f&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(f^e))+s[7]+4249261313&4294967295)<<22&4294967295|E>>>10))+((E=e+(f^t&(c^f))+s[8]+1770035416&4294967295)<<7&4294967295|E>>>25))+((E=f+(c^e&(t^c))+s[9]+2336552879&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^f&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(f^e))+s[11]+2304563134&4294967295)<<22&4294967295|E>>>10))+((E=e+(f^t&(c^f))+s[12]+1804603682&4294967295)<<7&4294967295|E>>>25))+((E=f+(c^e&(t^c))+s[13]+4254626195&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^f&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(f^e))+s[15]+1236535329&4294967295)<<22&4294967295|E>>>10))+((E=e+(c^f&(t^c))+s[1]+4129170786&4294967295)<<5&4294967295|E>>>27))+((E=f+(t^c&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(f^e))+s[11]+643717713&4294967295)<<14&4294967295|E>>>18))+((E=t+(f^e&(c^f))+s[0]+3921069994&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^f&(t^c))+s[5]+3593408605&4294967295)<<5&4294967295|E>>>27))+((E=f+(t^c&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(f^e))+s[15]+3634488961&4294967295)<<14&4294967295|E>>>18))+((E=t+(f^e&(c^f))+s[4]+3889429448&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^f&(t^c))+s[9]+568446438&4294967295)<<5&4294967295|E>>>27))+((E=f+(t^c&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(f^e))+s[3]+4107603335&4294967295)<<14&4294967295|E>>>18))+((E=t+(f^e&(c^f))+s[8]+1163531501&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^f&(t^c))+s[13]+2850285829&4294967295)<<5&4294967295|E>>>27))+((E=f+(t^c&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(f^e))+s[7]+1735328473&4294967295)<<14&4294967295|E>>>18))+((E=t+(f^e&(c^f))+s[12]+2368359562&4294967295)<<20&4294967295|E>>>12))+((E=e+(t^c^f)+s[5]+4294588738&4294967295)<<4&4294967295|E>>>28))+((E=f+(e^t^c)+s[8]+2272392833&4294967295)<<11&4294967295|E>>>21))+((E=c+(f^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^f^e)+s[14]+4259657740&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^f)+s[1]+2763975236&4294967295)<<4&4294967295|E>>>28))+((E=f+(e^t^c)+s[4]+1272893353&4294967295)<<11&4294967295|E>>>21))+((E=c+(f^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^f^e)+s[10]+3200236656&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^f)+s[13]+681279174&4294967295)<<4&4294967295|E>>>28))+((E=f+(e^t^c)+s[0]+3936430074&4294967295)<<11&4294967295|E>>>21))+((E=c+(f^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^f^e)+s[6]+76029189&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^f)+s[9]+3654602809&4294967295)<<4&4294967295|E>>>28))+((E=f+(e^t^c)+s[12]+3873151461&4294967295)<<11&4294967295|E>>>21))+((E=c+(f^e^t)+s[15]+530742520&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^f^e)+s[2]+3299628645&4294967295)<<23&4294967295|E>>>9))+((E=e+(c^(t|~f))+s[0]+4096336452&4294967295)<<6&4294967295|E>>>26))+((E=f+(t^(e|~c))+s[7]+1126891415&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(f|~t))+s[14]+2878612391&4294967295)<<15&4294967295|E>>>17))+((E=t+(f^(c|~e))+s[5]+4237533241&4294967295)<<21&4294967295|E>>>11))+((E=e+(c^(t|~f))+s[12]+1700485571&4294967295)<<6&4294967295|E>>>26))+((E=f+(t^(e|~c))+s[3]+2399980690&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(f|~t))+s[10]+4293915773&4294967295)<<15&4294967295|E>>>17))+((E=t+(f^(c|~e))+s[1]+2240044497&4294967295)<<21&4294967295|E>>>11))+((E=e+(c^(t|~f))+s[8]+1873313359&4294967295)<<6&4294967295|E>>>26))+((E=f+(t^(e|~c))+s[15]+4264355552&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(f|~t))+s[6]+2734768916&4294967295)<<15&4294967295|E>>>17))+((E=t+(f^(c|~e))+s[13]+1309151649&4294967295)<<21&4294967295|E>>>11))+((f=(e=t+((E=e+(c^(t|~f))+s[4]+4149444226&4294967295)<<6&4294967295|E>>>26))+((E=f+(t^(e|~c))+s[11]+3174756917&4294967295)<<10&4294967295|E>>>22))^((c=f+((E=c+(e^(f|~t))+s[2]+718787259&4294967295)<<15&4294967295|E>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(c+(E<<21&4294967295|E>>>11))&4294967295,r.g[2]=r.g[2]+c&4294967295,r.g[3]=r.g[3]+f&4294967295}function Sr(r,e){this.h=e;for(var t=[],s=!0,c=r.length-1;0<=c;c--){var f=0|r[c];s&&f==e||(t[c]=f,s=!1)}this.g=t}(ke=F.prototype).Oa=function(r){this.M=r},ke.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fr.g(),this.C=function mt(r){return r.h||(r.h=r.i())}(this.u?this.u:fr),this.g.onreadystatechange=Be(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(f){return void $r(this,f)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var c in s)t.set(c,s[c]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const f of s.keys())t.set(f,s.get(f))}s=Array.from(t.keys()).find(f=>"content-type"==f.toLowerCase()),c=De.FormData&&r instanceof De.FormData,!(0<=Dn(vt,e))||s||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,E]of t)this.g.setRequestHeader(f,E);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ao(this),0<this.B&&((this.L=function Tn(r){return bn&&function Jr(){return _r(on,9,function(){let r=0;const e=Yn(String(Gn)).split("."),t=Yn("9").split("."),s=Math.max(e.length,t.length);for(let E=0;0==r&&E<s;E++){var c=e[E]||"",f=t[E]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==c[0].length&&0==f[0].length)break;r=xn(0==c[1].length?0:parseInt(c[1],10),0==f[1].length?0:parseInt(f[1],10))||xn(0==c[2].length,0==f[2].length)||xn(c[2],f[2]),c=c[3],f=f[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Be(this.ua,this)):this.A=ji(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(f){$r(this,f)}},ke.ua=function(){typeof Ne<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,It(this,"timeout"),this.abort(8))},ke.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,It(this,"complete"),It(this,"abort"),ds(this))},ke.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ds(this,!0)),F.$.N.call(this)},ke.La=function(){this.s||(this.G||this.v||this.l?Qi(this):this.kb())},ke.kb=function(){Qi(this)},ke.da=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},ke.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ke.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),M(e)}},ke.Ia=function(){return this.m},ke.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ke=oa.prototype).qa=8,ke.H=1,ke.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const c=new Ir(this,this.j,r,void 0);let f=this.s;if(this.U&&(f?(f=mr(f),Ze(f,this.U)):f=this.U),null!==this.o||this.O||(c.I=f,f=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=tl(this,c,e),ti(t=ss(this.G),"RID",r),ti(t,"CVER",22),this.F&&ti(t,"X-HTTP-Session-Id",this.F),Rs(this,t),f&&(this.O?e="headers="+encodeURIComponent(String(ts(f)))+"&"+e:this.o&&Ks(t,this.o,f)),Gi(this.h,c),this.bb&&ti(t,"TYPE","init"),this.P?(ti(t,"$req",e),ti(t,"SID","null"),c.ba=!0,Ss(c,t,null)):Ss(c,t,e),this.H=2}}else 3==this.H&&(r?ns(this,r):0==this.i.length||os(this.h)||ns(this))},ke.Ma=function(){if(this.u=null,nl(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=er(Be(this.jb,this),r)}},ke.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,vn(10),ml(this),nl(this))},ke.ib=function(){null!=this.v&&(this.v=null,ml(this),zo(this),vn(19))},ke.pb=function(r){r?(this.j.info("Successfully pinged google.com"),vn(2)):(this.j.info("Failed to ping google.com"),vn(1))},(ke=ls.prototype).Ba=function(){},ke.Aa=function(){},ke.za=function(){},ke.ya=function(){},ke.Va=function(){},Fs.prototype.g=function(r,e){return new Vr(r,e)},Ct(Vr,St),Vr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;vn(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=hs(r,null,r.Y),Ta(r)},Vr.prototype.close=function(){Ys(this.g)},Vr.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Xe(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&Ta(e)},Vr.prototype.N=function(){this.g.l=null,delete this.j,Ys(this.g),delete this.g,Vr.$.N.call(this)},Ct(Ro,tn),Ct(xa,dn),Ct(Lo,ls),Lo.prototype.Ba=function(){It(this.g,"a")},Lo.prototype.Aa=function(r){It(this.g,new Ro(r))},Lo.prototype.za=function(r){It(this.g,new xa)},Lo.prototype.ya=function(){It(this.g,"b")},Ct(mo,function yl(){this.blockSize=-1}),mo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},mo.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,c=this.h,f=0;f<e;){if(0==c)for(;f<=t;)jl(this,r,f),f+=this.blockSize;if("string"==typeof r){for(;f<e;)if(s[c++]=r.charCodeAt(f++),c==this.blockSize){jl(this,s),c=0;break}}else for(;f<e;)if(s[c++]=r[f++],c==this.blockSize){jl(this,s),c=0;break}}this.h=c,this.i+=e},mo.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var Hl={};function vl(r){return-128<=r&&128>r?_r(Hl,r,function(e){return new Sr([0|e],0>e?-1:0)}):new Sr([0|r],0>r?-1:0)}function $(r){if(isNaN(r)||!isFinite(r))return ie;if(0>r)return Ar($(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=H;return new Sr(e,0)}var H=4294967296,ie=vl(0),Le=vl(1),Zt=vl(16777216);function en(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Vn(r){return-1==r.h}function Ar(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new Sr(t,~r.h).add(Le)}function Kr(r,e){return r.add(Ar(e))}function Br(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function wr(r,e){this.g=r,this.h=e}function Ri(r,e){if(en(e))throw Error("division by zero");if(en(r))return new wr(ie,ie);if(Vn(r))return e=Ri(Ar(r),e),new wr(Ar(e.g),Ar(e.h));if(Vn(e))return e=Ri(r,Ar(e)),new wr(Ar(e.g),e.h);if(30<r.g.length){if(Vn(r)||Vn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Le,s=e;0>=s.X(r);)t=bi(t),s=bi(s);var c=Bi(t,1),f=Bi(s,1);for(s=Bi(s,2),t=Bi(t,2);!en(s);){var E=f.add(s);0>=E.X(r)&&(c=c.add(t),f=E),s=Bi(s,1),t=Bi(t,1)}return e=Kr(r,c.R(e)),new wr(c,e)}for(c=ie;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),E=(f=$(t)).R(e);Vn(E)||0<E.X(r);)E=(f=$(t-=s)).R(e);en(f)&&(f=Le),c=c.add(f),r=Kr(r,E)}return new wr(c,r)}function bi(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new Sr(t,r.h)}function Bi(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,c=[],f=0;f<s;f++)c[f]=0<e?r.D(f+t)>>>e|r.D(f+t+1)<<32-e:r.D(f+t);return new Sr(c,r.h)}(ke=Sr.prototype).ea=function(){if(Vn(this))return-Ar(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:H+s)*e,e*=H}return r},ke.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(en(this))return"0";if(Vn(this))return"-"+Ar(this).toString(r);for(var e=$(Math.pow(r,6)),t=this,s="";;){var c=Ri(t,e).g,f=((0<(t=Kr(t,c.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(en(t=c))return f+s;for(;6>f.length;)f="0"+f;s=f+s}},ke.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},ke.X=function(r){return Vn(r=Kr(this,r))?-1:en(r)?0:1},ke.abs=function(){return Vn(this)?Ar(this):this},ke.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,c=0;c<=e;c++){var f=s+(65535&this.D(c))+(65535&r.D(c)),E=(f>>>16)+(this.D(c)>>>16)+(r.D(c)>>>16);s=E>>>16,t[c]=(E&=65535)<<16|(f&=65535)}return new Sr(t,-2147483648&t[t.length-1]?-1:0)},ke.R=function(r){if(en(this)||en(r))return ie;if(Vn(this))return Vn(r)?Ar(this).R(Ar(r)):Ar(Ar(this).R(r));if(Vn(r))return Ar(this.R(Ar(r)));if(0>this.X(Zt)&&0>r.X(Zt))return $(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var c=0;c<r.g.length;c++){var f=this.D(s)>>>16,E=65535&this.D(s),k=r.D(c)>>>16,G=65535&r.D(c);t[2*s+2*c]+=E*G,Br(t,2*s+2*c),t[2*s+2*c+1]+=f*G,Br(t,2*s+2*c+1),t[2*s+2*c+1]+=E*k,Br(t,2*s+2*c+1),t[2*s+2*c+2]+=f*k,Br(t,2*s+2*c+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Sr(t,0)},ke.gb=function(r){return Ri(this,r).h},ke.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new Sr(t,this.h&r.h)},ke.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new Sr(t,this.h|r.h)},ke.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new Sr(t,this.h^r.h)},Fs.prototype.createWebChannel=Fs.prototype.g,Vr.prototype.send=Vr.prototype.u,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,Wr.COMPLETE="complete",ot.EventType=xt,xt.OPEN="a",xt.CLOSE="b",xt.ERROR="c",xt.MESSAGE="d",St.prototype.listen=St.prototype.O,F.prototype.listenOnce=F.prototype.P,F.prototype.getLastError=F.prototype.Sa,F.prototype.getLastErrorCode=F.prototype.Ia,F.prototype.getStatus=F.prototype.da,F.prototype.getResponseJson=F.prototype.Wa,F.prototype.getResponseText=F.prototype.ja,F.prototype.send=F.prototype.ha,F.prototype.setWithCredentials=F.prototype.Oa,mo.prototype.digest=mo.prototype.l,mo.prototype.reset=mo.prototype.reset,mo.prototype.update=mo.prototype.j,Sr.prototype.add=Sr.prototype.add,Sr.prototype.multiply=Sr.prototype.R,Sr.prototype.modulo=Sr.prototype.gb,Sr.prototype.compare=Sr.prototype.X,Sr.prototype.toNumber=Sr.prototype.ea,Sr.prototype.toString=Sr.prototype.toString,Sr.prototype.getBits=Sr.prototype.D,Sr.fromNumber=$,Sr.fromString=function Q(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Ar(Q(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=$(Math.pow(e,8)),s=ie,c=0;c<r.length;c+=8){var f=Math.min(8,r.length-c),E=parseInt(r.substring(c,c+f),e);8>f?(f=$(Math.pow(e,f)),s=s.R(f).add($(E))):s=(s=s.R(t)).add($(E))}return s};var Wo=Ve.createWebChannelTransport=function(){return new Fs},yo=Ve.getStatEventTarget=function(){return Vt()},Ko=Ve.ErrorCode=vr,Es=Ve.EventType=Wr,Xs=Ve.Event=et,Ls=Ve.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qs=Ve.FetchXmlHttpFactory=sa,rl=Ve.WebChannel=ot,_l=Ve.XhrIo=F,Rc=Ve.Md5=mo,qo=Ve.Integer=Sr;const Wc="@firebase/firestore";class Wi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wi.UNAUTHENTICATED=new Wi(null),Wi.GOOGLE_CREDENTIALS=new Wi("google-credentials-uid"),Wi.FIRST_PARTY=new Wi("first-party-uid"),Wi.MOCK_USER=new Wi("mock-user");let vo="9.21.0";const Js=new it.Yd("@firebase/firestore");function oc(){return Js.logLevel}function _n(r,...e){if(Js.logLevel<=it.in.DEBUG){const t=e.map(Kc);Js.debug(`Firestore (${vo}): ${r}`,...t)}}function Ji(r,...e){if(Js.logLevel<=it.in.ERROR){const t=e.map(Kc);Js.error(`Firestore (${vo}): ${r}`,...t)}}function mi(r,...e){if(Js.logLevel<=it.in.WARN){const t=e.map(Kc);Js.warn(`Firestore (${vo}): ${r}`,...t)}}function Kc(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Kn(r="Unexpected state"){const e=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: `+r;throw Ji(e),new Error(e)}function dr(r,e){r||Kn()}function jn(r,e){return r}const Ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hn extends tt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class il{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wi.UNAUTHENTICATED))}shutdown(){}}class El{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ra{constructor(e){this.t=e,this.currentUser=Wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const f=J=>this.i!==c?(c=this.i,t(J)):Promise.resolve();let E=new si;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new si,e.enqueueRetryable(()=>f(this.currentUser))};const k=()=>{const J=E;e.enqueueRetryable((0,ue.Z)(function*(){yield J.promise,yield f(s.currentUser)}))},G=J=>{_n("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(J=>G(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?G(J):(_n("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new si)}},0),k()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(_n("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(dr("string"==typeof s.accessToken),new il(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dr(null===e||"string"==typeof e),new Wi(e)}}class Ld{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Wi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class qc{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Ld(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $o{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Il{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=f=>{null!=f.error&&_n("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const E=f.token!==this.T;return this.T=f.token,_n("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>s(f))};const c=f=>{_n("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.I.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.I.getImmediate({optional:!0});f?c(f):_n("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dr("string"==typeof t.token),this.T=t.token,new $o(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eo(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class ma{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=eo(40);for(let f=0;f<c.length;++f)s.length<20&&c[f]<t&&(s+=e.charAt(c[f]%e.length))}return s}}function pr(r,e){return r<e?-1:r>e?1:0}function aa(r,e,t){return r.length===e.length&&r.every((s,c)=>t(s,e[c]))}function Yc(r){return r+"\0"}class ci{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new hn(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new hn(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new hn(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new hn(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ci.fromMillis(Date.now())}static fromDate(e){return ci.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new ci(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pr(this.nanoseconds,e.nanoseconds):pr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sr(e)}static min(){return new sr(new ci(0,0))}static max(){return new sr(new ci(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pc{constructor(e,t,s){void 0===t?t=0:t>e.length&&Kn(),void 0===s?s=e.length-t:s>e.length-t&&Kn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Pc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pc?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const f=e.get(c),E=t.get(c);if(f<E)return-1;if(f>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ei extends Pc{construct(e,t,s){return new Ei(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new hn(Ht.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new Ei(t)}static emptyPath(){return new Ei([])}}const Ni=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fs extends Pc{construct(e,t,s){return new fs(e,t,s)}static isValidIdentifier(e){return Ni.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fs(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const f=()=>{if(0===s.length)throw new hn(Ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let E=!1;for(;c<e.length;){const k=e[c];if("\\"===k){if(c+1===e.length)throw new hn(Ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[c+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new hn(Ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=G,c+=2}else"`"===k?(E=!E,c++):"."!==k||E?(s+=k,c++):(f(),c++)}if(f(),E)throw new hn(Ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fs(t)}static emptyPath(){return new fs([])}}class Ln{constructor(e){this.path=e}static fromPath(e){return new Ln(Ei.fromString(e))}static fromName(e){return new Ln(Ei.fromString(e).popFirst(5))}static empty(){return new Ln(Ei.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ei.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ei.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ln(new Ei(e.slice()))}}class zl{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function uc(r){return r.fields.find(e=>2===e.kind)}function wl(r){return r.fields.filter(e=>2!==e.kind)}zl.UNKNOWN_ID=-1;class dc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Oc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Oc(0,es.min())}}function Xc(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,c=sr.fromTimestamp(1e9===s?new ci(t+1,0):new ci(t,s));return new es(c,Ln.empty(),e)}function Ds(r){return new es(r.readTime,r.key,-1)}class es{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new es(sr.min(),Ln.empty(),-1)}static max(){return new es(sr.max(),Ln.empty(),-1)}}function bl(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ln.comparator(r.documentKey,e.documentKey),0!==t?t:pr(r.largestBatchId,e.largestBatchId))}const Gl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Rr(r){return Yr.apply(this,arguments)}function Yr(){return Yr=(0,ue.Z)(function*(r){if(r.code!==Ht.FAILED_PRECONDITION||r.message!==Gl)throw r;_n("LocalStore","Unexpectedly lost primary lease")}),Yr.apply(this,arguments)}class $t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $t((s,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(s,c)},this.catchCallback=f=>{this.wrapFailure(t,f).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $t?t:$t.resolve(t)}catch(t){return $t.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$t.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$t.reject(t)}static resolve(e){return new $t((t,s)=>{t(e)})}static reject(e){return new $t((t,s)=>{s(e)})}static waitFor(e){return new $t((t,s)=>{let c=0,f=0,E=!1;e.forEach(k=>{++c,k.next(()=>{++f,E&&f===c&&t()},G=>s(G))}),E=!0,f===c&&t()})}static or(e){let t=$t.resolve(!1);for(const s of e)t=t.next(c=>c?$t.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,f)=>{s.push(t.call(this,c,f))}),this.waitFor(s)}static mapArray(e,t){return new $t((s,c)=>{const f=e.length,E=new Array(f);let k=0;for(let G=0;G<f;G++){const J=G;t(e[J]).next(ce=>{E[J]=ce,++k,k===f&&s(E)},ce=>c(ce))}})}static doWhile(e,t){return new $t((s,c)=>{const f=()=>{!0===e()?t().next(()=>{f()},c):s()};f()})}}class Di{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new si,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new la(e,t.error)):this.R.resolve()},this.transaction.onerror=s=>{const c=x(s.target.error);this.R.reject(new la(e,c))}}static open(e,t,s,c){try{return new Di(t,e.transaction(c,s))}catch(f){throw new la(t,f)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(_n("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ui(t)}}class to{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===to.S((0,tt.z$)())&&Ji("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _n("SimpleDb","Removing database:",e),Pr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,tt.hl)())return!1;if(to.C())return!0;const e=(0,tt.z$)(),t=to.S(e),s=0<t&&t<10,c=to.N(e),f=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||f)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,ue.Z)(function*(){return t.db||(_n("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const f=indexedDB.open(t.name,t.version);f.onsuccess=E=>{s(E.target.result)},f.onblocked=()=>{c(new la(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=E=>{const k=E.target.error;c("VersionError"===k.name?new hn(Ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new hn(Ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new la(e,k))},f.onupgradeneeded=E=>{_n("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.V.$(E.target.result,f.transaction,E.oldVersion,t.version).next(()=>{_n("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var f=this;return(0,ue.Z)(function*(){const E="readonly"===t;let k=0;for(;;){++k;try{f.db=yield f.O(e);const G=Di.open(f.db,e,E?"readonly":"readwrite",s),J=c(G).next(ce=>(G.P(),ce)).catch(ce=>(G.abort(ce),$t.reject(ce))).toPromise();return J.catch(()=>{}),yield G.v,J}catch(G){const J=G,ce="FirebaseError"!==J.name&&k<3;if(_n("SimpleDb","Transaction failed with error:",J.message,"Retrying:",ce),f.close(),!ce)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _u{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Pr(this.L.delete())}}class la extends hn{constructor(e,t){super(Ht.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yo(r){return"IndexedDbTransactionError"===r.name}class ui{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(_n("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(_n("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Pr(s)}add(e){return _n("SimpleDb","ADD",this.store.name,e,e),Pr(this.store.add(e))}get(e){return Pr(this.store.get(e)).next(t=>(void 0===t&&(t=null),_n("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return _n("SimpleDb","DELETE",this.store.name,e),Pr(this.store.delete(e))}count(){return _n("SimpleDb","COUNT",this.store.name),Pr(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),f=[];return this.W(c,(E,k)=>{f.push(k)}).next(()=>f)}{const c=this.store.getAll(s.range);return new $t((f,E)=>{c.onerror=k=>{E(k.target.error)},c.onsuccess=k=>{f(k.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new $t((c,f)=>{s.onerror=E=>{f(E.target.error)},s.onsuccess=E=>{c(E.target.result)}})}J(e,t){_n("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const c=this.cursor(s);return this.W(c,(f,E,k)=>k.delete())}X(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.W(c,t)}Z(e){const t=this.cursor({});return new $t((s,c)=>{t.onerror=f=>{const E=x(f.target.error);c(E)},t.onsuccess=f=>{const E=f.target.result;E?e(E.primaryKey,E.value).next(k=>{k?E.continue():s()}):s()}})}W(e,t){const s=[];return new $t((c,f)=>{e.onerror=E=>{f(E.target.error)},e.onsuccess=E=>{const k=E.target.result;if(!k)return void c();const G=new _u(k),J=t(k.primaryKey,k.value,G);if(J instanceof $t){const ce=J.catch(nt=>(G.done(),$t.reject(nt)));s.push(ce)}G.isDone?c():null===G.K?k.continue():k.continue(G.K)}}).next(()=>$t.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Pr(r){return new $t((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const c=x(s.target.error);t(c)}})}let S=!1;function x(r){const e=to.S((0,tt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new hn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return S||(S=!0,setTimeout(()=>{throw s},0)),s}}return r}class w{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;_n("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ue.Z)(function*(){t.task=null;try{_n("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Yo(s)?_n("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Rr(s)}yield t.et(6e4)}))}}class O{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ue.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let c=t,f=!0;return $t.doWhile(()=>!0===f&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!s.has(E))return _n("IndexBackiller",`Processing collection: ${E}`),this.it(e,E,c).next(k=>{c-=k,s.add(E)});f=!1})).next(()=>t-c)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(f=>{const E=f.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.rt(c,f)).next(k=>(_n("IndexBackiller",`Updating offset: ${k}`),this.localStore.indexManager.updateCollectionGroup(e,t,k))).next(()=>E.size)}))}rt(e,t){let s=e;return t.changes.forEach((c,f)=>{const E=Ds(f);bl(E,s)>0&&(s=E)}),new es(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let z=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=c=>this.ot(c),this.ut=c=>s.writeSequenceNumber(c))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function re(r){return null==r}function ae(r){return 0===r&&1/r==-1/0}function at(r){return"number"==typeof r&&Number.isInteger(r)&&!ae(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Ut(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Hn(e)),e=En(r.get(t),e);return Hn(e)}function En(r,e){let t=e;const s=r.length;for(let c=0;c<s;c++){const f=r.charAt(c);switch(f){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=f}}return t}function Hn(r){return r+"\x01\x01"}function $n(r){const e=r.length;if(dr(e>=2),2===e)return dr("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Ei.emptyPath();const t=e-2,s=[];let c="";for(let f=0;f<e;){const E=r.indexOf("\x01",f);switch((E<0||E>t)&&Kn(),r.charAt(E+1)){case"\x01":const k=r.substring(f,E);let G;0===c.length?G=k:(c+=k,G=c,c=""),s.push(G);break;case"\x10":c+=r.substring(f,E),c+="\0";break;case"\x11":c+=r.substring(f,E+1);break;default:Kn()}f=E+2}return new Ei(s)}const Ii=["userId","batchId"];function rs(r,e){return[r,Ut(e)]}function $s(r,e,t){return[r,Ut(e),t]}const ya={},Mo=["prefixPath","collectionGroup","readTime","documentId"],Is=["prefixPath","collectionGroup","documentId"],Or=["collectionGroup","readTime","prefixPath","documentId"],hc=["canonicalId","targetId"],_o=["targetId","path"],Qc=["path","targetId"],Bo=["collectionId","parent"],Dl=["indexId","uid"],sl=["uid","sequenceNumber"],$d=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zo=["indexId","uid","orderedDocumentKey"],nd=["userId","collectionPath","documentId"],rd=["userId","collectionPath","largestBatchId"],id=["userId","collectionGroup","largestBatchId"],Eu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bd=[...Eu,"documentOverlays"],kc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nc=kc,Fc=[...Nc,"indexConfiguration","indexState","indexEntries"];class Iu extends qr{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Bs(r,e){const t=jn(r);return to.M(t.at,e)}function sd(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ol(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Jc(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class xr{constructor(e,t){this.comparator=e,this.root=t||Us.EMPTY}insert(e,t){return new xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Us.BLACK,null,null))}remove(e){return new xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Us.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tl(this.root,e,this.comparator,!0)}}class Tl{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?s(e.key,t):1,t&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Us{constructor(e,t,s,c,f){this.key=e,this.value=t,this.color=null!=s?s:Us.RED,this.left=null!=c?c:Us.EMPTY,this.right=null!=f?f:Us.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,f){return new Us(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=f?f:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const f=s(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===f?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Us.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return Us.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Kn();const e=this.left.check();if(e!==this.right.check())throw Kn();return e+(this.isRed()?0:1)}}Us.EMPTY=null,Us.RED=!0,Us.BLACK=!1,Us.EMPTY=new class{constructor(){this.size=0}get key(){throw Kn()}get value(){throw Kn()}get color(){throw Kn()}get left(){throw Kn()}get right(){throw Kn()}copy(r,e,t,s,c){return this}insert(r,e,t){return new Us(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ui{constructor(e){this.comparator=e,this.data=new xr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sl(this.data.getIterator())}getIteratorFrom(e){return new Sl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=s.getNext().key;if(0!==this.comparator(c,f))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ui(this.comparator);return t.data=e,t}}class Sl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function va(r){return r.hasNext()?r.getNext():void 0}class ps{constructor(e){this.fields=e,e.sort(fs.comparator)}static empty(){return new ps([])}unionWith(e){let t=new Ui(fs.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class fc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class no{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new fc("Invalid base64 string: "+c):c}}(e);return new no(t)}static fromUint8Array(e){const t=function(s){let c="";for(let f=0;f<s.length;++f)c+=String.fromCharCode(s[f]);return c}(e);return new no(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}no.EMPTY_BYTE_STRING=new no("");const wu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Al(r){if(dr(!!r),"string"==typeof r){let e=0;const t=wu.exec(r);if(dr(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Hr(r.seconds),nanos:Hr(r.nanos)}}function Hr(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function ro(r){return"string"==typeof r?no.fromBase64String(r):no.fromUint8Array(r)}function Lc(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pc(r){const e=r.mapValue.fields.__previous_value__;return Lc(e)?pc(e):e}function Uo(r){const e=Al(r.mapValue.fields.__local_write_time__.timestampValue);return new ci(e.seconds,e.nanos)}class Ma{constructor(e,t,s,c,f,E,k,G){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=f,this.forceLongPolling=E,this.autoDetectLongPolling=k,this.useFetchStreams=G}}class Xo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}const Eo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},eu={nullValue:"NULL_VALUE"};function Ha(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Lc(r)?4:jr(r)?9007199254740991:10:Kn()}function Qo(r,e){if(r===e)return!0;const t=Ha(r);if(t!==Ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Uo(r).isEqual(Uo(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const f=Al(s.timestampValue),E=Al(c.timestampValue);return f.seconds===E.seconds&&f.nanos===E.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return c=e,ro(r.bytesValue).isEqual(ro(c.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,c){return Hr(s.geoPointValue.latitude)===Hr(c.geoPointValue.latitude)&&Hr(s.geoPointValue.longitude)===Hr(c.geoPointValue.longitude)}(r,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return Hr(s.integerValue)===Hr(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const f=Hr(s.doubleValue),E=Hr(c.doubleValue);return f===E?ae(f)===ae(E):isNaN(f)&&isNaN(E)}return!1}(r,e);case 9:return aa(r.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:return function(s,c){const f=s.mapValue.fields||{},E=c.mapValue.fields||{};if(sd(f)!==sd(E))return!1;for(const k in f)if(f.hasOwnProperty(k)&&(void 0===E[k]||!Qo(f[k],E[k])))return!1;return!0}(r,e);default:return Kn()}var c}function tu(r,e){return void 0!==(r.values||[]).find(t=>Qo(t,e))}function za(r,e){if(r===e)return 0;const t=Ha(r),s=Ha(e);if(t!==s)return pr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return pr(r.booleanValue,e.booleanValue);case 2:return function(c,f){const E=Hr(c.integerValue||c.doubleValue),k=Hr(f.integerValue||f.doubleValue);return E<k?-1:E>k?1:E===k?0:isNaN(E)?isNaN(k)?0:-1:1}(r,e);case 3:return Ud(r.timestampValue,e.timestampValue);case 4:return Ud(Uo(r),Uo(e));case 5:return pr(r.stringValue,e.stringValue);case 6:return function(c,f){const E=ro(c),k=ro(f);return E.compareTo(k)}(r.bytesValue,e.bytesValue);case 7:return function(c,f){const E=c.split("/"),k=f.split("/");for(let G=0;G<E.length&&G<k.length;G++){const J=pr(E[G],k[G]);if(0!==J)return J}return pr(E.length,k.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,f){const E=pr(Hr(c.latitude),Hr(f.latitude));return 0!==E?E:pr(Hr(c.longitude),Hr(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(c,f){const E=c.values||[],k=f.values||[];for(let G=0;G<E.length&&G<k.length;++G){const J=za(E[G],k[G]);if(J)return J}return pr(E.length,k.length)}(r.arrayValue,e.arrayValue);case 10:return function(c,f){if(c===Eo.mapValue&&f===Eo.mapValue)return 0;if(c===Eo.mapValue)return 1;if(f===Eo.mapValue)return-1;const E=c.fields||{},k=Object.keys(E),G=f.fields||{},J=Object.keys(G);k.sort(),J.sort();for(let ce=0;ce<k.length&&ce<J.length;++ce){const nt=pr(k[ce],J[ce]);if(0!==nt)return nt;const Bt=za(E[k[ce]],G[J[ce]]);if(0!==Bt)return Bt}return pr(k.length,J.length)}(r.mapValue,e.mapValue);default:throw Kn()}}function Ud(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return pr(r,e);const t=Al(r),s=Al(e),c=pr(t.seconds,s.seconds);return 0!==c?c:pr(t.nanos,s.nanos)}function P(r){return B(r)}function B(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const c=Al(s);return`time(${c.seconds},${c.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?ro(r.bytesValue).toBase64():"referenceValue"in r?Ln.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let c="[",f=!0;for(const E of s.values||[])f?f=!1:c+=",",c+=B(E);return c+"]"}(r.arrayValue):"mapValue"in r?function(s){const c=Object.keys(s.fields||{}).sort();let f="{",E=!0;for(const k of c)E?E=!1:f+=",",f+=`${k}:${B(s.fields[k])}`;return f+"}"}(r.mapValue):Kn();var e}function Te(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ct(r){return!!r&&"integerValue"in r}function Rt(r){return!!r&&"arrayValue"in r}function Wt(r){return!!r&&"nullValue"in r}function Un(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Nn(r){return!!r&&"mapValue"in r}function ir(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ol(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ir(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ir(r.arrayValue.values[t]);return e}return Object.assign({},r)}function jr(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nr(r){return"nullValue"in r?eu:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Te(Xo.empty(),Ln.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Kn()}function Po(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Te(Xo.empty(),Ln.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Eo:Kn()}function ws(r,e){const t=za(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function xl(r,e){const t=za(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Vs{constructor(e){this.value=e}static empty(){return new Vs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Nn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ir(t)}setAll(e){let t=fs.emptyPath(),s={},c=[];e.forEach((E,k)=>{if(!t.isImmediateParentOf(k)){const G=this.getFieldsMap(t);this.applyChanges(G,s,c),s={},c=[],t=k.popLast()}E?s[k.lastSegment()]=ir(E):c.push(k.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,s,c)}delete(e){const t=this.field(e.popLast());Nn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Nn(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){ol(t,(c,f)=>e[c]=f);for(const c of s)delete e[c]}clone(){return new Vs(ir(this.value))}}function Wl(r){const e=[];return ol(r.fields,(t,s)=>{const c=new fs([t]);if(Nn(s)){const f=Wl(s.mapValue).fields;if(0===f.length)e.push(c);else for(const E of f)e.push(c.child(E))}else e.push(c)}),new ps(e)}class Ti{constructor(e,t,s,c,f,E,k){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=f,this.data=E,this.documentState=k}static newInvalidDocument(e){return new Ti(e,0,sr.min(),sr.min(),sr.min(),Vs.empty(),0)}static newFoundDocument(e,t,s,c){return new Ti(e,1,t,sr.min(),s,c,0)}static newNoDocument(e,t){return new Ti(e,2,t,sr.min(),sr.min(),Vs.empty(),0)}static newUnknownDocument(e,t){return new Ti(e,3,t,sr.min(),sr.min(),Vs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Io{constructor(e,t){this.position=e,this.inclusive=t}}function nu(r,e,t){let s=0;for(let c=0;c<r.position.length;c++){const f=e[c],E=r.position[c];if(s=f.field.isKeyField()?Ln.comparator(Ln.fromName(E.referenceValue),t.key):za(E,t.data.field(f.field)),"desc"===f.dir&&(s*=-1),0!==s)break}return s}function Vd(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Qo(r.position[t],e.position[t]))return!1;return!0}class io{constructor(e,t="asc"){this.field=e,this.dir=t}}function xf(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Cu{}class hi extends Cu{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Cp(e,t,s):"array-contains"===t?new od(e,s):"in"===t?new ll(e,s):"not-in"===t?new Hd(e,s):"array-contains-any"===t?new ad(e,s):new hi(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Mh(e,s):new Rl(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(za(t,this.value)):null!==t&&Ha(this.value)===Ha(t)&&this.matchesComparison(za(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Si extends Cu{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Si(e,t)}matches(e){return al(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function al(r){return"and"===r.op}function _a(r){return"or"===r.op}function Kl(r){return ql(r)&&al(r)}function ql(r){for(const e of r.filters)if(e instanceof Si)return!1;return!0}function xh(r){if(r instanceof hi)return r.field.canonicalString()+r.op.toString()+P(r.value);if(Kl(r))return r.filters.map(e=>xh(e)).join(",");{const e=r.filters.map(t=>xh(t)).join(",");return`${r.op}(${e})`}}function jd(r,e){return r instanceof hi?(t=r,(s=e)instanceof hi&&t.op===s.op&&t.field.isEqual(s.field)&&Qo(t.value,s.value)):r instanceof Si?function(t,s){return s instanceof Si&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((c,f,E)=>c&&jd(f,s.filters[E]),!0)}(r,e):void Kn();var t,s}function bu(r,e){const t=r.filters.concat(e);return Si.create(t,r.op)}function Rh(r){return r instanceof hi?`${(e=r).field.canonicalString()} ${e.op} ${P(e.value)}`:r instanceof Si?function(e){return e.op.toString()+" {"+e.getFilters().map(Rh).join(" ,")+"}"}(r):"Filter";var e}class Cp extends hi{constructor(e,t,s){super(e,t,s),this.key=Ln.fromName(s.referenceValue)}matches(e){const t=Ln.comparator(e.key,this.key);return this.matchesComparison(t)}}class Mh extends hi{constructor(e,t){super(e,"in",t),this.keys=Ph(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Rl extends hi{constructor(e,t){super(e,"not-in",t),this.keys=Ph(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ph(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Ln.fromName(s.referenceValue))}class od extends hi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rt(t)&&tu(t.arrayValue,this.value)}}class ll extends hi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tu(this.value.arrayValue,t)}}class Hd extends hi{constructor(e,t){super(e,"not-in",t)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tu(this.value.arrayValue,t)}}class ad extends hi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>tu(this.value.arrayValue,s))}}class gs{constructor(e,t=null,s=[],c=[],f=null,E=null,k=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=f,this.startAt=E,this.endAt=k,this.ft=null}}function Ga(r,e=null,t=[],s=[],c=null,f=null,E=null){return new gs(r,e,t,s,c,f,E)}function Pa(r){const e=jn(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>xh(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),re(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>P(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>P(s)).join(",")),e.ft=t}return e.ft}function $c(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!xf(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!jd(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Vd(r.startAt,e.startAt)&&Vd(r.endAt,e.endAt)}function Ml(r){return Ln.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function gc(r,e){return r.filters.filter(t=>t instanceof hi&&t.field.isEqual(e))}function mc(r,e,t){let s=eu,c=!0;for(const f of gc(r,e)){let E=eu,k=!0;switch(f.op){case"<":case"<=":E=Nr(f.value);break;case"==":case"in":case">=":E=f.value;break;case">":E=f.value,k=!1;break;case"!=":case"not-in":E=eu}ws({value:s,inclusive:c},{value:E,inclusive:k})<0&&(s=E,c=k)}if(null!==t)for(let f=0;f<r.orderBy.length;++f)if(r.orderBy[f].field.isEqual(e)){const E=t.position[f];ws({value:s,inclusive:c},{value:E,inclusive:t.inclusive})<0&&(s=E,c=t.inclusive);break}return{value:s,inclusive:c}}function Oh(r,e,t){let s=Eo,c=!0;for(const f of gc(r,e)){let E=Eo,k=!0;switch(f.op){case">=":case">":E=Po(f.value),k=!1;break;case"==":case"in":case"<=":E=f.value;break;case"<":E=f.value,k=!1;break;case"!=":case"not-in":E=Eo}xl({value:s,inclusive:c},{value:E,inclusive:k})>0&&(s=E,c=k)}if(null!==t)for(let f=0;f<r.orderBy.length;++f)if(r.orderBy[f].field.isEqual(e)){const E=t.position[f];xl({value:s,inclusive:c},{value:E,inclusive:t.inclusive})>0&&(s=E,c=t.inclusive);break}return{value:s,inclusive:c}}class Ea{constructor(e,t=null,s=[],c=[],f=null,E="F",k=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=f,this.limitType=E,this.startAt=k,this.endAt=G,this.dt=null,this._t=null}}function ru(r,e,t,s,c,f,E,k){return new Ea(r,e,t,s,c,f,E,k)}function Pl(r){return new Ea(r)}function ld(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function yc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function cd(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ud(r){return null!==r.collectionGroup}function Yl(r){const e=jn(r);if(null===e.dt){e.dt=[];const t=cd(e),s=yc(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new io(t)),e.dt.push(new io(fs.keyField(),"asc"));else{let c=!1;for(const f of e.explicitOrderBy)e.dt.push(f),f.field.isKeyField()&&(c=!0);if(!c){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new io(fs.keyField(),f))}}}return e.dt}function wo(r){const e=jn(r);if(!e._t)if("F"===e.limitType)e._t=Ga(e.path,e.collectionGroup,Yl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const f of Yl(e))t.push(new io(f.field,"desc"===f.dir?"asc":"desc"));const s=e.endAt?new Io(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new Io(e.startAt.position,e.startAt.inclusive):null;e._t=Ga(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e._t}function Du(r,e){e.getFirstInequalityField(),cd(r);const t=r.filters.concat([e]);return new Ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function dd(r,e,t){return new Ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Zl(r,e){return $c(wo(r),wo(e))&&r.limitType===e.limitType}function hd(r){return`${Pa(wo(r))}|lt:${r.limitType}`}function Tu(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Rh(s)).join(", ")}]`),re(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>P(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>P(s)).join(",")),`Target(${t})`}(wo(r))}; limitType=${r.limitType})`}function vc(r,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):Ln.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(r,e)&&function(t,s){for(const c of Yl(t))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(r,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(c,f,E){const k=nu(c,f,E);return c.inclusive?k<=0:k<0}(t.startAt,Yl(t),s)||t.endAt&&!function(c,f,E){const k=nu(c,f,E);return c.inclusive?k>=0:k>0}(t.endAt,Yl(t),s)));var t,s}function kh(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Nh(r){return(e,t)=>{let s=!1;for(const c of Yl(r)){const f=bp(c,e,t);if(0!==f)return f;s=s||c.field.isKeyField()}return 0}}function bp(r,e,t){const s=r.field.isKeyField()?Ln.comparator(e.key,t.key):function(c,f,E){const k=f.data.field(c),G=E.data.field(c);return null!==k&&null!==G?za(k,G):Kn()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Kn()}}class _c{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,f]of s)if(this.equalsFn(c,e))return f}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){ol(this.inner,(t,s)=>{for(const[c,f]of s)e(c,f)})}isEmpty(){return Jc(this.inner)}size(){return this.innerSize}}const Dp=new xr(Ln.comparator);function js(){return Dp}const fd=new xr(Ln.comparator);function Xl(...r){let e=fd;for(const t of r)e=e.insert(t.key,t);return e}function iu(r){let e=fd;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Ia(){return Su()}function zd(){return Su()}function Su(){return new _c(r=>r.toString(),(r,e)=>r.isEqual(e))}const Rf=new xr(Ln.comparator),Fh=new Ui(Ln.comparator);function Zr(...r){let e=Fh;for(const t of r)e=e.add(t);return e}const Lh=new Ui(pr);function Au(){return Lh}function su(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ae(e)?"-0":e}}function Gd(r){return{integerValue:""+r}}function wa(r,e){return at(e)?Gd(e):su(r,e)}class Ec{constructor(){this._=void 0}}function Wd(r,e,t){return r instanceof Ic?function(s,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&Lc(c)&&(c=pc(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}}(t,e):r instanceof ou?Kd(r,e):r instanceof wc?ca(r,e):function(s,c){const f=xu(s,c),E=Mf(f)+Mf(s.wt);return ct(f)&&ct(s.wt)?Gd(E):su(s.serializer,E)}(r,e)}function pd(r,e,t){return r instanceof ou?Kd(r,e):r instanceof wc?ca(r,e):t}function xu(r,e){return r instanceof Ol?ct(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Ic extends Ec{}class ou extends Ec{constructor(e){super(),this.elements=e}}function Kd(r,e){const t=Tp(e);for(const s of r.elements)t.some(c=>Qo(c,s))||t.push(s);return{arrayValue:{values:t}}}class wc extends Ec{constructor(e){super(),this.elements=e}}function ca(r,e){let t=Tp(e);for(const s of r.elements)t=t.filter(c=>!Qo(c,s));return{arrayValue:{values:t}}}class Ol extends Ec{constructor(e,t){super(),this.serializer=e,this.wt=t}}function Mf(r){return Hr(r.integerValue||r.doubleValue)}function Tp(r){return Rt(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class qd{constructor(e,t){this.field=e,this.transform=t}}class Wa{constructor(e,t){this.version=e,this.transformResults=t}}class ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ms}static exists(e){return new ms(void 0,e)}static updateTime(e){return new ms(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class gd{}function kl(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new C(r.key,ms.none()):new cl(r.key,r.data,ms.none());{const t=r.data,s=Vs.empty();let c=new Ui(fs.comparator);for(let f of e.fields)if(!c.has(f)){let E=t.field(f);null===E&&f.length>1&&(f=f.popLast(),E=t.field(f)),null===E?s.delete(f):s.set(f,E),c=c.add(f)}return new Ql(r.key,s,new ps(c.toArray()),ms.none())}}function md(r,e,t){r instanceof cl?function(s,c,f){const E=s.value.clone(),k=yd(s.fieldTransforms,c,f.transformResults);E.setAll(k),c.convertToFoundDocument(f.version,E).setHasCommittedMutations()}(r,e,t):r instanceof Ql?function(s,c,f){if(!au(s.precondition,c))return void c.convertToUnknownDocument(f.version);const E=yd(s.fieldTransforms,c,f.transformResults),k=c.data;k.setAll($h(s)),k.setAll(E),c.convertToFoundDocument(f.version,k).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function lu(r,e,t,s){return r instanceof cl?function(c,f,E,k){if(!au(c.precondition,f))return E;const G=c.value.clone(),J=Pf(c.fieldTransforms,k,f);return G.setAll(J),f.convertToFoundDocument(f.version,G).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ql?function(c,f,E,k){if(!au(c.precondition,f))return E;const G=Pf(c.fieldTransforms,k,f),J=f.data;return J.setAll($h(c)),J.setAll(G),f.convertToFoundDocument(f.version,J).setHasLocalMutations(),null===E?null:E.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ce=>ce.field))}(r,e,t,s):(E=t,au(r.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):E);var f,E}function cu(r,e){let t=null;for(const s of r.fieldTransforms){const c=e.data.field(s.field),f=xu(s.transform,c||null);null!=f&&(null===t&&(t=Vs.empty()),t.set(s.field,f))}return t||null}function Nl(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&aa(t,s,(c,f)=>function Sp(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof ou&&s instanceof ou||t instanceof wc&&s instanceof wc?aa(t.elements,s.elements,Qo):t instanceof Ol&&s instanceof Ol?Qo(t.wt,s.wt):t instanceof Ic&&s instanceof Ic);var t,s}(c,f))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class cl extends gd{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Ql extends gd{constructor(e,t,s,c,f=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function $h(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function yd(r,e,t){const s=new Map;dr(r.length===t.length);for(let c=0;c<t.length;c++){const f=r[c],E=f.transform,k=e.data.field(f.field);s.set(f.field,pd(E,k,t[c]))}return s}function Pf(r,e,t){const s=new Map;for(const c of r){const f=c.transform,E=t.data.field(c.field);s.set(c.field,Wd(f,E,e))}return s}class C extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class m{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&md(f,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=lu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=lu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=zd();return this.mutations.forEach(c=>{const f=e.get(c.key),E=f.overlayedDocument;let k=this.applyToLocalView(E,f.mutatedFields);k=t.has(c.key)?null:k;const G=kl(E,k);null!==G&&s.set(c.key,G),E.isValidDocument()||E.convertToNoDocument(sr.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zr())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(t,s)=>Nl(t,s))&&aa(this.baseMutations,e.baseMutations,(t,s)=>Nl(t,s))}}class A{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){dr(e.mutations.length===s.length);let c=Rf;const f=e.mutations;for(let E=0;E<f.length;E++)c=c.insert(f[E].key,s[E].version);return new A(e,t,s,c)}}class K{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class st{constructor(e,t){this.count=e,this.unchangedNames=t}}var Dt,rn;function Bn(r){switch(r){default:return Kn();case Ht.CANCELLED:case Ht.UNKNOWN:case Ht.DEADLINE_EXCEEDED:case Ht.RESOURCE_EXHAUSTED:case Ht.INTERNAL:case Ht.UNAVAILABLE:case Ht.UNAUTHENTICATED:return!1;case Ht.INVALID_ARGUMENT:case Ht.NOT_FOUND:case Ht.ALREADY_EXISTS:case Ht.PERMISSION_DENIED:case Ht.FAILED_PRECONDITION:case Ht.ABORTED:case Ht.OUT_OF_RANGE:case Ht.UNIMPLEMENTED:case Ht.DATA_LOSS:return!0}}function or(r){if(void 0===r)return Ji("GRPC error has no .code"),Ht.UNKNOWN;switch(r){case Dt.OK:return Ht.OK;case Dt.CANCELLED:return Ht.CANCELLED;case Dt.UNKNOWN:return Ht.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return Ht.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return Ht.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return Ht.INTERNAL;case Dt.UNAVAILABLE:return Ht.UNAVAILABLE;case Dt.UNAUTHENTICATED:return Ht.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return Ht.INVALID_ARGUMENT;case Dt.NOT_FOUND:return Ht.NOT_FOUND;case Dt.ALREADY_EXISTS:return Ht.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return Ht.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return Ht.FAILED_PRECONDITION;case Dt.ABORTED:return Ht.ABORTED;case Dt.OUT_OF_RANGE:return Ht.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return Ht.UNIMPLEMENTED;case Dt.DATA_LOSS:return Ht.DATA_LOSS;default:return Kn()}}(rn=Dt||(Dt={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class ar{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ki}static getOrCreateInstance(){return null===Ki&&(Ki=new ar),Ki}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Ki=null;function Oa(){return new TextEncoder}const Ru=new qo([4294967295,4294967295],0);function Jl(r){const e=Oa().encode(r),t=new Rc;return t.update(e),new Uint8Array(t.digest())}function cs(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new qo([t,s],0),new qo([c,f],0)]}class Yd{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(s<0)throw new Mu(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Mu(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=qo.fromNumber(this.yt)}Tt(e,t,s){let c=e.add(t.multiply(qo.fromNumber(s)));return 1===c.compare(Ru)&&(c=new qo([c.getBits(0),c.getBits(1)],0)),c.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=Jl(e),[s,c]=cs(t);for(let f=0;f<this.hashCount;f++){const E=this.Tt(s,c,f);if(!this.Et(E))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),E=new Yd(f,c,t);return s.forEach(k=>E.insert(k)),E}insert(e){if(0===this.yt)return;const t=Jl(e),[s,c]=cs(t);for(let f=0;f<this.hashCount;f++){const E=this.Tt(s,c,f);this.Rt(E)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Cc{constructor(e,t,s,c,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Cc(sr.min(),c,new xr(pr),js(),Zr())}}class ec{constructor(e,t,s,c,f){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ec(s,t,Zr(),Zr(),Zr())}}class Pu{constructor(e,t,s,c){this.vt=e,this.removedTargetIds=t,this.key=s,this.Pt=c}}class Zd{constructor(e,t){this.targetId=e,this.bt=t}}class vd{constructor(e,t,s=no.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class _d{constructor(){this.Vt=0,this.St=Cg(),this.Dt=no.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=Zr(),t=Zr(),s=Zr();return this.St.forEach((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:Kn()}}),new ec(this.Dt,this.Ct,e,t,s)}$t(){this.xt=!1,this.St=Cg()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class Xd{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=js(),this.jt=Ou(),this.zt=new xr(pr)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const s=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&s.Mt(e.resumeToken);break;case 1:s.qt(),s.Nt||s.$t(),s.Mt(e.resumeToken);break;case 2:s.qt(),s.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(s.Ut(),s.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),s.Mt(e.resumeToken));break;default:Kn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((s,c)=>{this.Zt(c)&&t(c)})}ee(e){var t;const s=e.targetId,c=e.bt.count,f=this.ne(s);if(f){const E=f.target;if(Ml(E))if(0===c){const k=new Ln(E.path);this.Jt(s,k,Ti.newNoDocument(k,sr.min()))}else dr(1===c);else{const k=this.se(s);if(k!==c){const G=this.ie(e,k);0!==G&&(this.te(s),this.zt=this.zt.insert(s,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=ar.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(J,ce,nt){var Bt,fn,Mn,Fn,gr,ai;const ki={localCacheCount:ce,existenceFilterCount:nt.count},li=nt.unchangedNames;return li&&(ki.bloomFilter={applied:0===J,hashCount:null!==(Bt=null==li?void 0:li.hashCount)&&void 0!==Bt?Bt:0,bitmapLength:null!==(Fn=null===(Mn=null===(fn=null==li?void 0:li.bits)||void 0===fn?void 0:fn.bitmap)||void 0===Mn?void 0:Mn.length)&&void 0!==Fn?Fn:0,padding:null!==(ai=null===(gr=null==li?void 0:li.bits)||void 0===gr?void 0:gr.padding)&&void 0!==ai?ai:0}),ki}(G,k,e.bt))}}}}ie(e,t){const{unchangedNames:s,count:c}=e.bt;if(!s||!s.bits)return 1;const{bits:{bitmap:f="",padding:E=0},hashCount:k=0}=s;let G,J;try{G=ro(f).toUint8Array()}catch(ce){if(ce instanceof fc)return mi("Decoding the base64 bloom filter in existence filter failed ("+ce.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ce}try{J=new Yd(G,E,k)}catch(ce){return mi(ce instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",ce),1}return 0===J.yt?1:c!==t-this.re(e.targetId,J)?2:0}re(e,t){const s=this.Kt.getRemoteKeysForTarget(e);let c=0;return s.forEach(f=>{const E=this.Kt.oe(),k=`projects/${E.projectId}/databases/${E.database}/documents/${f.path.canonicalString()}`;t.At(k)||(this.Jt(e,f,null),c++)}),c}ue(e){const t=new Map;this.Gt.forEach((f,E)=>{const k=this.ne(E);if(k){if(f.current&&Ml(k.target)){const G=new Ln(k.target.path);null!==this.Qt.get(G)||this.ce(E,G)||this.Jt(E,G,Ti.newNoDocument(G,e))}f.kt&&(t.set(E,f.Ot()),f.$t())}});let s=Zr();this.jt.forEach((f,E)=>{let k=!0;E.forEachWhile(G=>{const J=this.ne(G);return!J||"TargetPurposeLimboResolution"===J.purpose||(k=!1,!1)}),k&&(s=s.add(f))}),this.Qt.forEach((f,E)=>E.setReadTime(e));const c=new Cc(e,t,this.zt,this.Qt,s);return this.Qt=js(),this.jt=Ou(),this.zt=new xr(pr),c}Ht(e,t){if(!this.Zt(e))return;const s=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,s),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,s){if(!this.Zt(e))return;const c=this.Xt(e);this.ce(e,t)?c.Ft(t,1):c.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),s&&(this.Qt=this.Qt.insert(t,s))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new _d,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new Ui(pr),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||_n("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new _d),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function Ou(){return new xr(Ln.comparator)}function Cg(){return new xr(Ln.comparator)}const Qd={asc:"ASCENDING",desc:"DESCENDING"},Of={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jd={and:"AND",or:"OR"};class Bh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eh(r,e){return r.useProto3Json||re(e)?e:{value:e}}function ku(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uh(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function bg(r,e){return ku(r,e.toTimestamp())}function Ts(r){return dr(!!r),sr.fromTimestamp(function(e){const t=Al(e);return new ci(t.seconds,t.nanos)}(r))}function Vh(r,e){return(t=r,new Ei(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Xm(r){const e=Ei.fromString(r);return dr(Gh(e)),e}function Ed(r,e){return Vh(r.databaseId,e.path)}function tc(r,e){const t=Xm(e);if(t.get(1)!==r.databaseId.projectId)throw new hn(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new hn(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ln(Nu(t))}function Id(r,e){return Vh(r.databaseId,e)}function Ap(r){const e=Xm(r);return 4===e.length?Ei.emptyPath():Nu(e)}function wd(r){return new Ei(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Nu(r){return dr(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Dg(r,e,t){return{name:Ed(r,e),fields:t.value.mapValue.fields}}function jh(r,e,t){const s=tc(r,e.name),c=Ts(e.updateTime),f=e.createTime?Ts(e.createTime):sr.min(),E=new Vs({mapValue:{fields:e.fields}}),k=Ti.newFoundDocument(s,c,f,E);return t&&k.setHasCommittedMutations(),t?k.setHasCommittedMutations():k}function uu(r,e){let t;if(e instanceof cl)t={update:Dg(r,e.key,e.value)};else if(e instanceof C)t={delete:Ed(r,e.key)};else if(e instanceof Ql)t={update:Dg(r,e.key,e.data),updateMask:Ff(e.fieldMask)};else{if(!(e instanceof g))return Kn();t={verify:Ed(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const E=f.transform;if(E instanceof Ic)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof ou)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof wc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof Ol)return{fieldPath:f.field.canonicalString(),increment:E.wt};throw Kn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:bg(r,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Kn()),t;var c}function du(r,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?ms.updateTime(Ts(c.updateTime)):void 0!==c.exists?ms.exists(c.exists):ms.none():ms.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(f,E){let k=null;"setToServerValue"in E?(dr("REQUEST_TIME"===E.setToServerValue),k=new Ic):"appendMissingElements"in E?k=new ou(E.appendMissingElements.values||[]):"removeAllFromArray"in E?k=new wc(E.removeAllFromArray.values||[]):"increment"in E?k=new Ol(f,E.increment):Kn();const G=fs.fromServerFormat(E.fieldPath);return new qd(G,k)}(r,c)):[];var c;if(e.update){const c=tc(r,e.update.name),f=new Vs({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new ps((e.updateMask.fieldPaths||[]).map(J=>fs.fromServerFormat(J)));return new Ql(c,f,E,t,s)}return new cl(c,f,t,s)}if(e.delete){const c=tc(r,e.delete);return new C(c,t)}if(e.verify){const c=tc(r,e.verify);return new g(c,t)}return Kn()}function Hh(r,e){return{documents:[Id(r,e.path)]}}function nh(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Id(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Id(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(G){if(0!==G.length)return Sg(Si.create(G,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const f=function(G){if(0!==G.length)return G.map(J=>{return{field:Fu((ce=J).field),direction:rh(ce.dir)};var ce})}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const E=eh(r,e.limit);var k,G;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(k=e.startAt).inclusive,values:k.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function Tg(r){let e=Ap(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){dr(1===s);const ce=t.from[0];ce.allDescendants?c=ce.collectionId:e=e.child(ce.collectionId)}let f=[];t.where&&(f=function(ce){const nt=Nf(ce);return nt instanceof Si&&Kl(nt)?nt.getFilters():[nt]}(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(ce=>{return new io(Lu((nt=ce).field),function(Bt){switch(Bt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(nt.direction));var nt}));let k=null;t.limit&&(k=function(ce){let nt;return nt="object"==typeof ce?ce.value:ce,re(nt)?null:nt}(t.limit));let G=null;var ce;t.startAt&&(G=new Io((ce=t.startAt).values||[],!!ce.before));let J=null;return t.endAt&&(J=function(ce){return new Io(ce.values||[],!ce.before)}(t.endAt)),ru(e,c,E,f,k,"F",G,J)}function Nf(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Lu(e.unaryFilter.field);return hi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Lu(e.unaryFilter.field);return hi.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Lu(e.unaryFilter.field);return hi.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Lu(e.unaryFilter.field);return hi.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Kn()}}(r):void 0!==r.fieldFilter?hi.create(Lu((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Si.create(e.compositeFilter.filters.map(t=>Nf(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Kn()}}(e.compositeFilter.op))}(r):Kn();var e}function rh(r){return Qd[r]}function zh(r){return Of[r]}function Rp(r){return Jd[r]}function Fu(r){return{fieldPath:r.canonicalString()}}function Lu(r){return fs.fromServerFormat(r.fieldPath)}function Sg(r){return r instanceof hi?function(e){if("=="===e.op){if(Un(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NAN"}};if(Wt(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Un(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NAN"}};if(Wt(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(e.field),op:zh(e.op),value:e.value}}}(r):r instanceof Si?function(e){const t=e.getFilters().map(s=>Sg(s));return 1===t.length?t[0]:{compositeFilter:{op:Rp(e.op),filters:t}}}(r):Kn()}function Ff(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gh(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class bc{constructor(e,t,s,c,f=sr.min(),E=sr.min(),k=no.EMPTY_BYTE_STRING,G=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=k,this.expectedCount=G}withSequenceNumber(e){return new bc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qm{constructor(e){this.le=e}}function Ka(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$u(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Ed(c=r.le,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:ku(c,f.version.toTimestamp()),createTime:ku(c,f.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:nc(e.version)};else{if(!e.isUnknownDocument())return Kn();s.unknownDocument={path:t.path.toArray(),version:nc(e.version)}}var c,f;return s}function $u(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function nc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rc(r){const e=new ci(r.seconds,r.nanoseconds);return sr.fromTimestamp(e)}function hu(r,e){const t=(e.baseMutations||[]).map(f=>du(r.le,f));for(let f=0;f<e.mutations.length-1;++f)f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(e.mutations[f].updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f);const s=e.mutations.map(f=>du(r.le,f)),c=ci.fromMillis(e.localWriteTimeMs);return new m(e.batchId,c,t,s)}function Bc(r){const e=rc(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?rc(r.lastLimboFreeSnapshotVersion):sr.min();let s;var c;return void 0!==r.query.documents?(dr(1===(c=r.query).documents.length),s=wo(Pl(Ap(c.documents[0])))):s=wo(Tg(r.query)),new bc(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,no.fromBase64String(r.resumeToken))}function ih(r,e){const t=nc(e.snapshotVersion),s=nc(e.lastLimboFreeSnapshotVersion);let c;c=Ml(e.target)?Hh(r.le,e.target):nh(r.le,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pa(e.target),readTime:t,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function Mp(r){const e=Tg({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?dd(e,e.limit,"L"):e}function ul(r,e){return new K(e.largestBatchId,du(r.le,e.overlayMutation))}function Lf(r,e){const t=e.path.lastSegment();return[r,Ut(e.path.popLast()),t]}function Pp(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:nc(s.readTime),documentKey:Ut(s.documentKey.path),largestBatchId:s.largestBatchId}}class sh{getBundleMetadata(e,t){return Kh(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:rc(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return Kh(e).put({bundleId:(s=t).id,createTime:nc(Ts(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return dl(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:Mp(c.bundledQuery),readTime:rc(c.readTime)};var c})}saveNamedQuery(e,t){return dl(e).put({name:(s=t).name,readTime:nc(Ts(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Kh(r){return Bs(r,"bundles")}function dl(r){return Bs(r,"namedQueries")}class Cd{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new Cd(e,t.uid||"")}getOverlay(e,t){return fu(e).get(Lf(this.userId,t)).next(s=>s?ul(this.serializer,s):null)}getOverlays(e,t){const s=Ia();return $t.forEach(t,c=>this.getOverlay(e,c).next(f=>{null!==f&&s.set(c,f)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((f,E)=>{const k=new K(t,E);c.push(this.de(e,k))}),$t.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(E=>c.add(Ut(E.getCollectionPath())));const f=[];return c.forEach(E=>{const k=IDBKeyRange.bound([this.userId,E,s],[this.userId,E,s+1],!1,!0);f.push(fu(e).J("collectionPathOverlayIndex",k))}),$t.waitFor(f)}getOverlaysForCollection(e,t,s){const c=Ia(),f=Ut(t),E=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,Number.POSITIVE_INFINITY],!0);return fu(e).j("collectionPathOverlayIndex",E).next(k=>{for(const G of k){const J=ul(this.serializer,G);c.set(J.getKey(),J)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const f=Ia();let E;const k=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fu(e).X({index:"collectionGroupOverlayIndex",range:k},(G,J,ce)=>{const nt=ul(this.serializer,J);f.size()<c||nt.largestBatchId===E?(f.set(nt.getKey(),nt),E=nt.largestBatchId):ce.done()}).next(()=>f)}de(e,t){return fu(e).put(function(s,c,f){const[E,k,G]=Lf(c,f.mutation.key);return{userId:c,collectionPath:k,documentId:G,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:uu(s.le,f.mutation)}}(this.serializer,this.userId,t))}}function fu(r){return Bs(r,"documentOverlays")}class Bu{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Hr(e.integerValue));else if("doubleValue"in e){const s=Hr(e.doubleValue);isNaN(s)?this.ge(t,13):(this.ge(t,15),ae(s)?t.ye(0):t.ye(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ge(t,20),"string"==typeof s?t.pe(s):(t.pe(`${s.seconds||""}`),t.ye(s.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(ro(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ge(t,45),t.ye(s.latitude||0),t.ye(s.longitude||0)}else"mapValue"in e?jr(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):Kn()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const s=e.fields||{};this.ge(t,55);for(const c of Object.keys(s))this.Ie(c,t),this.we(s[c],t)}ve(e,t){const s=e.values||[];this.ge(t,50);for(const c of s)this.we(c,t)}Ae(e,t){this.ge(t,37),Ln.fromName(e).path.forEach(s=>{this.ge(t,60),this.Pe(s,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function Jm(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Ag(r){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const f=Jm(255&t[c]);if(s+=f,8!==f)break}return s}(r);return Math.ceil(e/8)}Bu.be=new Bu;class ey{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Se(s.value),s=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.xe(s.value),s=t.next();this.Ne()}ke(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Se(s);else if(s<2048)this.Se(960|s>>>6),this.Se(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Se(480|s>>>12),this.Se(128|63&s>>>6),this.Se(128|63&s);else{const c=t.codePointAt(0);this.Se(240|c>>>18),this.Se(128|63&c>>>12),this.Se(128|63&c>>>6),this.Se(128|63&c)}}this.De()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.xe(s);else if(s<2048)this.xe(960|s>>>6),this.xe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.xe(480|s>>>12),this.xe(128|63&s>>>6),this.xe(128|63&s);else{const c=t.codePointAt(0);this.xe(240|c>>>18),this.xe(128|63&c>>>12),this.xe(128|63&c>>>6),this.xe(128|63&c)}}this.Ne()}Oe(e){const t=this.$e(e),s=Ag(t);this.Fe(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Be(e){const t=this.$e(e),s=Ag(t);this.Fe(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(c){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,c,!1),new Uint8Array(f.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class xg{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class qh{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class oh{constructor(){this.Qe=new ey,this.je=new xg(this.Qe),this.ze=new qh(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class Ll{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ll(this.indexId,this.documentKey,this.arrayValue,s)}}function ka(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=$f(r.arrayValue,e.arrayValue),0!==t?t:(t=$f(r.directionalValue,e.directionalValue),0!==t?t:Ln.comparator(r.documentKey,e.documentKey)))}function $f(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class Bf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const s=t;s.isInequality()?this.Xe=s:this.Ye.push(s)}}Ze(e){dr(e.collectionGroup===this.collectionId);const t=uc(e);if(void 0!==t&&!this.tn(t))return!1;const s=wl(e);let c=0,f=0;for(;c<s.length&&this.tn(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.Xe){const E=s[c];if(!this.en(this.Xe,E)||!this.nn(this.Je[f++],E))return!1;++c}for(;c<s.length;++c)if(f>=this.Je.length||!this.nn(this.Je[f++],s[c]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ty(r){var e,t;if(dr(r instanceof hi||r instanceof Si),r instanceof hi){if(r instanceof ll){const c=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(f=>hi.create(r.field,"==",f)))||[];return Si.create(c,"or")}return r}const s=r.filters.map(c=>ty(c));return Si.create(s,r.op)}function Rg(r){if(0===r.getFilters().length)return[];const e=Yh(ty(r));return dr(Op(e)),Uf(e)||Mg(e)?[e]:e.getFilters()}function Uf(r){return r instanceof hi}function Mg(r){return r instanceof Si&&Kl(r)}function Op(r){return Uf(r)||Mg(r)||function(e){if(e instanceof Si&&_a(e)){for(const t of e.getFilters())if(!Uf(t)&&!Mg(t))return!1;return!0}return!1}(r)}function Yh(r){if(dr(r instanceof hi||r instanceof Si),r instanceof hi)return r;if(1===r.filters.length)return Yh(r.filters[0]);const e=r.filters.map(s=>Yh(s));let t=Si.create(e,r.op);return t=Vf(t),Op(t)?t:(dr(t instanceof Si),dr(al(t)),dr(t.filters.length>1),t.filters.reduce((s,c)=>kp(s,c)))}function kp(r,e){let t;return dr(r instanceof hi||r instanceof Si),dr(e instanceof hi||e instanceof Si),t=r instanceof hi?e instanceof hi?Si.create([r,e],"and"):Np(r,e):e instanceof hi?Np(e,r):function(s,c){if(dr(s.filters.length>0&&c.filters.length>0),al(s)&&al(c))return bu(s,c.getFilters());const f=_a(s)?s:c,E=_a(s)?c:s,k=f.filters.map(G=>kp(G,E));return Si.create(k,"or")}(r,e),Vf(t)}function Np(r,e){if(al(e))return bu(e,r.getFilters());{const t=e.filters.map(s=>kp(r,s));return Si.create(t,"or")}}function Vf(r){if(dr(r instanceof hi||r instanceof Si),r instanceof hi)return r;const e=r.getFilters();if(1===e.length)return Vf(e[0]);if(ql(r))return r;const t=e.map(c=>Vf(c)),s=[];return t.forEach(c=>{c instanceof hi?s.push(c):c instanceof Si&&(c.op===r.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:Si.create(s,r.op)}class Fp{constructor(){this.sn=new hl}addToCollectionParentIndex(e,t){return this.sn.add(t),$t.resolve()}getCollectionParents(e,t){return $t.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return $t.resolve()}deleteFieldIndex(e,t){return $t.resolve()}getDocumentsMatchingTarget(e,t){return $t.resolve(null)}getIndexType(e,t){return $t.resolve(0)}getFieldIndexes(e,t){return $t.resolve([])}getNextCollectionGroupToUpdate(e){return $t.resolve(null)}getMinOffset(e,t){return $t.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return $t.resolve(es.min())}updateCollectionGroup(e,t,s){return $t.resolve()}updateIndexEntries(e,t){return $t.resolve()}}class hl{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new Ui(Ei.comparator),f=!c.has(s);return this.index[t]=c.add(s),f}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Ui(Ei.comparator)).toArray()}}const jf=new Uint8Array(0);class bd{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new hl,this.on=new _c(s=>Pa(s),(s,c)=>$c(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const f={collectionId:s,parent:Ut(c)};return pu(e).put(f)}return $t.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[Yc(t),""],!1,!0);return pu(e).j(c).next(f=>{for(const E of f){if(E.collectionId!==t)break;s.push($n(E.parent))}return s})}addFieldIndex(e,t){const s=ah(e),c={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var E;delete c.indexId;const f=s.add(c);if(t.indexState){const E=Uu(e);return f.next(k=>{E.put(Pp(k,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return f.next()}deleteFieldIndex(e,t){const s=ah(e),c=Uu(e),f=Zh(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Zh(e);let c=!0;const f=new Map;return $t.forEach(this.un(t),E=>this.cn(e,E).next(k=>{c&&(c=!!k),f.set(E,k)})).next(()=>{if(c){let E=Zr();const k=[];return $t.forEach(f,(G,J)=>{var ce;_n("IndexedDbIndexManager",`Using index ${ce=G,`id=${ce.indexId}|cg=${ce.collectionGroup}|f=${ce.fields.map(li=>`${li.fieldPath}:${li.kind}`).join(",")}`} to execute ${Pa(t)}`);const nt=function(li,La){const Ps=uc(La);if(void 0===Ps)return null;for(const bs of gc(li,Ps.fieldPath))switch(bs.op){case"array-contains-any":return bs.value.arrayValue.values||[];case"array-contains":return[bs.value]}return null}(J,G),Bt=function(li,La){const Ps=new Map;for(const bs of wl(La))for(const $a of gc(li,bs.fieldPath))switch($a.op){case"==":case"in":Ps.set(bs.fieldPath.canonicalString(),$a.value);break;case"not-in":case"!=":return Ps.set(bs.fieldPath.canonicalString(),$a.value),Array.from(Ps.values())}return null}(J,G),fn=function(li,La){const Ps=[];let bs=!0;for(const $a of wl(La)){const Ah=0===$a.kind?mc(li,$a.fieldPath,li.startAt):Oh(li,$a.fieldPath,li.startAt);Ps.push(Ah.value),bs&&(bs=Ah.inclusive)}return new Io(Ps,bs)}(J,G),Mn=function(li,La){const Ps=[];let bs=!0;for(const $a of wl(La)){const Ah=0===$a.kind?Oh(li,$a.fieldPath,li.endAt):mc(li,$a.fieldPath,li.endAt);Ps.push(Ah.value),bs&&(bs=Ah.inclusive)}return new Io(Ps,bs)}(J,G),Fn=this.an(G,J,fn),gr=this.an(G,J,Mn),ai=this.hn(G,J,Bt),ki=this.ln(G.indexId,nt,Fn,fn.inclusive,gr,Mn.inclusive,ai);return $t.forEach(ki,li=>s.H(li,t.limit).next(La=>{La.forEach(Ps=>{const bs=Ln.fromSegments(Ps.documentKey);E.has(bs)||(E=E.add(bs),k.push(bs))})}))}).next(()=>k)}return $t.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:Rg(Si.create(e.filters,"and")).map(s=>Ga(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,s,c,f,E,k){const G=(null!=t?t.length:1)*Math.max(s.length,f.length),J=G/(null!=t?t.length:1),ce=[];for(let nt=0;nt<G;++nt){const Bt=t?this.fn(t[nt/J]):jf,fn=this.dn(e,Bt,s[nt%J],c),Mn=this._n(e,Bt,f[nt%J],E),Fn=k.map(gr=>this.dn(e,Bt,gr,!0));ce.push(...this.createRange(fn,Mn,Fn))}return ce}dn(e,t,s,c){const f=new Ll(e,Ln.empty(),t,s);return c?f:f.He()}_n(e,t,s,c){const f=new Ll(e,Ln.empty(),t,s);return c?f.He():f}cn(e,t){const s=new Bf(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(f=>{let E=null;for(const k of f)s.Ze(k)&&(!E||k.fields.length>E.fields.length)&&(E=k);return E})}getIndexType(e,t){let s=2;const c=this.un(t);return $t.forEach(c,f=>this.cn(e,f).next(E=>{E?0!==s&&E.fields.length<function(k){let G=new Ui(fs.comparator),J=!1;for(const ce of k.filters)for(const nt of ce.getFlattenedFilters())nt.field.isKeyField()||("array-contains"===nt.op||"array-contains-any"===nt.op?J=!0:G=G.add(nt.field));for(const ce of k.orderBy)ce.field.isKeyField()||(G=G.add(ce.field));return G.size+(J?1:0)}(f)&&(s=1):s=0})).next(()=>null!==t.limit&&c.length>1&&2===s?1:s)}wn(e,t){const s=new oh;for(const c of wl(e)){const f=t.data.field(c.fieldPath);if(null==f)return null;const E=s.We(c.kind);Bu.be._e(f,E)}return s.Ge()}fn(e){const t=new oh;return Bu.be._e(e,t.We(0)),t.Ge()}mn(e,t){const s=new oh;return Bu.be._e(Te(this.databaseId,t),s.We(function(c){const f=wl(c);return 0===f.length?0:f[f.length-1].kind}(e))),s.Ge()}hn(e,t,s){if(null===s)return[];let c=[];c.push(new oh);let f=0;for(const E of wl(e)){const k=s[f++];for(const G of c)if(this.gn(t,E.fieldPath)&&Rt(k))c=this.yn(c,E,k);else{const J=G.We(E.kind);Bu.be._e(k,J)}}return this.pn(c)}an(e,t,s){return this.hn(e,t,s.position)}pn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Ge();return t}yn(e,t,s){const c=[...e],f=[];for(const E of s.arrayValue.values||[])for(const k of c){const G=new oh;G.seed(k.Ge()),Bu.be._e(E,G.We(t.kind)),f.push(G)}return f}gn(e,t){return!!e.filters.find(s=>s instanceof hi&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=ah(e),c=Uu(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(f=>{const E=[];return $t.forEach(f,k=>c.get([k.indexId,this.uid]).next(G=>{E.push(function(J,ce){const nt=ce?new Oc(ce.sequenceNumber,new es(rc(ce.readTime),new Ln($n(ce.documentKey)),ce.largestBatchId)):Oc.empty(),Bt=J.fields.map(([fn,Mn])=>new dc(fs.fromServerFormat(fn),Mn));return new zl(J.indexId,J.collectionGroup,Bt,nt)}(k,G))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const f=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==f?f:pr(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=ah(e),f=Uu(e);return this.In(e).next(E=>c.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(k=>$t.forEach(k,G=>f.put(Pp(G.indexId,this.user,E,s)))))}updateIndexEntries(e,t){const s=new Map;return $t.forEach(t,(c,f)=>{const E=s.get(c.collectionGroup);return(E?$t.resolve(E):this.getFieldIndexes(e,c.collectionGroup)).next(k=>(s.set(c.collectionGroup,k),$t.forEach(k,G=>this.Tn(e,c,G).next(J=>{const ce=this.En(f,G);return J.isEqual(ce)?$t.resolve():this.An(e,f,G,J,ce)}))))})}Rn(e,t,s,c){return Zh(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.mn(s,t.key),documentKey:t.key.path.toArray()})}vn(e,t,s,c){return Zh(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.mn(s,t.key),t.key.path.toArray()])}Tn(e,t,s){const c=Zh(e);let f=new Ui(ka);return c.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,t)])},(E,k)=>{f=f.add(new Ll(s.indexId,t,k.arrayValue,k.directionalValue))}).next(()=>f)}En(e,t){let s=new Ui(ka);const c=this.wn(t,e);if(null==c)return s;const f=uc(t);if(null!=f){const E=e.data.field(f.fieldPath);if(Rt(E))for(const k of E.arrayValue.values||[])s=s.add(new Ll(t.indexId,e.key,this.fn(k),c))}else s=s.add(new Ll(t.indexId,e.key,jf,c));return s}An(e,t,s,c,f){_n("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(k,G,J,ce,nt){const Bt=k.getIterator(),fn=G.getIterator();let Mn=va(Bt),Fn=va(fn);for(;Mn||Fn;){let gr=!1,ai=!1;if(Mn&&Fn){const ki=J(Mn,Fn);ki<0?ai=!0:ki>0&&(gr=!0)}else null!=Mn?ai=!0:gr=!0;gr?(ce(Fn),Fn=va(fn)):ai?(nt(Mn),Mn=va(Bt)):(Mn=va(Bt),Fn=va(fn))}}(c,f,ka,k=>{E.push(this.Rn(e,t,s,k))},k=>{E.push(this.vn(e,t,s,k))}),$t.waitFor(E)}In(e){let t=1;return Uu(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,f)=>{f.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((E,k)=>ka(E,k)).filter((E,k,G)=>!k||0!==ka(E,G[k-1]));const c=[];c.push(e);for(const E of s){const k=ka(E,e),G=ka(E,t);if(0===k)c[0]=e.He();else if(k>0&&G<0)c.push(E),c.push(E.He());else if(G>0)break}c.push(t);const f=[];for(let E=0;E<c.length;E+=2){if(this.Pn(c[E],c[E+1]))return[];f.push(IDBKeyRange.bound([c[E].indexId,this.uid,c[E].arrayValue,c[E].directionalValue,jf,[]],[c[E+1].indexId,this.uid,c[E+1].arrayValue,c[E+1].directionalValue,jf,[]]))}return f}Pn(e,t){return ka(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Lp)}getMinOffset(e,t){return $t.mapArray(this.un(t),s=>this.cn(e,s).next(c=>c||Kn())).next(Lp)}}function pu(r){return Bs(r,"collectionParents")}function Zh(r){return Bs(r,"indexEntries")}function ah(r){return Bs(r,"indexConfiguration")}function Uu(r){return Bs(r,"indexState")}function Lp(r){dr(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const c=r[s].indexState.offset;bl(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new es(e.readTime,e.documentKey,t)}const Dd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Na{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Na(e,Na.DEFAULT_COLLECTION_PERCENTILE,Na.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $p(r,e,t){const s=r.store("mutations"),c=r.store("documentMutations"),f=[],E=IDBKeyRange.only(t.batchId);let k=0;const G=s.X({range:E},(ce,nt,Bt)=>(k++,Bt.delete()));f.push(G.next(()=>{dr(1===k)}));const J=[];for(const ce of t.mutations){const nt=$s(e,ce.key.path,t.batchId);f.push(c.delete(nt)),J.push(ce.key)}return $t.waitFor(f).next(()=>J)}function Xr(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Kn();e=r.noDocument}return JSON.stringify(e).length}Na.DEFAULT_COLLECTION_PERCENTILE=10,Na.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Na.DEFAULT=new Na(41943040,Na.DEFAULT_COLLECTION_PERCENTILE,Na.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Na.DISABLED=new Na(-1,0,0);class lh{constructor(e,t,s,c){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=c,this.bn={}}static fe(e,t,s,c){dr(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new lh(f,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).X({index:"userMutationsIndex",range:s},(c,f,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const f=Vu(e),E=Dc(e);return E.add({}).next(k=>{dr("number"==typeof k);const G=new m(k,t,s,c),J=function(Bt,fn,Mn){const Fn=Mn.baseMutations.map(ai=>uu(Bt.le,ai)),gr=Mn.mutations.map(ai=>uu(Bt.le,ai));return{userId:fn,batchId:Mn.batchId,localWriteTimeMs:Mn.localWriteTime.toMillis(),baseMutations:Fn,mutations:gr}}(this.serializer,this.userId,G),ce=[];let nt=new Ui((Bt,fn)=>pr(Bt.canonicalString(),fn.canonicalString()));for(const Bt of c){const fn=$s(this.userId,Bt.key.path,k);nt=nt.add(Bt.key.path.popLast()),ce.push(E.put(J)),ce.push(f.put(fn,ya))}return nt.forEach(Bt=>{ce.push(this.indexManager.addToCollectionParentIndex(e,Bt))}),e.addOnCommittedListener(()=>{this.bn[k]=G.keys()}),$t.waitFor(ce).next(()=>G)})}lookupMutationBatch(e,t){return Dc(e).get(t).next(s=>s?(dr(s.userId===this.userId),hu(this.serializer,s)):null)}Vn(e,t){return this.bn[t]?$t.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.bn[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let f=null;return Dc(e).X({index:"userMutationsIndex",range:c},(E,k,G)=>{k.userId===this.userId&&(dr(k.batchId>=s),f=hu(this.serializer,k)),G.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Dc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(c,f,E)=>{s=f.batchId,E.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).j("userMutationsIndex",t).next(s=>s.map(c=>hu(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=rs(this.userId,t.path),c=IDBKeyRange.lowerBound(s),f=[];return Vu(e).X({range:c},(E,k,G)=>{const[J,ce,nt]=E,Bt=$n(ce);if(J===this.userId&&t.path.isEqual(Bt))return Dc(e).get(nt).next(fn=>{if(!fn)throw Kn();dr(fn.userId===this.userId),f.push(hu(this.serializer,fn))});G.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ui(pr);const c=[];return t.forEach(f=>{const E=rs(this.userId,f.path),k=IDBKeyRange.lowerBound(E),G=Vu(e).X({range:k},(J,ce,nt)=>{const[Bt,fn,Mn]=J,Fn=$n(fn);Bt===this.userId&&f.path.isEqual(Fn)?s=s.add(Mn):nt.done()});c.push(G)}),$t.waitFor(c).next(()=>this.Sn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,f=rs(this.userId,s),E=IDBKeyRange.lowerBound(f);let k=new Ui(pr);return Vu(e).X({range:E},(G,J,ce)=>{const[nt,Bt,fn]=G,Mn=$n(Bt);nt===this.userId&&s.isPrefixOf(Mn)?Mn.length===c&&(k=k.add(fn)):ce.done()}).next(()=>this.Sn(e,k))}Sn(e,t){const s=[],c=[];return t.forEach(f=>{c.push(Dc(e).get(f).next(E=>{if(null===E)throw Kn();dr(E.userId===this.userId),s.push(hu(this.serializer,E))}))}),$t.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return $p(e.at,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),$t.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $t.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return Vu(e).X({range:s},(f,E,k)=>{if(f[0]===this.userId){const G=$n(f[1]);c.push(G)}else k.done()}).next(()=>{dr(0===c.length)})})}containsKey(e,t){return ch(e,this.userId,t)}Cn(e){return Pg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ch(r,e,t){const s=rs(e,t.path),c=s[1],f=IDBKeyRange.lowerBound(s);let E=!1;return Vu(r).X({range:f,Y:!0},(k,G,J)=>{const[ce,nt,Bt]=k;ce===e&&nt===c&&(E=!0),J.done()}).next(()=>E)}function Dc(r){return Bs(r,"mutations")}function Vu(r){return Bs(r,"documentMutations")}function Pg(r){return Bs(r,"mutationQueues")}class ju{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new ju(0)}static kn(){return new ju(-1)}}class Bp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const s=new ju(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>sr.fromTimestamp(new ci(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Mn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.On(e,c)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(s=>(s.targetCount+=1,this.Fn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Td(e).delete(t.targetId)).next(()=>this.Mn(e)).next(s=>(dr(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let c=0;const f=[];return Td(e).X((E,k)=>{const G=Bc(k);G.sequenceNumber<=t&&null===s.get(G.targetId)&&(c++,f.push(this.removeTargetData(e,G)))}).next(()=>$t.waitFor(f)).next(()=>c)}forEachTarget(e,t){return Td(e).X((s,c)=>{const f=Bc(c);t(f)})}Mn(e){return Up(e).get("targetGlobalKey").next(t=>(dr(null!==t),t))}On(e,t){return Up(e).put("targetGlobalKey",t)}$n(e,t){return Td(e).put(ih(this.serializer,t))}Fn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Pa(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let f=null;return Td(e).X({range:c,index:"queryTargetsIndex"},(E,k,G)=>{const J=Bc(k);$c(t,J.target)&&(f=J,G.done())}).next(()=>f)}addMatchingKeys(e,t,s){const c=[],f=Hu(e);return t.forEach(E=>{const k=Ut(E.path);c.push(f.put({targetId:s,path:k})),c.push(this.referenceDelegate.addReference(e,s,E))}),$t.waitFor(c)}removeMatchingKeys(e,t,s){const c=Hu(e);return $t.forEach(t,f=>{const E=Ut(f.path);return $t.waitFor([c.delete([s,E]),this.referenceDelegate.removeReference(e,s,f)])})}removeMatchingKeysForTargetId(e,t){const s=Hu(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=Hu(e);let f=Zr();return c.X({range:s,Y:!0},(E,k,G)=>{const J=$n(E[1]),ce=new Ln(J);f=f.add(ce)}).next(()=>f)}containsKey(e,t){const s=Ut(t.path),c=IDBKeyRange.bound([s],[Yc(s)],!1,!0);let f=0;return Hu(e).X({index:"documentTargetsIndex",Y:!0,range:c},([E,k],G,J)=>{0!==E&&(f++,J.done())}).next(()=>f>0)}he(e,t){return Td(e).get(t).next(s=>s?Bc(s):null)}}function Td(r){return Bs(r,"targets")}function Up(r){return Bs(r,"targetGlobal")}function Hu(r){return Bs(r,"targetDocuments")}function Og([r,e],[t,s]){const c=pr(r,t);return 0===c?pr(e,s):c}class Vp{constructor(e){this.Bn=e,this.buffer=new Ui(Og),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Og(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Xh{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;_n("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ue.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Yo(s)?_n("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Rr(s)}yield t.Gn(3e5)}))}}class zu{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return $t.resolve(z.ct);const s=new Vp(t);return this.Qn.forEachTarget(e,c=>s.Un(c.sequenceNumber)).next(()=>this.Qn.zn(e,c=>s.Un(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Qn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_n("LruGarbageCollector","Garbage collection skipped; disabled"),$t.resolve(Dd)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(_n("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dd):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let s,c,f,E,k,G,J;const ce=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(nt=>(nt>this.params.maximumSequenceNumbersToCollect?(_n("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${nt}`),c=this.params.maximumSequenceNumbersToCollect):c=nt,E=Date.now(),this.nthSequenceNumber(e,c))).next(nt=>(s=nt,k=Date.now(),this.removeTargets(e,s,t))).next(nt=>(f=nt,G=Date.now(),this.removeOrphanedDocuments(e,s))).next(nt=>(J=Date.now(),oc()<=it.in.DEBUG&&_n("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-ce}ms\n\tDetermined least recently used ${c} in `+(k-E)+`ms\n\tRemoved ${f} targets in `+(G-k)+`ms\n\tRemoved ${nt} documents in `+(J-G)+`ms\nTotal Duration: ${J-ce}ms`),$t.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:nt})))}}class uh{constructor(e,t){this.db=e,this.garbageCollector=function qa(r,e){return new zu(r,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}Hn(e){let t=0;return this.zn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(s,c)=>t(c))}addReference(e,t,s){return $l(e,s)}removeReference(e,t,s){return $l(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return $l(e,t)}Yn(e,t){return function(s,c){let f=!1;return Pg(s).Z(E=>ch(s,E,c).next(k=>(k&&(f=!0),$t.resolve(!k)))).next(()=>f)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let f=0;return this.Jn(e,(E,k)=>{if(k<=t){const G=this.Yn(e,E).next(J=>{if(!J)return f++,s.getEntry(e,E).next(()=>(s.removeEntry(E,sr.min()),Hu(e).delete([0,Ut(E.path)])))});c.push(G)}}).next(()=>$t.waitFor(c)).next(()=>s.apply(e)).next(()=>f)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return $l(e,t)}Jn(e,t){const s=Hu(e);let c,f=z.ct;return s.X({index:"documentTargetsIndex"},([E,k],{path:G,sequenceNumber:J})=>{0===E?(f!==z.ct&&t(new Ln($n(c)),f),f=J,c=G):f=z.ct}).next(()=>{f!==z.ct&&t(new Ln($n(c)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $l(r,e){return Hu(r).put((s=r.currentSequenceNumber,{targetId:0,path:Ut(e.path),sequenceNumber:s}));var s}class Qh{constructor(){this.changes=new _c(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?$t.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Tc{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return fl(e).put(s)}removeEntry(e,t,s){return fl(e).delete(function(c,f){const E=c.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],$u(f),E[E.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Xn(e,s)))}getEntry(e,t){let s=Ti.newInvalidDocument(t);return fl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hp(t))},(c,f)=>{s=this.Zn(t,f)}).next(()=>s)}ts(e,t){let s={size:0,document:Ti.newInvalidDocument(t)};return fl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hp(t))},(c,f)=>{s={document:this.Zn(t,f),size:Xr(f)}}).next(()=>s)}getEntries(e,t){let s=js();return this.es(e,t,(c,f)=>{const E=this.Zn(c,f);s=s.insert(c,E)}).next(()=>s)}ns(e,t){let s=js(),c=new xr(Ln.comparator);return this.es(e,t,(f,E)=>{const k=this.Zn(f,E);s=s.insert(f,k),c=c.insert(f,Xr(E))}).next(()=>({documents:s,ss:c}))}es(e,t,s){if(t.isEmpty())return $t.resolve();let c=new Ui(Ad);t.forEach(G=>c=c.add(G));const f=IDBKeyRange.bound(Hp(c.first()),Hp(c.last())),E=c.getIterator();let k=E.getNext();return fl(e).X({index:"documentKeyIndex",range:f},(G,J,ce)=>{const nt=Ln.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;k&&Ad(k,nt)<0;)s(k,null),k=E.getNext();k&&k.isEqual(nt)&&(s(k,J),k=E.hasNext()?E.getNext():null),k?ce.G(Hp(k)):ce.done()}).next(()=>{for(;k;)s(k,null),k=E.hasNext()?E.getNext():null})}getDocumentsMatchingQuery(e,t,s,c){const f=t.path,E=[f.popLast().toArray(),f.lastSegment(),$u(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],k=[f.popLast().toArray(),f.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fl(e).j(IDBKeyRange.bound(E,k,!0)).next(G=>{let J=js();for(const ce of G){const nt=this.Zn(Ln.fromSegments(ce.prefixPath.concat(ce.collectionGroup,ce.documentId)),ce);nt.isFoundDocument()&&(vc(t,nt)||c.has(nt.key))&&(J=J.insert(nt.key,nt))}return J})}getAllFromCollectionGroup(e,t,s,c){let f=js();const E=kg(t,s),k=kg(t,es.max());return fl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,k,!0)},(G,J,ce)=>{const nt=this.Zn(Ln.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);f=f.insert(nt.key,nt),f.size===c&&ce.done()}).next(()=>f)}newChangeBuffer(e){return new ny(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jp(e).get("remoteDocumentGlobalKey").next(t=>(dr(!!t),t))}Xn(e,t){return jp(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const s=function Wh(r,e){let t;if(e.document)t=jh(r.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ln.fromSegments(e.noDocument.path),c=rc(e.noDocument.readTime);t=Ti.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Kn();{const s=Ln.fromSegments(e.unknownDocument.path),c=rc(e.unknownDocument.version);t=Ti.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new ci(s[0],s[1]);return sr.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(sr.min()))return s}return Ti.newInvalidDocument(e)}}function Sd(r){return new Tc(r)}class ny extends Qh{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new _c(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new Ui((f,E)=>pr(f.canonicalString(),E.canonicalString()));return this.changes.forEach((f,E)=>{const k=this.os.get(f);if(t.push(this.rs.removeEntry(e,f,k.readTime)),E.isValidDocument()){const G=Ka(this.rs.serializer,E);c=c.add(f.path.popLast());const J=Xr(G);s+=J-k.size,t.push(this.rs.addEntry(e,f,G))}else if(s-=k.size,this.trackRemovals){const G=Ka(this.rs.serializer,E.convertToNoDocument(sr.min()));t.push(this.rs.addEntry(e,f,G))}}),c.forEach(f=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,f))}),t.push(this.rs.updateMetadata(e,s)),$t.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(s=>(this.os.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:s,ss:c})=>(c.forEach((f,E)=>{this.os.set(f,{size:E,readTime:s.get(f).readTime})}),s))}}function jp(r){return Bs(r,"remoteDocumentGlobal")}function fl(r){return Bs(r,"remoteDocumentsV14")}function Hp(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kg(r,e){const t=e.documentKey.path.toArray();return[r,$u(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ad(r,e){const t=r.path.toArray(),s=e.path.toArray();let c=0;for(let f=0;f<t.length-2&&f<s.length-2;++f)if(c=pr(t[f],s[f]),c)return c;return c=pr(t.length,s.length),c||(c=pr(t[t.length-2],s[s.length-2]),c||pr(t[t.length-1],s[s.length-1]))}class zp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Gp{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(null!==s&&lu(s.mutation,c,ps.empty(),ci.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Zr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Zr()){const c=Ia();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(f=>{let E=Xl();return f.forEach((k,G)=>{E=E.insert(k,G.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const s=Ia();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Zr()))}populateOverlays(e,t,s){const c=[];return s.forEach(f=>{t.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(e,c).next(f=>{f.forEach((E,k)=>{t.set(E,k)})})}computeViews(e,t,s,c){let f=js();const E=Su(),k=Su();return t.forEach((G,J)=>{const ce=s.get(J.key);c.has(J.key)&&(void 0===ce||ce.mutation instanceof Ql)?f=f.insert(J.key,J):void 0!==ce?(E.set(J.key,ce.mutation.getFieldMask()),lu(ce.mutation,J,ce.mutation.getFieldMask(),ci.now())):E.set(J.key,ps.empty())}),this.recalculateAndSaveOverlays(e,f).next(G=>(G.forEach((J,ce)=>E.set(J,ce)),t.forEach((J,ce)=>{var nt;return k.set(J,new zp(ce,null!==(nt=E.get(J))&&void 0!==nt?nt:null))}),k))}recalculateAndSaveOverlays(e,t){const s=Su();let c=new xr((E,k)=>E-k),f=Zr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const k of E)k.keys().forEach(G=>{const J=t.get(G);if(null===J)return;let ce=s.get(G)||ps.empty();ce=k.applyToLocalView(J,ce),s.set(G,ce);const nt=(c.get(k.batchId)||Zr()).add(G);c=c.insert(k.batchId,nt)})}).next(()=>{const E=[],k=c.getReverseIterator();for(;k.hasNext();){const G=k.getNext(),J=G.key,ce=G.value,nt=zd();ce.forEach(Bt=>{if(!f.has(Bt)){const fn=kl(t.get(Bt),s.get(Bt));null!==fn&&nt.set(Bt,fn),f=f.add(Bt)}}),E.push(this.documentOverlayCache.saveOverlays(e,J,nt))}return $t.waitFor(E)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Ln.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ud(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(f=>{const E=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-f.size):$t.resolve(Ia());let k=-1,G=f;return E.next(J=>$t.forEach(J,(ce,nt)=>(k<nt.largestBatchId&&(k=nt.largestBatchId),f.get(ce)?$t.resolve():this.remoteDocumentCache.getEntry(e,ce).next(Bt=>{G=G.insert(ce,Bt)}))).next(()=>this.populateOverlays(e,J,f)).next(()=>this.computeViews(e,G,J,Zr())).next(ce=>({batchId:k,changes:iu(ce)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ln(t)).next(s=>{let c=Xl();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let f=Xl();return this.indexManager.getCollectionParents(e,c).next(E=>$t.forEach(E,k=>{const G=(J=t,ce=k.child(c),new Ea(ce,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,ce;return this.getDocumentsMatchingCollectionQuery(e,G,s).next(J=>{J.forEach((ce,nt)=>{f=f.insert(ce,nt)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c))).next(f=>{c.forEach((k,G)=>{const J=G.getKey();null===f.get(J)&&(f=f.insert(J,Ti.newInvalidDocument(J)))});let E=Xl();return f.forEach((k,G)=>{const J=c.get(k);void 0!==J&&lu(J.mutation,G,ps.empty(),ci.now()),vc(t,G)&&(E=E.insert(k,G))}),E})}}class Hf{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return $t.resolve(this.us.get(t))}saveBundleMetadata(e,t){var s;return this.us.set(t.id,{id:(s=t).id,version:s.version,createTime:Ts(s.createTime)}),$t.resolve()}getNamedQuery(e,t){return $t.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(s=t).name,query:Mp(s.bundledQuery),readTime:Ts(s.readTime)}),$t.resolve();var s}}class ry{constructor(){this.overlays=new xr(Ln.comparator),this.hs=new Map}getOverlay(e,t){return $t.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ia();return $t.forEach(t,c=>this.getOverlay(e,c).next(f=>{null!==f&&s.set(c,f)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,f)=>{this.de(e,t,f)}),$t.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.hs.get(s);return void 0!==c&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.hs.delete(s)),$t.resolve()}getOverlaysForCollection(e,t,s){const c=Ia(),f=t.length+1,E=new Ln(t.child("")),k=this.overlays.getIteratorFrom(E);for(;k.hasNext();){const G=k.getNext().value,J=G.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===f&&G.largestBatchId>s&&c.set(G.getKey(),G)}return $t.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let f=new xr((J,ce)=>J-ce);const E=this.overlays.getIterator();for(;E.hasNext();){const J=E.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>s){let ce=f.get(J.largestBatchId);null===ce&&(ce=Ia(),f=f.insert(J.largestBatchId,ce)),ce.set(J.getKey(),J)}}const k=Ia(),G=f.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((J,ce)=>k.set(J,ce)),!(k.size()>=c)););return $t.resolve(k)}de(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const E=this.hs.get(c.largestBatchId).delete(s.key);this.hs.set(c.largestBatchId,E)}this.overlays=this.overlays.insert(s.key,new K(t,s));let f=this.hs.get(t);void 0===f&&(f=Zr(),this.hs.set(t,f)),this.hs.set(t,f.add(s.key))}}class zf{constructor(){this.ls=new Ui(Co.fs),this.ds=new Ui(Co._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const s=new Co(e,t);this.ls=this.ls.add(s),this.ds=this.ds.add(s)}ws(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gs(new Co(e,t))}ys(e,t){e.forEach(s=>this.removeReference(s,t))}ps(e){const t=new Ln(new Ei([])),s=new Co(t,e),c=new Co(t,e+1),f=[];return this.ds.forEachInRange([s,c],E=>{this.gs(E),f.push(E.key)}),f}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new Ln(new Ei([])),s=new Co(t,e),c=new Co(t,e+1);let f=Zr();return this.ds.forEachInRange([s,c],E=>{f=f.add(E.key)}),f}containsKey(e){const t=new Co(e,0),s=this.ls.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Co{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return Ln.comparator(e.key,t.key)||pr(e.Es,t.Es)}static _s(e,t){return pr(e.Es,t.Es)||Ln.comparator(e.key,t.key)}}class Gf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new Ui(Co.fs)}checkEmpty(e){return $t.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const f=this.As;this.As++;const E=new m(f,t,s,c);this.mutationQueue.push(E);for(const k of c)this.Rs=this.Rs.add(new Co(k.key,f)),this.indexManager.addToCollectionParentIndex(e,k.key.path.popLast());return $t.resolve(E)}lookupMutationBatch(e,t){return $t.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.Ps(t+1),f=c<0?0:c;return $t.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return $t.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return $t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Co(t,0),c=new Co(t,Number.POSITIVE_INFINITY),f=[];return this.Rs.forEachInRange([s,c],E=>{const k=this.vs(E.Es);f.push(k)}),$t.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ui(pr);return t.forEach(c=>{const f=new Co(c,0),E=new Co(c,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([f,E],k=>{s=s.add(k.Es)})}),$t.resolve(this.bs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let f=s;Ln.isDocumentKey(f)||(f=f.child(""));const E=new Co(new Ln(f),0);let k=new Ui(pr);return this.Rs.forEachWhile(G=>{const J=G.key.path;return!!s.isPrefixOf(J)&&(J.length===c&&(k=k.add(G.Es)),!0)},E),$t.resolve(this.bs(k))}bs(e){const t=[];return e.forEach(s=>{const c=this.vs(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){dr(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return $t.forEach(t.mutations,c=>{const f=new Co(c.key,t.batchId);return s=s.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Rs=s})}Dn(e){}containsKey(e,t){const s=new Co(t,0),c=this.Rs.firstAfterOrEqual(s);return $t.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return $t.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Jh{constructor(e){this.Ss=e,this.docs=new xr(Ln.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),f=c?c.size:0,E=this.Ss(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:E}),this.size+=E-f,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return $t.resolve(s?s.document.mutableCopy():Ti.newInvalidDocument(t))}getEntries(e,t){let s=js();return t.forEach(c=>{const f=this.docs.get(c);s=s.insert(c,f?f.document.mutableCopy():Ti.newInvalidDocument(c))}),$t.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let f=js();const E=t.path,k=new Ln(E.child("")),G=this.docs.getIteratorFrom(k);for(;G.hasNext();){const{key:J,value:{document:ce}}=G.getNext();if(!E.isPrefixOf(J.path))break;J.path.length>E.length+1||bl(Ds(ce),s)<=0||(c.has(ce.key)||vc(t,ce))&&(f=f.insert(ce.key,ce.mutableCopy()))}return $t.resolve(f)}getAllFromCollectionGroup(e,t,s,c){Kn()}Ds(e,t){return $t.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Wp(this)}getSize(e){return $t.resolve(this.size)}}class Wp extends Qh{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.rs.addEntry(e,c)):this.rs.removeEntry(s)}),$t.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class Ng{constructor(e){this.persistence=e,this.Cs=new _c(t=>Pa(t),$c),this.lastRemoteSnapshotVersion=sr.min(),this.highestTargetId=0,this.xs=0,this.Ns=new zf,this.targetCount=0,this.ks=ju.Nn()}forEachTarget(e,t){return this.Cs.forEach((s,c)=>t(c)),$t.resolve()}getLastRemoteSnapshotVersion(e){return $t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $t.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),$t.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.xs&&(this.xs=t),$t.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new ju(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,$t.resolve()}updateTargetData(e,t){return this.$n(t),$t.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,$t.resolve()}removeTargets(e,t,s){let c=0;const f=[];return this.Cs.forEach((E,k)=>{k.sequenceNumber<=t&&null===s.get(k.targetId)&&(this.Cs.delete(E),f.push(this.removeMatchingKeysForTargetId(e,k.targetId)),c++)}),$t.waitFor(f).next(()=>c)}getTargetCount(e){return $t.resolve(this.targetCount)}getTargetData(e,t){const s=this.Cs.get(t)||null;return $t.resolve(s)}addMatchingKeys(e,t,s){return this.Ns.ws(t,s),$t.resolve()}removeMatchingKeys(e,t,s){this.Ns.ys(t,s);const c=this.persistence.referenceDelegate,f=[];return c&&t.forEach(E=>{f.push(c.markPotentiallyOrphaned(e,E))}),$t.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),$t.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ns.Ts(t);return $t.resolve(s)}containsKey(e,t){return $t.resolve(this.Ns.containsKey(t))}}class ef{constructor(e,t){this.Ms={},this.overlays={},this.Os=new z(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new Ng(this),this.indexManager=new Fp,this.remoteDocumentCache=new Jh(s=>this.referenceDelegate.Bs(s)),this.serializer=new Qm(t),this.Ls=new Hf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ry,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ms[e.toKey()];return s||(s=new Gf(t,this.referenceDelegate),this.Ms[e.toKey()]=s),s}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,s){_n("MemoryPersistence","Starting transaction:",e);const c=new Fg(this.Os.next());return this.referenceDelegate.qs(),s(c).next(f=>this.referenceDelegate.Us(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}Ks(e,t){return $t.or(Object.values(this.Ms).map(s=>()=>s.containsKey(e,t)))}}class Fg extends qr{constructor(e){super(),this.currentSequenceNumber=e}}class dh{constructor(e){this.persistence=e,this.Gs=new zf,this.Qs=null}static js(e){return new dh(e)}get zs(){if(this.Qs)return this.Qs;throw Kn()}addReference(e,t,s){return this.Gs.addReference(s,t),this.zs.delete(s.toString()),$t.resolve()}removeReference(e,t,s){return this.Gs.removeReference(s,t),this.zs.add(s.toString()),$t.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),$t.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(c=>this.zs.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(f=>this.zs.add(f.toString()))}).next(()=>s.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $t.forEach(this.zs,s=>{const c=Ln.fromPath(s);return this.Ws(e,c).next(f=>{f||t.removeEntry(c,sr.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(s=>{s?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return $t.or([()=>$t.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class Bl{constructor(e){this.serializer=e}$(e,t,s,c){const f=new Di("createOrUpgrade",t);var k;s<1&&c>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ii,{unique:!0}),k.createObjectStore("documentMutations"),Lg(e),function(k){k.createObjectStore("remoteDocuments")}(e));let E=$t.resolve();return s<3&&c>=3&&(0!==s&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),Lg(e)),E=E.next(()=>function(k){const G=k.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sr.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",J)}(f))),s<4&&c>=4&&(0!==s&&(E=E.next(()=>function(k,G){return G.store("mutations").j().next(J=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ii,{unique:!0});const ce=G.store("mutations"),nt=J.map(Bt=>ce.put(Bt));return $t.waitFor(nt)})}(e,f))),E=E.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(E=E.next(()=>this.Js(f))),s<6&&c>=6&&(E=E.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(f)))),s<7&&c>=7&&(E=E.next(()=>this.Xs(f))),s<8&&c>=8&&(E=E.next(()=>this.Zs(e,f))),s<9&&c>=9&&(E=E.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(E=E.next(()=>this.ti(f))),s<11&&c>=11&&(E=E.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(E=E.next(()=>{!function(k){const G=k.createObjectStore("documentOverlays",{keyPath:nd});G.createIndex("collectionPathOverlayIndex",rd,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",id,{unique:!1})}(e)})),s<13&&c>=13&&(E=E.next(()=>function(k){const G=k.createObjectStore("remoteDocumentsV14",{keyPath:Mo});G.createIndex("documentKeyIndex",Is),G.createIndex("collectionGroupIndex",Or)}(e)).next(()=>this.ei(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(E=E.next(()=>this.ni(e,f))),s<15&&c>=15&&(E=E.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:Dl}).createIndex("sequenceNumberIndex",sl,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:$d}).createIndex("documentKeyIndex",Zo,{unique:!1})}(e))),E}Ys(e){let t=0;return e.store("remoteDocuments").X((s,c)=>{t+=Xr(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Js(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(c=>$t.forEach(c,f=>{const E=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",E).next(k=>$t.forEach(k,G=>{dr(G.userId===f.userId);const J=hu(this.serializer,G);return $p(e,f.userId,J).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const f=[];return s.X((E,k)=>{const G=new Ei(E),J=[0,Ut(G)];f.push(t.get(J).next(ce=>ce?$t.resolve():t.put({targetId:0,path:Ut(G),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>$t.waitFor(f))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:Bo});const s=t.store("collectionParents"),c=new hl,f=E=>{if(c.add(E)){const k=E.lastSegment(),G=E.popLast();return s.put({collectionId:k,parent:Ut(G)})}};return t.store("remoteDocuments").X({Y:!0},(E,k)=>{const G=new Ei(E);return f(G.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([E,k,G],J)=>{const ce=$n(k);return f(ce.popLast())}))}ti(e){const t=e.store("targets");return t.X((s,c)=>{const f=Bc(c),E=ih(this.serializer,f);return t.put(E)})}ei(e,t){const s=t.store("remoteDocuments"),c=[];return s.X((f,E)=>{const k=t.store("remoteDocumentsV14"),G=(J=E,J.document?new Ln(Ei.fromString(J.document.name).popFirst(5)):J.noDocument?Ln.fromSegments(J.noDocument.path):J.unknownDocument?Ln.fromSegments(J.unknownDocument.path):Kn()).path.toArray();var J;const ce={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};c.push(k.put(ce))}).next(()=>$t.waitFor(c))}ni(e,t){const s=t.store("mutations"),c=Sd(this.serializer),f=new ef(dh.js,this.serializer.le);return s.j().next(E=>{const k=new Map;return E.forEach(G=>{var J;let ce=null!==(J=k.get(G.userId))&&void 0!==J?J:Zr();hu(this.serializer,G).keys().forEach(nt=>ce=ce.add(nt)),k.set(G.userId,ce)}),$t.forEach(k,(G,J)=>{const ce=new Wi(J),nt=Cd.fe(this.serializer,ce),Bt=f.getIndexManager(ce),fn=lh.fe(ce,this.serializer,Bt,f.referenceDelegate);return new Gp(c,fn,nt,Bt).recalculateAndSaveOverlaysForDocumentKeys(new Iu(t,z.ct),G).next()})})}}function Lg(r){r.createObjectStore("targetDocuments",{keyPath:_o}).createIndex("documentTargetsIndex",Qc,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hc,{unique:!0}),r.createObjectStore("targetGlobal")}const tf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kp{constructor(e,t,s,c,f,E,k,G,J,ce,nt=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.si=f,this.window=E,this.document=k,this.ii=J,this.ri=ce,this.oi=nt,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=Bt=>Promise.resolve(),!Kp.D())throw new hn(Ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uh(this,c),this.fi=t+"main",this.serializer=new Qm(G),this.di=new to(this.fi,this.oi,new Bl(this.serializer)),this.Fs=new Bp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sd(this.serializer),this.Ls=new sh,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ce&&Ji("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new hn(Ht.FAILED_PRECONDITION,tf);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new z(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var s=(0,ue.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,ue.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(Yo(e))return _n("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _n("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return Wf(e).get("owner").next(t=>$t.resolve(this.Ri(t)))}vi(e){return Uc(e).delete(this.clientId)}Pi(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Bs(s,"clientMetadata");return c.j().next(f=>{const E=e.Vi(f,18e5),k=f.filter(G=>-1===E.indexOf(G));return $t.forEach(k,G=>c.delete(G.clientId)).next(()=>k)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Si(s.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?$t.resolve(!0):Wf(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new hn(Ht.FAILED_PRECONDITION,tf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uc(e).j().next(s=>void 0===this.Vi(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(t=>(this.isPrimary!==t&&_n("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Iu(t,z.ct);return e.Ei(s).next(()=>e.vi(s))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(s=>this.bi(s.updateTimeMs,t)&&!this.Di(s.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>Uc(e).j().next(t=>this.Vi(t,18e5).map(s=>s.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return lh.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bd(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return Cd.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,s){_n("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",f=15===(E=this.oi)?Fc:14===E?Nc:13===E?kc:12===E?Bd:11===E?Eu:void Kn();var E;let k;return this.di.runTransaction(e,c,f,G=>(k=new Iu(G,this.Os?this.Os.next():z.ct),"readwrite-primary"===t?this.Ii(k).next(J=>!!J||this.Ti(k)).next(J=>{if(!J)throw Ji(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new hn(Ht.FAILED_PRECONDITION,Gl);return s(k)}).next(J=>this.Ai(k).next(()=>J)):this.Oi(k).next(()=>s(k)))).then(G=>(k.raiseOnCommittedEvent(),G))}Oi(e){return Wf(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new hn(Ht.FAILED_PRECONDITION,tf)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wf(e).put("owner",t)}static D(){return to.D()}Ei(e){const t=Wf(e);return t.get("owner").next(s=>this.Ri(s)?(_n("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$t.resolve())}bi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Ji(`Detected an update time that is in the future: ${e} > ${s}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,tt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return _n("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ji("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){Ji("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wf(r){return Bs(r,"owner")}function Uc(r){return Bs(r,"clientMetadata")}function Kf(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class qp{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.$i=s,this.Fi=c}static Bi(e,t){let s=Zr(),c=Zr();for(const f of t.docChanges)switch(f.type){case 0:s=s.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new qp(e,t.fromCache,s,c)}}class Yp{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,s,c){return this.Ui(e,t).next(f=>f||this.Ki(e,t,c,s)).next(f=>f||this.Gi(e,t))}Ui(e,t){if(ld(t))return $t.resolve(null);let s=wo(t);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=dd(t,null,"F"),s=wo(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(f=>{const E=Zr(...f);return this.qi.getDocuments(e,E).next(k=>this.indexManager.getMinOffset(e,s).next(G=>{const J=this.Qi(t,k);return this.ji(t,J,E,G.readTime)?this.Ui(e,dd(t,null,"F")):this.zi(e,J,t,G)}))})))}Ki(e,t,s,c){return ld(t)||c.isEqual(sr.min())?this.Gi(e,t):this.qi.getDocuments(e,s).next(f=>{const E=this.Qi(t,f);return this.ji(t,E,s,c)?this.Gi(e,t):(oc()<=it.in.DEBUG&&_n("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Tu(t)),this.zi(e,E,t,Xc(c,-1)))})}Qi(e,t){let s=new Ui(Nh(e));return t.forEach((c,f)=>{vc(e,f)&&(s=s.add(f))}),s}ji(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const f="F"===e.limitType?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}Gi(e,t){return oc()<=it.in.DEBUG&&_n("QueryEngine","Using full collection scan to execute query:",Tu(t)),this.qi.getDocumentsMatchingQuery(e,t,es.min())}zi(e,t,s,c){return this.qi.getDocumentsMatchingQuery(e,s,c).next(f=>(t.forEach(E=>{f=f.insert(E.key,E)}),f))}}class iy{constructor(e,t,s,c){this.persistence=e,this.Wi=t,this.serializer=c,this.Hi=new xr(pr),this.Ji=new _c(f=>Pa(f),$c),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(s)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gp(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function $g(r,e,t,s){return new iy(r,e,t,s)}function nf(r,e){return Gu.apply(this,arguments)}function Gu(){return Gu=(0,ue.Z)(function*(r,e){const t=jn(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(f=>(c=f,t.Zi(e),t.mutationQueue.getAllMutationBatches(s))).next(f=>{const E=[],k=[];let G=Zr();for(const J of c){E.push(J.batchId);for(const ce of J.mutations)G=G.add(ce.key)}for(const J of f){k.push(J.batchId);for(const ce of J.mutations)G=G.add(ce.key)}return t.localDocuments.getDocuments(s,G).next(J=>({tr:J,removedBatchIds:E,addedBatchIds:k}))})})}),Gu.apply(this,arguments)}function fh(r){const e=jn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function rf(r,e,t){let s=Zr(),c=Zr();return t.forEach(f=>s=s.add(f)),e.getEntries(r,s).next(f=>{let E=js();return t.forEach((k,G)=>{const J=f.get(k);G.isFoundDocument()!==J.isFoundDocument()&&(c=c.add(k)),G.isNoDocument()&&G.version.isEqual(sr.min())?(e.removeEntry(k,G.readTime),E=E.insert(k,G)):!J.isValidDocument()||G.version.compareTo(J.version)>0||0===G.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry(G),E=E.insert(k,G)):_n("LocalStore","Ignoring outdated watch update for ",k,". Current version:",J.version," Watch version:",G.version)}),{er:E,nr:c}})}function Bg(r,e){const t=jn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Wu(r,e){const t=jn(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Fs.getTargetData(s,e).next(f=>f?(c=f,$t.resolve(c)):t.Fs.allocateTargetId(s).next(E=>(c=new bc(e,E,"TargetPurposeListen",s.currentSequenceNumber),t.Fs.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.Hi.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(s.targetId,s),t.Ji.set(e,s.targetId)),s})}function Ku(r,e,t){return sf.apply(this,arguments)}function sf(){return sf=(0,ue.Z)(function*(r,e,t){const s=jn(r),c=s.Hi.get(e),f=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",f,E=>s.persistence.referenceDelegate.removeTarget(E,c)))}catch(E){if(!Yo(E))throw E;_n("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}s.Hi=s.Hi.remove(e),s.Ji.delete(c.target)}),sf.apply(this,arguments)}function af(r,e,t){const s=jn(r);let c=sr.min(),f=Zr();return s.persistence.runTransaction("Execute query","readonly",E=>function(k,G,J){const ce=jn(k),nt=ce.Ji.get(J);return void 0!==nt?$t.resolve(ce.Hi.get(nt)):ce.Fs.getTargetData(G,J)}(s,E,wo(e)).next(k=>{if(k)return c=k.lastLimboFreeSnapshotVersion,s.Fs.getMatchingKeysForTargetId(E,k.targetId).next(G=>{f=G})}).next(()=>s.Wi.getDocumentsMatchingQuery(E,e,t?c:sr.min(),t?f:Zr())).next(k=>(Ug(s,kh(e),k),{documents:k,sr:f})))}function qf(r,e){const t=jn(r),s=jn(t.Fs),c=t.Hi.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",f=>s.he(f,e).next(E=>E?E.target:null))}function ic(r,e){const t=jn(r),s=t.Yi.get(e)||sr.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Xi.getAllFromCollectionGroup(c,e,Xc(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(Ug(t,e,c),c))}function Ug(r,e,t){let s=r.Yi.get(e)||sr.min();t.forEach((c,f)=>{f.readTime.compareTo(s)>0&&(s=f.readTime)}),r.Yi.set(e,s)}function Zf(){return Zf=(0,ue.Z)(function*(r,e,t,s){const c=jn(r);let f=Zr(),E=js();for(const J of t){const ce=e.ir(J.metadata.name);J.document&&(f=f.add(ce));const nt=e.rr(J);nt.setReadTime(e.ur(J.metadata.readTime)),E=E.insert(ce,nt)}const k=c.Xi.newChangeBuffer({trackRemovals:!0}),G=yield Wu(c,(J=s,wo(Pl(Ei.fromString(`__bundle__/docs/${J}`)))));var J;return c.persistence.runTransaction("Apply bundle documents","readwrite",J=>rf(J,k,E).next(ce=>(k.apply(J),ce)).next(ce=>c.Fs.removeMatchingKeysForTargetId(J,G.targetId).next(()=>c.Fs.addMatchingKeys(J,f,G.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(J,ce.er,ce.nr)).next(()=>ce.er)))}),Zf.apply(this,arguments)}function Vg(r,e){return lf.apply(this,arguments)}function lf(){return lf=(0,ue.Z)(function*(r,e,t=Zr()){const s=yield Wu(r,wo(Mp(e.bundledQuery))),c=jn(r);return c.persistence.runTransaction("Save named query","readwrite",f=>{const E=Ts(e.readTime);if(s.snapshotVersion.compareTo(E)>=0)return c.Ls.saveNamedQuery(f,e);const k=s.withResumeToken(no.EMPTY_BYTE_STRING,E);return c.Hi=c.Hi.insert(k.targetId,k),c.Fs.updateTargetData(f,k).next(()=>c.Fs.removeMatchingKeysForTargetId(f,s.targetId)).next(()=>c.Fs.addMatchingKeys(f,t,s.targetId)).next(()=>c.Ls.saveNamedQuery(f,e))})}),lf.apply(this,arguments)}function jg(r,e){return`firestore_clients_${r}_${e}`}function Hg(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Ya(r,e){return`firestore_targets_${r}_${e}`}class Xf{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static cr(e,t,s){const c=JSON.parse(s);let f,E="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return E&&c.error&&(E="string"==typeof c.error.message&&"string"==typeof c.error.code,E&&(f=new hn(c.error.code,c.error.message))),E?new Xf(e,t,c.state,f):(Ji("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ph{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static cr(e,t){const s=JSON.parse(t);let c,f="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return f&&s.error&&(f="string"==typeof s.error.message&&"string"==typeof s.error.code,f&&(c=new hn(s.error.code,s.error.message))),f?new ph(e,s.state,c):(Ji("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,f=Au();for(let E=0;c&&E<s.activeTargetIds.length;++E)c=at(s.activeTargetIds[E]),f=f.add(s.activeTargetIds[E]);return c?new Qp(e,f):(Ji("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cf{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cf(t.clientId,t.onlineState):(Ji("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jp{constructor(){this.activeTargetIds=Au()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qf{constructor(e,t,s,c,f){this.window=e,this.si=t,this.persistenceKey=s,this.dr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new xr(pr),this.started=!1,this.gr=[];const E=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.yr=jg(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new Jp),this.Ir=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.Mi();for(const c of t){if(c===e.dr)continue;const f=e.getItem(jg(e.persistenceKey,c));if(f){const E=Qp.cr(c,f);E&&(e.mr=e.mr.insert(E.clientId,E))}}e.vr();const s=e.storage.getItem(e.Ar);if(s){const c=e.Pr(s);c&&e.br(c)}for(const c of e.gr)e.wr(c);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,s){this.Sr(e,t,s),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ya(this.persistenceKey,e));if(s){const c=ph.cr(e,s);c&&(t=c.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ya(this.persistenceKey,e))}updateQueryState(e,t,s){this.Nr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.Dr(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _n("SharedClientState","READ",e,t),t}setItem(e,t){_n("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_n("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(_n("SharedClientState","EVENT",s.key,s.newValue),s.key===this.yr)return void Ji("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ir.test(s.key)){if(null==s.newValue){const c=t.Or(s.key);return t.$r(c,null)}{const c=t.Fr(s.key,s.newValue);if(c)return t.$r(c.clientId,c)}}else if(t.Tr.test(s.key)){if(null!==s.newValue){const c=t.Br(s.key,s.newValue);if(c)return t.Lr(c)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const c=t.qr(s.key,s.newValue);if(c)return t.Ur(c)}}else if(s.key===t.Ar){if(null!==s.newValue){const c=t.Pr(s.newValue);if(c)return t.br(c)}}else if(s.key===t.pr){const c=function(f){let E=z.ct;if(null!=f)try{const k=JSON.parse(f);dr("number"==typeof k),E=k}catch(k){Ji("SharedClientState","Failed to read sequence number from WebStorage",k)}return E}(s.newValue);c!==z.ct&&t.sequenceNumberHandler(c)}else if(s.key===t.Rr){const c=t.Kr(s.newValue);yield Promise.all(c.map(f=>t.syncEngine.Gr(f)))}}else t.gr.push(s)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,s){const c=new Xf(this.currentUser,e,t,s),f=Hg(this.persistenceKey,this.currentUser,e);this.setItem(f,c.ar())}Dr(e){const t=Hg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,s){const c=Ya(this.persistenceKey,e),f=new ph(e,t,s);this.setItem(c,f.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const s=this.Or(e);return Qp.cr(s,t)}Br(e,t){const s=this.Tr.exec(e),c=Number(s[1]);return Xf.cr(new Wi(void 0!==s[2]?s[2]:null),c,t)}qr(e,t){const s=this.Er.exec(e),c=Number(s[1]);return ph.cr(c,t)}Pr(e){return cf.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);_n("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const s=t?this.mr.insert(e,t):this.mr.remove(e),c=this.Vr(this.mr),f=this.Vr(s),E=[],k=[];return f.forEach(G=>{c.has(G)||E.push(G)}),c.forEach(G=>{f.has(G)||k.push(G)}),this.syncEngine.zr(E,k).then(()=>{this.mr=s})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=Au();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class zg{constructor(){this.Wr=new Jp,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,s){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new Jp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sy{Jr(e){}shutdown(){}}class eg{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){_n("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){_n("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jf=null;function tg(){return null===Jf?Jf=268435456+Math.round(2147483648*Math.random()):Jf++,"0x"+Jf.toString(16)}const ng={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oy{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const Fa="WebChannelConnection";class ay extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,s,c,f){const E=tg(),k=this.Io(e,t);_n("RestConnection",`Sending RPC '${e}' ${E}:`,k,s);const G={};return this.To(G,c,f),this.Eo(e,k,G,s).then(J=>(_n("RestConnection",`Received RPC '${e}' ${E}: `,J),J),J=>{throw mi("RestConnection",`RPC '${e}' ${E} failed with error: `,J,"url: ",k,"request:",s),J})}Ao(e,t,s,c,f,E){return this.po(e,t,s,c,f)}To(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+vo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,f)=>e[f]=c),s&&s.headers.forEach((c,f)=>e[f]=c)}Io(e,t){return`${this.wo}/v1/${t}:${ng[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,s,c){const f=tg();return new Promise((E,k)=>{const G=new _l;G.setWithCredentials(!0),G.listenOnce(Es.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Ko.NO_ERROR:const ce=G.getResponseJson();_n(Fa,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(ce)),E(ce);break;case Ko.TIMEOUT:_n(Fa,`RPC '${e}' ${f} timed out`),k(new hn(Ht.DEADLINE_EXCEEDED,"Request time out"));break;case Ko.HTTP_ERROR:const nt=G.getStatus();if(_n(Fa,`RPC '${e}' ${f} failed with status:`,nt,"response text:",G.getResponseText()),nt>0){let Bt=G.getResponseJson();Array.isArray(Bt)&&(Bt=Bt[0]);const fn=null==Bt?void 0:Bt.error;if(fn&&fn.status&&fn.message){const Mn=function(Fn){const gr=Fn.toLowerCase().replace(/_/g,"-");return Object.values(Ht).indexOf(gr)>=0?gr:Ht.UNKNOWN}(fn.status);k(new hn(Mn,fn.message))}else k(new hn(Ht.UNKNOWN,"Server responded with status "+G.getStatus()))}else k(new hn(Ht.UNAVAILABLE,"Connection failed."));break;default:Kn()}}finally{_n(Fa,`RPC '${e}' ${f} completed.`)}});const J=JSON.stringify(c);_n(Fa,`RPC '${e}' ${f} sending request:`,c),G.send(t,"POST",J,s,15)})}Ro(e,t,s){const c=tg(),f=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=Wo(),k=yo(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(G.xmlHttpFactory=new Qs({})),this.To(G.initMessageHeaders,t,s),G.encodeInitMessageHeaders=!0;const J=f.join("");_n(Fa,`Creating RPC '${e}' stream ${c}: ${J}`,G);const ce=E.createWebChannel(J,G);let nt=!1,Bt=!1;const fn=new oy({io:Fn=>{Bt?_n(Fa,`Not sending because RPC '${e}' stream ${c} is closed:`,Fn):(nt||(_n(Fa,`Opening RPC '${e}' stream ${c} transport.`),ce.open(),nt=!0),_n(Fa,`RPC '${e}' stream ${c} sending:`,Fn),ce.send(Fn))},ro:()=>ce.close()}),Mn=(Fn,gr,ai)=>{Fn.listen(gr,ki=>{try{ai(ki)}catch(li){setTimeout(()=>{throw li},0)}})};return Mn(ce,rl.EventType.OPEN,()=>{Bt||_n(Fa,`RPC '${e}' stream ${c} transport opened.`)}),Mn(ce,rl.EventType.CLOSE,()=>{Bt||(Bt=!0,_n(Fa,`RPC '${e}' stream ${c} transport closed`),fn.fo())}),Mn(ce,rl.EventType.ERROR,Fn=>{Bt||(Bt=!0,mi(Fa,`RPC '${e}' stream ${c} transport errored:`,Fn),fn.fo(new hn(Ht.UNAVAILABLE,"The operation could not be completed")))}),Mn(ce,rl.EventType.MESSAGE,Fn=>{var gr;if(!Bt){const ai=Fn.data[0];dr(!!ai);const li=ai.error||(null===(gr=ai[0])||void 0===gr?void 0:gr.error);if(li){_n(Fa,`RPC '${e}' stream ${c} received error:`,li);const La=li.status;let Ps=function($a){const Ah=Dt[$a];if(void 0!==Ah)return or(Ah)}(La),bs=li.message;void 0===Ps&&(Ps=Ht.INTERNAL,bs="Unknown error status: "+La+" with message "+li.message),Bt=!0,fn.fo(new hn(Ps,bs)),ce.close()}else _n(Fa,`RPC '${e}' stream ${c} received:`,ai),fn._o(ai)}}),Mn(k,Xs.STAT_EVENT,Fn=>{Fn.stat===Ls.PROXY?_n(Fa,`RPC '${e}' stream ${c} detected buffering proxy`):Fn.stat===Ls.NOPROXY&&_n(Fa,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{fn.lo()},0),fn}}function ly(){return typeof window<"u"?window:null}function rg(){return typeof document<"u"?document:null}function pl(r){return new Bh(r,!0)}class uf{constructor(e,t,s=1e3,c=1.5,f=6e4){this.si=e,this.timerId=t,this.vo=s,this.Po=c,this.bo=f,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),s=Math.max(0,Date.now()-this.Do),c=Math.max(0,t-s);c>0&&_n("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,c,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class Gg{constructor(e,t,s,c,f,E,k,G){this.si=e,this.Mo=s,this.Oo=c,this.connection=f,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=k,this.listener=G,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new uf(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,ue.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,ue.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var s=this;return(0,ue.Z)(function*(){s.Wo(),s.Ho(),s.Lo.cancel(),s.$o++,4!==e?s.Lo.reset():t&&t.code===Ht.RESOURCE_EXHAUSTED?(Ji(t.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),s.Lo.Co()):t&&t.code===Ht.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Jo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.$o===t&&this.Xo(s,c)},s=>{e(()=>{const c=new hn(Ht.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Zo(c)})})}Xo(e,t){const s=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{s(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(c=>{s(()=>this.Zo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,ue.Z)(function*(){e.state=0,e.start()}))}Zo(e){return _n("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(_n("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wg extends Gg{constructor(e,t,s,c,f,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,E),this.serializer=f}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function xp(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:Kn(),c=e.targetChange.targetIds||[],f=function(G,J){return G.useProto3Json?(dr(void 0===J||"string"==typeof J),no.fromBase64String(J||"")):(dr(void 0===J||J instanceof Uint8Array),no.fromUint8Array(J||new Uint8Array))}(r,e.targetChange.resumeToken),E=e.targetChange.cause,k=E&&function(G){const J=void 0===G.code?Ht.UNKNOWN:or(G.code);return new hn(J,G.message||"")}(E);t=new vd(s,c,f,k||null)}else if("documentChange"in e){const s=e.documentChange,c=tc(r,s.document.name),f=Ts(s.document.updateTime),E=s.document.createTime?Ts(s.document.createTime):sr.min(),k=new Vs({mapValue:{fields:s.document.fields}}),G=Ti.newFoundDocument(c,f,E,k);t=new Pu(s.targetIds||[],s.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const s=e.documentDelete,c=tc(r,s.document),f=s.readTime?Ts(s.readTime):sr.min(),E=Ti.newNoDocument(c,f);t=new Pu([],s.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const s=e.documentRemove,c=tc(r,s.document);t=new Pu([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return Kn();{const s=e.filter,{count:c=0,unchangedNames:f}=s,E=new st(c,f);t=new Zd(s.targetId,E)}}var G;return t}(this.serializer,e),s=function(c){if(!("targetChange"in c))return sr.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?sr.min():f.readTime?Ts(f.readTime):sr.min()}(e);return this.listener.eu(t,s)}nu(e){const t={};t.database=wd(this.serializer),t.addTarget=function(c,f){let E;const k=f.target;if(E=Ml(k)?{documents:Hh(c,k)}:{query:nh(c,k)},E.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){E.resumeToken=Uh(c,f.resumeToken);const G=eh(c,f.expectedCount);null!==G&&(E.expectedCount=G)}else if(f.snapshotVersion.compareTo(sr.min())>0){E.readTime=ku(c,f.snapshotVersion.toTimestamp());const G=eh(c,f.expectedCount);null!==G&&(E.expectedCount=G)}return E}(this.serializer,e);const s=function kf(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.zo(t)}su(e){const t={};t.database=wd(this.serializer),t.removeTarget=e,this.zo(t)}}class Kg extends Gg{constructor(e,t,s,c,f,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,E),this.serializer=f,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(dr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function Fl(r,e){return r&&r.length>0?(dr(void 0!==e),r.map(t=>function(s,c){let f=Ts(s.updateTime?s.updateTime:c);return f.isEqual(sr.min())&&(f=Ts(c)),new Wa(f,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ts(e.commitTime);return this.listener.uu(s,t)}return dr(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=wd(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>uu(this.serializer,s))};this.zo(t)}}class cy extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.hu=!1}lu(){if(this.hu)throw new hn(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.po(e,t,s,c,f)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new hn(Ht.UNKNOWN,c.toString())})}Ao(e,t,s,c){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,E])=>this.connection.Ao(e,t,s,f,E,c)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new hn(Ht.UNKNOWN,f.toString())})}terminate(){this.hu=!0}}class Vc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(Ji(t),this.wu=!1):_n("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Ca{constructor(e,t,s,c,f){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=f,this.vu.Jr(k=>{s.enqueueAndForget((0,ue.Z)(function*(){var G;Hc(E)&&(_n("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,ue.Z)(function*(J){const ce=jn(J);ce.Au.add(4),yield gu(ce),ce.Pu.set("Unknown"),ce.Au.delete(4),yield ba(ce)}),function(J){return G.apply(this,arguments)})(E))}))}),this.Pu=new Vc(s,c)}}function ba(r){return jc.apply(this,arguments)}function jc(){return jc=(0,ue.Z)(function*(r){if(Hc(r))for(const e of r.Ru)yield e(!0)}),jc.apply(this,arguments)}function gu(r){return gh.apply(this,arguments)}function gh(){return gh=(0,ue.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),gh.apply(this,arguments)}function sg(r,e){const t=jn(r);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),hf(t)?df(t):a(t).Uo()&&qg(t,e))}function xd(r,e){const t=jn(r),s=a(t);t.Eu.delete(e),s.Uo()&&og(t,e),0===t.Eu.size&&(s.Uo()?s.Qo():Hc(t)&&t.Pu.set("Unknown"))}function qg(r,e){if(r.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(sr.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}a(r).nu(e)}function og(r,e){r.bu.Lt(e),a(r).su(e)}function df(r){r.bu=new Xd({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),he:e=>r.Eu.get(e)||null,oe:()=>r.datastore.serializer.databaseId}),a(r).start(),r.Pu.mu()}function hf(r){return Hc(r)&&!a(r).qo()&&r.Eu.size>0}function Hc(r){return 0===jn(r).Au.size}function ff(r){r.bu=void 0}function Ul(r){return mh.apply(this,arguments)}function mh(){return mh=(0,ue.Z)(function*(r){r.Eu.forEach((e,t)=>{qg(r,e)})}),mh.apply(this,arguments)}function pf(r,e){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,ue.Z)(function*(r,e){ff(r),hf(r)?(r.Pu.pu(e),df(r)):r.Pu.set("Unknown")}),Rd.apply(this,arguments)}function dy(r,e,t){return gf.apply(this,arguments)}function gf(){return gf=(0,ue.Z)(function*(r,e,t){if(r.Pu.set("Online"),e instanceof vd&&2===e.state&&e.cause)try{yield(s=(0,ue.Z)(function*(c,f){const E=f.cause;for(const k of f.targetIds)c.Eu.has(k)&&(yield c.remoteSyncer.rejectListen(k,E),c.Eu.delete(k),c.bu.removeTarget(k))}),function(c,f){return s.apply(this,arguments)})(r,e)}catch(s){_n("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield yh(r,s)}else if(e instanceof Pu?r.bu.Wt(e):e instanceof Zd?r.bu.ee(e):r.bu.Yt(e),!t.isEqual(sr.min()))try{const s=yield fh(r.localStore);t.compareTo(s)>=0&&(yield function(c,f){const E=c.bu.ue(f);return E.targetChanges.forEach((k,G)=>{if(k.resumeToken.approximateByteSize()>0){const J=c.Eu.get(G);J&&c.Eu.set(G,J.withResumeToken(k.resumeToken,f))}}),E.targetMismatches.forEach((k,G)=>{const J=c.Eu.get(k);if(!J)return;c.Eu.set(k,J.withResumeToken(no.EMPTY_BYTE_STRING,J.snapshotVersion)),og(c,k);const ce=new bc(J.target,k,G,J.sequenceNumber);qg(c,ce)}),c.remoteSyncer.applyRemoteEvent(E)}(r,t))}catch(s){_n("RemoteStore","Failed to raise snapshot:",s),yield yh(r,s)}var s}),gf.apply(this,arguments)}function yh(r,e,t){return ep.apply(this,arguments)}function ep(){return ep=(0,ue.Z)(function*(r,e,t){if(!Yo(e))throw e;r.Au.add(1),yield gu(r),r.Pu.set("Offline"),t||(t=()=>fh(r.localStore)),r.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){_n("RemoteStore","Retrying IndexedDB access"),yield t(),r.Au.delete(1),yield ba(r)}))}),ep.apply(this,arguments)}function Yg(r,e){return e().catch(t=>yh(r,t,e))}function zc(r){return ag.apply(this,arguments)}function ag(){return ag=(0,ue.Z)(function*(r){const e=jn(r),t=l(e);let s=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;hy(e);)try{const c=yield Bg(e.localStore,s);if(null===c){0===e.Tu.length&&t.Qo();break}s=c.batchId,fy(e,c)}catch(c){yield yh(e,c)}Zg(e)&&lg(e)}),ag.apply(this,arguments)}function hy(r){return Hc(r)&&r.Tu.length<10}function fy(r,e){r.Tu.push(e);const t=l(r);t.Uo()&&t.ru&&t.ou(e.mutations)}function Zg(r){return Hc(r)&&!l(r).qo()&&r.Tu.length>0}function lg(r){l(r).start()}function py(r){return cg.apply(this,arguments)}function cg(){return cg=(0,ue.Z)(function*(r){l(r).au()}),cg.apply(this,arguments)}function gy(r){return ug.apply(this,arguments)}function ug(){return ug=(0,ue.Z)(function*(r){const e=l(r);for(const t of r.Tu)e.ou(t.mutations)}),ug.apply(this,arguments)}function Xg(r,e,t){return mf.apply(this,arguments)}function mf(){return mf=(0,ue.Z)(function*(r,e,t){const s=r.Tu.shift(),c=A.from(s,e,t);yield Yg(r,()=>r.remoteSyncer.applySuccessfulWrite(c)),yield zc(r)}),mf.apply(this,arguments)}function my(r,e){return vh.apply(this,arguments)}function vh(){return vh=(0,ue.Z)(function*(r,e){var t;e&&l(r).ru&&(yield(t=(0,ue.Z)(function*(s,c){if(Bn(f=c.code)&&f!==Ht.ABORTED){const E=s.Tu.shift();l(s).Go(),yield Yg(s,()=>s.remoteSyncer.rejectFailedWrite(E.batchId,c)),yield zc(s)}var f}),function(s,c){return t.apply(this,arguments)})(r,e)),Zg(r)&&lg(r)}),vh.apply(this,arguments)}function Qg(r,e){return tp.apply(this,arguments)}function tp(){return tp=(0,ue.Z)(function*(r,e){const t=jn(r);t.asyncQueue.verifyOperationInProgress(),_n("RemoteStore","RemoteStore received new credentials");const s=Hc(t);t.Au.add(3),yield gu(t),s&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield ba(t)}),tp.apply(this,arguments)}function dg(r,e){return u.apply(this,arguments)}function u(){return u=(0,ue.Z)(function*(r,e){const t=jn(r);e?(t.Au.delete(2),yield ba(t)):e||(t.Au.add(2),yield gu(t),t.Pu.set("Unknown"))}),u.apply(this,arguments)}function a(r){return r.Vu||(r.Vu=function(e,t,s){const c=jn(e);return c.lu(),new Wg(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:Ul.bind(null,r),co:pf.bind(null,r),eu:dy.bind(null,r)}),r.Ru.push(function(){var e=(0,ue.Z)(function*(t){t?(r.Vu.Go(),hf(r)?df(r):r.Pu.set("Unknown")):(yield r.Vu.stop(),ff(r))});return function(t){return e.apply(this,arguments)}}())),r.Vu}function l(r){return r.Su||(r.Su=function(e,t,s){const c=jn(e);return c.lu(),new Kg(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:py.bind(null,r),co:my.bind(null,r),cu:gy.bind(null,r),uu:Xg.bind(null,r)}),r.Ru.push(function(){var e=(0,ue.Z)(function*(t){t?(r.Su.Go(),yield zc(r)):(yield r.Su.stop(),r.Tu.length>0&&(_n("RemoteStore",`Stopping write stream with ${r.Tu.length} pending writes`),r.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Su}class p{constructor(e,t,s,c,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=f,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,s,c,f){const E=Date.now()+s,k=new p(e,t,E,c,f);return k.start(s),k}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hn(Ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I(r,e){if(Ji("AsyncQueue",`${e}: ${r}`),Yo(r))return new hn(Ht.UNAVAILABLE,`${e}: ${r}`);throw r}class R{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ln.comparator(t.key,s.key):(t,s)=>Ln.comparator(t.key,s.key),this.keyedMap=Xl(),this.sortedSet=new xr(this.comparator)}static emptySet(e){return new R(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof R)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=s.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new R;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class V{constructor(){this.Du=new xr(Ln.comparator)}track(e){const t=e.doc.key,s=this.Du.get(t);s?0!==e.type&&3===s.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==s.type?this.Du=this.Du.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Du=this.Du.remove(t):1===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):Kn():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,s)=>{e.push(s)}),e}}class te{constructor(e,t,s,c,f,E,k,G,J){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=f,this.fromCache=E,this.syncStateChanged=k,this.excludesMetadataChanges=G,this.hasCachedResults=J}static fromInitialDocuments(e,t,s,c,f){const E=[];return t.forEach(k=>{E.push({type:0,doc:k})}),new te(e,t,R.emptySet(t),E,s,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class pe{constructor(){this.xu=void 0,this.listeners=[]}}class Pe{constructor(){this.queries=new _c(e=>hd(e),Zl),this.onlineState="Unknown",this.Nu=new Set}}function Ft(r,e){return Yt.apply(this,arguments)}function Yt(){return Yt=(0,ue.Z)(function*(r,e){const t=jn(r),s=e.query;let c=!1,f=t.queries.get(s);if(f||(c=!0,f=new pe),c)try{f.xu=yield t.onListen(s)}catch(E){const k=I(E,`Initialization of query '${Tu(e.query)}' failed`);return void e.onError(k)}t.queries.set(s,f),f.listeners.push(e),e.ku(t.onlineState),f.xu&&e.Mu(f.xu)&&oi(t)}),Yt.apply(this,arguments)}function sn(r,e){return Rn.apply(this,arguments)}function Rn(){return Rn=(0,ue.Z)(function*(r,e){const t=jn(r),s=e.query;let c=!1;const f=t.queries.get(s);if(f){const E=f.listeners.indexOf(e);E>=0&&(f.listeners.splice(E,1),c=0===f.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),Rn.apply(this,arguments)}function Zn(r,e){const t=jn(r);let s=!1;for(const c of e){const E=t.queries.get(c.query);if(E){for(const k of E.listeners)k.Mu(c)&&(s=!0);E.xu=c}}s&&oi(t)}function Mr(r,e,t){const s=jn(r),c=s.queries.get(e);if(c)for(const f of c.listeners)f.onError(t);s.queries.delete(e)}function oi(r){r.Nu.forEach(e=>{e.next()})}class Mi{constructor(e,t,s){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=s||{}}Mu(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new te(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=te.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class Ms{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class Cs{constructor(e){this.serializer=e}ir(e){return tc(this.serializer,e)}rr(e){return e.metadata.exists?jh(this.serializer,e.document,!1):Ti.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Ts(e)}}class is{constructor(e,t,s){this.Qu=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mu(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const s=Ei.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,s=new Cs(this.serializer);for(const c of e)if(c.metadata.queries){const f=s.ir(c.metadata.name);for(const E of c.metadata.queries){const k=(t.get(E)||Zr()).add(f);t.set(E,k)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function Yf(r,e,t,s){return Zf.apply(this,arguments)}(e.localStore,new Cs(e.serializer),e.documents,e.Qu.id),s=e.zu(e.documents);for(const c of e.queries)yield Vg(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function mu(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class sc{constructor(e){this.key=e}}class yu{constructor(e){this.key=e}}class Sc{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Zr(),this.mutatedKeys=Zr(),this.Zu=Nh(e),this.tc=new R(this.Zu)}get ec(){return this.Ju}nc(e,t){const s=t?t.sc:new V,c=t?t.tc:this.tc;let f=t?t.mutatedKeys:this.mutatedKeys,E=c,k=!1;const G="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,J="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((ce,nt)=>{const Bt=c.get(ce),fn=vc(this.query,nt)?nt:null,Mn=!!Bt&&this.mutatedKeys.has(Bt.key),Fn=!!fn&&(fn.hasLocalMutations||this.mutatedKeys.has(fn.key)&&fn.hasCommittedMutations);let gr=!1;Bt&&fn?Bt.data.isEqual(fn.data)?Mn!==Fn&&(s.track({type:3,doc:fn}),gr=!0):this.ic(Bt,fn)||(s.track({type:2,doc:fn}),gr=!0,(G&&this.Zu(fn,G)>0||J&&this.Zu(fn,J)<0)&&(k=!0)):!Bt&&fn?(s.track({type:0,doc:fn}),gr=!0):Bt&&!fn&&(s.track({type:1,doc:Bt}),gr=!0,(G||J)&&(k=!0)),gr&&(fn?(E=E.add(fn),f=Fn?f.add(ce):f.delete(ce)):(E=E.delete(ce),f=f.delete(ce)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const ce="F"===this.query.limitType?E.last():E.first();E=E.delete(ce.key),f=f.delete(ce.key),s.track({type:1,doc:ce})}return{tc:E,sc:s,ji:k,mutatedKeys:f}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const f=e.sc.Cu();f.sort((J,ce)=>function(nt,Bt){const fn=Mn=>{switch(Mn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kn()}};return fn(nt)-fn(Bt)}(J.type,ce.type)||this.Zu(J.doc,ce.doc)),this.rc(s);const E=t?this.oc():[],k=0===this.Xu.size&&this.current?1:0,G=k!==this.Yu;return this.Yu=k,0!==f.length||G?{snapshot:new te(this.query,e.tc,c,f,e.mutatedKeys,0===k,G,!1,!!s&&s.resumeToken.approximateByteSize()>0),uc:E}:{uc:E}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new V,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=Zr(),this.tc.forEach(s=>{this.cc(s.key)&&(this.Xu=this.Xu.add(s.key))});const t=[];return e.forEach(s=>{this.Xu.has(s)||t.push(new yu(s))}),this.Xu.forEach(s=>{e.has(s)||t.push(new sc(s))}),t}ac(e){this.Ju=e.sr,this.Xu=Zr();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return te.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class qu{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class np{constructor(e){this.key=e,this.lc=!1}}class rp{constructor(e,t,s,c,f,E){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=E,this.fc={},this.dc=new _c(k=>hd(k),Zl),this._c=new Map,this.wc=new Set,this.mc=new xr(Ln.comparator),this.gc=new Map,this.yc=new zf,this.Ic={},this.Tc=new Map,this.Ec=ju.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function ip(r,e){return _h.apply(this,arguments)}function _h(){return _h=(0,ue.Z)(function*(r,e){const t=mm(r);let s,c;const f=t.dc.get(e);if(f)s=f.targetId,t.sharedClientState.addLocalQueryTarget(s),c=f.view.hc();else{const E=yield Wu(t.localStore,wo(e)),k=t.sharedClientState.addLocalQueryTarget(E.targetId);s=E.targetId,c=yield Eh(t,e,s,"current"===k,E.resumeToken),t.isPrimaryClient&&sg(t.remoteStore,E)}return c}),_h.apply(this,arguments)}function Eh(r,e,t,s,c){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,ue.Z)(function*(r,e,t,s,c){r.Rc=(nt,Bt,fn)=>{return(Mn=(0,ue.Z)(function*(Fn,gr,ai,ki){let li=gr.view.nc(ai);li.ji&&(li=yield af(Fn.localStore,gr.query,!1).then(({documents:bs})=>gr.view.nc(bs,li)));const La=ki&&ki.targetChanges.get(gr.targetId),Ps=gr.view.applyChanges(li,Fn.isPrimaryClient,La);return wy(Fn,gr.targetId,Ps.uc),Ps.snapshot}),function(Fn,gr,ai,ki){return Mn.apply(this,arguments)})(r,nt,Bt,fn);var Mn};const f=yield af(r.localStore,e,!0),E=new Sc(e,f.sr),k=E.nc(f.documents),G=ec.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,c),J=E.applyChanges(k,r.isPrimaryClient,G);wy(r,t,J.uc);const ce=new qu(e,t,E);return r.dc.set(e,ce),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),J.snapshot}),Jg.apply(this,arguments)}function sv(r,e){return em.apply(this,arguments)}function em(){return em=(0,ue.Z)(function*(r,e){const t=jn(r),s=t.dc.get(e),c=t._c.get(s.targetId);if(c.length>1)return t._c.set(s.targetId,c.filter(f=>!Zl(f,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Ku(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),xd(t.remoteStore,s.targetId),Md(t,s.targetId)}).catch(Rr))):(Md(t,s.targetId),yield Ku(t.localStore,s.targetId,!0))}),em.apply(this,arguments)}function tm(){return tm=(0,ue.Z)(function*(r,e,t){const s=ym(r);try{const c=yield function(f,E){const k=jn(f),G=ci.now(),J=E.reduce((Bt,fn)=>Bt.add(fn.key),Zr());let ce,nt;return k.persistence.runTransaction("Locally write mutations","readwrite",Bt=>{let fn=js(),Mn=Zr();return k.Xi.getEntries(Bt,J).next(Fn=>{fn=Fn,fn.forEach((gr,ai)=>{ai.isValidDocument()||(Mn=Mn.add(gr))})}).next(()=>k.localDocuments.getOverlayedDocuments(Bt,fn)).next(Fn=>{ce=Fn;const gr=[];for(const ai of E){const ki=cu(ai,ce.get(ai.key).overlayedDocument);null!=ki&&gr.push(new Ql(ai.key,ki,Wl(ki.value.mapValue),ms.exists(!0)))}return k.mutationQueue.addMutationBatch(Bt,G,gr,E)}).next(Fn=>{nt=Fn;const gr=Fn.applyToLocalDocumentSet(ce,Mn);return k.documentOverlayCache.saveOverlays(Bt,Fn.batchId,gr)})}).then(()=>({batchId:nt.batchId,changes:iu(ce)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(f,E,k){let G=f.Ic[f.currentUser.toKey()];G||(G=new xr(pr)),G=G.insert(E,k),f.Ic[f.currentUser.toKey()]=G}(s,c.batchId,t),yield vu(s,c.changes),yield zc(s.remoteStore)}catch(c){const f=I(c,"Failed to persist write");t.reject(f)}}),tm.apply(this,arguments)}function yy(r,e){return nm.apply(this,arguments)}function nm(){return nm=(0,ue.Z)(function*(r,e){const t=jn(r);try{const s=yield function Xp(r,e){const t=jn(r),s=e.snapshotVersion;let c=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const E=t.Xi.newChangeBuffer({trackRemovals:!0});c=t.Hi;const k=[];e.targetChanges.forEach((ce,nt)=>{const Bt=c.get(nt);if(!Bt)return;k.push(t.Fs.removeMatchingKeys(f,ce.removedDocuments,nt).next(()=>t.Fs.addMatchingKeys(f,ce.addedDocuments,nt)));let fn=Bt.withSequenceNumber(f.currentSequenceNumber);var Mn,Fn,gr;null!==e.targetMismatches.get(nt)?fn=fn.withResumeToken(no.EMPTY_BYTE_STRING,sr.min()).withLastLimboFreeSnapshotVersion(sr.min()):ce.resumeToken.approximateByteSize()>0&&(fn=fn.withResumeToken(ce.resumeToken,s)),c=c.insert(nt,fn),Fn=fn,gr=ce,(0===(Mn=Bt).resumeToken.approximateByteSize()||Fn.snapshotVersion.toMicroseconds()-Mn.snapshotVersion.toMicroseconds()>=3e8||gr.addedDocuments.size+gr.modifiedDocuments.size+gr.removedDocuments.size>0)&&k.push(t.Fs.updateTargetData(f,fn))});let G=js(),J=Zr();if(e.documentUpdates.forEach(ce=>{e.resolvedLimboDocuments.has(ce)&&k.push(t.persistence.referenceDelegate.updateLimboDocument(f,ce))}),k.push(rf(f,E,e.documentUpdates).next(ce=>{G=ce.er,J=ce.nr})),!s.isEqual(sr.min())){const ce=t.Fs.getLastRemoteSnapshotVersion(f).next(nt=>t.Fs.setTargetsMetadata(f,f.currentSequenceNumber,s));k.push(ce)}return $t.waitFor(k).next(()=>E.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,G,J)).next(()=>G)}).then(f=>(t.Hi=c,f))}(t.localStore,e);e.targetChanges.forEach((c,f)=>{const E=t.gc.get(f);E&&(dr(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?E.lc=!0:c.modifiedDocuments.size>0?dr(E.lc):c.removedDocuments.size>0&&(dr(E.lc),E.lc=!1))}),yield vu(t,s,e)}catch(s){yield Rr(s)}}),nm.apply(this,arguments)}function vy(r,e,t){const s=jn(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.dc.forEach((f,E)=>{const k=E.view.ku(e);k.snapshot&&c.push(k.snapshot)}),function(f,E){const k=jn(f);k.onlineState=E;let G=!1;k.queries.forEach((J,ce)=>{for(const nt of ce.listeners)nt.ku(E)&&(G=!0)}),G&&oi(k)}(s.eventManager,e),c.length&&s.fc.eu(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function av(r,e,t){return _y.apply(this,arguments)}function _y(){return _y=(0,ue.Z)(function*(r,e,t){const s=jn(r);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.gc.get(e),f=c&&c.key;if(f){let E=new xr(Ln.comparator);E=E.insert(f,Ti.newNoDocument(f,sr.min()));const k=Zr().add(f),G=new Cc(sr.min(),new Map,new xr(pr),E,k);yield yy(s,G),s.mc=s.mc.remove(f),s.gc.delete(e),op(s)}else yield Ku(s.localStore,e,!1).then(()=>Md(s,e,t)).catch(Rr)}),_y.apply(this,arguments)}function E_(r,e){return rm.apply(this,arguments)}function rm(){return rm=(0,ue.Z)(function*(r,e){const t=jn(r),s=e.batch.batchId;try{const c=yield function Zp(r,e){const t=jn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),f=t.Xi.newChangeBuffer({trackRemovals:!0});return function(E,k,G,J){const ce=G.batch,nt=ce.keys();let Bt=$t.resolve();return nt.forEach(fn=>{Bt=Bt.next(()=>J.getEntry(k,fn)).next(Mn=>{const Fn=G.docVersions.get(fn);dr(null!==Fn),Mn.version.compareTo(Fn)<0&&(ce.applyToRemoteDocument(Mn,G),Mn.isValidDocument()&&(Mn.setReadTime(G.commitVersion),J.addEntry(Mn)))})}),Bt.next(()=>E.mutationQueue.removeMutationBatch(k,ce))}(t,s,e,f).next(()=>f.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(E){let k=Zr();for(let G=0;G<E.mutationResults.length;++G)E.mutationResults[G].transformResults.length>0&&(k=k.add(E.batch.mutations[G].key));return k}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}(t.localStore,e);sp(t,s,null),Iy(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield vu(t,c)}catch(c){yield Rr(c)}}),rm.apply(this,arguments)}function I_(r,e,t){return im.apply(this,arguments)}function im(){return im=(0,ue.Z)(function*(r,e,t){const s=jn(r);try{const c=yield function(f,E){const k=jn(f);return k.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let J;return k.mutationQueue.lookupMutationBatch(G,E).next(ce=>(dr(null!==ce),J=ce.keys(),k.mutationQueue.removeMutationBatch(G,ce))).next(()=>k.mutationQueue.performConsistencyCheck(G)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(G,J,E)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,J)).next(()=>k.localDocuments.getDocuments(G,J))})}(s.localStore,e);sp(s,e,t),Iy(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield vu(s,c)}catch(c){yield Rr(c)}}),im.apply(this,arguments)}function hg(){return hg=(0,ue.Z)(function*(r,e){const t=jn(r);Hc(t.remoteStore)||_n("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(f){const E=jn(f);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>E.mutationQueue.getHighestUnacknowledgedBatchId(k))}(t.localStore);if(-1===s)return void e.resolve();const c=t.Tc.get(s)||[];c.push(e),t.Tc.set(s,c)}catch(s){const c=I(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),hg.apply(this,arguments)}function Iy(r,e){(r.Tc.get(e)||[]).forEach(t=>{t.resolve()}),r.Tc.delete(e)}function sp(r,e,t){const s=jn(r);let c=s.Ic[s.currentUser.toKey()];if(c){const f=c.get(e);f&&(t?f.reject(t):f.resolve(),c=c.remove(e)),s.Ic[s.currentUser.toKey()]=c}}function Md(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.dc.delete(s),t&&r.fc.vc(s,t);r._c.delete(e),r.isPrimaryClient&&r.yc.ps(e).forEach(s=>{r.yc.containsKey(s)||sm(r,s)})}function sm(r,e){r.wc.delete(e.path.canonicalString());const t=r.mc.get(e);null!==t&&(xd(r.remoteStore,t),r.mc=r.mc.remove(e),r.gc.delete(t),op(r))}function wy(r,e,t){for(const s of t)s instanceof sc?(r.yc.addReference(s.key,e),om(r,s)):s instanceof yu?(_n("SyncEngine","Document no longer in limbo: "+s.key),r.yc.removeReference(s.key,e),r.yc.containsKey(s.key)||sm(r,s.key)):Kn()}function om(r,e){const t=e.key,s=t.path.canonicalString();r.mc.get(t)||r.wc.has(s)||(_n("SyncEngine","New document in limbo: "+t),r.wc.add(s),op(r))}function op(r){for(;r.wc.size>0&&r.mc.size<r.maxConcurrentLimboResolutions;){const e=r.wc.values().next().value;r.wc.delete(e);const t=new Ln(Ei.fromString(e)),s=r.Ec.next();r.gc.set(s,new np(t)),r.mc=r.mc.insert(t,s),sg(r.remoteStore,new bc(wo(Pl(t.path)),s,"TargetPurposeLimboResolution",z.ct))}}function vu(r,e,t){return am.apply(this,arguments)}function am(){return am=(0,ue.Z)(function*(r,e,t){const s=jn(r),c=[],f=[],E=[];var k;s.dc.isEmpty()||(s.dc.forEach((k,G)=>{E.push(s.Rc(G,e,t).then(J=>{if((J||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(G.targetId,null!=J&&J.fromCache?"not-current":"current"),J){c.push(J);const ce=qp.Bi(G.targetId,J);f.push(ce)}}))}),yield Promise.all(E),s.fc.eu(c),yield(k=(0,ue.Z)(function*(G,J){const ce=jn(G);try{yield ce.persistence.runTransaction("notifyLocalViewChanges","readwrite",nt=>$t.forEach(J,Bt=>$t.forEach(Bt.$i,fn=>ce.persistence.referenceDelegate.addReference(nt,Bt.targetId,fn)).next(()=>$t.forEach(Bt.Fi,fn=>ce.persistence.referenceDelegate.removeReference(nt,Bt.targetId,fn)))))}catch(nt){if(!Yo(nt))throw nt;_n("LocalStore","Failed to update sequence numbers: "+nt)}for(const nt of J){const Bt=nt.targetId;if(!nt.fromCache){const fn=ce.Hi.get(Bt),Fn=fn.withLastLimboFreeSnapshotVersion(fn.snapshotVersion);ce.Hi=ce.Hi.insert(Bt,Fn)}}}),function(G,J){return k.apply(this,arguments)})(s.localStore,f))}),am.apply(this,arguments)}function Cy(r,e){return lm.apply(this,arguments)}function lm(){return lm=(0,ue.Z)(function*(r,e){const t=jn(r);if(!t.currentUser.isEqual(e)){_n("SyncEngine","User change. New user:",e.toKey());const s=yield nf(t.localStore,e);t.currentUser=e,(c=t).Tc.forEach(E=>{E.forEach(k=>{k.reject(new hn(Ht.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Tc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield vu(t,s.tr)}var c}),lm.apply(this,arguments)}function lv(r,e){const t=jn(r),s=t.gc.get(e);if(s&&s.lc)return Zr().add(s.key);{let c=Zr();const f=t._c.get(e);if(!f)return c;for(const E of f){const k=t.dc.get(E);c=c.unionWith(k.view.ec)}return c}}function by(r,e){return cm.apply(this,arguments)}function cm(){return cm=(0,ue.Z)(function*(r,e){const t=jn(r),s=yield af(t.localStore,e.query,!0),c=e.view.ac(s);return t.isPrimaryClient&&wy(t,e.targetId,c.uc),c}),cm.apply(this,arguments)}function w_(r,e){return um.apply(this,arguments)}function um(){return um=(0,ue.Z)(function*(r,e){const t=jn(r);return ic(t.localStore,e).then(s=>vu(t,s))}),um.apply(this,arguments)}function cv(r,e,t,s){return dm.apply(this,arguments)}function dm(){return dm=(0,ue.Z)(function*(r,e,t,s){const c=jn(r),f=yield function(E,k){const G=jn(E),J=jn(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",ce=>J.Vn(ce,k).next(nt=>nt?G.localDocuments.getDocuments(ce,nt):$t.resolve(null)))}(c.localStore,e);var k;null!==f?("pending"===t?yield zc(c.remoteStore):"acknowledged"===t||"rejected"===t?(sp(c,e,s||null),Iy(c,e),k=e,jn(jn(c.localStore).mutationQueue).Dn(k)):Kn(),yield vu(c,f)):_n("SyncEngine","Cannot apply mutation batch with id: "+e)}),dm.apply(this,arguments)}function Dy(){return Dy=(0,ue.Z)(function*(r,e){const t=jn(r);if(mm(t),ym(t),!0===e&&!0!==t.Ac){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield Ty(t,s.toArray());t.Ac=!0,yield dg(t.remoteStore,!0);for(const f of c)sg(t.remoteStore,f)}else if(!1===e&&!1!==t.Ac){const s=[];let c=Promise.resolve();t._c.forEach((f,E)=>{t.sharedClientState.isLocalQueryTarget(E)?s.push(E):c=c.then(()=>(Md(t,E),Ku(t.localStore,E,!0))),xd(t.remoteStore,E)}),yield c,yield Ty(t,s),function(f){const E=jn(f);E.gc.forEach((k,G)=>{xd(E.remoteStore,G)}),E.yc.Is(),E.gc=new Map,E.mc=new xr(Ln.comparator)}(t),t.Ac=!1,yield dg(t.remoteStore,!1)}}),Dy.apply(this,arguments)}function Ty(r,e,t){return hm.apply(this,arguments)}function hm(){return hm=(0,ue.Z)(function*(r,e,t){const s=jn(r),c=[],f=[];for(const E of e){let k;const G=s._c.get(E);if(G&&0!==G.length){k=yield Wu(s.localStore,wo(G[0]));for(const J of G){const ce=s.dc.get(J),nt=yield by(s,ce);nt.snapshot&&f.push(nt.snapshot)}}else{const J=yield qf(s.localStore,E);k=yield Wu(s.localStore,J),yield Eh(s,fm(J),E,!1,k.resumeToken)}c.push(k)}return s.fc.eu(f),c}),hm.apply(this,arguments)}function fm(r){return ru(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Sy(r){const e=jn(r);return jn(jn(e.localStore).persistence).Mi()}function dv(r,e,t,s){return pm.apply(this,arguments)}function pm(){return pm=(0,ue.Z)(function*(r,e,t,s){const c=jn(r);if(c.Ac)return void _n("SyncEngine","Ignoring unexpected query state notification.");const f=c._c.get(e);if(f&&f.length>0)switch(t){case"current":case"not-current":{const E=yield ic(c.localStore,kh(f[0])),k=Cc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,no.EMPTY_BYTE_STRING);yield vu(c,E,k);break}case"rejected":yield Ku(c.localStore,e,!0),Md(c,e,s);break;default:Kn()}}),pm.apply(this,arguments)}function hv(r,e,t){return gm.apply(this,arguments)}function gm(){return gm=(0,ue.Z)(function*(r,e,t){const s=mm(r);if(s.Ac){for(const c of e){if(s._c.has(c)){_n("SyncEngine","Adding an already active target "+c);continue}const f=yield qf(s.localStore,c),E=yield Wu(s.localStore,f);yield Eh(s,fm(f),E.targetId,!1,E.resumeToken),sg(s.remoteStore,E)}for(const c of t)s._c.has(c)&&(yield Ku(s.localStore,c,!1).then(()=>{xd(s.remoteStore,c),Md(s,c)}).catch(Rr))}}),gm.apply(this,arguments)}function mm(r){const e=jn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=yy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=av.bind(null,e),e.fc.eu=Zn.bind(null,e.eventManager),e.fc.vc=Mr.bind(null,e.eventManager),e}function ym(r){const e=jn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I_.bind(null,e),e}class ap{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.serializer=pl(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $g(this.persistence,new Yp,e.initialUser,this.serializer)}createPersistence(e){return new ef(dh.js,this.serializer)}createSharedClientState(e){return new zg}terminate(){var e=this;return(0,ue.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Yu extends ap{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,ue.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield ym(s.bc.syncEngine),yield zc(s.bc.remoteStore),yield s.persistence.pi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return $g(this.persistence,new Yp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Xh(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new O(t,this.persistence);return new w(e.asyncQueue,s)}createPersistence(e){const t=Kf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Na.withCacheSize(this.cacheSizeBytes):Na.DEFAULT;return new Kp(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,ly(),rg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zg}}class pv extends Yu{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,ue.Z)(function*(){yield t().call(s,e);const c=s.bc.syncEngine;s.sharedClientState instanceof Qf&&(s.sharedClientState.syncEngine={Qr:cv.bind(null,c),jr:dv.bind(null,c),zr:hv.bind(null,c),Mi:Sy.bind(null,c),Gr:w_.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.pi(function(){var f=(0,ue.Z)(function*(E){yield function uv(r,e){return Dy.apply(this,arguments)}(s.bc.syncEngine,E),s.gcScheduler&&(E&&!s.gcScheduler.started?s.gcScheduler.start():E||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(E&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():E||s.indexBackfillerScheduler.stop())});return function(E){return f.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ly();if(!Qf.D(t))throw new hn(Ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Kf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qf(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class lp{initialize(e,t){var s=this;return(0,ue.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>vy(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=Cy.bind(null,s.syncEngine),yield dg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Pe}createDatastore(e){const t=pl(e.databaseInfo.databaseId),s=new ay(e.databaseInfo);return new cy(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,f=k=>vy(this.syncEngine,k,0),E=eg.D()?new eg:new sy,new Ca(t,s,c,f,E);var t,s,c,f,E}createSyncEngine(e,t){return function(s,c,f,E,k,G,J){const ce=new rp(s,c,f,E,k,G);return J&&(ce.Ac=!0),ce}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ue.Z)(function*(t){const s=jn(t);_n("RemoteStore","RemoteStore shutting down."),s.Au.add(5),yield gu(s),s.vu.shutdown(),s.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _m(r,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Zu{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):Ji("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ay{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new si,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(s=>{s&&s.Gu()?this.metadata.resolve(s.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Ku)}`))},s=>this.metadata.reject(s))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const s=e.Cc.decode(t),c=Number(s);isNaN(c)&&e.kc(`length string (${s}) is not valid number`);const f=yield e.Mc(c);return new Ms(JSON.parse(f),t.length+c)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,ue.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Mc(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const s=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class C_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new hn(Ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,ue.Z)(function*(f,E){const k=jn(f),G=wd(k.serializer)+"/documents",J={documents:E.map(fn=>Ed(k.serializer,fn))},ce=yield k.Ao("BatchGetDocuments",G,J,E.length),nt=new Map;ce.forEach(fn=>{const Mn=function th(r,e){return"found"in e?function(t,s){dr(!!s.found);const c=tc(t,s.found.name),f=Ts(s.found.updateTime),E=s.found.createTime?Ts(s.found.createTime):sr.min(),k=new Vs({mapValue:{fields:s.found.fields}});return Ti.newFoundDocument(c,f,E,k)}(r,e):"missing"in e?function(t,s){dr(!!s.missing),dr(!!s.readTime);const c=tc(t,s.missing),f=Ts(s.readTime);return Ti.newNoDocument(c,f)}(r,e):Kn()}(k.serializer,fn);nt.set(Mn.key.toString(),Mn)});const Bt=[];return E.forEach(fn=>{const Mn=nt.get(fn.toString());dr(!!Mn),Bt.push(Mn)}),Bt}),function(f,E){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new C(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const f=Ln.fromPath(c);e.mutations.push(new g(f,e.precondition(f)))}),yield(s=(0,ue.Z)(function*(c,f){const E=jn(c),k=wd(E.serializer)+"/documents",G={writes:f.map(J=>uu(E.serializer,J))};yield E.po("Commit",k,G)}),function(c,f){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kn();t=sr.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new hn(Ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(sr.min())?ms.exists(!1):ms.updateTime(t):ms.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(sr.min()))throw new hn(Ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ms.updateTime(t)}return ms.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xy{constructor(e,t,s,c,f){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=f,this.Fc=s.maxAttempts,this.Lo=new uf(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,ue.Z)(function*(){const t=new C_(e.datastore),s=e.Lc(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(f=>{e.qc(f)}))}).catch(c=>{e.qc(c)})}))}Lc(e){try{const t=this.updateFunction(e);return!re(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Bn(t)}return!1}}class Q0{constructor(e,t,s,c){var f=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=Wi.UNAUTHENTICATED,this.clientId=ma.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var E=(0,ue.Z)(function*(k){_n("FirestoreClient","Received user=",k.uid),yield f.authCredentialListener(k),f.user=k});return function(k){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(s,E=>(_n("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,ue.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new hn(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=I(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function Ry(r,e){return My.apply(this,arguments)}function My(){return My=(0,ue.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),_n("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var c=(0,ue.Z)(function*(f){s.isEqual(f)||(yield nf(e.localStore,f),s=f)});return function(f){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),My.apply(this,arguments)}function Py(r,e){return Em.apply(this,arguments)}function Em(){return Em=(0,ue.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield Jo(r);_n("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(c=>Qg(e.remoteStore,c)),r.setAppCheckTokenChangeListener((c,f)=>Qg(e.remoteStore,f)),r._onlineComponents=e}),Em.apply(this,arguments)}function gv(r){return"FirebaseError"===r.name?r.code===Ht.FAILED_PRECONDITION||r.code===Ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function Jo(r){return Im.apply(this,arguments)}function Im(){return Im=(0,ue.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){_n("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ry(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!gv(t))throw t;mi("Error using user provided cache. Falling back to memory cache: "+t),yield Ry(r,new ap)}}else _n("FirestoreClient","Using default OfflineComponentProvider"),yield Ry(r,new ap);return r._offlineComponents}),Im.apply(this,arguments)}function wm(r){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,ue.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(_n("FirestoreClient","Using user provided OnlineComponentProvider"),yield Py(r,r._uninitializedComponentsProvider._online)):(_n("FirestoreClient","Using default OnlineComponentProvider"),yield Py(r,new lp))),r._onlineComponents}),Oy.apply(this,arguments)}function ky(r){return Jo(r).then(e=>e.persistence)}function Cm(r){return Jo(r).then(e=>e.localStore)}function Ny(r){return wm(r).then(e=>e.remoteStore)}function bm(r){return wm(r).then(e=>e.syncEngine)}function cp(r){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,ue.Z)(function*(r){const e=yield wm(r),t=e.eventManager;return t.onListen=ip.bind(null,e.syncEngine),t.onUnlisten=sv.bind(null,e.syncEngine),t}),Fy.apply(this,arguments)}function D_(r,e,t={}){const s=new si;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(c,f,E,k,G){const J=new Zu({next:nt=>{f.enqueueAndForget(()=>sn(c,ce));const Bt=nt.docs.has(E);!Bt&&nt.fromCache?G.reject(new hn(Ht.UNAVAILABLE,"Failed to get document because the client is offline.")):Bt&&nt.fromCache&&k&&"server"===k.source?G.reject(new hn(Ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(nt)},error:nt=>G.reject(nt)}),ce=new Mi(Pl(E.path),J,{includeMetadataChanges:!0,Uu:!0});return Ft(c,ce)}(yield cp(r),r.asyncQueue,e,t,s)})),s.promise}function Dm(r,e,t={}){const s=new si;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(c,f,E,k,G){const J=new Zu({next:nt=>{f.enqueueAndForget(()=>sn(c,ce)),nt.fromCache&&"server"===k.source?G.reject(new hn(Ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(nt)},error:nt=>G.reject(nt)}),ce=new Mi(E,J,{includeMetadataChanges:!0,Uu:!0});return Ft(c,ce)}(yield cp(r),r.asyncQueue,e,t,s)})),s.promise}const Gc=new Map;function Ac(r,e,t){if(!t)throw new hn(Ht.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Ly(r,e,t,s){if(!0===e&&!0===s)throw new hn(Ht.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function $y(r){if(!Ln.isDocumentKey(r))throw new hn(Ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _v(r){if(Ln.isDocumentKey(r))throw new hn(Ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Tm(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Kn()}function Fi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new hn(Ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tm(r);throw new hn(Ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Ev(r,e){if(e<=0)throw new hn(Ht.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Sm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new hn(Ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new hn(Ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ly("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new hn(Ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new hn(Ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cc;switch(t.type){case"firstParty":return new qc(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new hn(Ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gc.get(e);t&&(_n("ComponentProvider","Removing Datastore"),Gc.delete(e),t.terminate())}(this),Promise.resolve()}}class Hs{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hs(this.firestore,e,this._key)}}class Za{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Za(this.firestore,e,this._query)}}class Ju extends Za{constructor(e,t,s){super(e,t,Pl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hs(this.firestore,null,new Ln(e))}withConverter(e){return new Ju(this.firestore,e,this._path)}}function By(r,e,...t){if(r=(0,tt.m9)(r),Ac("collection","path",e),r instanceof Pd){const s=Ei.fromString(e,...t);return _v(s),new Ju(r,null,s)}{if(!(r instanceof Hs||r instanceof Ju))throw new hn(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ei.fromString(e,...t));return _v(s),new Ju(r.firestore,null,s)}}function vf(r,e,...t){if(r=(0,tt.m9)(r),1===arguments.length&&(e=ma.A()),Ac("doc","path",e),r instanceof Pd){const s=Ei.fromString(e,...t);return $y(s),new Hs(r,null,new Ln(s))}{if(!(r instanceof Hs||r instanceof Ju))throw new hn(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ei.fromString(e,...t));return $y(s),new Hs(r.firestore,r instanceof Ju?r.converter:null,new Ln(s))}}function Cv(r,e){return r=(0,tt.m9)(r),e=(0,tt.m9)(e),(r instanceof Hs||r instanceof Ju)&&(e instanceof Hs||e instanceof Ju)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Am(r,e){return r=(0,tt.m9)(r),e=(0,tt.m9)(e),r instanceof Za&&e instanceof Za&&r.firestore===e.firestore&&Zl(r._query,e._query)&&r.converter===e.converter}class bv{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new uf(this,"async_queue_retry"),this.Yc=()=>{const t=rg();t&&_n("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=rg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=rg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new si;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,ue.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!Yo(t))throw t;_n("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(s=>{throw this.zc=s,this.Wc=!1,Ji("INTERNAL UNHANDLED ERROR: ",function(f){let E=f.message||"";return f.stack&&(E=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),E}(s)),s}).then(s=>(this.Wc=!1,s))));return this.Kc=t,t}enqueueAfterDelay(e,t,s){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const c=p.createAndSchedule(this,e,t,s,f=>this.ea(f));return this.jc.push(c),c}Xc(){this.zc&&Kn()}verifyOperationInProgress(){}na(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function fg(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(r)}class xm{constructor(){this._progressObserver={},this._taskCompletionResolver=new si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zs extends Pd{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new bv,this._persistenceKey=(null==c?void 0:c.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Uy(this),this._firestoreClient.terminate()}}function Vo(r){return r._firestoreClient||Uy(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Uy(r){var e,t,s;const c=r._freezeSettings(),f=(k=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Ma(r._databaseId,k,r._persistenceKey,(J=c).host,J.ssl,J.experimentalForceLongPolling,J.experimentalAutoDetectLongPolling,J.useFetchStreams));var k,J;r._firestoreClient=new Q0(r._authCredentials,r._appCheckCredentials,r._queue,f),null!==(t=c.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=c.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.cache.kind,_offline:c.cache._offlineComponentProvider,_online:c.cache._onlineComponentProvider})}function Av(r,e,t){const s=new si;return r.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield Ry(r,t),yield Py(r,e),s.resolve()}catch(c){const f=c;if(!gv(f))throw f;mi("Error enabling indexeddb cache. Falling back to memory cache: "+f),s.reject(f)}})).then(()=>s.promise)}function xv(r){if(r._initialized||r._terminated)throw new hn(Ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ed{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ed(no.fromBase64String(e))}catch(t){throw new hn(Ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ed(no.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Od{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new hn(Ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _f{constructor(e){this._methodName=e}}class Rm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new hn(Ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new hn(Ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pr(this._lat,e._lat)||pr(this._long,e._long)}}const L_=/^__.*__$/;class $_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms):new cl(e,this.data,t,this.fieldTransforms)}}class Vy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jy(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kn()}}class gg{constructor(e,t,s,c,f,E){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,void 0===f&&this.oa(),this.fieldTransforms=f||[],this.fieldMask=E||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new gg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.la(e),c}fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.oa(),c}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return km(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(jy(this.ua)&&L_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Rv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||pl(e)}ga(e,t,s,c=!1){return new gg({ua:e,methodName:t,ma:s,path:fs.emptyPath(),ha:!1,wa:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(r){const e=r._freezeSettings(),t=pl(r._databaseId);return new Rv(r._databaseId,!!e.ignoreUndefinedProperties,t)}function mg(r,e,t,s,c,f={}){const E=r.ga(f.merge||f.mergeFields?2:0,e,t,c);Om("Data must be an object, but it was:",E,s);const k=Pm(s,E);let G,J;if(f.merge)G=new ps(E.fieldMask),J=E.fieldTransforms;else if(f.mergeFields){const ce=[];for(const nt of f.mergeFields){const Bt=hp(e,nt,t);if(!E.contains(Bt))throw new hn(Ht.INVALID_ARGUMENT,`Field '${Bt}' is specified in your field mask but missing from your input data.`);Ov(ce,Bt)||ce.push(Bt)}G=new ps(ce),J=E.fieldTransforms.filter(nt=>G.covers(nt.field))}else G=null,J=E.fieldTransforms;return new $_(new Vs(k),G,J)}class up extends _f{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}function Hy(r,e,t){return new gg({ua:3,ma:e.settings.ma,methodName:r._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Mm extends _f{_toFieldTransform(e){return new qd(e.path,new Ic)}isEqual(e){return e instanceof Mm}}class Mv extends _f{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Hy(this,e,!0),s=this.ya.map(f=>dp(f,t)),c=new ou(s);return new qd(e.path,c)}isEqual(e){return this===e}}class Pv extends _f{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Hy(this,e,!0),s=this.ya.map(f=>dp(f,t)),c=new wc(s);return new qd(e.path,c)}isEqual(e){return this===e}}class Ef extends _f{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new Ol(e.serializer,wa(e.serializer,this.pa));return new qd(e.path,t)}isEqual(e){return this===e}}function zy(r,e,t,s){const c=r.ga(1,e,t);Om("Data must be an object, but it was:",c,s);const f=[],E=Vs.empty();ol(s,(G,J)=>{const ce=Fr(e,G,t);J=(0,tt.m9)(J);const nt=c.fa(ce);if(J instanceof up)f.push(ce);else{const Bt=dp(J,nt);null!=Bt&&(f.push(ce),E.set(ce,Bt))}});const k=new ps(f);return new Vy(E,k,c.fieldTransforms)}function Gy(r,e,t,s,c,f){const E=r.ga(1,e,t),k=[hp(e,s,t)],G=[c];if(f.length%2!=0)throw new hn(Ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Bt=0;Bt<f.length;Bt+=2)k.push(hp(e,f[Bt])),G.push(f[Bt+1]);const J=[],ce=Vs.empty();for(let Bt=k.length-1;Bt>=0;--Bt)if(!Ov(J,k[Bt])){const fn=k[Bt];let Mn=G[Bt];Mn=(0,tt.m9)(Mn);const Fn=E.fa(fn);if(Mn instanceof up)J.push(fn);else{const gr=dp(Mn,Fn);null!=gr&&(J.push(fn),ce.set(fn,gr))}}const nt=new ps(J);return new Vy(ce,nt,E.fieldTransforms)}function If(r,e,t,s=!1){return dp(t,r.ga(s?4:3,e))}function dp(r,e){if(B_(r=(0,tt.m9)(r)))return Om("Unsupported field value:",e,r),Pm(r,e);if(r instanceof _f)return function(t,s){if(!jy(s.ua))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,s){const c=[];let f=0;for(const E of t){let k=dp(E,s.da(f));null==k&&(k={nullValue:"NULL_VALUE"}),c.push(k),f++}return{arrayValue:{values:c}}}(r,e)}return function(t,s){if(null===(t=(0,tt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wa(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=ci.fromDate(t);return{timestampValue:ku(s.serializer,c)}}if(t instanceof ci){const c=new ci(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ku(s.serializer,c)}}if(t instanceof Rm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ed)return{bytesValue:Uh(s.serializer,t._byteString)};if(t instanceof Hs){const c=s.databaseId,f=t.firestore._databaseId;if(!f.isEqual(c))throw s._a(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Vh(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Tm(t)}`)}(r,e)}function Pm(r,e){const t={};return Jc(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ol(r,(s,c)=>{const f=dp(c,e.aa(s));null!=f&&(t[s]=f)}),{mapValue:{fields:t}}}function B_(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof ci||r instanceof Rm||r instanceof ed||r instanceof Hs||r instanceof _f)}function Om(r,e,t){if(!B_(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Tm(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function hp(r,e,t){if((e=(0,tt.m9)(e))instanceof Od)return e._internalPath;if("string"==typeof e)return Fr(r,e);throw km("Field path arguments must be of type string or ",r,!1,void 0,t)}const tE=new RegExp("[~\\*/\\[\\]]");function Fr(r,e,t){if(e.search(tE)>=0)throw km(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Od(...e.split("."))._internalPath}catch{throw km(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function km(r,e,t,s,c){const f=s&&!s.isEmpty(),E=void 0!==c;let k=`Function ${e}() called with invalid data`;t&&(k+=" (via `toFirestore()`)"),k+=". ";let G="";return(f||E)&&(G+=" (found",f&&(G+=` in field ${s}`),E&&(G+=` in document ${c}`),G+=")"),new hn(Ht.INVALID_ARGUMENT,k+r+G)}function Ov(r,e){return r.some(t=>t.isEqual(e))}class yg{constructor(e,t,s,c,f){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new Hs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new fp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fp extends yg{data(){return super.data()}}function Nm(r,e){return"string"==typeof e?Fr(r,e):e instanceof Od?e._internalPath:e._delegate._internalPath}function vg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new hn(Ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pp{}class Gs extends pp{}function wf(r,e,...t){let s=[];e instanceof pp&&s.push(e),s=s.concat(t),function(c){const f=c.filter(k=>k instanceof mp).length,E=c.filter(k=>k instanceof gp).length;if(f>1||f>0&&E>0)throw new hn(Ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)r=c._apply(r);return r}class gp extends Gs{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new gp(e,t,s)}_apply(e){const t=this._parse(e);return yp(e._query,t),new Za(e.firestore,e.converter,Du(e._query,t))}_parse(e){const t=Ih(e.firestore);return function(c,f,E,k,G,J,ce){let nt;if(G.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new hn(Ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){Lv(ce,J);const Bt=[];for(const fn of ce)Bt.push(Ky(k,c,fn));nt={arrayValue:{values:Bt}}}else nt=Ky(k,c,ce)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||Lv(ce,J),nt=If(E,"where",ce,"in"===J||"not-in"===J);return hi.create(G,J,nt)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class mp extends pp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mp(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let f=s;const E=c.getFlattenedFilters();for(const k of E)yp(f,k),f=Du(f,k)}(e._query,t),new Za(e.firestore,e.converter,Du(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Fm extends Gs{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fm(e,t)}_apply(e){const t=function(s,c,f){if(null!==s.startAt)throw new hn(Ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new hn(Ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new io(c,f);return function(k,G){if(null===yc(k)){const J=cd(k);null!==J&&vp(0,J,G.field)}}(s,E),E}(e._query,this._field,this._direction);return new Za(e.firestore,e.converter,function(s,c){const f=s.explicitOrderBy.concat([c]);return new Ea(s.path,s.collectionGroup,f,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Lm extends Gs{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Lm(e,t,s)}_apply(e){return new Za(e.firestore,e.converter,dd(e._query,this._limit,this._limitType))}}class wh extends Gs{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new wh(e,t,s)}_apply(e){const t=Wy(e,this.type,this._docOrFields,this._inclusive);return new Za(e.firestore,e.converter,(c=t,new Ea((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class $m extends Gs{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new $m(e,t,s)}_apply(e){const t=Wy(e,this.type,this._docOrFields,this._inclusive);return new Za(e.firestore,e.converter,(c=t,new Ea((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function Wy(r,e,t,s){if(t[0]=(0,tt.m9)(t[0]),t[0]instanceof yg)return function(c,f,E,k,G){if(!k)throw new hn(Ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const J=[];for(const ce of Yl(c))if(ce.field.isKeyField())J.push(Te(f,k.key));else{const nt=k.data.field(ce.field);if(Lc(nt))throw new hn(Ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ce.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===nt){const Bt=ce.field.canonicalString();throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Bt}' (used as the orderBy) does not exist.`)}J.push(nt)}return new Io(J,G)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const c=Ih(r.firestore);return function(f,E,k,G,J,ce){const nt=f.explicitOrderBy;if(J.length>nt.length)throw new hn(Ht.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Bt=[];for(let fn=0;fn<J.length;fn++){const Mn=J[fn];if(nt[fn].field.isKeyField()){if("string"!=typeof Mn)throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof Mn}`);if(!ud(f)&&-1!==Mn.indexOf("/"))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${Mn}' contains a slash.`);const Fn=f.path.child(Ei.fromString(Mn));if(!Ln.isDocumentKey(Fn))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Fn}' is not because it contains an odd number of segments.`);const gr=new Ln(Fn);Bt.push(Te(E,gr))}else{const Fn=If(k,G,Mn);Bt.push(Fn)}}return new Io(Bt,ce)}(r._query,r.firestore._databaseId,c,e,t,s)}}function Ky(r,e,t){if("string"==typeof(t=(0,tt.m9)(t))){if(""===t)throw new hn(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ud(e)&&-1!==t.indexOf("/"))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ei.fromString(t));if(!Ln.isDocumentKey(s))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Te(r,new Ln(s))}if(t instanceof Hs)return Te(r,t._key);throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tm(t)}.`)}function Lv(r,e){if(!Array.isArray(r)||0===r.length)throw new hn(Ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yp(r,e){if(e.isInequality()){const s=cd(r),c=e.field;if(null!==s&&!s.isEqual(c))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${c.toString()}'`);const f=yc(r);null!==f&&vp(0,c,f)}const t=function(s,c){for(const f of s)for(const E of f.getFlattenedFilters())if(c.indexOf(E.op)>=0)return E.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new hn(Ht.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function vp(r,e,t){if(!t.isEqual(e))throw new hn(Ht.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class qy{convertValue(e,t="none"){switch(Ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ol(e,(c,f)=>{s[c]=this.convertValue(f,t)}),s}convertGeoPoint(e){return new Rm(Hr(e.latitude),Hr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=pc(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Uo(e));default:return null}}convertTimestamp(e){const t=Al(e);return new ci(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ei.fromString(e);dr(Gh(s));const c=new Xo(s.get(1),s.get(3)),f=new Ln(s.popFirst(5));return c.isEqual(t)||Ji(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}function Um(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Bv extends qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ed(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hs(this.firestore,null,t)}}class Cf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ch extends yg{constructor(e,t,s,c,f,E){super(e,t,s,c,E),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Nm("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Vm extends Ch{data(e={}){return super.data(e)}}class bf{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Cf(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Vm(this._firestore,this._userDataWriter,s.key,s,new Cf(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new hn(Ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let f=0;return s._snapshot.docChanges.map(E=>({type:"added",doc:new Vm(s._firestore,s._userDataWriter,E.doc.key,E.doc,new Cf(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:f++}))}{let f=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(E=>c||3!==E.type).map(E=>{const k=new Vm(s._firestore,s._userDataWriter,E.doc.key,E.doc,new Cf(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter);let G=-1,J=-1;return 0!==E.type&&(G=f.indexOf(E.doc.key),f=f.delete(E.doc.key)),1!==E.type&&(f=f.add(E.doc),J=f.indexOf(E.doc.key)),{type:rE(E.type),doc:k,oldIndex:G,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kn()}}function Yy(r,e){return r instanceof Ch&&e instanceof Ch?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof bf&&e instanceof bf&&r._firestore===e._firestore&&Am(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class bh extends qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ed(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hs(this.firestore,null,t)}}function Vv(r,e,t){r=Fi(r,Hs);const s=Fi(r.firestore,zs),c=Um(r.converter,e,t);return _p(s,[mg(Ih(s),"setDoc",r._key,c,null!==r.converter,t).toMutation(r._key,ms.none())])}function jv(r,e,t,...s){r=Fi(r,Hs);const c=Fi(r.firestore,zs),f=Ih(c);let E;return E="string"==typeof(e=(0,tt.m9)(e))||e instanceof Od?Gy(f,"updateDoc",r._key,e,t,s):zy(f,"updateDoc",r._key,e),_p(c,[E.toMutation(r._key,ms.exists(!0))])}function Zy(r,...e){var t,s,c;r=(0,tt.m9)(r);let f={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||fg(e[E])||(f=e[E],E++);const k={includeMetadataChanges:f.includeMetadataChanges};if(fg(e[E])){const nt=e[E];e[E]=null===(t=nt.next)||void 0===t?void 0:t.bind(nt),e[E+1]=null===(s=nt.error)||void 0===s?void 0:s.bind(nt),e[E+2]=null===(c=nt.complete)||void 0===c?void 0:c.bind(nt)}let G,J,ce;if(r instanceof Hs)J=Fi(r.firestore,zs),ce=Pl(r._key.path),G={next:nt=>{e[E]&&e[E](Df(J,r,nt))},error:e[E+1],complete:e[E+2]};else{const nt=Fi(r,Za);J=Fi(nt.firestore,zs),ce=nt._query;const Bt=new bh(J);G={next:fn=>{e[E]&&e[E](new bf(J,Bt,nt,fn))},error:e[E+1],complete:e[E+2]},vg(r._query)}return function(nt,Bt,fn,Mn){const Fn=new Zu(Mn),gr=new Mi(Bt,Fn,fn);return nt.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return Ft(yield cp(nt),gr)})),()=>{Fn.Sc(),nt.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return sn(yield cp(nt),gr)}))}}(Vo(J),ce,k,G)}function _p(r,e){return function(t,s){const c=new si;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function ov(r,e,t){return tm.apply(this,arguments)}(yield bm(t),s,c)})),c.promise}(Vo(r),e)}function Df(r,e,t){const s=t.docs.get(e._key),c=new bh(r);return new Ch(r,c,e._key,s,new Cf(t.hasPendingWrites,t.fromCache),e.converter)}const Xy={maxAttempts:5};class qv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ih(e)}set(e,t,s){this._verifyNotCommitted();const c=kd(e,this._firestore),f=Um(c.converter,t,s),E=mg(this._dataReader,"WriteBatch.set",c._key,f,null!==c.converter,s);return this._mutations.push(E.toMutation(c._key,ms.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const f=kd(e,this._firestore);let E;return E="string"==typeof(t=(0,tt.m9)(t))||t instanceof Od?Gy(this._dataReader,"WriteBatch.update",f._key,t,s,c):zy(this._dataReader,"WriteBatch.update",f._key,t),this._mutations.push(E.toMutation(f._key,ms.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kd(e,this._firestore);return this._mutations=this._mutations.concat(new C(t._key,ms.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new hn(Ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kd(r,e){if((r=(0,tt.m9)(r)).firestore!==e)throw new hn(Ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class a0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ih(e)}get(e){const t=kd(e,this._firestore),s=new Bv(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return Kn();const f=c[0];if(f.isFoundDocument())return new yg(this._firestore,s,f.key,f,t.converter);if(f.isNoDocument())return new yg(this._firestore,s,t._key,null,t.converter);throw Kn()})}set(e,t,s){const c=kd(e,this._firestore),f=Um(c.converter,t,s),E=mg(this._dataReader,"Transaction.set",c._key,f,null!==c.converter,s);return this._transaction.set(c._key,E),this}update(e,t,s,...c){const f=kd(e,this._firestore);let E;return E="string"==typeof(t=(0,tt.m9)(t))||t instanceof Od?Gy(this._dataReader,"Transaction.update",f._key,t,s,c):zy(this._dataReader,"Transaction.update",f._key,t),this._transaction.update(f._key,E),this}delete(e){const t=kd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kd(e,this._firestore),s=new bh(this._firestore);return super.get(e).then(c=>new Ch(this._firestore,s,t._key,c._document,new Cf(!1,!1),t.converter))}}!function(r,e=!0){vo=_t.SDK_VERSION,(0,_t._registerComponent)(new Y.wA("firestore",(t,{instanceIdentifier:s,options:c})=>{const f=t.getProvider("app").getImmediate(),E=new zs(new Ra(t.getProvider("auth-internal")),new Il(t.getProvider("app-check-internal")),function(k,G){if(!Object.prototype.hasOwnProperty.apply(k.options,["projectId"]))throw new hn(Ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(k.options.projectId,G)}(f,s),f);return c=Object.assign({useFetchStreams:e},c),E._setSettings(c),E},"PUBLIC").setMultipleInstances(!0)),(0,_t.registerVersion)(Wc,"3.11.0",r),(0,_t.registerVersion)(Wc,"3.11.0","esm2017")}();function Hm(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new hn("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Yv(){if(typeof Uint8Array>"u")throw new hn("unimplemented","Uint8Arrays are not available in this environment.")}function Zv(){if(!function ni(){return typeof atob<"u"}())throw new hn("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Eg{constructor(e){this._delegate=e}static fromBase64String(e){return Zv(),new Eg(ed.fromBase64String(e))}static fromUint8Array(e){return Yv(),new Eg(ed.fromUint8Array(e))}toBase64(){return Zv(),this._delegate.toBase64()}toUint8Array(){return Yv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ig(r){return function Jy(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class Xv{enableIndexedDbPersistence(e,t){return function Tv(r,e){xv(r=Fi(r,zs));const t=Vo(r);if(t._uninitializedComponentsProvider)throw new hn(Ht.FAILED_PRECONDITION,"SDK cache is already specified.");mi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),c=new lp;return Av(t,c,new Yu(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Sv(r){xv(r=Fi(r,zs));const e=Vo(r);if(e._uninitializedComponentsProvider)throw new hn(Ht.FAILED_PRECONDITION,"SDK cache is already specified.");mi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new lp;return Av(e,s,new pv(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function R_(r){if(r._initialized&&!r._terminated)throw new hn(Ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new si;return r._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(s){if(!to.D())return Promise.resolve();const c=s+"main";yield to.delete(c)}),function(s){return t.apply(this,arguments)})(Kf(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class zm{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Iv(r,e,t,s={}){var c;const f=(r=Fi(r,Pd))._getSettings();if("firestore.googleapis.com"!==f.host&&f.host!==e&&mi("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},f),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let E,k;if("string"==typeof s.mockUserToken)E=s.mockUserToken,k=Wi.MOCK_USER;else{E=(0,tt.Sg)(s.mockUserToken,null===(c=r._app)||void 0===c?void 0:c.options.projectId);const G=s.mockUserToken.sub||s.mockUserToken.user_id;if(!G)throw new hn(Ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new Wi(G)}r._authCredentials=new El(new il(E,k))}}(this._delegate,e,t,s)}enableNetwork(){return function P_(r){return function mv(r){return r.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield ky(r),t=yield Ny(r);return e.setNetworkEnabled(!0),function(s){const c=jn(s);return c.Au.delete(0),ba(c)}(t)}))}(Vo(r=Fi(r,zs)))}(this._delegate)}disableNetwork(){return function O_(r){return function b_(r){return r.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield ky(r),t=yield Ny(r);return e.setNetworkEnabled(!1),(s=(0,ue.Z)(function*(c){const f=jn(c);f.Au.add(0),yield gu(f),f.Pu.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(Vo(r=Fi(r,zs)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Ly("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function M_(r){return function(e){const t=new si;return e.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function Ey(r,e){return hg.apply(this,arguments)}(yield bm(e),t)})),t.promise}(Vo(r=Fi(r,zs)))}(this._delegate)}onSnapshotsInSync(e){return function e0(r,e){return function Xu(r,e){const t=new Zu(e);return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return s=yield cp(r),c=t,jn(s).Nu.add(c),void c.next();var s,c})),()=>{t.Sc(),r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return s=yield cp(r),c=t,void jn(s).Nu.delete(c);var s,c}))}}(Vo(r=Fi(r,zs)),fg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new hn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sf(this,By(this._delegate,e))}catch(t){throw gl(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xa(this,vf(this._delegate,e))}catch(t){throw gl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vl(this,function wv(r,e){if(r=Fi(r,Pd),Ac("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new hn(Ht.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Za(r,null,(t=e,new Ea(Ei.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw gl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function l0(r,e,t){r=Fi(r,zs);const s=Object.assign(Object.assign({},Xy),t);return function(c){if(c.maxAttempts<1)throw new hn(Ht.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,f,E){const k=new si;return c.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const G=yield function yf(r){return wm(r).then(e=>e.datastore)}(c);new xy(c.asyncQueue,G,E,f,k).run()})),k.promise}(Vo(r),c=>e(new a0(r,c)),s)}(this._delegate,t=>e(new Wm(this,t)))}batch(){return Vo(this._delegate),new Qv(new qv(this._delegate,e=>_p(this._delegate,e)))}loadBundle(e){return function k_(r,e){const t=Vo(r=Fi(r,zs)),s=new xm;return function T_(r,e,t,s){const c=function(f,E){let k;return k="string"==typeof f?Oa().encode(f):f,G=function(G,J){if(G instanceof Uint8Array)return _m(G,J);if(G instanceof ArrayBuffer)return _m(new Uint8Array(G),J);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new Ay(G,E);var G}(t,pl(e));r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function fv(r,e,t){const s=jn(r);var c;(c=(0,ue.Z)(function*(f,E,k){try{const G=yield E.getMetadata();if(yield function(Bt,fn){const Mn=jn(Bt),Fn=Ts(fn.createTime);return Mn.persistence.runTransaction("hasNewerBundle","readonly",gr=>Mn.Ls.getBundleMetadata(gr,fn.id)).then(gr=>!!gr&&gr.createTime.compareTo(Fn)>=0)}(f.localStore,G))return yield E.close(),k._completeWith({taskState:"Success",documentsLoaded:(Bt=G).totalDocuments,bytesLoaded:Bt.totalBytes,totalDocuments:Bt.totalDocuments,totalBytes:Bt.totalBytes}),Promise.resolve(new Set);k._updateProgress(mu(G));const J=new is(G,f.localStore,E.serializer);let ce=yield E.Pc();for(;ce;){const Bt=yield J.ju(ce);Bt&&k._updateProgress(Bt),ce=yield E.Pc()}const nt=yield J.complete();return yield vu(f,nt.Hu,void 0),yield function(Bt,fn){const Mn=jn(Bt);return Mn.persistence.runTransaction("Save bundle","readwrite",Fn=>Mn.Ls.saveBundleMetadata(Fn,fn))}(f.localStore,G),k._completeWith(nt.progress),Promise.resolve(nt.Wu)}catch(G){return mi("SyncEngine",`Loading bundle failed with ${G}`),k._failWith(G),Promise.resolve(new Set)}var Bt}),function(f,E,k){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield bm(r),c,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function N_(r,e){return function S_(r,e){return r.asyncQueue.enqueue((0,ue.Z)(function*(){return function(t,s){const c=jn(t);return c.persistence.runTransaction("Get named query","readonly",f=>c.Ls.getNamedQuery(f,s))}(yield Cm(r),e)}))}(Vo(r=Fi(r,zs)),e).then(t=>t?new Za(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Vl(this,t):null)}}class Gm extends qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eg(new ed(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xa.forKey(t,this.firestore,null)}}class Wm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Gm(e)}get(e){const t=Nd(e);return this._delegate.get(t).then(s=>new Ep(this._firestore,new Ch(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=Nd(e);return s?(Hm("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const f=Nd(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...c),this}delete(e){const t=Nd(e);return this._delegate.delete(t),this}}class Qv{constructor(e){this._delegate=e}set(e,t,s){const c=Nd(e);return s?(Hm("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const f=Nd(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...c),this}delete(e){const t=Nd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dh{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Vm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Tf(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Dh.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let f=c.get(t);return f||(f=new Dh(e,new Gm(e),t),c.set(t,f)),f}}Dh.INSTANCES=new WeakMap;class Xa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gm(e)}static forPath(e,t,s){if(e.length%2!=0)throw new hn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xa(t,new Hs(t._delegate,s,new Ln(e)))}static forKey(e,t,s){return new Xa(t,new Hs(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Sf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sf(this.firestore,By(this._delegate,e))}catch(t){throw gl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tt.m9)(e))instanceof Hs&&Cv(this._delegate,e)}set(e,t){t=Hm("DocumentReference.set",t);try{return t?Vv(this._delegate,e,t):Vv(this._delegate,e)}catch(s){throw gl(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?jv(this._delegate,e):jv(this._delegate,e,t,...s)}catch(c){throw gl(c,"updateDoc()","DocumentReference.update()")}}delete(){return function iE(r){return _p(Fi(r.firestore,zs),[new C(r._key,ms.none())])}(this._delegate)}onSnapshot(...e){const t=Jv(e),s=v0(e,c=>new Ep(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return Zy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Z_(r){r=Fi(r,Hs);const e=Fi(r.firestore,zs),t=Vo(e),s=new bh(e);return function yv(r,e){const t=new si;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(s=(0,ue.Z)(function*(c,f,E){try{const k=yield function(G,J){const ce=jn(G);return ce.persistence.runTransaction("read document","readonly",nt=>ce.localDocuments.getDocument(nt,J))}(c,f);k.isFoundDocument()?E.resolve(k):k.isNoDocument()?E.resolve(null):E.reject(new hn(Ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const G=I(k,`Failed to get document '${f} from cache`);E.reject(G)}}),function(c,f,E){return s.apply(this,arguments)})(yield Cm(r),e,t);var s})),t.promise}(t,r._key).then(c=>new Ch(e,s,r._key,c,new Cf(null!==c&&c.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Uv(r){r=Fi(r,Hs);const e=Fi(r.firestore,zs);return D_(Vo(e),r._key,{source:"server"}).then(t=>Df(e,r,t))}(this._delegate):function jm(r){r=Fi(r,Hs);const e=Fi(r.firestore,zs);return D_(Vo(e),r._key).then(t=>Df(e,r,t))}(this._delegate),t.then(s=>new Ep(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Xa(this.firestore,this._delegate.withConverter(e?Dh.getInstance(this.firestore,e):null))}}function gl(r,e,t){return r.message=r.message.replace(e,t),r}function Jv(r){for(const e of r)if("object"==typeof e&&!Ig(e))return e;return{}}function v0(r,e){var t,s;let c;return c=Ig(r[0])?r[0]:Ig(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:f=>{c.next&&c.next(e(f))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class Ep{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Yy(this._delegate,e._delegate)}}class Tf extends Ep{data(e){const t=this._delegate.data(e);return function lc(r,e){r||Kn()}(void 0!==t),t}}class Vl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gm(e)}where(e,t,s){try{return new Vl(this.firestore,wf(this._delegate,function kv(r,e,t){const s=e,c=Nm("where",r);return gp._create(c,s,t)}(e,t,s)))}catch(c){throw gl(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vl(this.firestore,wf(this._delegate,function Nv(r,e="asc"){const t=e,s=Nm("orderBy",r);return Fm._create(s,t)}(e,t)))}catch(s){throw gl(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vl(this.firestore,wf(this._delegate,function j_(r){return Ev("limit",r),Lm._create("limit",r,"F")}(e)))}catch(t){throw gl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vl(this.firestore,wf(this._delegate,function H_(r){return Ev("limitToLast",r),Lm._create("limitToLast",r,"L")}(e)))}catch(t){throw gl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vl(this.firestore,wf(this._delegate,function z_(...r){return wh._create("startAt",r,!0)}(...e)))}catch(t){throw gl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vl(this.firestore,wf(this._delegate,function G_(...r){return wh._create("startAfter",r,!1)}(...e)))}catch(t){throw gl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vl(this.firestore,wf(this._delegate,function Bm(...r){return $m._create("endBefore",r,!1)}(...e)))}catch(t){throw gl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vl(this.firestore,wf(this._delegate,function Fv(...r){return $m._create("endAt",r,!0)}(...e)))}catch(t){throw gl(t,"endAt()","Query.endAt()")}}isEqual(e){return Am(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function X_(r){r=Fi(r,Za);const e=Fi(r.firestore,zs),t=Vo(e),s=new bh(e);return function vv(r,e){const t=new si;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(s=(0,ue.Z)(function*(c,f,E){try{const k=yield af(c,f,!0),G=new Sc(f,k.sr),J=G.nc(k.documents),ce=G.applyChanges(J,!1);E.resolve(ce.snapshot)}catch(k){const G=I(k,`Failed to execute query '${f} against cache`);E.reject(G)}}),function(c,f,E){return s.apply(this,arguments)})(yield Cm(r),e,t);var s})),t.promise}(t,r._query).then(c=>new bf(e,s,r,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function Q_(r){r=Fi(r,Za);const e=Fi(r.firestore,zs),t=Vo(e),s=new bh(e);return Dm(t,r._query,{source:"server"}).then(c=>new bf(e,s,r,c))}(this._delegate):function _g(r){r=Fi(r,Za);const e=Fi(r.firestore,zs),t=Vo(e),s=new bh(e);return vg(r._query),Dm(t,r._query).then(c=>new bf(e,s,r,c))}(this._delegate),t.then(s=>new tv(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Jv(e),s=v0(e,c=>new tv(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return Zy(this._delegate,t,s)}withConverter(e){return new Vl(this.firestore,this._delegate.withConverter(e?Dh.getInstance(this.firestore,e):null))}}class ev{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Tf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Tf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ev(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Tf(this._firestore,s))})}isEqual(e){return Yy(this._delegate,e._delegate)}}class Sf extends Vl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xa(this.firestore,e):null}doc(e){try{return new Xa(this.firestore,void 0===e?vf(this._delegate):vf(this._delegate,e))}catch(t){throw gl(t,"doc()","CollectionReference.doc()")}}add(e){return function J_(r,e){const t=Fi(r.firestore,zs),s=vf(r),c=Um(r.converter,e);return _p(t,[mg(Ih(r.firestore),"addDoc",s._key,c,null!==r.converter,{}).toMutation(s._key,ms.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Xa(this.firestore,t))}isEqual(e){return Cv(this._delegate,e._delegate)}withConverter(e){return new Sf(this.firestore,this._delegate.withConverter(e?Dh.getInstance(this.firestore,e):null))}}function Nd(r){return Fi(r,Hs)}class Km{constructor(...e){this._delegate=new Od(...e)}static documentId(){return new Km(fs.keyField().canonicalString())}isEqual(e){return(e=(0,tt.m9)(e))instanceof Od&&this._delegate._internalPath.isEqual(e._internalPath)}}class Th{constructor(e){this._delegate=e}static serverTimestamp(){const e=function u0(){return new Mm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Th(e)}static delete(){const e=function c0(){return new up("deleteField")}();return e._methodName="FieldValue.delete",new Th(e)}static arrayUnion(...e){const t=function d0(...r){return new Mv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Th(t)}static arrayRemove(...e){const t=function h0(...r){return new Pv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Th(t)}static increment(e){const t=function f0(r){return new Ef("increment",r)}(e);return t._methodName="FieldValue.increment",new Th(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const e_={Firestore:zm,GeoPoint:Rm,Timestamp:ci,Blob:Eg,Transaction:Wm,WriteBatch:Qv,DocumentReference:Xa,DocumentSnapshot:Ep,Query:Vl,QueryDocumentSnapshot:Tf,QuerySnapshot:tv,CollectionReference:Sf,FieldPath:Km,FieldValue:Th,setLogLevel:function y0(r){!function ac(r){Js.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function _0(r){(function t_(r,e){r.INTERNAL.registerComponent(new Y.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},e_)))})(r,(e,t)=>new zm(e,t,new Xv)),r.registerVersion("@firebase/firestore-compat","0.3.8")}(xe.Z);var Sh=j(1205),E0=j(6217),I0=j(9260);function w0(r,e){return function n_(r,e=y.z){return new ee.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function nv(r,e){return w0(r,e).pipe((0,de.U)(t=>({payload:t,type:"query"})))}function qm(r,e){return nv(r,e).pipe((0,ve.O)(void 0),Ee(),(0,de.U)(([t,s])=>{const c=s.payload.docChanges(),f=c.map(E=>({type:E.type,payload:E}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((E,k)=>{const G=c.find(ce=>ce.doc.ref.isEqual(E.ref)),J=null==t?void 0:t.payload.docs.find(ce=>ce.ref.isEqual(E.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(E.metadata)||!G&&J&&JSON.stringify(J.metadata)===JSON.stringify(E.metadata)||f.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:E}})}),f}))}function C0(r,e,t){return qm(r,t).pipe((0,ye.R)((s,c)=>function b0(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function i_(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return rv(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return rv(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rv(r,e.oldIndex,1)}return r}(r,s))}),r}(s,c.map(f=>f.payload),e),[]),(0,We.x)(),(0,de.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function rv(r,e,t,...s){const c=r.slice();return c.splice(e,t,...s),c}function s_(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class o_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=qm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,de.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,ve.O)(void 0),Ee(),(0,Oe.h)(([s,c])=>c.length>0||!s),(0,de.U)(([s,c])=>c),Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ye.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=s_(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return nv(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Ae.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(Ae.iC)}add(e){return this.ref.add(e)}doc(e){return new a_(this.ref.doc(e),this.afs)}}class a_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:f}=u_(s,t);return new o_(c,f,this.afs)}snapshotChanges(){return function r_(r,e){return w0(r,e).pipe((0,ve.O)(void 0),Ee(),(0,de.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,de.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,le.D)(this.ref.get(e)).pipe(Ae.iC)}}class D0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qm(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Oe.h)(t=>t.length>0),Ae.iC):qm(this.query,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ye.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=s_(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return nv(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),Ae.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(Ae.iC)}}const l_=new _.OlP("angularfire2.enableFirestorePersistence"),c_=new _.OlP("angularfire2.firestore.persistenceSettings"),T0=new _.OlP("angularfire2.firestore.settings"),S0=new _.OlP("angularfire2.firestore.use-emulator");function u_(r,e=(t=>t)){return{query:e(r),ref:r}}let Ip=(()=>{class r{constructor(t,s,c,f,E,k,G,J,ce,nt,Bt,fn,Mn,Fn,gr,ai,ki){this.schedulers=G;const li=(0,Je.on)(t,k,s),La=ce;nt&&(0,Sh.nw)(li,k,Bt,Mn,Fn,gr,fn,ai),[this.firestore,this.persistenceEnabled$]=(0,Je.cc)(`${li.name}.firestore`,"AngularFirestore",li.name,()=>{const Ps=k.runOutsideAngular(()=>li.firestore());if(f&&Ps.settings(f),La&&Ps.useEmulator(...La),c&&!(0,wt.PM)(E)){const bs=()=>{try{return(0,le.D)(Ps.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch($a){return typeof console<"u"&&console.warn($a),(0,$e.of)(!1)}};return[Ps,k.runOutsideAngular(bs)]}return[Ps,(0,$e.of)(!1)]},[f,La,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:f,query:E}=u_(c,s),k=this.schedulers.ngZone.run(()=>f);return new o_(k,E,this)}collectionGroup(t,s){const c=s||(E=>E),f=this.firestore.collectionGroup(t);return new D0(c(f),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new a_(c,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(_.LFG(Je.Dh),_.LFG(Je.xv,8),_.LFG(l_,8),_.LFG(T0,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ae.HU),_.LFG(c_,8),_.LFG(S0,8),_.LFG(Sh.zQ,8),_.LFG(Sh.Qv,8),_.LFG(Sh.L6,8),_.LFG(Sh._Q,8),_.LFG(Sh.rT,8),_.LFG(Sh.lh,8),_.LFG(Sh.f7,8),_.LFG(E0.nm,8))},r.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),d_=(()=>{class r{constructor(){I0.Z.registerVersion("angularfire",Ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:l_,useValue:!0},{provide:c_,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=_.oAB({type:r}),r.\u0275inj=_.cJS({providers:[Ip]}),r})()},2011:(In,Et,j)=>{"use strict";j.d(Et,{Dh:()=>Ue,GT:()=>Ae,cc:()=>Oe,hO:()=>We,on:()=>Ee,pX:()=>$e,xv:()=>Ge});var _=j(4650),y=j(9260),ee=j(4976);In=j.hmd(In);const le=["ngOnDestroy"],$e=(xe,ue,_t,Y={})=>new Proxy(xe,{get:(it,tt)=>_t.runOutsideAngular(()=>{var Pt;if(xe[tt])return!(null===(Pt=null==Y?void 0:Y.spy)||void 0===Pt)&&Pt.get&&Y.spy.get(tt,xe[tt]),xe[tt];if(le.indexOf(tt)>-1)return()=>{};const Ve=ue.toPromise().then(ke=>{const Ne=ke&&ke[tt];return"function"==typeof Ne?Ne.bind(ke):Ne&&Ne.then?Ne.then(De=>_t.run(()=>De)):_t.run(()=>Ne)});return new Proxy(()=>{},{get:(ke,Ne)=>Ve[Ne],apply:(ke,Ne,De)=>Ve.then(He=>{var pt;const Tt=He&&He(...De);return!(null===(pt=null==Y?void 0:Y.spy)||void 0===pt)&&pt.apply&&Y.spy.apply(tt,De,Tt),Tt})})})}),Ae=(xe,ue)=>{ue.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach(Y=>{Object.defineProperty(xe.prototype,Y,Object.getOwnPropertyDescriptor(_t.prototype||_t,Y))})})};class ve{constructor(ue){return ue}}const Ue=new _.OlP("angularfire2.app.options"),Ge=new _.OlP("angularfire2.app.name");function Ee(xe,ue,_t){const it="object"==typeof _t&&_t||{};it.name=it.name||"string"==typeof _t&&_t||"[DEFAULT]";const Pt=y.Z.apps.filter(Ve=>Ve&&Ve.name===it.name)[0]||ue.runOutsideAngular(()=>y.Z.initializeApp(xe,it));try{JSON.stringify(xe)!==JSON.stringify(Pt.options)&&de("error",`${Pt.name} Firebase App already initialized with different options${In.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Pt)}const de=(xe,...ue)=>{(0,_.X6Q)()&&typeof console<"u"&&console[xe](...ue)},ye={provide:ve,useFactory:Ee,deps:[Ue,_.R0b,[new _.FiY,Ge]]};let We=(()=>{class xe{constructor(_t){y.Z.registerVersion("angularfire",ee.q4.full,"core"),y.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),y.Z.registerVersion("angular",_.q4F.full,_t.toString())}static initializeApp(_t,Y){return{ngModule:xe,providers:[{provide:Ue,useValue:_t},{provide:Ge,useValue:Y}]}}}return xe.\u0275fac=function(_t){return new(_t||xe)(_.LFG(_.Lbi))},xe.\u0275mod=_.oAB({type:xe}),xe.\u0275inj=_.cJS({providers:[ye]}),xe})();function Oe(xe,ue,_t,Y,it){const[,tt,Pt]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===xe)||[];if(tt)return function Je(xe,ue){try{return xe.toString()===ue.toString()}catch{return xe===ue}}(it,Pt)||(Se("error",`${ue} was already initialized on the ${_t} Firebase App with different settings.${wt?" You may need to reload as Firebase is not HMR aware.":""}`),Se("warn",{is:it,was:Pt})),tt;{const Ve=Y();return globalThis.\u0275AngularfireInstanceCache.push([xe,Ve,it]),Ve}}const wt=!!In.hot,Se=(xe,...ue)=>{(0,_.X6Q)()&&typeof console<"u"&&console[xe](...ue)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(In,Et,j)=>{"use strict";j.d(Et,{q4:()=>xr,iC:()=>Qo,fc:()=>eu,HU:()=>Uo,vb:()=>Hr,JM:()=>Al});var _=j(4650),y=j(259),ee=j(5861),le=j(6881),$e=j(2090),Ae=j(4859),ve=j(1877);const Ue=(P,B)=>B.some(Z=>P instanceof Z);let Ge,Ee;const We=new WeakMap,Oe=new WeakMap,Je=new WeakMap,wt=new WeakMap,Se=new WeakMap;let _t={get(P,B,Z){if(P instanceof IDBTransaction){if("done"===B)return Oe.get(P);if("objectStoreNames"===B)return P.objectStoreNames||Je.get(P);if("store"===B)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Pt(P[B])},set:(P,B,Z)=>(P[B]=Z,!0),has:(P,B)=>P instanceof IDBTransaction&&("done"===B||"store"===B)||B in P};function tt(P){return"function"==typeof P?function it(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...B){return P.apply(Ve(this),B),Pt(We.get(this))}:function(...B){return Pt(P.apply(Ve(this),B))}:function(B,...Z){const Te=P.call(Ve(this),B,...Z);return Je.set(Te,B.sort?B.sort():[B]),Pt(Te)}}(P):(P instanceof IDBTransaction&&function ue(P){if(Oe.has(P))return;const B=new Promise((Z,Te)=>{const ct=()=>{P.removeEventListener("complete",Rt),P.removeEventListener("error",Wt),P.removeEventListener("abort",Wt)},Rt=()=>{Z(),ct()},Wt=()=>{Te(P.error||new DOMException("AbortError","AbortError")),ct()};P.addEventListener("complete",Rt),P.addEventListener("error",Wt),P.addEventListener("abort",Wt)});Oe.set(P,B)}(P),Ue(P,function de(){return Ge||(Ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,_t):P)}function Pt(P){if(P instanceof IDBRequest)return function xe(P){const B=new Promise((Z,Te)=>{const ct=()=>{P.removeEventListener("success",Rt),P.removeEventListener("error",Wt)},Rt=()=>{Z(Pt(P.result)),ct()},Wt=()=>{Te(P.error),ct()};P.addEventListener("success",Rt),P.addEventListener("error",Wt)});return B.then(Z=>{Z instanceof IDBCursor&&We.set(Z,P)}).catch(()=>{}),Se.set(B,P),B}(P);if(wt.has(P))return wt.get(P);const B=tt(P);return B!==P&&(wt.set(P,B),Se.set(B,P)),B}const Ve=P=>Se.get(P),De=["get","getKey","getAll","getAllKeys","count"],He=["put","add","delete","clear"],pt=new Map;function Tt(P,B){if(!(P instanceof IDBDatabase)||B in P||"string"!=typeof B)return;if(pt.get(B))return pt.get(B);const Z=B.replace(/FromIndex$/,""),Te=B!==Z,ct=He.includes(Z);if(!(Z in(Te?IDBIndex:IDBObjectStore).prototype)||!ct&&!De.includes(Z))return;const Rt=function(){var Wt=(0,ee.Z)(function*(Un,...Nn){const ir=this.transaction(Un,ct?"readwrite":"readonly");let jr=ir.store;return Te&&(jr=jr.index(Nn.shift())),(yield Promise.all([jr[Z](...Nn),ct&&ir.done]))[0]});return function(Nn){return Wt.apply(this,arguments)}}();return pt.set(B,Rt),Rt}!function Y(P){_t=P(_t)}(P=>({...P,get:(B,Z,Te)=>Tt(B,Z)||P.get(B,Z,Te),has:(B,Z)=>!!Tt(B,Z)||P.has(B,Z)}));const dt="@firebase/installations",Mt="0.6.4",yt=1e4,Fe=`w:${Mt}`,je="FIS_v2",Be="https://firebaseinstallations.googleapis.com/v1",ht=36e5,Dn=new $e.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function kt(P){return P instanceof $e.ZR&&P.code.includes("request-failed")}function Re({projectId:P}){return`${Be}/projects/${P}/installations`}function At(P){return{token:P.token,requestStatus:2,expiresIn:hr(P.expiresIn),creationTime:Date.now()}}function gn(P,B){return On.apply(this,arguments)}function On(){return(On=(0,ee.Z)(function*(P,B){const Te=(yield B.json()).error;return Dn.create("request-failed",{requestName:P,serverCode:Te.code,serverMessage:Te.message,serverStatus:Te.status})})).apply(this,arguments)}function Yn({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function cn(P){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,ee.Z)(function*(P){const B=yield P();return B.status>=500&&B.status<600?P():B})).apply(this,arguments)}function hr(P){return Number(P.replace("s","000"))}function bn(){return(bn=(0,ee.Z)(function*({appConfig:P,heartbeatServiceProvider:B},{fid:Z}){const Te=Re(P),ct=Yn(P),Rt=B.getImmediate({optional:!0});if(Rt){const ir=yield Rt.getHeartbeatsHeader();ir&&ct.append("x-firebase-client",ir)}const Un={method:"POST",headers:ct,body:JSON.stringify({fid:Z,authVersion:je,appId:P.appId,sdkVersion:Fe})},Nn=yield cn(()=>fetch(Te,Un));if(Nn.ok){const ir=yield Nn.json();return{fid:ir.fid||Z,registrationStatus:2,refreshToken:ir.refreshToken,authToken:At(ir.authToken)}}throw yield gn("Create Installation",Nn)})).apply(this,arguments)}function zn(P){return new Promise(B=>{setTimeout(B,P)})}const Cr=/^[cdef][\w-]{21}$/,di="";function wi(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const Z=function Gn(P){return function yi(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Cr.test(Z)?Z:di}catch{return di}}function qn(P){return`${P.appName}!${P.appId}`}const ln=new Map;function yn(P,B){const Z=qn(P);Dr(Z,B),function Qr(P,B){const Z=function pi(){return!zr&&"BroadcastChannel"in self&&(zr=new BroadcastChannel("[Firebase] FID Change"),zr.onmessage=P=>{Dr(P.data.key,P.data.fid)}),zr}();Z&&Z.postMessage({key:P,fid:B}),function Lr(){0===ln.size&&zr&&(zr.close(),zr=null)}()}(Z,B)}function Dr(P,B){const Z=ln.get(P);if(Z)for(const Te of Z)Te(B)}let zr=null;const gi="firebase-installations-database",ur=1,lr="firebase-installations-store";let yr=null;function Ai(){return yr||(yr=function ke(P,B,{blocked:Z,upgrade:Te,blocking:ct,terminated:Rt}={}){const Wt=indexedDB.open(P,B),Un=Pt(Wt);return Te&&Wt.addEventListener("upgradeneeded",Nn=>{Te(Pt(Wt.result),Nn.oldVersion,Nn.newVersion,Pt(Wt.transaction))}),Z&&Wt.addEventListener("blocked",()=>Z()),Un.then(Nn=>{Rt&&Nn.addEventListener("close",()=>Rt()),ct&&Nn.addEventListener("versionchange",()=>ct())}).catch(()=>{}),Un}(gi,ur,{upgrade:(P,B)=>{0===B&&P.createObjectStore(lr)}})),yr}function mr(P,B){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,ee.Z)(function*(P,B){const Z=qn(P),ct=(yield Ai()).transaction(lr,"readwrite"),Rt=ct.objectStore(lr),Wt=yield Rt.get(Z);return yield Rt.put(B,Z),yield ct.done,(!Wt||Wt.fid!==B.fid)&&yn(P,B.fid),B})).apply(this,arguments)}function Ze(P){return rt.apply(this,arguments)}function rt(){return(rt=(0,ee.Z)(function*(P){const B=qn(P),Te=(yield Ai()).transaction(lr,"readwrite");yield Te.objectStore(lr).delete(B),yield Te.done})).apply(this,arguments)}function Jt(P,B){return qt.apply(this,arguments)}function qt(){return(qt=(0,ee.Z)(function*(P,B){const Z=qn(P),ct=(yield Ai()).transaction(lr,"readwrite"),Rt=ct.objectStore(lr),Wt=yield Rt.get(Z),Un=B(Wt);return void 0===Un?yield Rt.delete(Z):yield Rt.put(Un,Z),yield ct.done,Un&&(!Wt||Wt.fid!==Un.fid)&&yn(P,Un.fid),Un})).apply(this,arguments)}function we(P){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,ee.Z)(function*(P){let B;const Z=yield Jt(P.appConfig,Te=>{const ct=function Ye(P){return gt(P||{fid:wi(),registrationStatus:0})}(Te),Rt=function Ot(P,B){if(0===B.registrationStatus){if(!navigator.onLine)return{installationEntry:B,registrationPromise:Promise.reject(Dn.create("app-offline"))};const Z={fid:B.fid,registrationStatus:1,registrationTime:Date.now()},Te=function lt(P,B){return un.apply(this,arguments)}(P,Z);return{installationEntry:Z,registrationPromise:Te}}return 1===B.registrationStatus?{installationEntry:B,registrationPromise:ut(P)}:{installationEntry:B}}(P,ct);return B=Rt.registrationPromise,Rt.installationEntry});return Z.fid===di?{installationEntry:yield B}:{installationEntry:Z,registrationPromise:B}}),Ie.apply(this,arguments)}function un(){return un=(0,ee.Z)(function*(P,B){try{const Z=yield function tr(P,B){return bn.apply(this,arguments)}(P,B);return mr(P.appConfig,Z)}catch(Z){throw kt(Z)&&409===Z.customData.serverCode?yield Ze(P.appConfig):yield mr(P.appConfig,{fid:B.fid,registrationStatus:0}),Z}}),un.apply(this,arguments)}function ut(P){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,ee.Z)(function*(P){let B=yield _e(P.appConfig);for(;1===B.registrationStatus;)yield zn(100),B=yield _e(P.appConfig);if(0===B.registrationStatus){const{installationEntry:Z,registrationPromise:Te}=yield we(P);return Te||Z}return B})).apply(this,arguments)}function _e(P){return Jt(P,B=>{if(!B)throw Dn.create("installation-not-found");return gt(B)})}function gt(P){return function Nt(P){return 1===P.registrationStatus&&P.registrationTime+yt<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Ce(){return(Ce=(0,ee.Z)(function*({appConfig:P,heartbeatServiceProvider:B},Z){const Te=function St(P,{fid:B}){return`${Re(P)}/${B}/authTokens:generate`}(P,Z),ct=function xn(P,{refreshToken:B}){const Z=Yn(P);return Z.append("Authorization",function _r(P){return`${je} ${P}`}(B)),Z}(P,Z),Rt=B.getImmediate({optional:!0});if(Rt){const ir=yield Rt.getHeartbeatsHeader();ir&&ct.append("x-firebase-client",ir)}const Un={method:"POST",headers:ct,body:JSON.stringify({installation:{sdkVersion:Fe,appId:P.appId}})},Nn=yield cn(()=>fetch(Te,Un));if(Nn.ok)return At(yield Nn.json());throw yield gn("Generate Auth Token",Nn)})).apply(this,arguments)}function It(P){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,ee.Z)(function*(P,B=!1){let Z;const Te=yield Jt(P.appConfig,Rt=>{if(!kn(Rt))throw Dn.create("not-registered");const Wt=Rt.authToken;if(!B&&function wn(P){return 2===P.requestStatus&&!function Qn(P){const B=Date.now();return B<P.creationTime||P.creationTime+P.expiresIn<B+ht}(P)}(Wt))return Rt;if(1===Wt.requestStatus)return Z=function Xe(P,B){return ze.apply(this,arguments)}(P,B),Rt;{if(!navigator.onLine)throw Dn.create("app-offline");const Un=function Jn(P){const B={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:B})}(Rt);return Z=function Gt(P,B){return pn.apply(this,arguments)}(P,Un),Un}});return Z?yield Z:Te.authToken}),Xt.apply(this,arguments)}function ze(){return(ze=(0,ee.Z)(function*(P,B){let Z=yield bt(P.appConfig);for(;1===Z.authToken.requestStatus;)yield zn(100),Z=yield bt(P.appConfig);const Te=Z.authToken;return 0===Te.requestStatus?It(P,B):Te})).apply(this,arguments)}function bt(P){return Jt(P,B=>{if(!kn(B))throw Dn.create("not-registered");return function Wn(P){return 1===P.requestStatus&&P.requestTime+yt<Date.now()}(B.authToken)?Object.assign(Object.assign({},B),{authToken:{requestStatus:0}}):B})}function pn(){return pn=(0,ee.Z)(function*(P,B){try{const Z=yield function he(P,B){return Ce.apply(this,arguments)}(P,B),Te=Object.assign(Object.assign({},B),{authToken:Z});return yield mr(P.appConfig,Te),Z}catch(Z){if(!kt(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const Te=Object.assign(Object.assign({},B),{authToken:{requestStatus:0}});yield mr(P.appConfig,Te)}else yield Ze(P.appConfig);throw Z}}),pn.apply(this,arguments)}function kn(P){return void 0!==P&&2===P.registrationStatus}function ys(){return(ys=(0,ee.Z)(function*(P){const B=P,{installationEntry:Z,registrationPromise:Te}=yield we(B);return Te?Te.catch(console.error):It(B).catch(console.error),Z.fid})).apply(this,arguments)}function Vi(){return Vi=(0,ee.Z)(function*(P,B=!1){const Z=P;return yield function ji(P){return An.apply(this,arguments)}(Z),(yield It(Z,B)).token}),Vi.apply(this,arguments)}function An(){return(An=(0,ee.Z)(function*(P){const{registrationPromise:B}=yield we(P);B&&(yield B)})).apply(this,arguments)}function be(P){return Dn.create("missing-app-config-values",{valueName:P})}const qe="installations",et=P=>{const B=P.getProvider("app").getImmediate(),Z=function se(P){if(!P||!P.options)throw be("App Configuration");if(!P.name)throw be("App Name");const B=["projectId","apiKey","appId"];for(const Z of B)if(!P.options[Z])throw be(Z);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(B);return{app:B,appConfig:Z,heartbeatServiceProvider:(0,le._getProvider)(B,"heartbeat"),_delete:()=>Promise.resolve()}},Qe=P=>{const B=P.getProvider("app").getImmediate(),Z=(0,le._getProvider)(B,qe).getImmediate();return{getId:()=>function Xn(P){return ys.apply(this,arguments)}(Z),getToken:ct=>function vi(P){return Vi.apply(this,arguments)}(Z,ct)}};(function Vt(){(0,le._registerComponent)(new Ae.wA(qe,et,"PUBLIC")),(0,le._registerComponent)(new Ae.wA("installations-internal",Qe,"PRIVATE"))})(),(0,le.registerVersion)(dt,Mt),(0,le.registerVersion)(dt,Mt,"esm2017");const Lt="@firebase/remote-config",er=new $e.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Yi{constructor(B,Z,Te,ct){this.client=B,this.storage=Z,this.storageCache=Te,this.logger=ct}isCachedDataFresh(B,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Te=Date.now()-Z,ct=Te<=B;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Te}. Cache max age millis (minimumFetchIntervalMillis setting): ${B}. Is cache hit: ${ct}.`),ct}fetch(B){var Z=this;return(0,ee.Z)(function*(){const[Te,ct]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(ct&&Z.isCachedDataFresh(B.cacheMaxAgeMillis,Te))return ct;B.eTag=ct&&ct.eTag;const Rt=yield Z.client.fetch(B),Wt=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Rt.status&&Wt.push(Z.storage.setLastSuccessfulFetchResponse(Rt)),yield Promise.all(Wt),Rt})()}}function oo(P=navigator){return P.languages&&P.languages[0]||P.language}class Os{constructor(B,Z,Te,ct,Rt,Wt){this.firebaseInstallations=B,this.sdkVersion=Z,this.namespace=Te,this.projectId=ct,this.apiKey=Rt,this.appId=Wt}fetch(B){var Z=this;return(0,ee.Z)(function*(){const[Te,ct]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),Wt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,Un={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":B.eTag||"*"},Nn={sdk_version:Z.sdkVersion,app_instance_id:Te,app_instance_id_token:ct,app_id:Z.appId,language_code:oo()},ir={method:"POST",headers:Un,body:JSON.stringify(Nn)},jr=fetch(Wt,ir),Nr=new Promise((Ti,Io)=>{B.signal.addEventListener(()=>{const nu=new Error("The operation was aborted.");nu.name="AbortError",Io(nu)})});let Po;try{yield Promise.race([jr,Nr]),Po=yield jr}catch(Ti){let Io="fetch-client-network";throw"AbortError"===(null==Ti?void 0:Ti.name)&&(Io="fetch-timeout"),er.create(Io,{originalErrorMessage:null==Ti?void 0:Ti.message})}let ws=Po.status;const xl=Po.headers.get("ETag")||void 0;let Vs,Wl;if(200===Po.status){let Ti;try{Ti=yield Po.json()}catch(Io){throw er.create("fetch-client-parse",{originalErrorMessage:null==Io?void 0:Io.message})}Vs=Ti.entries,Wl=Ti.state}if("INSTANCE_STATE_UNSPECIFIED"===Wl?ws=500:"NO_CHANGE"===Wl?ws=304:("NO_TEMPLATE"===Wl||"EMPTY_CONFIG"===Wl)&&(Vs={}),304!==ws&&200!==ws)throw er.create("fetch-status",{httpStatus:ws});return{status:ws,eTag:xl,config:Vs}})()}}class As{constructor(B,Z){this.client=B,this.storage=Z}fetch(B){var Z=this;return(0,ee.Z)(function*(){const Te=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(B,Te)})()}attemptFetch(B,{throttleEndTimeMillis:Z,backoffCount:Te}){var ct=this;return(0,ee.Z)(function*(){yield function Da(P,B){return new Promise((Z,Te)=>{const ct=Math.max(B-Date.now(),0),Rt=setTimeout(Z,ct);P.addEventListener(()=>{clearTimeout(Rt),Te(er.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(B.signal,Z);try{const Rt=yield ct.client.fetch(B);return yield ct.storage.deleteThrottleMetadata(),Rt}catch(Rt){if(!function ko(P){if(!(P instanceof $e.ZR&&P.customData))return!1;const B=Number(P.customData.httpStatus);return 429===B||500===B||503===B||504===B}(Rt))throw Rt;const Wt={throttleEndTimeMillis:Date.now()+(0,$e.$s)(Te),backoffCount:Te+1};return yield ct.storage.setThrottleMetadata(Wt),ct.attemptFetch(B,Wt)}})()}}class Qa{constructor(B,Z,Te,ct,Rt){this.app=B,this._client=Z,this._storageCache=Te,this._storage=ct,this._logger=Rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function lo(P,B){const Z=P.target.error||void 0;return er.create(B,{originalErrorMessage:Z&&(null==Z?void 0:Z.message)})}const us="app_namespace_store";class Ba{constructor(B,Z,Te,ct=function ss(){return new Promise((P,B)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=Te=>{B(lo(Te,"storage-open"))},Z.onsuccess=Te=>{P(Te.target.result)},Z.onupgradeneeded=Te=>{0===Te.oldVersion&&Te.target.result.createObjectStore(us,{keyPath:"compositeKey"})}}catch(Z){B(er.create("storage-open",{originalErrorMessage:null==Z?void 0:Z.message}))}})}()){this.appId=B,this.appName=Z,this.namespace=Te,this.openDbPromise=ct}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(B){return this.set("last_fetch_status",B)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(B){return this.set("last_successful_fetch_timestamp_millis",B)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(B){return this.set("last_successful_fetch_response",B)}getActiveConfig(){return this.get("active_config")}setActiveConfig(B){return this.set("active_config",B)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(B){return this.set("active_config_etag",B)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(B){return this.set("throttle_metadata",B)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(B){var Z=this;return(0,ee.Z)(function*(){const Te=yield Z.openDbPromise;return new Promise((ct,Rt)=>{const Un=Te.transaction([us],"readonly").objectStore(us),Nn=Z.createCompositeKey(B);try{const ir=Un.get(Nn);ir.onerror=jr=>{Rt(lo(jr,"storage-get"))},ir.onsuccess=jr=>{const Nr=jr.target.result;ct(Nr?Nr.value:void 0)}}catch(ir){Rt(er.create("storage-get",{originalErrorMessage:null==ir?void 0:ir.message}))}})})()}set(B,Z){var Te=this;return(0,ee.Z)(function*(){const ct=yield Te.openDbPromise;return new Promise((Rt,Wt)=>{const Nn=ct.transaction([us],"readwrite").objectStore(us),ir=Te.createCompositeKey(B);try{const jr=Nn.put({compositeKey:ir,value:Z});jr.onerror=Nr=>{Wt(lo(Nr,"storage-set"))},jr.onsuccess=()=>{Rt()}}catch(jr){Wt(er.create("storage-set",{originalErrorMessage:null==jr?void 0:jr.message}))}})})()}delete(B){var Z=this;return(0,ee.Z)(function*(){const Te=yield Z.openDbPromise;return new Promise((ct,Rt)=>{const Un=Te.transaction([us],"readwrite").objectStore(us),Nn=Z.createCompositeKey(B);try{const ir=Un.delete(Nn);ir.onerror=jr=>{Rt(lo(jr,"storage-delete"))},ir.onsuccess=()=>{ct()}}catch(ir){Rt(er.create("storage-delete",{originalErrorMessage:null==ir?void 0:ir.message}))}})})()}createCompositeKey(B){return[this.appId,this.appName,this.namespace,B].join()}}class Ho{constructor(B){this.storage=B}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var B=this;return(0,ee.Z)(function*(){const Z=B.storage.getLastFetchStatus(),Te=B.storage.getLastSuccessfulFetchTimestampMillis(),ct=B.storage.getActiveConfig(),Rt=yield Z;Rt&&(B.lastFetchStatus=Rt);const Wt=yield Te;Wt&&(B.lastSuccessfulFetchTimestampMillis=Wt);const Un=yield ct;Un&&(B.activeConfig=Un)})()}setLastFetchStatus(B){return this.lastFetchStatus=B,this.storage.setLastFetchStatus(B)}setLastSuccessfulFetchTimestampMillis(B){return this.lastSuccessfulFetchTimestampMillis=B,this.storage.setLastSuccessfulFetchTimestampMillis(B)}setActiveConfig(B){return this.activeConfig=B,this.storage.setActiveConfig(B)}}function uo(){return ho.apply(this,arguments)}function ho(){return(ho=(0,ee.Z)(function*(){if(!(0,$e.hl)())return!1;try{return yield(0,$e.eu)()}catch{return!1}})).apply(this,arguments)}!function co(){(0,le._registerComponent)(new Ae.wA("remote-config",function P(B,{instanceIdentifier:Z}){const Te=B.getProvider("app").getImmediate(),ct=B.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw er.create("registration-window");if(!(0,$e.hl)())throw er.create("indexed-db-unavailable");const{projectId:Rt,apiKey:Wt,appId:Un}=Te.options;if(!Rt)throw er.create("registration-project-id");if(!Wt)throw er.create("registration-api-key");if(!Un)throw er.create("registration-app-id");const Nn=new Ba(Un,Te.name,Z=Z||"firebase"),ir=new Ho(Nn),jr=new ve.Yd(Lt);jr.logLevel=ve.in.ERROR;const Nr=new Os(ct,le.SDK_VERSION,Z,Rt,Wt,Un),Po=new As(Nr,Nn),ws=new Yi(Po,Nn,ir,jr),xl=new Qa(Te,ws,ir,Nn,jr);return function Er(P){const B=(0,$e.m9)(P);B._initializePromise||(B._initializePromise=B._storageCache.loadFromStorage().then(()=>{B._isInitializationComplete=!0}))}(xl),xl},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Lt,"0.4.4"),(0,le.registerVersion)(Lt,"0.4.4","esm2017")}();const fa=(P,B)=>B.some(Z=>P instanceof Z);let fo,_s;const na=new WeakMap,xs=new WeakMap,zi=new WeakMap,Zi=new WeakMap,bo=new WeakMap;let go={get(P,B,Z){if(P instanceof IDBTransaction){if("done"===B)return xs.get(P);if("objectStoreNames"===B)return P.objectStoreNames||zi.get(P);if("store"===B)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return os(P[B])},set:(P,B,Z)=>(P[B]=Z,!0),has:(P,B)=>P instanceof IDBTransaction&&("done"===B||"store"===B)||B in P};function Ja(P){return"function"==typeof P?function ra(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function No(){return _s||(_s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...B){return P.apply(Xi(this),B),os(na.get(this))}:function(...B){return os(P.apply(Xi(this),B))}:function(B,...Z){const Te=P.call(Xi(this),B,...Z);return zi.set(Te,B.sort?B.sort():[B]),os(Te)}}(P):(P instanceof IDBTransaction&&function po(P){if(xs.has(P))return;const B=new Promise((Z,Te)=>{const ct=()=>{P.removeEventListener("complete",Rt),P.removeEventListener("error",Wt),P.removeEventListener("abort",Wt)},Rt=()=>{Z(),ct()},Wt=()=>{Te(P.error||new DOMException("AbortError","AbortError")),ct()};P.addEventListener("complete",Rt),P.addEventListener("error",Wt),P.addEventListener("abort",Wt)});xs.set(P,B)}(P),fa(P,function ta(){return fo||(fo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,go):P)}function os(P){if(P instanceof IDBRequest)return function Pi(P){const B=new Promise((Z,Te)=>{const ct=()=>{P.removeEventListener("success",Rt),P.removeEventListener("error",Wt)},Rt=()=>{Z(os(P.result)),ct()},Wt=()=>{Te(P.error),ct()};P.addEventListener("success",Rt),P.addEventListener("error",Wt)});return B.then(Z=>{Z instanceof IDBCursor&&na.set(Z,P)}).catch(()=>{}),bo.set(B,P),B}(P);if(Zi.has(P))return Zi.get(P);const B=Ja(P);return B!==P&&(Zi.set(P,B),bo.set(B,P)),B}const Xi=P=>bo.get(P);function Do(P,B,{blocked:Z,upgrade:Te,blocking:ct,terminated:Rt}={}){const Wt=indexedDB.open(P,B),Un=os(Wt);return Te&&Wt.addEventListener("upgradeneeded",Nn=>{Te(os(Wt.result),Nn.oldVersion,Nn.newVersion,os(Wt.transaction))}),Z&&Wt.addEventListener("blocked",()=>Z()),Un.then(Nn=>{Rt&&Nn.addEventListener("close",()=>Rt()),ct&&Nn.addEventListener("versionchange",()=>ct())}).catch(()=>{}),Un}function Gi(P,{blocked:B}={}){const Z=indexedDB.deleteDatabase(P);return B&&Z.addEventListener("blocked",()=>B()),os(Z).then(()=>{})}const Ua=["get","getKey","getAll","getAllKeys","count"],Ns=["put","add","delete","clear"],To=new Map;function ia(P,B){if(!(P instanceof IDBDatabase)||B in P||"string"!=typeof B)return;if(To.get(B))return To.get(B);const Z=B.replace(/FromIndex$/,""),Te=B!==Z,ct=Ns.includes(Z);if(!(Z in(Te?IDBIndex:IDBObjectStore).prototype)||!ct&&!Ua.includes(Z))return;const Rt=function(){var Wt=(0,ee.Z)(function*(Un,...Nn){const ir=this.transaction(Un,ct?"readwrite":"readonly");let jr=ir.store;return Te&&(jr=jr.index(Nn.shift())),(yield Promise.all([jr[Z](...Nn),ct&&ir.done]))[0]});return function(Nn){return Wt.apply(this,arguments)}}();return To.set(B,Rt),Rt}!function Oi(P){go=P(go)}(P=>({...P,get:(B,Z,Te)=>ia(B,Z)||P.get(B,Z,Te),has:(B,Z)=>!!ia(B,Z)||P.has(B,Z)}));const Tr="/firebase-messaging-sw.js",So="/firebase-cloud-messaging-push-scope",pa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sa="https://fcmregistrations.googleapis.com/v1",b="google.c.a.c_id",q="google.c.a.c_l",T="google.c.a.ts",W="google.c.a.e";var M=(()=>{return(P=M||(M={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",M;var P})();function F(P){const B=new Uint8Array(P);return btoa(String.fromCharCode(...B)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function L(P){const Z=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Te=atob(Z),ct=new Uint8Array(Te.length);for(let Rt=0;Rt<Te.length;++Rt)ct[Rt]=Te.charCodeAt(Rt);return ct}const ne="fcm_token_details_db",vt=5,Tn="fcm_token_object_Store";function ii(){return ii=(0,ee.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Rt=>Rt.name).includes(ne))return null;let B=null;return(yield Do(ne,vt,{upgrade:(Te=(0,ee.Z)(function*(ct,Rt,Wt,Un){var Nn;if(Rt<2||!ct.objectStoreNames.contains(Tn))return;const ir=Un.objectStore(Tn),jr=yield ir.index("fcmSenderId").get(P);if(yield ir.clear(),jr)if(2===Rt){const Nr=jr;if(!Nr.auth||!Nr.p256dh||!Nr.endpoint)return;B={token:Nr.fcmToken,createTime:null!==(Nn=Nr.createTime)&&void 0!==Nn?Nn:Date.now(),subscriptionOptions:{auth:Nr.auth,p256dh:Nr.p256dh,endpoint:Nr.endpoint,swScope:Nr.swScope,vapidKey:"string"==typeof Nr.vapidKey?Nr.vapidKey:F(Nr.vapidKey)}}}else if(3===Rt){const Nr=jr;B={token:Nr.fcmToken,createTime:Nr.createTime,subscriptionOptions:{auth:F(Nr.auth),p256dh:F(Nr.p256dh),endpoint:Nr.endpoint,swScope:Nr.swScope,vapidKey:F(Nr.vapidKey)}}}else if(4===Rt){const Nr=jr;B={token:Nr.fcmToken,createTime:Nr.createTime,subscriptionOptions:{auth:F(Nr.auth),p256dh:F(Nr.p256dh),endpoint:Nr.endpoint,swScope:Nr.swScope,vapidKey:F(Nr.vapidKey)}}}}),function(Rt,Wt,Un,Nn){return Te.apply(this,arguments)})})).close(),yield Gi(ne),yield Gi("fcm_vapid_details_db"),yield Gi("undefined"),function Qi(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:B}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof B.auth&&B.auth.length>0&&"string"==typeof B.p256dh&&B.p256dh.length>0&&"string"==typeof B.endpoint&&B.endpoint.length>0&&"string"==typeof B.swScope&&B.swScope.length>0&&"string"==typeof B.vapidKey&&B.vapidKey.length>0}(B)?B:null;var Te}),ii.apply(this,arguments)}const ds="firebase-messaging-database",Ao=1,xi="firebase-messaging-store";let Va=null;function ts(){return Va||(Va=Do(ds,Ao,{upgrade:(P,B)=>{0===B&&P.createObjectStore(xi)}})),Va}function Ks(P){return qs.apply(this,arguments)}function qs(){return qs=(0,ee.Z)(function*(P){const B=Ta(P),Te=yield(yield ts()).transaction(xi).objectStore(xi).get(B);if(Te)return Te;{const ct=yield function $r(P){return ii.apply(this,arguments)}(P.appConfig.senderId);if(ct)return yield oa(P,ct),ct}}),qs.apply(this,arguments)}function oa(P,B){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,ee.Z)(function*(P,B){const Z=Ta(P),ct=(yield ts()).transaction(xi,"readwrite");return yield ct.objectStore(xi).put(B,Z),yield ct.done,B})).apply(this,arguments)}function el(){return(el=(0,ee.Z)(function*(P){const B=Ta(P),Te=(yield ts()).transaction(xi,"readwrite");yield Te.objectStore(xi).delete(B),yield Te.done})).apply(this,arguments)}function Ta({appConfig:P}){return P.appId}const ns=new $e.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rs(P,B){return tl.apply(this,arguments)}function tl(){return(tl=(0,ee.Z)(function*(P,B){const Z=yield as(P),Te=Go(B),ct={method:"POST",headers:Z,body:JSON.stringify(Te)};let Rt;try{Rt=yield(yield fetch(ga(P.appConfig),ct)).json()}catch(Wt){throw ns.create("token-subscribe-failed",{errorInfo:null==Wt?void 0:Wt.toString()})}if(Rt.error)throw ns.create("token-subscribe-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw ns.create("token-subscribe-no-token");return Rt.token})).apply(this,arguments)}function zo(){return(zo=(0,ee.Z)(function*(P,B){const Z=yield as(P),Te=Go(B.subscriptionOptions),ct={method:"PATCH",headers:Z,body:JSON.stringify(Te)};let Rt;try{Rt=yield(yield fetch(`${ga(P.appConfig)}/${B.token}`,ct)).json()}catch(Wt){throw ns.create("token-update-failed",{errorInfo:null==Wt?void 0:Wt.toString()})}if(Rt.error)throw ns.create("token-update-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw ns.create("token-update-no-token");return Rt.token})).apply(this,arguments)}function Fo(P,B){return nl.apply(this,arguments)}function nl(){return(nl=(0,ee.Z)(function*(P,B){const Te={method:"DELETE",headers:yield as(P)};try{const Rt=yield(yield fetch(`${ga(P.appConfig)}/${B}`,Te)).json();if(Rt.error)throw ns.create("token-unsubscribe-failed",{errorInfo:Rt.error.message})}catch(ct){throw ns.create("token-unsubscribe-failed",{errorInfo:null==ct?void 0:ct.toString()})}})).apply(this,arguments)}function ga({projectId:P}){return`${sa}/projects/${P}/registrations`}function as(P){return xo.apply(this,arguments)}function xo(){return(xo=(0,ee.Z)(function*({appConfig:P,installations:B}){const Z=yield B.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function Go({p256dh:P,auth:B,endpoint:Z,vapidKey:Te}){const ct={web:{endpoint:Z,auth:B,p256dh:P}};return Te!==pa&&(ct.web.applicationPubKey=Te),ct}const Zs=6048e5;function Aa(){return Aa=(0,ee.Z)(function*(P){const B=yield function yl(P,B){return mo.apply(this,arguments)}(P.swRegistration,P.vapidKey),Z={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:B.endpoint,auth:F(B.getKey("auth")),p256dh:F(B.getKey("p256dh"))},Te=yield Ks(P.firebaseDependencies);if(Te){if(function jl(P,B){return B.vapidKey===P.vapidKey&&B.endpoint===P.endpoint&&B.auth===P.auth&&B.p256dh===P.p256dh}(Te.subscriptionOptions,Z))return Date.now()>=Te.createTime+Zs?function Vr(P,B){return Ro.apply(this,arguments)}(P,{token:Te.token,createTime:Date.now(),subscriptionOptions:Z}):Te.token;try{yield Fo(P.firebaseDependencies,Te.token)}catch(ct){console.warn(ct)}return xa(P.firebaseDependencies,Z)}return xa(P.firebaseDependencies,Z)}),Aa.apply(this,arguments)}function Fs(){return Fs=(0,ee.Z)(function*(P){const B=yield Ks(P.firebaseDependencies);B&&(yield Fo(P.firebaseDependencies,B.token),yield function ml(P){return el.apply(this,arguments)}(P.firebaseDependencies));const Z=yield P.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()}),Fs.apply(this,arguments)}function Ro(){return Ro=(0,ee.Z)(function*(P,B){try{const Z=yield function Sa(P,B){return zo.apply(this,arguments)}(P.firebaseDependencies,B),Te=Object.assign(Object.assign({},B),{token:Z,createTime:Date.now()});return yield oa(P.firebaseDependencies,Te),Z}catch(Z){throw yield function ls(P){return Fs.apply(this,arguments)}(P),Z}}),Ro.apply(this,arguments)}function xa(P,B){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,ee.Z)(function*(P,B){const Te={token:yield Rs(P,B),createTime:Date.now(),subscriptionOptions:B};return yield oa(P,Te),Te.token})).apply(this,arguments)}function mo(){return(mo=(0,ee.Z)(function*(P,B){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:L(B)})})).apply(this,arguments)}function Sr(P){const B={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function Hl(P,B){if(!B.notification)return;P.notification={};const Z=B.notification.title;Z&&(P.notification.title=Z);const Te=B.notification.body;Te&&(P.notification.body=Te);const ct=B.notification.image;ct&&(P.notification.image=ct);const Rt=B.notification.icon;Rt&&(P.notification.icon=Rt)}(B,P),function vl(P,B){B.data&&(P.data=B.data)}(B,P),function $(P,B){var Z,Te,ct,Rt,Wt;if(!(B.fcmOptions||null!==(Z=B.notification)&&void 0!==Z&&Z.click_action))return;P.fcmOptions={};const Un=null!==(ct=null===(Te=B.fcmOptions)||void 0===Te?void 0:Te.link)&&void 0!==ct?ct:null===(Rt=B.notification)||void 0===Rt?void 0:Rt.click_action;Un&&(P.fcmOptions.link=Un);const Nn=null===(Wt=B.fcmOptions)||void 0===Wt?void 0:Wt.analytics_label;Nn&&(P.fcmOptions.analyticsLabel=Nn)}(B,P),B}function H(P,B){const Z=[];for(let Te=0;Te<P.length;Te++)Z.push(P.charAt(Te)),Te<B.length&&Z.push(B.charAt(Te));return Z.join("")}function Le(P){return ns.create("missing-app-config-values",{valueName:P})}H("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),H("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zt{constructor(B,Z,Te){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ct=function ie(P){if(!P||!P.options)throw Le("App Configuration Object");if(!P.name)throw Le("App Name");const B=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=P;for(const Te of B)if(!Z[Te])throw Le(Te);return{appName:P.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(B);this.firebaseDependencies={app:B,appConfig:ct,installations:Z,analyticsProvider:Te}}_delete(){return Promise.resolve()}}function en(P){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,ee.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(Tr,{scope:So}),P.swRegistration.update().catch(()=>{})}catch(B){throw ns.create("failed-service-worker-registration",{browserErrorMessage:null==B?void 0:B.message})}})).apply(this,arguments)}function Kr(){return(Kr=(0,ee.Z)(function*(P,B){if(!B&&!P.swRegistration&&(yield en(P)),B||!P.swRegistration){if(!(B instanceof ServiceWorkerRegistration))throw ns.create("invalid-sw-registration");P.swRegistration=B}})).apply(this,arguments)}function wr(){return(wr=(0,ee.Z)(function*(P,B){B?P.vapidKey=B:P.vapidKey||(P.vapidKey=pa)})).apply(this,arguments)}function bi(){return bi=(0,ee.Z)(function*(P,B){if(!navigator)throw ns.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ns.create("permission-blocked");return yield function Br(P,B){return wr.apply(this,arguments)}(P,null==B?void 0:B.vapidKey),yield function Ar(P,B){return Kr.apply(this,arguments)}(P,null==B?void 0:B.serviceWorkerRegistration),function hs(P){return Aa.apply(this,arguments)}(P)}),bi.apply(this,arguments)}function Wo(){return(Wo=(0,ee.Z)(function*(P,B,Z){const Te=function yo(P){switch(P){case M.NOTIFICATION_CLICKED:return"notification_open";case M.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(B);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(Te,{message_id:Z[b],message_name:Z[q],message_time:Z[T],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Es(){return Es=(0,ee.Z)(function*(P,B){const Z=B.data;if(!Z.isFirebaseMessaging)return;P.onMessageHandler&&Z.messageType===M.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Sr(Z)):P.onMessageHandler.next(Sr(Z)));const Te=Z.data;(function Q(P){return"object"==typeof P&&!!P&&b in P})(Te)&&"1"===Te[W]&&(yield function Bi(P,B,Z){return Wo.apply(this,arguments)}(P,Z.messageType,Te))}),Es.apply(this,arguments)}const Xs="@firebase/messaging",Qs=P=>{const B=new Zt(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function Ko(P,B){return Es.apply(this,arguments)}(B,Z)),B},rl=P=>{const B=P.getProvider("messaging").getImmediate();return{getToken:Te=>function Ri(P,B){return bi.apply(this,arguments)}(B,Te)}};function Rc(){return qo.apply(this,arguments)}function qo(){return(qo=(0,ee.Z)(function*(){try{yield(0,$e.eu)()}catch{return!1}return typeof window<"u"&&(0,$e.hl)()&&(0,$e.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _l(){(0,le._registerComponent)(new Ae.wA("messaging",Qs,"PUBLIC")),(0,le._registerComponent)(new Ae.wA("messaging-internal",rl,"PRIVATE")),(0,le.registerVersion)(Xs,"0.12.4"),(0,le.registerVersion)(Xs,"0.12.4","esm2017")}();const mi="analytics",Kc="firebase_id",Kn="origin",dr=6e4,lc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jn="https://www.googletagmanager.com/gtag/js",Ht=new ve.Yd("@firebase/analytics"),si=new $e.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function il(P){if(!P.startsWith(jn)){const B=si.create("invalid-gtag-resource",{gtagURL:P});return Ht.warn(B.message),""}return P}function cc(P){return Promise.all(P.map(B=>B.catch(Z=>Z)))}function $o(){return($o=(0,ee.Z)(function*(P,B,Z,Te,ct,Rt){const Wt=Te[ct];try{if(Wt)yield B[Wt];else{const Nn=(yield cc(Z)).find(ir=>ir.measurementId===ct);Nn&&(yield B[Nn.appId])}}catch(Un){Ht.error(Un)}P("config",ct,Rt)})).apply(this,arguments)}function Mc(){return(Mc=(0,ee.Z)(function*(P,B,Z,Te,ct){try{let Rt=[];if(ct&&ct.send_to){let Wt=ct.send_to;Array.isArray(Wt)||(Wt=[Wt]);const Un=yield cc(Z);for(const Nn of Wt){const ir=Un.find(Nr=>Nr.measurementId===Nn),jr=ir&&B[ir.appId];if(!jr){Rt=[];break}Rt.push(jr)}}0===Rt.length&&(Rt=Object.values(B)),yield Promise.all(Rt),P("event",Te,ct||{})}catch(Rt){Ht.error(Rt)}})).apply(this,arguments)}const aa=30,sr=new class ci{constructor(B={},Z=1e3){this.throttleMetadata=B,this.intervalMillis=Z}getThrottleMetadata(B){return this.throttleMetadata[B]}setThrottleMetadata(B,Z){this.throttleMetadata[B]=Z}deleteThrottleMetadata(B){delete this.throttleMetadata[B]}};function Pc(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function Ni(){return(Ni=(0,ee.Z)(function*(P){var B;const{appId:Z,apiKey:Te}=P,ct={method:"GET",headers:Pc(Te)},Rt=lc.replace("{app-id}",Z),Wt=yield fetch(Rt,ct);if(200!==Wt.status&&304!==Wt.status){let Un="";try{const Nn=yield Wt.json();null!==(B=Nn.error)&&void 0!==B&&B.message&&(Un=Nn.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:Wt.status,responseMessage:Un})}return Wt.json()})).apply(this,arguments)}function Ln(){return(Ln=(0,ee.Z)(function*(P,B=sr,Z){const{appId:Te,apiKey:ct,measurementId:Rt}=P.options;if(!Te)throw si.create("no-app-id");if(!ct){if(Rt)return{measurementId:Rt,appId:Te};throw si.create("no-api-key")}const Wt=B.getThrottleMetadata(Te)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Un=new dc;return setTimeout((0,ee.Z)(function*(){Un.abort()}),void 0!==Z?Z:dr),zl({appId:Te,apiKey:ct,measurementId:Rt},Wt,Un,B)})).apply(this,arguments)}function zl(P,B,Z){return uc.apply(this,arguments)}function uc(){return uc=(0,ee.Z)(function*(P,{throttleEndTimeMillis:B,backoffCount:Z},Te,ct=sr){var Rt;const{appId:Wt,measurementId:Un}=P;try{yield function wl(P,B){return new Promise((Z,Te)=>{const ct=Math.max(B-Date.now(),0),Rt=setTimeout(Z,ct);P.addEventListener(()=>{clearTimeout(Rt),Te(si.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(Te,B)}catch(Nn){if(Un)return Ht.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Un} provided in the "measurementId" field in the local Firebase config. [${null==Nn?void 0:Nn.message}]`),{appId:Wt,measurementId:Un};throw Nn}try{const Nn=yield function Ei(P){return Ni.apply(this,arguments)}(P);return ct.deleteThrottleMetadata(Wt),Nn}catch(Nn){const ir=Nn;if(!function Zc(P){if(!(P instanceof $e.ZR&&P.customData))return!1;const B=Number(P.customData.httpStatus);return 429===B||500===B||503===B||504===B}(ir)){if(ct.deleteThrottleMetadata(Wt),Un)return Ht.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Un} provided in the "measurementId" field in the local Firebase config. [${null==ir?void 0:ir.message}]`),{appId:Wt,measurementId:Un};throw Nn}const jr=503===Number(null===(Rt=null==ir?void 0:ir.customData)||void 0===Rt?void 0:Rt.httpStatus)?(0,$e.$s)(Z,ct.intervalMillis,aa):(0,$e.$s)(Z,ct.intervalMillis),Nr={throttleEndTimeMillis:Date.now()+jr,backoffCount:Z+1};return ct.setThrottleMetadata(Wt,Nr),Ht.debug(`Calling attemptFetch again in ${jr} millis`),zl(P,Nr,Te,ct)}}),uc.apply(this,arguments)}class dc{constructor(){this.listeners=[]}addEventListener(B){this.listeners.push(B)}abort(){this.listeners.forEach(B=>B())}}let Cl,_u;function Xc(){return(Xc=(0,ee.Z)(function*(P,B,Z,Te,ct){if(ct&&ct.global)P("event",Z,Te);else{const Rt=yield B;P("event",Z,Object.assign(Object.assign({},Te),{send_to:Rt}))}})).apply(this,arguments)}function Pr(){return(Pr=(0,ee.Z)(function*(){if(!(0,$e.hl)())return Ht.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,$e.eu)()}catch(P){return Ht.warn(si.create("indexeddb-unavailable",{errorInfo:null==P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function x(){return x=(0,ee.Z)(function*(P,B,Z,Te,ct,Rt,Wt){var Un;const Nn=function fs(P){return Ln.apply(this,arguments)}(P);Nn.then(ws=>{Z[ws.measurementId]=ws.appId,P.options.measurementId&&ws.measurementId!==P.options.measurementId&&Ht.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${ws.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ws=>Ht.error(ws)),B.push(Nn);const ir=function ui(){return Pr.apply(this,arguments)}().then(ws=>{if(ws)return Te.getId()}),[jr,Nr]=yield Promise.all([Nn,ir]);(function pr(P){const B=window.document.getElementsByTagName("script");for(const Z of Object.values(B))if(Z.src&&Z.src.includes(jn)&&Z.src.includes(P))return Z;return null})(Rt)||function Ra(P,B){const Z=function El(P,B){let Z;return window.trustedTypes&&(Z=window.trustedTypes.createPolicy(P,B)),Z}("firebase-js-sdk-policy",{createScriptURL:il}),Te=document.createElement("script"),ct=`${jn}?l=${P}&id=${B}`;Te.src=Z?null==Z?void 0:Z.createScriptURL(ct):ct,Te.async=!0,document.head.appendChild(Te)}(Rt,jr.measurementId),_u&&(ct("consent","default",_u),function la(P){_u=P}(void 0)),ct("js",new Date);const Po=null!==(Un=null==Wt?void 0:Wt.config)&&void 0!==Un?Un:{};return Po[Kn]="firebase",Po.update=!0,null!=Nr&&(Po[Kc]=Nr),ct("config",jr.measurementId,Po),Cl&&(ct("set",Cl),function Yo(P){Cl=P}(void 0)),jr.measurementId}),x.apply(this,arguments)}class w{constructor(B){this.app=B}_delete(){return delete O[this.app.options.appId],Promise.resolve()}}let O={},z=[];const re={};let Ut,En,ae="dataLayer",at="gtag",Hn=!1;function rs(P,B,Z){!function Ii(){const P=[];if((0,$e.ru)()&&P.push("This is a browser extension environment."),(0,$e.zI)()||P.push("Cookies are not available."),P.length>0){const B=P.map((Te,ct)=>`(${ct+1}) ${Te}`).join(" "),Z=si.create("invalid-analytics-context",{errorInfo:B});Ht.warn(Z.message)}}();const Te=P.options.appId;if(!Te)throw si.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw si.create("no-api-key");Ht.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=O[Te])throw si.create("already-exists",{id:Te});if(!Hn){!function Ld(P){let B=[];Array.isArray(window[P])?B=window[P]:window[P]=B}(ae);const{wrappedGtag:Rt,gtagCore:Wt}=function ma(P,B,Z,Te,ct){let Rt=function(...Wt){window[Te].push(arguments)};return window[ct]&&"function"==typeof window[ct]&&(Rt=window[ct]),window[ct]=function eo(P,B,Z,Te){function Rt(){return Rt=(0,ee.Z)(function*(Wt,...Un){try{if("event"===Wt){const[Nn,ir]=Un;yield function Il(P,B,Z,Te,ct){return Mc.apply(this,arguments)}(P,B,Z,Nn,ir)}else if("config"===Wt){const[Nn,ir]=Un;yield function qc(P,B,Z,Te,ct,Rt){return $o.apply(this,arguments)}(P,B,Z,Te,Nn,ir)}else if("consent"===Wt){const[Nn]=Un;P("consent","update",Nn)}else if("get"===Wt){const[Nn,ir,jr]=Un;P("get",Nn,ir,jr)}else if("set"===Wt){const[Nn]=Un;P("set",Nn)}else P(Wt,...Un)}catch(Nn){Ht.error(Nn)}}),Rt.apply(this,arguments)}return function ct(Wt){return Rt.apply(this,arguments)}}(Rt,P,B,Z),{gtagCore:Rt,wrappedGtag:window[ct]}}(O,z,re,ae,at);En=Rt,Ut=Wt,Hn=!0}return O[Te]=function S(P,B,Z,Te,ct,Rt,Wt){return x.apply(this,arguments)}(P,z,re,B,Ut,ae,Z),new w(P)}function Mo(){return Is.apply(this,arguments)}function Is(){return(Is=(0,ee.Z)(function*(){if((0,$e.ru)()||!(0,$e.zI)()||!(0,$e.hl)())return!1;try{return yield(0,$e.eu)()}catch{return!1}})).apply(this,arguments)}const nd="@firebase/analytics";!function id(){(0,le._registerComponent)(new Ae.wA(mi,(B,{options:Z})=>rs(B.getProvider("app").getImmediate(),B.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,le._registerComponent)(new Ae.wA("analytics-internal",function P(B){try{const Z=B.getProvider(mi).getImmediate();return{logEvent:(Te,ct,Rt)=>function $d(P,B,Z,Te){P=(0,$e.m9)(P),function Oc(P,B,Z,Te,ct){return Xc.apply(this,arguments)}(En,O[P.app.options.appId],B,Z,Te).catch(ct=>Ht.error(ct))}(Z,Te,ct,Rt)}}catch(Z){throw si.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,le.registerVersion)(nd,"0.10.0"),(0,le.registerVersion)(nd,"0.10.0","esm2017")}();var Eu=j(4408),kc=j(7565);const Fc=new class Nc extends kc.v{}(class Bd extends Eu.o{constructor(B,Z){super(B,Z),this.scheduler=B,this.work=Z}schedule(B,Z=0){return Z>0?super.schedule(B,Z):(this.delay=Z,this.state=B,this.scheduler.flush(this),this)}execute(B,Z){return Z>0||this.closed?super.execute(B,Z):this._execute(B,Z)}requestAsyncId(B,Z,Te=0){return null!=Te&&Te>0||null==Te&&this.delay>0?super.requestAsyncId(B,Z,Te):(B.flush(this),0)}});var Bs=j(4986),sd=j(8505),ol=j(5363),Jc=j(9468);const xr=new _.GfV("7.5.0"),Tl="__angularfire_symbol__analyticsIsSupportedValue",Us="__angularfire_symbol__analyticsIsSupported",Ui="__angularfire_symbol__remoteConfigIsSupportedValue",Sl="__angularfire_symbol__remoteConfigIsSupported",va="__angularfire_symbol__messagingIsSupportedValue",ps="__angularfire_symbol__messagingIsSupported";function Al(P,B,Z){if(B){if(1===B.length)return B[0];const Rt=B.filter(Wt=>Wt.app===Z);if(1===Rt.length)return Rt[0]}return Z.container.getProvider(P).getImmediate({optional:!0})}globalThis[Us]||(globalThis[Us]=Mo().then(P=>globalThis[Tl]=P).catch(()=>globalThis[Tl]=!1)),globalThis[ps]||(globalThis[ps]=Rc().then(P=>globalThis[va]=P).catch(()=>globalThis[va]=!1)),globalThis[Sl]||(globalThis[Sl]=uo().then(P=>globalThis[Ui]=P).catch(()=>globalThis[Ui]=!1));const Hr=(P,B)=>{const Z=B?[B]:(0,y.C6)(),Te=[];return Z.forEach(ct=>{ct.container.getProvider(P).instances.forEach(Wt=>{Te.includes(Wt)||Te.push(Wt)})}),Te};function ro(){}class Lc{constructor(B,Z=Fc){this.zone=B,this.delegate=Z}now(){return this.delegate.now()}schedule(B,Z,Te){const ct=this.zone;return this.delegate.schedule(function(Wt){ct.runGuarded(()=>{B.apply(this,[Wt])})},Z,Te)}}class pc{constructor(B){this.zone=B,this.task=null}call(B,Z){const Te=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ro,{},ro,ro)),Z.pipe((0,sd.b)({next:Te,complete:Te,error:Te})).subscribe(B).add(Te)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Uo=(()=>{class P{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new Lc(Zone.current)),this.insideAngular=Z.run(()=>new Lc(Zone.current,Bs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(Z){return new(Z||P)(_.LFG(_.R0b))},P.\u0275prov=_.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function Ma(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function eu(P){return P.pipe((0,ol.Q)(Ma().outsideAngular))}function Qo(P){return Ma(),function tu(P){return function(Z){return(Z=Z.lift(new pc(P.ngZone))).pipe((0,Jc.R)(P.outsideAngular),(0,ol.Q)(P.insideAngular))}}(Ma())(P)}},2090:(In,Et,j)=>{"use strict";j.d(Et,{$s:()=>Ze,BH:()=>tt,DV:()=>hr,Dv:()=>Dr,G6:()=>Fe,GJ:()=>cn,L:()=>Ge,LL:()=>zt,Pz:()=>it,Sg:()=>Pt,UG:()=>Ne,UI:()=>tr,US:()=>Ae,Wj:()=>pi,Wl:()=>At,Yr:()=>yt,ZB:()=>ye,ZR:()=>nn,aH:()=>Y,b$:()=>pt,cI:()=>Re,dS:()=>gi,eu:()=>Be,g5:()=>ee,gK:()=>Qr,gQ:()=>Gn,h$:()=>Ue,hl:()=>je,hu:()=>y,jU:()=>De,lb:()=>Lr,m9:()=>qt,ne:()=>qn,p$:()=>de,pd:()=>wi,r3:()=>Cn,ru:()=>He,tV:()=>Ee,uI:()=>ke,ug:()=>ur,vZ:()=>bn,w1:()=>dt,w9:()=>xn,xO:()=>Cr,xb:()=>_r,z$:()=>Ve,zI:()=>ht,zd:()=>di});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},y=function(we,Ie){if(!we)throw ee(Ie)},ee=function(we){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+we)},le=function(we){const Ie=[];let Ye=0;for(let Ot=0;Ot<we.length;Ot++){let lt=we.charCodeAt(Ot);lt<128?Ie[Ye++]=lt:lt<2048?(Ie[Ye++]=lt>>6|192,Ie[Ye++]=63&lt|128):55296==(64512&lt)&&Ot+1<we.length&&56320==(64512&we.charCodeAt(Ot+1))?(lt=65536+((1023&lt)<<10)+(1023&we.charCodeAt(++Ot)),Ie[Ye++]=lt>>18|240,Ie[Ye++]=lt>>12&63|128,Ie[Ye++]=lt>>6&63|128,Ie[Ye++]=63&lt|128):(Ie[Ye++]=lt>>12|224,Ie[Ye++]=lt>>6&63|128,Ie[Ye++]=63&lt|128)}return Ie},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(we,Ie){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ye=Ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ot=[];for(let lt=0;lt<we.length;lt+=3){const un=we[lt],ut=lt+1<we.length,Ke=ut?we[lt+1]:0,_e=lt+2<we.length,gt=_e?we[lt+2]:0;let Ce=(15&Ke)<<2|gt>>6,St=63&gt;_e||(St=64,ut||(Ce=64)),Ot.push(Ye[un>>2],Ye[(3&un)<<4|Ke>>4],Ye[Ce],Ye[St])}return Ot.join("")},encodeString(we,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?btoa(we):this.encodeByteArray(le(we),Ie)},decodeString(we,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?atob(we):function(we){const Ie=[];let Ye=0,Ot=0;for(;Ye<we.length;){const lt=we[Ye++];if(lt<128)Ie[Ot++]=String.fromCharCode(lt);else if(lt>191&&lt<224){const un=we[Ye++];Ie[Ot++]=String.fromCharCode((31&lt)<<6|63&un)}else if(lt>239&&lt<365){const _e=((7&lt)<<18|(63&we[Ye++])<<12|(63&we[Ye++])<<6|63&we[Ye++])-65536;Ie[Ot++]=String.fromCharCode(55296+(_e>>10)),Ie[Ot++]=String.fromCharCode(56320+(1023&_e))}else{const un=we[Ye++],ut=we[Ye++];Ie[Ot++]=String.fromCharCode((15&lt)<<12|(63&un)<<6|63&ut)}}return Ie.join("")}(this.decodeStringToByteArray(we,Ie))},decodeStringToByteArray(we,Ie){this.init_();const Ye=Ie?this.charToByteMapWebSafe_:this.charToByteMap_,Ot=[];for(let lt=0;lt<we.length;){const un=Ye[we.charAt(lt++)],Ke=lt<we.length?Ye[we.charAt(lt)]:0;++lt;const gt=lt<we.length?Ye[we.charAt(lt)]:64;++lt;const he=lt<we.length?Ye[we.charAt(lt)]:64;if(++lt,null==un||null==Ke||null==gt||null==he)throw new ve;Ot.push(un<<2|Ke>>4),64!==gt&&(Ot.push(Ke<<4&240|gt>>2),64!==he&&Ot.push(gt<<6&192|he))}return Ot},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ue=function(we){const Ie=le(we);return Ae.encodeByteArray(Ie,!0)},Ge=function(we){return Ue(we).replace(/\./g,"")},Ee=function(we){try{return Ae.decodeString(we,!0)}catch(Ie){console.error("base64Decode failed: ",Ie)}return null};function de(we){return ye(void 0,we)}function ye(we,Ie){if(!(Ie instanceof Object))return Ie;switch(Ie.constructor){case Date:return new Date(Ie.getTime());case Object:void 0===we&&(we={});break;case Array:we=[];break;default:return Ie}for(const Ye in Ie)!Ie.hasOwnProperty(Ye)||!We(Ye)||(we[Ye]=ye(we[Ye],Ie[Ye]));return we}function We(we){return"__proto__"!==we}const xe=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const we=process.env.__FIREBASE_DEFAULTS__;return we?JSON.parse(we):void 0})()||(()=>{if(typeof document>"u")return;let we;try{we=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ie=we&&Ee(we[1]);return Ie&&JSON.parse(Ie)})()}catch(we){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${we}`)}},Y=()=>{var we;return null===(we=xe())||void 0===we?void 0:we.config},it=we=>{var Ie;return null===(Ie=xe())||void 0===Ie?void 0:Ie[`_${we}`]};class tt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ie,Ye)=>{this.resolve=Ie,this.reject=Ye})}wrapCallback(Ie){return(Ye,Ot)=>{Ye?this.reject(Ye):this.resolve(Ot),"function"==typeof Ie&&(this.promise.catch(()=>{}),1===Ie.length?Ie(Ye):Ie(Ye,Ot))}}}function Pt(we,Ie){if(we.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ot=Ie||"demo-project",lt=we.iat||0,un=we.sub||we.user_id;if(!un)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${Ot}`,aud:Ot,iat:lt,exp:lt+3600,auth_time:lt,sub:un,user_id:un,firebase:{sign_in_provider:"custom",identities:{}}},we);return[Ge(JSON.stringify({alg:"none",type:"JWT"})),Ge(JSON.stringify(ut)),""].join(".")}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ke(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ne(){var we;const Ie=null===(we=xe())||void 0===we?void 0:we.forceEnvironment;if("node"===Ie)return!0;if("browser"===Ie)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function De(){return"object"==typeof self&&self.self===self}function He(){const we="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof we&&void 0!==we.id}function pt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dt(){const we=Ve();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function yt(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function Fe(){return!Ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise((we,Ie)=>{try{let Ye=!0;const Ot="validate-browser-context-for-indexeddb-analytics-module",lt=self.indexedDB.open(Ot);lt.onsuccess=()=>{lt.result.close(),Ye||self.indexedDB.deleteDatabase(Ot),we(!0)},lt.onupgradeneeded=()=>{Ye=!1},lt.onerror=()=>{var un;Ie((null===(un=lt.error)||void 0===un?void 0:un.message)||"")}}catch(Ye){Ie(Ye)}})}function ht(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class nn extends Error{constructor(Ie,Ye,Ot){super(Ye),this.code=Ie,this.customData=Ot,this.name="FirebaseError",Object.setPrototypeOf(this,nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}}class zt{constructor(Ie,Ye,Ot){this.service=Ie,this.serviceName=Ye,this.errors=Ot}create(Ie,...Ye){const Ot=Ye[0]||{},lt=`${this.service}/${Ie}`,un=this.errors[Ie],ut=un?function Dn(we,Ie){return we.replace(kt,(Ye,Ot)=>{const lt=Ie[Ot];return null!=lt?String(lt):`<${Ot}?>`})}(un,Ot):"Error";return new nn(lt,`${this.serviceName}: ${ut} (${lt}).`,Ot)}}const kt=/\{\$([^}]+)}/g;function Re(we){return JSON.parse(we)}function At(we){return JSON.stringify(we)}const gn=function(we){let Ie={},Ye={},Ot={},lt="";try{const un=we.split(".");Ie=Re(Ee(un[0])||""),Ye=Re(Ee(un[1])||""),lt=un[2],Ot=Ye.d||{},delete Ye.d}catch{}return{header:Ie,claims:Ye,data:Ot,signature:lt}},xn=function(we){const Ye=gn(we).claims;return!!Ye&&"object"==typeof Ye&&Ye.hasOwnProperty("iat")},cn=function(we){const Ie=gn(we).claims;return"object"==typeof Ie&&!0===Ie.admin};function Cn(we,Ie){return Object.prototype.hasOwnProperty.call(we,Ie)}function hr(we,Ie){if(Object.prototype.hasOwnProperty.call(we,Ie))return we[Ie]}function _r(we){for(const Ie in we)if(Object.prototype.hasOwnProperty.call(we,Ie))return!1;return!0}function tr(we,Ie,Ye){const Ot={};for(const lt in we)Object.prototype.hasOwnProperty.call(we,lt)&&(Ot[lt]=Ie.call(Ye,we[lt],lt,we));return Ot}function bn(we,Ie){if(we===Ie)return!0;const Ye=Object.keys(we),Ot=Object.keys(Ie);for(const lt of Ye){if(!Ot.includes(lt))return!1;const un=we[lt],ut=Ie[lt];if(zn(un)&&zn(ut)){if(!bn(un,ut))return!1}else if(un!==ut)return!1}for(const lt of Ot)if(!Ye.includes(lt))return!1;return!0}function zn(we){return null!==we&&"object"==typeof we}function Cr(we){const Ie=[];for(const[Ye,Ot]of Object.entries(we))Array.isArray(Ot)?Ot.forEach(lt=>{Ie.push(encodeURIComponent(Ye)+"="+encodeURIComponent(lt))}):Ie.push(encodeURIComponent(Ye)+"="+encodeURIComponent(Ot));return Ie.length?"&"+Ie.join("&"):""}function di(we){const Ie={};return we.replace(/^\?/,"").split("&").forEach(Ot=>{if(Ot){const[lt,un]=Ot.split("=");Ie[decodeURIComponent(lt)]=decodeURIComponent(un)}}),Ie}function wi(we){const Ie=we.indexOf("?");if(!Ie)return"";const Ye=we.indexOf("#",Ie);return we.substring(Ie,Ye>0?Ye:void 0)}class Gn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ie=1;Ie<this.blockSize;++Ie)this.pad_[Ie]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ie,Ye){Ye||(Ye=0);const Ot=this.W_;if("string"==typeof Ie)for(let he=0;he<16;he++)Ot[he]=Ie.charCodeAt(Ye)<<24|Ie.charCodeAt(Ye+1)<<16|Ie.charCodeAt(Ye+2)<<8|Ie.charCodeAt(Ye+3),Ye+=4;else for(let he=0;he<16;he++)Ot[he]=Ie[Ye]<<24|Ie[Ye+1]<<16|Ie[Ye+2]<<8|Ie[Ye+3],Ye+=4;for(let he=16;he<80;he++){const Ce=Ot[he-3]^Ot[he-8]^Ot[he-14]^Ot[he-16];Ot[he]=4294967295&(Ce<<1|Ce>>>31)}let gt,Nt,lt=this.chain_[0],un=this.chain_[1],ut=this.chain_[2],Ke=this.chain_[3],_e=this.chain_[4];for(let he=0;he<80;he++){he<40?he<20?(gt=Ke^un&(ut^Ke),Nt=1518500249):(gt=un^ut^Ke,Nt=1859775393):he<60?(gt=un&ut|Ke&(un|ut),Nt=2400959708):(gt=un^ut^Ke,Nt=3395469782);const Ce=(lt<<5|lt>>>27)+gt+_e+Nt+Ot[he]&4294967295;_e=Ke,Ke=ut,ut=4294967295&(un<<30|un>>>2),un=lt,lt=Ce}this.chain_[0]=this.chain_[0]+lt&4294967295,this.chain_[1]=this.chain_[1]+un&4294967295,this.chain_[2]=this.chain_[2]+ut&4294967295,this.chain_[3]=this.chain_[3]+Ke&4294967295,this.chain_[4]=this.chain_[4]+_e&4294967295}update(Ie,Ye){if(null==Ie)return;void 0===Ye&&(Ye=Ie.length);const Ot=Ye-this.blockSize;let lt=0;const un=this.buf_;let ut=this.inbuf_;for(;lt<Ye;){if(0===ut)for(;lt<=Ot;)this.compress_(Ie,lt),lt+=this.blockSize;if("string"==typeof Ie){for(;lt<Ye;)if(un[ut]=Ie.charCodeAt(lt),++ut,++lt,ut===this.blockSize){this.compress_(un),ut=0;break}}else for(;lt<Ye;)if(un[ut]=Ie[lt],++ut,++lt,ut===this.blockSize){this.compress_(un),ut=0;break}}this.inbuf_=ut,this.total_+=Ye}digest(){const Ie=[];let Ye=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let lt=this.blockSize-1;lt>=56;lt--)this.buf_[lt]=255&Ye,Ye/=256;this.compress_(this.buf_);let Ot=0;for(let lt=0;lt<5;lt++)for(let un=24;un>=0;un-=8)Ie[Ot]=this.chain_[lt]>>un&255,++Ot;return Ie}}function qn(we,Ie){const Ye=new ln(we,Ie);return Ye.subscribe.bind(Ye)}class ln{constructor(Ie,Ye){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ye,this.task.then(()=>{Ie(this)}).catch(Ot=>{this.error(Ot)})}next(Ie){this.forEachObserver(Ye=>{Ye.next(Ie)})}error(Ie){this.forEachObserver(Ye=>{Ye.error(Ie)}),this.close(Ie)}complete(){this.forEachObserver(Ie=>{Ie.complete()}),this.close()}subscribe(Ie,Ye,Ot){let lt;if(void 0===Ie&&void 0===Ye&&void 0===Ot)throw new Error("Missing Observer.");lt=function on(we,Ie){if("object"!=typeof we||null===we)return!1;for(const Ye of Ie)if(Ye in we&&"function"==typeof we[Ye])return!0;return!1}(Ie,["next","error","complete"])?Ie:{next:Ie,error:Ye,complete:Ot},void 0===lt.next&&(lt.next=Jr),void 0===lt.error&&(lt.error=Jr),void 0===lt.complete&&(lt.complete=Jr);const un=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?lt.error(this.finalError):lt.complete()}catch{}}),this.observers.push(lt),un}unsubscribeOne(Ie){void 0===this.observers||void 0===this.observers[Ie]||(delete this.observers[Ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ie){if(!this.finalized)for(let Ye=0;Ye<this.observers.length;Ye++)this.sendOne(Ye,Ie)}sendOne(Ie,Ye){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ie])try{Ye(this.observers[Ie])}catch(Ot){typeof console<"u"&&console.error&&console.error(Ot)}})}close(Ie){this.finalized||(this.finalized=!0,void 0!==Ie&&(this.finalError=Ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jr(){}const Dr=function(we,Ie,Ye,Ot){let lt;if(Ot<Ie?lt="at least "+Ie:Ot>Ye&&(lt=0===Ye?"none":"no more than "+Ye),lt)throw new Error(we+" failed: Was called with "+Ot+(1===Ot?" argument.":" arguments.")+" Expects "+lt+".")};function Qr(we,Ie){return`${we} failed: ${Ie} argument `}function pi(we,Ie,Ye,Ot){if((!Ot||Ye)&&"function"!=typeof Ye)throw new Error(Qr(we,Ie)+"must be a valid function.")}function Lr(we,Ie,Ye,Ot){if((!Ot||Ye)&&("object"!=typeof Ye||null===Ye))throw new Error(Qr(we,Ie)+"must be a valid context object.")}const gi=function(we){const Ie=[];let Ye=0;for(let Ot=0;Ot<we.length;Ot++){let lt=we.charCodeAt(Ot);if(lt>=55296&&lt<=56319){const un=lt-55296;Ot++,y(Ot<we.length,"Surrogate pair missing trail surrogate."),lt=65536+(un<<10)+(we.charCodeAt(Ot)-56320)}lt<128?Ie[Ye++]=lt:lt<2048?(Ie[Ye++]=lt>>6|192,Ie[Ye++]=63&lt|128):lt<65536?(Ie[Ye++]=lt>>12|224,Ie[Ye++]=lt>>6&63|128,Ie[Ye++]=63&lt|128):(Ie[Ye++]=lt>>18|240,Ie[Ye++]=lt>>12&63|128,Ie[Ye++]=lt>>6&63|128,Ie[Ye++]=63&lt|128)}return Ie},ur=function(we){let Ie=0;for(let Ye=0;Ye<we.length;Ye++){const Ot=we.charCodeAt(Ye);Ot<128?Ie++:Ot<2048?Ie+=2:Ot>=55296&&Ot<=56319?(Ie+=4,Ye++):Ie+=3}return Ie},yr=1e3,Ai=2,mr=144e5,Kt=.5;function Ze(we,Ie=yr,Ye=Ai){const Ot=Ie*Math.pow(Ye,we),lt=Math.round(Kt*Ot*(Math.random()-.5)*2);return Math.min(mr,Ot+lt)}function qt(we){return we&&we._delegate?we._delegate:we}},9613:(In,Et,j)=>{"use strict";j.d(Et,{c:()=>wt});var _=j(3577),y=j(3457);let ee;const $e=Se=>Se.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ae=Se=>(void 0===ee&&(ee=void 0===Se.style.animationName&&void 0!==Se.style.webkitAnimationName?"-webkit-":""),ee),ve=(Se,xe,ue)=>{const _t=xe.startsWith("animation")?Ae(Se):"";Se.style.setProperty(_t+xe,ue)},Ue=(Se,xe)=>{const ue=xe.startsWith("animation")?Ae(Se):"";Se.style.removeProperty(ue+xe)},de=[],Je=(Se=[],xe)=>{if(void 0!==xe){const ue=Array.isArray(xe)?xe:[xe];return[...Se,...ue]}return Se},wt=Se=>{let xe,ue,_t,Y,it,tt,De,je,Be,ht,Ct,kt,Re,Pt=[],Ve=[],ke=[],Ne=!1,He={},pt=[],Tt=[],dt={},Mt=0,yt=!1,Fe=!1,nn=!0,zt=!1,Dn=!0,At=!1;const gn=Se,On=[],Yn=[],xn=[],cn=[],Cn=[],hr=[],_r=[],tr=[],bn=[],zn=[],yi="function"==typeof AnimationEffect||void 0!==y.w&&"function"==typeof y.w.AnimationEffect,Cr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&yi,wi=()=>zn,on=(me,et)=>((null!=et&&et.oneTimeCallback?Yn:On).push({c:me,o:et}),Re),Dr=()=>{if(Cr)zn.forEach(me=>{me.cancel()}),zn.length=0;else{const me=xn.slice();(0,_.r)(()=>{me.forEach(et=>{Ue(et,"animation-name"),Ue(et,"animation-duration"),Ue(et,"animation-timing-function"),Ue(et,"animation-iteration-count"),Ue(et,"animation-delay"),Ue(et,"animation-play-state"),Ue(et,"animation-fill-mode"),Ue(et,"animation-direction")})})}},Qr=()=>{Cn.forEach(me=>{null!=me&&me.parentNode&&me.parentNode.removeChild(me)}),Cn.length=0},Jt=()=>void 0!==it?it:De?De.getFill():"both",qt=()=>void 0!==Be?Be:void 0!==tt?tt:De?De.getDirection():"normal",we=()=>yt?"linear":void 0!==_t?_t:De?De.getEasing():"linear",Ie=()=>Fe?0:void 0!==ht?ht:void 0!==ue?ue:De?De.getDuration():0,Ye=()=>void 0!==Y?Y:De?De.getIterations():1,Ot=()=>void 0!==Ct?Ct:void 0!==xe?xe:De?De.getDelay():0,bt=()=>{0!==Mt&&(Mt--,0===Mt&&((()=>{cr(),tr.forEach(Lt=>Lt()),bn.forEach(Lt=>Lt());const me=nn?1:0,et=pt,Qe=Tt,Vt=dt;xn.forEach(Lt=>{const Qt=Lt.classList;et.forEach(an=>Qt.add(an)),Qe.forEach(an=>Qt.remove(an));for(const an in Vt)Vt.hasOwnProperty(an)&&ve(Lt,an,Vt[an])}),On.forEach(Lt=>Lt.c(me,Re)),Yn.forEach(Lt=>Lt.c(me,Re)),Yn.length=0,Dn=!0,nn&&(zt=!0),nn=!0})(),De&&De.animationFinish()))},Gt=(me=!0)=>{Qr();const et=(Se=>(Se.forEach(xe=>{for(const ue in xe)if(xe.hasOwnProperty(ue)){const _t=xe[ue];if("easing"===ue)xe["animation-timing-function"]=_t,delete xe[ue];else{const Y=$e(ue);Y!==ue&&(xe[Y]=_t,delete xe[ue])}}}),Se))(Pt);xn.forEach(Qe=>{if(et.length>0){const Vt=((Se=[])=>Se.map(xe=>{const ue=xe.offset,_t=[];for(const Y in xe)xe.hasOwnProperty(Y)&&"offset"!==Y&&_t.push(`${Y}: ${xe[Y]};`);return`${100*ue}% { ${_t.join(" ")} }`}).join(" "))(et);kt=void 0!==Se?Se:(Se=>{let xe=de.indexOf(Se);return xe<0&&(xe=de.push(Se)-1),`ion-animation-${xe}`})(Vt);const Lt=((Se,xe,ue)=>{var _t;const Y=(Se=>{const xe=void 0!==Se.getRootNode?Se.getRootNode():Se;return xe.head||xe})(ue),it=Ae(ue),tt=Y.querySelector("#"+Se);if(tt)return tt;const Pt=(null!==(_t=ue.ownerDocument)&&void 0!==_t?_t:document).createElement("style");return Pt.id=Se,Pt.textContent=`@${it}keyframes ${Se} { ${xe} } @${it}keyframes ${Se}-alt { ${xe} }`,Y.appendChild(Pt),Pt})(kt,Vt,Qe);Cn.push(Lt),ve(Qe,"animation-duration",`${Ie()}ms`),ve(Qe,"animation-timing-function",we()),ve(Qe,"animation-delay",`${Ot()}ms`),ve(Qe,"animation-fill-mode",Jt()),ve(Qe,"animation-direction",qt());const Qt=Ye()===1/0?"infinite":Ye().toString();ve(Qe,"animation-iteration-count",Qt),ve(Qe,"animation-play-state","paused"),me&&ve(Qe,"animation-name",`${Lt.id}-alt`),(0,_.r)(()=>{ve(Qe,"animation-name",Lt.id||null)})}})},kn=(me=!0)=>{(()=>{hr.forEach(Vt=>Vt()),_r.forEach(Vt=>Vt());const me=Ve,et=ke,Qe=He;xn.forEach(Vt=>{const Lt=Vt.classList;me.forEach(Qt=>Lt.add(Qt)),et.forEach(Qt=>Lt.remove(Qt));for(const Qt in Qe)Qe.hasOwnProperty(Qt)&&ve(Vt,Qt,Qe[Qt])})})(),Pt.length>0&&(Cr?(xn.forEach(me=>{const et=me.animate(Pt,{id:gn,delay:Ot(),duration:Ie(),easing:we(),iterations:Ye(),fill:Jt(),direction:qt()});et.pause(),zn.push(et)}),zn.length>0&&(zn[0].onfinish=()=>{bt()})):Gt(me)),Ne=!0},wn=me=>{if(me=Math.min(Math.max(me,0),.9999),Cr)zn.forEach(et=>{et.currentTime=et.effect.getComputedTiming().delay+Ie()*me,et.pause()});else{const et=`-${Ie()*me}ms`;xn.forEach(Qe=>{Pt.length>0&&(ve(Qe,"animation-delay",et),ve(Qe,"animation-play-state","paused"))})}},Qn=me=>{zn.forEach(et=>{et.effect.updateTiming({delay:Ot(),duration:Ie(),easing:we(),iterations:Ye(),fill:Jt(),direction:qt()})}),void 0!==me&&wn(me)},Jn=(me=!0,et)=>{(0,_.r)(()=>{xn.forEach(Qe=>{ve(Qe,"animation-name",kt||null),ve(Qe,"animation-duration",`${Ie()}ms`),ve(Qe,"animation-timing-function",we()),ve(Qe,"animation-delay",void 0!==et?`-${et*Ie()}ms`:`${Ot()}ms`),ve(Qe,"animation-fill-mode",Jt()||null),ve(Qe,"animation-direction",qt()||null);const Vt=Ye()===1/0?"infinite":Ye().toString();ve(Qe,"animation-iteration-count",Vt),me&&ve(Qe,"animation-name",`${kt}-alt`),(0,_.r)(()=>{ve(Qe,"animation-name",kt||null)})})})},Wn=(me=!1,et=!0,Qe)=>(me&&cn.forEach(Vt=>{Vt.update(me,et,Qe)}),Cr?Qn(Qe):Jn(et,Qe),Re),Vi=()=>{Ne&&(Cr?zn.forEach(me=>{me.pause()}):xn.forEach(me=>{ve(me,"animation-play-state","paused")}),At=!0)},An=()=>{je=void 0,bt()},cr=()=>{je&&clearTimeout(je)},Li=me=>new Promise(et=>{null!=me&&me.sync&&(Fe=!0,on(()=>Fe=!1,{oneTimeCallback:!0})),Ne||kn(),zt&&(Cr?(wn(0),Qn()):Jn(),zt=!1),Dn&&(Mt=cn.length+1,Dn=!1),on(()=>et(),{oneTimeCallback:!0}),cn.forEach(Qe=>{Qe.play()}),Cr?(zn.forEach(me=>{me.play()}),(0===Pt.length||0===xn.length)&&bt()):(()=>{if(cr(),(0,_.r)(()=>{xn.forEach(me=>{Pt.length>0&&ve(me,"animation-play-state","running")})}),0===Pt.length||0===xn.length)bt();else{const me=Ot()||0,et=Ie()||0,Qe=Ye()||1;isFinite(Qe)&&(je=setTimeout(An,me+et*Qe+100)),((Se,xe)=>{let ue;const _t={passive:!0},it=tt=>{Se===tt.target&&(ue&&ue(),cr(),(0,_.r)(()=>{xn.forEach(me=>{Ue(me,"animation-duration"),Ue(me,"animation-delay"),Ue(me,"animation-play-state")}),(0,_.r)(bt)}))};Se&&(Se.addEventListener("webkitAnimationEnd",it,_t),Se.addEventListener("animationend",it,_t),ue=()=>{Se.removeEventListener("webkitAnimationEnd",it,_t),Se.removeEventListener("animationend",it,_t)})})(xn[0])}})(),At=!1}),se=(me,et)=>{const Qe=Pt[0];return void 0===Qe||void 0!==Qe.offset&&0!==Qe.offset?Pt=[{offset:0,[me]:et},...Pt]:Qe[me]=et,Re};return Re={parentAnimation:De,elements:xn,childAnimations:cn,id:gn,animationFinish:bt,from:se,to:(me,et)=>{const Qe=Pt[Pt.length-1];return void 0===Qe||void 0!==Qe.offset&&1!==Qe.offset?Pt=[...Pt,{offset:1,[me]:et}]:Qe[me]=et,Re},fromTo:(me,et,Qe)=>se(me,et).to(me,Qe),parent:me=>(De=me,Re),play:Li,pause:()=>(cn.forEach(me=>{me.pause()}),Vi(),Re),stop:()=>{cn.forEach(me=>{me.stop()}),Ne&&(Dr(),Ne=!1),yt=!1,Fe=!1,Dn=!0,Be=void 0,ht=void 0,Ct=void 0,Mt=0,zt=!1,nn=!0,At=!1},destroy:me=>(cn.forEach(et=>{et.destroy(me)}),(me=>{Dr(),me&&Qr()})(me),xn.length=0,cn.length=0,Pt.length=0,On.length=0,Yn.length=0,Ne=!1,Dn=!0,Re),keyframes:me=>{const et=Pt!==me;return Pt=me,et&&(me=>{Cr?wi().forEach(et=>{if(et.effect.setKeyframes)et.effect.setKeyframes(me);else{const Qe=new KeyframeEffect(et.effect.target,me,et.effect.getTiming());et.effect=Qe}}):Gt()})(Pt),Re},addAnimation:me=>{if(null!=me)if(Array.isArray(me))for(const et of me)et.parent(Re),cn.push(et);else me.parent(Re),cn.push(me);return Re},addElement:me=>{if(null!=me)if(1===me.nodeType)xn.push(me);else if(me.length>=0)for(let et=0;et<me.length;et++)xn.push(me[et]);else console.error("Invalid addElement value");return Re},update:Wn,fill:me=>(it=me,Wn(!0),Re),direction:me=>(tt=me,Wn(!0),Re),iterations:me=>(Y=me,Wn(!0),Re),duration:me=>(!Cr&&0===me&&(me=1),ue=me,Wn(!0),Re),easing:me=>(_t=me,Wn(!0),Re),delay:me=>(xe=me,Wn(!0),Re),getWebAnimations:wi,getKeyframes:()=>Pt,getFill:Jt,getDirection:qt,getDelay:Ot,getIterations:Ye,getEasing:we,getDuration:Ie,afterAddRead:me=>(tr.push(me),Re),afterAddWrite:me=>(bn.push(me),Re),afterClearStyles:(me=[])=>{for(const et of me)dt[et]="";return Re},afterStyles:(me={})=>(dt=me,Re),afterRemoveClass:me=>(Tt=Je(Tt,me),Re),afterAddClass:me=>(pt=Je(pt,me),Re),beforeAddRead:me=>(hr.push(me),Re),beforeAddWrite:me=>(_r.push(me),Re),beforeClearStyles:(me=[])=>{for(const et of me)He[et]="";return Re},beforeStyles:(me={})=>(He=me,Re),beforeRemoveClass:me=>(ke=Je(ke,me),Re),beforeAddClass:me=>(Ve=Je(Ve,me),Re),onFinish:on,isRunning:()=>0!==Mt&&!At,progressStart:(me=!1,et)=>(cn.forEach(Qe=>{Qe.progressStart(me,et)}),Vi(),yt=me,Ne||kn(),Wn(!1,!0,et),Re),progressStep:me=>(cn.forEach(et=>{et.progressStep(me)}),wn(me),Re),progressEnd:(me,et,Qe)=>(yt=!1,cn.forEach(Vt=>{Vt.progressEnd(me,et,Qe)}),void 0!==Qe&&(ht=Qe),zt=!1,nn=!0,0===me?(Be="reverse"===qt()?"normal":"reverse","reverse"===Be&&(nn=!1),Cr?(Wn(),wn(1-et)):(Ct=(1-et)*Ie()*-1,Wn(!1,!1))):1===me&&(Cr?(Wn(),wn(et)):(Ct=et*Ie()*-1,Wn(!1,!1))),void 0!==me&&(on(()=>{ht=void 0,Be=void 0,Ct=void 0},{oneTimeCallback:!0}),De||Li()),Re)}}},3982:(In,Et,j)=>{"use strict";j.d(Et,{E:()=>Ee,a:()=>_,s:()=>Ue});const _=de=>{try{if(de instanceof ve)return de.value;if(!le()||"string"!=typeof de||""===de)return de;if(de.includes("onload="))return"";const ye=document.createDocumentFragment(),We=document.createElement("div");ye.appendChild(We),We.innerHTML=de,Ae.forEach(Se=>{const xe=ye.querySelectorAll(Se);for(let ue=xe.length-1;ue>=0;ue--){const _t=xe[ue];_t.parentNode?_t.parentNode.removeChild(_t):ye.removeChild(_t);const Y=ee(_t);for(let it=0;it<Y.length;it++)y(Y[it])}});const Oe=ee(ye);for(let Se=0;Se<Oe.length;Se++)y(Oe[Se]);const Je=document.createElement("div");Je.appendChild(ye);const wt=Je.querySelector("div");return null!==wt?wt.innerHTML:Je.innerHTML}catch(ye){return console.error(ye),""}},y=de=>{if(de.nodeType&&1!==de.nodeType)return;if(typeof NamedNodeMap<"u"&&!(de.attributes instanceof NamedNodeMap))return void de.remove();for(let We=de.attributes.length-1;We>=0;We--){const Oe=de.attributes.item(We),Je=Oe.name;if(!$e.includes(Je.toLowerCase())){de.removeAttribute(Je);continue}const wt=Oe.value,Se=de[Je];(null!=wt&&wt.toLowerCase().includes("javascript:")||null!=Se&&Se.toLowerCase().includes("javascript:"))&&de.removeAttribute(Je)}const ye=ee(de);for(let We=0;We<ye.length;We++)y(ye[We])},ee=de=>null!=de.children?de.children:de.childNodes,le=()=>{var de;const ye=window,We=null===(de=null==ye?void 0:ye.Ionic)||void 0===de?void 0:de.config;return!We||(We.get?We.get("sanitizerEnabled",!0):!0===We.sanitizerEnabled||void 0===We.sanitizerEnabled)},$e=["class","id","href","src","name","slot"],Ae=["script","style","iframe","meta","link","object","embed"];class ve{constructor(ye){this.value=ye}}const Ue=de=>{const ye=window,We=ye.Ionic;if(!We||!We.config||"Object"===We.config.constructor.name)return ye.Ionic=ye.Ionic||{},ye.Ionic.config=Object.assign(Object.assign({},ye.Ionic.config),de),ye.Ionic.config},Ee=!1},6782:(In,Et,j)=>{"use strict";j.d(Et,{C:()=>$e,a:()=>ee,d:()=>le});var _=j(5861),y=j(3577);const ee=function(){var Ae=(0,_.Z)(function*(ve,Ue,Ge,Ee,de,ye){var We;if(ve)return ve.attachViewToDom(Ue,Ge,de,Ee);if(!(ye||"string"==typeof Ge||Ge instanceof HTMLElement))throw new Error("framework delegate is missing");const Oe="string"==typeof Ge?null===(We=Ue.ownerDocument)||void 0===We?void 0:We.createElement(Ge):Ge;return Ee&&Ee.forEach(Je=>Oe.classList.add(Je)),de&&Object.assign(Oe,de),Ue.appendChild(Oe),yield new Promise(Je=>(0,y.c)(Oe,Je)),Oe});return function(Ue,Ge,Ee,de,ye,We){return Ae.apply(this,arguments)}}(),le=(Ae,ve)=>{if(ve){if(Ae)return Ae.removeViewFromDom(ve.parentElement,ve);ve.remove()}return Promise.resolve()},$e=()=>{let Ae,ve;return{attachViewToDom:function(){var Ee=(0,_.Z)(function*(de,ye,We={},Oe=[]){var Je,wt;if(Ae=de,ye){const xe="string"==typeof ye?null===(Je=Ae.ownerDocument)||void 0===Je?void 0:Je.createElement(ye):ye;Oe.forEach(ue=>xe.classList.add(ue)),Object.assign(xe,We),Ae.appendChild(xe),yield new Promise(ue=>(0,y.c)(xe,ue))}else if(Ae.children.length>0&&("ION-MODAL"===Ae.tagName||"ION-POPOVER"===Ae.tagName)&&!Ae.children[0].classList.contains("ion-delegate-host")){const ue=null===(wt=Ae.ownerDocument)||void 0===wt?void 0:wt.createElement("div");ue.classList.add("ion-delegate-host"),Oe.forEach(_t=>ue.classList.add(_t)),ue.append(...Ae.children),Ae.appendChild(ue)}const Se=document.querySelector("ion-app")||document.body;return ve=document.createComment("ionic teleport"),Ae.parentNode.insertBefore(ve,Ae),Se.appendChild(Ae),Ae});return function(ye,We){return Ee.apply(this,arguments)}}(),removeViewFromDom:()=>(Ae&&ve&&(ve.parentNode.insertBefore(Ae,ve),ve.remove()),Promise.resolve())}}},4349:(In,Et,j)=>{"use strict";j.d(Et,{G:()=>$e});class y{constructor(ve,Ue,Ge,Ee,de){this.id=Ue,this.name=Ge,this.disableScroll=de,this.priority=1e6*Ee+Ue,this.ctrl=ve}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ve=this.ctrl.capture(this.name,this.id,this.priority);return ve&&this.disableScroll&&this.ctrl.disableScroll(this.id),ve}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ee{constructor(ve,Ue,Ge,Ee){this.id=Ue,this.disable=Ge,this.disableScroll=Ee,this.ctrl=ve}block(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.disableGesture(ve,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.enableGesture(ve,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const le="backdrop-no-scroll",$e=new class _{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ve){var Ue;return new y(this,this.newID(),ve.name,null!==(Ue=ve.priority)&&void 0!==Ue?Ue:0,!!ve.disableScroll)}createBlocker(ve={}){return new ee(this,this.newID(),ve.disable,!!ve.disableScroll)}start(ve,Ue,Ge){return this.canStart(ve)?(this.requestedStart.set(Ue,Ge),!0):(this.requestedStart.delete(Ue),!1)}capture(ve,Ue,Ge){if(!this.start(ve,Ue,Ge))return!1;const Ee=this.requestedStart;let de=-1e4;if(Ee.forEach(ye=>{de=Math.max(de,ye)}),de===Ge){this.capturedId=Ue,Ee.clear();const ye=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ve}});return document.dispatchEvent(ye),!0}return Ee.delete(Ue),!1}release(ve){this.requestedStart.delete(ve),this.capturedId===ve&&(this.capturedId=void 0)}disableGesture(ve,Ue){let Ge=this.disabledGestures.get(ve);void 0===Ge&&(Ge=new Set,this.disabledGestures.set(ve,Ge)),Ge.add(Ue)}enableGesture(ve,Ue){const Ge=this.disabledGestures.get(ve);void 0!==Ge&&Ge.delete(Ue)}disableScroll(ve){this.disabledScroll.add(ve),1===this.disabledScroll.size&&document.body.classList.add(le)}enableScroll(ve){this.disabledScroll.delete(ve),0===this.disabledScroll.size&&document.body.classList.remove(le)}canStart(ve){return!(void 0!==this.capturedId||this.isDisabled(ve))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ve){const Ue=this.disabledGestures.get(ve);return!!(Ue&&Ue.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{MENU_BACK_BUTTON_PRIORITY:()=>$e,OVERLAY_BACK_BUTTON_PRIORITY:()=>le,blockHardwareBackButton:()=>y,startHardwareBackButton:()=>ee});var _=j(5861);const y=()=>{document.addEventListener("backbutton",()=>{})},ee=()=>{const Ae=document;let ve=!1;Ae.addEventListener("backbutton",()=>{if(ve)return;let Ue=0,Ge=[];const Ee=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(We,Oe){Ge.push({priority:We,handler:Oe,id:Ue++})}}});Ae.dispatchEvent(Ee);const de=function(){var We=(0,_.Z)(function*(Oe){try{if(null!=Oe&&Oe.handler){const Je=Oe.handler(ye);null!=Je&&(yield Je)}}catch(Je){console.error(Je)}});return function(Je){return We.apply(this,arguments)}}(),ye=()=>{if(Ge.length>0){let We={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ge.forEach(Oe=>{Oe.priority>=We.priority&&(We=Oe)}),ve=!0,Ge=Ge.filter(Oe=>Oe.id!==We.id),de(We).then(()=>ve=!1)}};ye()})},le=100,$e=99},3577:(In,Et,j)=>{"use strict";j.d(Et,{a:()=>Ue,b:()=>Ge,c:()=>ee,d:()=>wt,e:()=>Je,f:()=>Oe,g:()=>Ee,h:()=>We,i:()=>ve,j:()=>it,k:()=>$e,l:()=>Se,m:()=>le,n:()=>ye,o:()=>xe,p:()=>_t,q:()=>Y,r:()=>de,s:()=>Pt,t:()=>_,u:()=>tt,v:()=>ue});const _=(Ve,ke=0)=>new Promise(Ne=>{y(Ve,ke,Ne)}),y=(Ve,ke=0,Ne)=>{let De,He;const pt={passive:!0},dt=()=>{De&&De()},Mt=yt=>{(void 0===yt||Ve===yt.target)&&(dt(),Ne(yt))};return Ve&&(Ve.addEventListener("webkitTransitionEnd",Mt,pt),Ve.addEventListener("transitionend",Mt,pt),He=setTimeout(Mt,ke+500),De=()=>{He&&(clearTimeout(He),He=void 0),Ve.removeEventListener("webkitTransitionEnd",Mt,pt),Ve.removeEventListener("transitionend",Mt,pt)}),dt},ee=(Ve,ke)=>{Ve.componentOnReady?Ve.componentOnReady().then(Ne=>ke(Ne)):de(()=>ke(Ve))},le=Ve=>void 0!==Ve.componentOnReady,$e=(Ve,ke=[])=>{const Ne={};return ke.forEach(De=>{Ve.hasAttribute(De)&&(null!==Ve.getAttribute(De)&&(Ne[De]=Ve.getAttribute(De)),Ve.removeAttribute(De))}),Ne},Ae=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ve=(Ve,ke)=>{let Ne=Ae;return ke&&ke.length>0&&(Ne=Ne.filter(De=>!ke.includes(De))),$e(Ve,Ne)},Ue=(Ve,ke,Ne,De)=>{var He;if(typeof window<"u"){const pt=window,Tt=null===(He=null==pt?void 0:pt.Ionic)||void 0===He?void 0:He.config;if(Tt){const dt=Tt.get("_ael");if(dt)return dt(Ve,ke,Ne,De);if(Tt._ael)return Tt._ael(Ve,ke,Ne,De)}}return Ve.addEventListener(ke,Ne,De)},Ge=(Ve,ke,Ne,De)=>{var He;if(typeof window<"u"){const pt=window,Tt=null===(He=null==pt?void 0:pt.Ionic)||void 0===He?void 0:He.config;if(Tt){const dt=Tt.get("_rel");if(dt)return dt(Ve,ke,Ne,De);if(Tt._rel)return Tt._rel(Ve,ke,Ne,De)}}return Ve.removeEventListener(ke,Ne,De)},Ee=(Ve,ke=Ve)=>Ve.shadowRoot||ke,de=Ve=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ve):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ve):setTimeout(Ve),ye=Ve=>!!Ve.shadowRoot&&!!Ve.attachShadow,We=Ve=>{const ke=Ve.closest("ion-item");return ke?ke.querySelector("ion-label"):null},Oe=Ve=>{if(Ve.focus(),Ve.classList.contains("ion-focusable")){const ke=Ve.closest("ion-app");ke&&ke.setFocus([Ve])}},Je=(Ve,ke)=>{let Ne;const De=Ve.getAttribute("aria-labelledby"),He=Ve.id;let pt=null!==De&&""!==De.trim()?De:ke+"-lbl",Tt=null!==De&&""!==De.trim()?document.getElementById(De):We(Ve);return Tt?(null===De&&(Tt.id=pt),Ne=Tt.textContent,Tt.setAttribute("aria-hidden","true")):""!==He.trim()&&(Tt=document.querySelector(`label[for="${He}"]`),Tt&&(""!==Tt.id?pt=Tt.id:Tt.id=pt=`${He}-lbl`,Ne=Tt.textContent)),{label:Tt,labelId:pt,labelText:Ne}},wt=(Ve,ke,Ne,De,He)=>{if(Ve||ye(ke)){let pt=ke.querySelector("input.aux-input");pt||(pt=ke.ownerDocument.createElement("input"),pt.type="hidden",pt.classList.add("aux-input"),ke.appendChild(pt)),pt.disabled=He,pt.name=Ne,pt.value=De||""}},Se=(Ve,ke,Ne)=>Math.max(Ve,Math.min(ke,Ne)),xe=(Ve,ke)=>{if(!Ve){const Ne="ASSERT: "+ke;throw console.error(Ne),new Error(Ne)}},ue=Ve=>Ve.timeStamp||Date.now(),_t=Ve=>{if(Ve){const ke=Ve.changedTouches;if(ke&&ke.length>0){const Ne=ke[0];return{x:Ne.clientX,y:Ne.clientY}}if(void 0!==Ve.pageX)return{x:Ve.pageX,y:Ve.pageY}}return{x:0,y:0}},Y=Ve=>{const ke="rtl"===document.dir;switch(Ve){case"start":return ke;case"end":return!ke;default:throw new Error(`"${Ve}" is not a valid value for [side]. Use "start" or "end" instead.`)}},it=(Ve,ke)=>{const Ne=Ve._original||Ve;return{_original:Ve,emit:tt(Ne.emit.bind(Ne),ke)}},tt=(Ve,ke=0)=>{let Ne;return(...De)=>{clearTimeout(Ne),Ne=setTimeout(Ve,ke,...De)}},Pt=(Ve,ke)=>{if(null!=Ve||(Ve={}),null!=ke||(ke={}),Ve===ke)return!0;const Ne=Object.keys(Ve);if(Ne.length!==Object.keys(ke).length)return!1;for(const De of Ne)if(!(De in ke)||Ve[De]!==ke[De])return!1;return!0}},3457:(In,Et,j)=>{"use strict";j.d(Et,{w:()=>_});const _=typeof window<"u"?window:void 0},1898:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{GESTURE_CONTROLLER:()=>_.G,createGesture:()=>Ge});var _=j(4349);const y=(We,Oe,Je,wt)=>{const Se=ee(We)?{capture:!!wt.capture,passive:!!wt.passive}:!!wt.capture;let xe,ue;return We.__zone_symbol__addEventListener?(xe="__zone_symbol__addEventListener",ue="__zone_symbol__removeEventListener"):(xe="addEventListener",ue="removeEventListener"),We[xe](Oe,Je,Se),()=>{We[ue](Oe,Je,Se)}},ee=We=>{if(void 0===le)try{const Oe=Object.defineProperty({},"passive",{get:()=>{le=!0}});We.addEventListener("optsTest",()=>{},Oe)}catch{le=!1}return!!le};let le;const ve=We=>We instanceof Document?We:We.ownerDocument,Ge=We=>{let Oe=!1,Je=!1,wt=!0,Se=!1;const xe=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},We),ue=xe.canStart,_t=xe.onWillStart,Y=xe.onStart,it=xe.onEnd,tt=xe.notCaptured,Pt=xe.onMove,Ve=xe.threshold,ke=xe.passive,Ne=xe.blurOnStart,De={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},He=((We,Oe,Je)=>{const wt=Je*(Math.PI/180),Se="x"===We,xe=Math.cos(wt),ue=Oe*Oe;let _t=0,Y=0,it=!1,tt=0;return{start(Pt,Ve){_t=Pt,Y=Ve,tt=0,it=!0},detect(Pt,Ve){if(!it)return!1;const ke=Pt-_t,Ne=Ve-Y,De=ke*ke+Ne*Ne;if(De<ue)return!1;const He=Math.sqrt(De),pt=(Se?ke:Ne)/He;return tt=pt>xe?1:pt<-xe?-1:0,it=!1,!0},isGesture:()=>0!==tt,getDirection:()=>tt}})(xe.direction,xe.threshold,xe.maxAngle),pt=_.G.createGesture({name:We.gestureName,priority:We.gesturePriority,disableScroll:We.disableScroll}),Mt=()=>{Oe&&(Se=!1,Pt&&Pt(De))},yt=()=>!!pt.capture()&&(Oe=!0,wt=!1,De.startX=De.currentX,De.startY=De.currentY,De.startTime=De.currentTime,_t?_t(De).then(je):je(),!0),je=()=>{Ne&&(()=>{if(typeof document<"u"){const zt=document.activeElement;null!=zt&&zt.blur&&zt.blur()}})(),Y&&Y(De),wt=!0},Be=()=>{Oe=!1,Je=!1,Se=!1,wt=!0,pt.release()},ht=zt=>{const Dn=Oe,kt=wt;if(Be(),kt){if(Ee(De,zt),Dn)return void(it&&it(De));tt&&tt(De)}},Ct=((We,Oe,Je,wt,Se)=>{let xe,ue,_t,Y,it,tt,Pt,Ve=0;const ke=Fe=>{Ve=Date.now()+2e3,Oe(Fe)&&(!ue&&Je&&(ue=y(We,"touchmove",Je,Se)),_t||(_t=y(Fe.target,"touchend",De,Se)),Y||(Y=y(Fe.target,"touchcancel",De,Se)))},Ne=Fe=>{Ve>Date.now()||Oe(Fe)&&(!tt&&Je&&(tt=y(ve(We),"mousemove",Je,Se)),Pt||(Pt=y(ve(We),"mouseup",He,Se)))},De=Fe=>{pt(),wt&&wt(Fe)},He=Fe=>{Tt(),wt&&wt(Fe)},pt=()=>{ue&&ue(),_t&&_t(),Y&&Y(),ue=_t=Y=void 0},Tt=()=>{tt&&tt(),Pt&&Pt(),tt=Pt=void 0},dt=()=>{pt(),Tt()},Mt=(Fe=!0)=>{Fe?(xe||(xe=y(We,"touchstart",ke,Se)),it||(it=y(We,"mousedown",Ne,Se))):(xe&&xe(),it&&it(),xe=it=void 0,dt())};return{enable:Mt,stop:dt,destroy:()=>{Mt(!1),wt=Je=Oe=void 0}}})(xe.el,zt=>{const Dn=ye(zt);return!(Je||!wt||(de(zt,De),De.startX=De.currentX,De.startY=De.currentY,De.startTime=De.currentTime=Dn,De.velocityX=De.velocityY=De.deltaX=De.deltaY=0,De.event=zt,ue&&!1===ue(De))||(pt.release(),!pt.start()))&&(Je=!0,0===Ve?yt():(He.start(De.startX,De.startY),!0))},zt=>{Oe?!Se&&wt&&(Se=!0,Ee(De,zt),requestAnimationFrame(Mt)):(Ee(De,zt),He.detect(De.currentX,De.currentY)&&(!He.isGesture()||!yt())&&nn())},ht,{capture:!1,passive:ke}),nn=()=>{Be(),Ct.stop(),tt&&tt(De)};return{enable(zt=!0){zt||(Oe&&ht(void 0),Be()),Ct.enable(zt)},destroy(){pt.destroy(),Ct.destroy()}}},Ee=(We,Oe)=>{if(!Oe)return;const Je=We.currentX,wt=We.currentY,Se=We.currentTime;de(Oe,We);const xe=We.currentX,ue=We.currentY,Y=(We.currentTime=ye(Oe))-Se;if(Y>0&&Y<100){const tt=(ue-wt)/Y;We.velocityX=(xe-Je)/Y*.7+.3*We.velocityX,We.velocityY=.7*tt+.3*We.velocityY}We.deltaX=xe-We.startX,We.deltaY=ue-We.startY,We.event=Oe},de=(We,Oe)=>{let Je=0,wt=0;if(We){const Se=We.changedTouches;if(Se&&Se.length>0){const xe=Se[0];Je=xe.clientX,wt=xe.clientY}else void 0!==We.pageX&&(Je=We.pageX,wt=We.pageY)}Oe.currentX=Je,Oe.currentY=wt},ye=We=>We.timeStamp||Date.now()},4083:(In,Et,j)=>{"use strict";j.d(Et,{B:()=>de,H:()=>dt,a:()=>ys,b:()=>_e,c:()=>zt,d:()=>At,e:()=>Li,f:()=>Re,g:()=>Dn,h:()=>pt,i:()=>Ze,j:()=>ye,p:()=>Vi,r:()=>Xe,w:()=>Ur});var _=j(5861);let ee,le,$e,Ae=!1,ve=!1,Ue=!1,Ge=!1,Ee=!1;const de={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},ye=se=>{const be=new URL(se,Xn.$resourcesUrl$);return be.origin!==Jn.location.origin?be.href:be.pathname},ue="s-id",_t="sty-id",Y="c-id",tt="http://www.w3.org/1999/xlink",Pt={},De=se=>"object"==(se=typeof se)||"function"===se;function He(se){var be,qe,me;return null!==(me=null===(qe=null===(be=se.head)||void 0===be?void 0:be.querySelector('meta[name="csp-nonce"]'))||void 0===qe?void 0:qe.getAttribute("content"))&&void 0!==me?me:void 0}const pt=(se,be,...qe)=>{let me=null,et=null,Qe=null,Vt=!1,Lt=!1;const Qt=[],an=rr=>{for(let er=0;er<rr.length;er++)me=rr[er],Array.isArray(me)?an(me):null!=me&&"boolean"!=typeof me&&((Vt="function"!=typeof se&&!De(me))&&(me=String(me)),Vt&&Lt?Qt[Qt.length-1].$text$+=me:Qt.push(Vt?Tt(null,me):me),Lt=Vt)};if(an(qe),be){be.key&&(et=be.key),be.name&&(Qe=be.name);{const rr=be.className||be.class;rr&&(be.class="object"!=typeof rr?rr:Object.keys(rr).filter(er=>rr[er]).join(" "))}}if("function"==typeof se)return se(null===be?{}:be,Qt,yt);const vn=Tt(se,null);return vn.$attrs$=be,Qt.length>0&&(vn.$children$=Qt),vn.$key$=et,vn.$name$=Qe,vn},Tt=(se,be)=>({$flags$:0,$tag$:se,$text$:be,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),dt={},yt={forEach:(se,be)=>se.map(Fe).forEach(be),map:(se,be)=>se.map(Fe).map(be).map(je)},Fe=se=>({vattrs:se.$attrs$,vchildren:se.$children$,vkey:se.$key$,vname:se.$name$,vtag:se.$tag$,vtext:se.$text$}),je=se=>{if("function"==typeof se.vtag){const qe=Object.assign({},se.vattrs);return se.vkey&&(qe.key=se.vkey),se.vname&&(qe.name=se.vname),pt(se.vtag,qe,...se.vchildren||[])}const be=Tt(se.vtag,se.vtext);return be.$attrs$=se.vattrs,be.$children$=se.vchildren,be.$key$=se.vkey,be.$name$=se.vname,be},ht=(se,be,qe,me,et,Qe,Vt)=>{let Lt,Qt,an,vn;if(1===Qe.nodeType){for(Lt=Qe.getAttribute(Y),Lt&&(Qt=Lt.split("."),(Qt[0]===Vt||"0"===Qt[0])&&(an={$flags$:0,$hostId$:Qt[0],$nodeId$:Qt[1],$depth$:Qt[2],$index$:Qt[3],$tag$:Qe.tagName.toLowerCase(),$elm$:Qe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},be.push(an),Qe.removeAttribute(Y),se.$children$||(se.$children$=[]),se.$children$[an.$index$]=an,se=an,me&&"0"===an.$depth$&&(me[an.$index$]=an.$elm$))),vn=Qe.childNodes.length-1;vn>=0;vn--)ht(se,be,qe,me,et,Qe.childNodes[vn],Vt);if(Qe.shadowRoot)for(vn=Qe.shadowRoot.childNodes.length-1;vn>=0;vn--)ht(se,be,qe,me,et,Qe.shadowRoot.childNodes[vn],Vt)}else if(8===Qe.nodeType)Qt=Qe.nodeValue.split("."),(Qt[1]===Vt||"0"===Qt[1])&&(Lt=Qt[0],an={$flags$:0,$hostId$:Qt[1],$nodeId$:Qt[2],$depth$:Qt[3],$index$:Qt[4],$elm$:Qe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Lt?(an.$elm$=Qe.nextSibling,an.$elm$&&3===an.$elm$.nodeType&&(an.$text$=an.$elm$.textContent,be.push(an),Qe.remove(),se.$children$||(se.$children$=[]),se.$children$[an.$index$]=an,me&&"0"===an.$depth$&&(me[an.$index$]=an.$elm$))):an.$hostId$===Vt&&("s"===Lt?(an.$tag$="slot",Qe["s-sn"]=Qt[5]?an.$name$=Qt[5]:"",Qe["s-sr"]=!0,me&&(an.$elm$=Wn.createElement(an.$tag$),an.$name$&&an.$elm$.setAttribute("name",an.$name$),Qe.parentNode.insertBefore(an.$elm$,Qe),Qe.remove(),"0"===an.$depth$&&(me[an.$index$]=an.$elm$)),qe.push(an),se.$children$||(se.$children$=[]),se.$children$[an.$index$]=an):"r"===Lt&&(me?Qe.remove():(et["s-cr"]=Qe,Qe["s-cn"]=!0))));else if(se&&"style"===se.$tag$){const rr=Tt(null,Qe.textContent);rr.$elm$=Qe,rr.$index$="0",se.$children$=[rr]}},Ct=(se,be)=>{if(1===se.nodeType){let qe=0;for(;qe<se.childNodes.length;qe++)Ct(se.childNodes[qe],be);if(se.shadowRoot)for(qe=0;qe<se.shadowRoot.childNodes.length;qe++)Ct(se.shadowRoot.childNodes[qe],be)}else if(8===se.nodeType){const qe=se.nodeValue.split(".");"o"===qe[0]&&(be.set(qe[1]+"."+qe[2],se),se.nodeValue="",se["s-en"]=qe[3])}},zt=se=>Qn.push(se),Dn=se=>Xt(se).$modeName$,Re=se=>Xt(se).$hostElement$,At=(se,be,qe)=>{const me=Re(se);return{emit:et=>gn(me,be,{bubbles:!!(4&qe),composed:!!(2&qe),cancelable:!!(1&qe),detail:et})}},gn=(se,be,qe)=>{const me=Xn.ce(be,qe);return se.dispatchEvent(me),me},On=new WeakMap,Yn=(se,be,qe)=>{let me=wn.get(se);ji&&qe?(me=me||new CSSStyleSheet,"string"==typeof me?me=be:me.replaceSync(be)):me=be,wn.set(se,me)},xn=(se,be,qe,me)=>{var et;let Qe=Cn(be,qe);const Vt=wn.get(Qe);if(se=11===se.nodeType?se:Wn,Vt)if("string"==typeof Vt){let Qt,Lt=On.get(se=se.head||se);if(Lt||On.set(se,Lt=new Set),!Lt.has(Qe)){if(se.host&&(Qt=se.querySelector(`[${_t}="${Qe}"]`)))Qt.innerHTML=Vt;else{Qt=Wn.createElement("style"),Qt.innerHTML=Vt;const an=null!==(et=Xn.$nonce$)&&void 0!==et?et:He(Wn);null!=an&&Qt.setAttribute("nonce",an),se.insertBefore(Qt,se.querySelector("link"))}Lt&&Lt.add(Qe)}}else se.adoptedStyleSheets.includes(Vt)||(se.adoptedStyleSheets=[...se.adoptedStyleSheets,Vt]);return Qe},Cn=(se,be)=>"sc-"+(be&&32&se.$flags$?se.$tagName$+"-"+be:se.$tagName$),hr=se=>se.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),_r=(se,be,qe,me,et,Qe)=>{if(qe!==me){let Vt=bt(se,be),Lt=be.toLowerCase();if("class"===be){const Qt=se.classList,an=bn(qe),vn=bn(me);Qt.remove(...an.filter(rr=>rr&&!vn.includes(rr))),Qt.add(...vn.filter(rr=>rr&&!an.includes(rr)))}else if("style"===be){for(const Qt in qe)(!me||null==me[Qt])&&(Qt.includes("-")?se.style.removeProperty(Qt):se.style[Qt]="");for(const Qt in me)(!qe||me[Qt]!==qe[Qt])&&(Qt.includes("-")?se.style.setProperty(Qt,me[Qt]):se.style[Qt]=me[Qt])}else if("key"!==be)if("ref"===be)me&&me(se);else if(Vt||"o"!==be[0]||"n"!==be[1]){const Qt=De(me);if((Vt||Qt&&null!==me)&&!et)try{if(se.tagName.includes("-"))se[be]=me;else{const vn=null==me?"":me;"list"===be?Vt=!1:(null==qe||se[be]!=vn)&&(se[be]=vn)}}catch{}let an=!1;Lt!==(Lt=Lt.replace(/^xlink\:?/,""))&&(be=Lt,an=!0),null==me||!1===me?(!1!==me||""===se.getAttribute(be))&&(an?se.removeAttributeNS(tt,be):se.removeAttribute(be)):(!Vt||4&Qe||et)&&!Qt&&(me=!0===me?"":me,an?se.setAttributeNS(tt,be,me):se.setAttribute(be,me))}else be="-"===be[2]?be.slice(3):bt(Jn,Lt)?Lt.slice(2):Lt[2]+be.slice(3),qe&&Xn.rel(se,be,qe,!1),me&&Xn.ael(se,be,me,!1)}},tr=/\s/,bn=se=>se?se.split(tr):[],zn=(se,be,qe,me)=>{const et=11===be.$elm$.nodeType&&be.$elm$.host?be.$elm$.host:be.$elm$,Qe=se&&se.$attrs$||Pt,Vt=be.$attrs$||Pt;for(me in Qe)me in Vt||_r(et,me,Qe[me],void 0,qe,be.$flags$);for(me in Vt)_r(et,me,Qe[me],Vt[me],qe,be.$flags$)},yi=(se,be,qe,me)=>{const et=be.$children$[qe];let Vt,Lt,Qt,Qe=0;if(Ae||(Ue=!0,"slot"===et.$tag$&&(ee&&me.classList.add(ee+"-s"),et.$flags$|=et.$children$?2:1)),null!==et.$text$)Vt=et.$elm$=Wn.createTextNode(et.$text$);else if(1&et.$flags$)Vt=et.$elm$=Wn.createTextNode("");else{if(Ge||(Ge="svg"===et.$tag$),Vt=et.$elm$=Wn.createElementNS(Ge?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&et.$flags$?"slot-fb":et.$tag$),Ge&&"foreignObject"===et.$tag$&&(Ge=!1),zn(null,et,Ge),(se=>null!=se)(ee)&&Vt["s-si"]!==ee&&Vt.classList.add(Vt["s-si"]=ee),et.$children$)for(Qe=0;Qe<et.$children$.length;++Qe)Lt=yi(se,et,Qe,Vt),Lt&&Vt.appendChild(Lt);"svg"===et.$tag$?Ge=!1:"foreignObject"===Vt.tagName&&(Ge=!0)}return Vt["s-hn"]=$e,3&et.$flags$&&(Vt["s-sr"]=!0,Vt["s-cr"]=le,Vt["s-sn"]=et.$name$||"",Qt=se&&se.$children$&&se.$children$[qe],Qt&&Qt.$tag$===et.$tag$&&se.$elm$&&Cr(se.$elm$,!1)),Vt},Cr=(se,be)=>{Xn.$flags$|=1;const qe=se.childNodes;for(let me=qe.length-1;me>=0;me--){const et=qe[me];et["s-hn"]!==$e&&et["s-ol"]&&(yn(et).insertBefore(et,ln(et)),et["s-ol"].remove(),et["s-ol"]=void 0,Ue=!0),be&&Cr(et,be)}Xn.$flags$&=-2},di=(se,be,qe,me,et,Qe)=>{let Lt,Vt=se["s-cr"]&&se["s-cr"].parentNode||se;for(Vt.shadowRoot&&Vt.tagName===$e&&(Vt=Vt.shadowRoot);et<=Qe;++et)me[et]&&(Lt=yi(null,qe,et,se),Lt&&(me[et].$elm$=Lt,Vt.insertBefore(Lt,ln(be))))},wi=(se,be,qe)=>{for(let me=be;me<=qe;++me){const et=se[me];if(et){const Qe=et.$elm$;pi(et),Qe&&(ve=!0,Qe["s-ol"]?Qe["s-ol"].remove():Cr(Qe,!0),Qe.remove())}}},qn=(se,be)=>se.$tag$===be.$tag$&&("slot"===se.$tag$?se.$name$===be.$name$:se.$key$===be.$key$),ln=se=>se&&se["s-ol"]||se,yn=se=>(se["s-ol"]?se["s-ol"]:se).parentNode,on=(se,be)=>{const qe=be.$elm$=se.$elm$,me=se.$children$,et=be.$children$,Qe=be.$tag$,Vt=be.$text$;let Lt;null===Vt?(Ge="svg"===Qe||"foreignObject"!==Qe&&Ge,"slot"===Qe||zn(se,be,Ge),null!==me&&null!==et?((se,be,qe,me)=>{let Wr,$i,et=0,Qe=0,Vt=0,Lt=0,Qt=be.length-1,an=be[0],vn=be[Qt],rr=me.length-1,er=me[0],vr=me[rr];for(;et<=Qt&&Qe<=rr;)if(null==an)an=be[++et];else if(null==vn)vn=be[--Qt];else if(null==er)er=me[++Qe];else if(null==vr)vr=me[--rr];else if(qn(an,er))on(an,er),an=be[++et],er=me[++Qe];else if(qn(vn,vr))on(vn,vr),vn=be[--Qt],vr=me[--rr];else if(qn(an,vr))("slot"===an.$tag$||"slot"===vr.$tag$)&&Cr(an.$elm$.parentNode,!1),on(an,vr),se.insertBefore(an.$elm$,vn.$elm$.nextSibling),an=be[++et],vr=me[--rr];else if(qn(vn,er))("slot"===an.$tag$||"slot"===vr.$tag$)&&Cr(vn.$elm$.parentNode,!1),on(vn,er),se.insertBefore(vn.$elm$,an.$elm$),vn=be[--Qt],er=me[++Qe];else{for(Vt=-1,Lt=et;Lt<=Qt;++Lt)if(be[Lt]&&null!==be[Lt].$key$&&be[Lt].$key$===er.$key$){Vt=Lt;break}Vt>=0?($i=be[Vt],$i.$tag$!==er.$tag$?Wr=yi(be&&be[Qe],qe,Vt,se):(on($i,er),be[Vt]=void 0,Wr=$i.$elm$),er=me[++Qe]):(Wr=yi(be&&be[Qe],qe,Qe,se),er=me[++Qe]),Wr&&yn(an.$elm$).insertBefore(Wr,ln(an.$elm$))}et>Qt?di(se,null==me[rr+1]?null:me[rr+1].$elm$,qe,me,Qe,rr):Qe>rr&&wi(be,et,Qt)})(qe,me,be,et):null!==et?(null!==se.$text$&&(qe.textContent=""),di(qe,null,be,et,0,et.length-1)):null!==me&&wi(me,0,me.length-1),Ge&&"svg"===Qe&&(Ge=!1)):(Lt=qe["s-cr"])?Lt.parentNode.textContent=Vt:se.$text$!==Vt&&(qe.data=Vt)},Jr=se=>{const be=se.childNodes;let qe,me,et,Qe,Vt,Lt;for(me=0,et=be.length;me<et;me++)if(qe=be[me],1===qe.nodeType){if(qe["s-sr"])for(Vt=qe["s-sn"],qe.hidden=!1,Qe=0;Qe<et;Qe++)if(Lt=be[Qe].nodeType,be[Qe]["s-hn"]!==qe["s-hn"]||""!==Vt){if(1===Lt&&Vt===be[Qe].getAttribute("slot")){qe.hidden=!0;break}}else if(1===Lt||3===Lt&&""!==be[Qe].textContent.trim()){qe.hidden=!0;break}Jr(qe)}},Dr=[],Qr=se=>{let be,qe,me,et,Qe,Vt,Lt=0;const Qt=se.childNodes,an=Qt.length;for(;Lt<an;Lt++){if(be=Qt[Lt],be["s-sr"]&&(qe=be["s-cr"])&&qe.parentNode)for(me=qe.parentNode.childNodes,et=be["s-sn"],Vt=me.length-1;Vt>=0;Vt--)qe=me[Vt],!qe["s-cn"]&&!qe["s-nr"]&&qe["s-hn"]!==be["s-hn"]&&(zr(qe,et)?(Qe=Dr.find(vn=>vn.$nodeToRelocate$===qe),ve=!0,qe["s-sn"]=qe["s-sn"]||et,Qe?Qe.$slotRefNode$=be:Dr.push({$slotRefNode$:be,$nodeToRelocate$:qe}),qe["s-sr"]&&Dr.map(vn=>{zr(vn.$nodeToRelocate$,qe["s-sn"])&&(Qe=Dr.find(rr=>rr.$nodeToRelocate$===qe),Qe&&!vn.$slotRefNode$&&(vn.$slotRefNode$=Qe.$slotRefNode$))})):Dr.some(vn=>vn.$nodeToRelocate$===qe)||Dr.push({$nodeToRelocate$:qe}));1===be.nodeType&&Qr(be)}},zr=(se,be)=>1===se.nodeType?null===se.getAttribute("slot")&&""===be||se.getAttribute("slot")===be:se["s-sn"]===be||""===be,pi=se=>{se.$attrs$&&se.$attrs$.ref&&se.$attrs$.ref(null),se.$children$&&se.$children$.map(pi)},gi=(se,be)=>{be&&!se.$onRenderResolve$&&be["s-p"]&&be["s-p"].push(new Promise(qe=>se.$onRenderResolve$=qe))},ur=(se,be)=>{if(se.$flags$|=16,!(4&se.$flags$))return gi(se,se.$ancestorComponent$),Ur(()=>lr(se,be));se.$flags$|=512},lr=(se,be)=>{const me=se.$lazyInstance$;let et;return be&&(se.$flags$|=256,se.$queuedListeners$&&(se.$queuedListeners$.map(([Qe,Vt])=>Jt(me,Qe,Vt)),se.$queuedListeners$=null),et=Jt(me,"componentWillLoad")),et=yr(et,()=>Jt(me,"componentWillRender")),yr(et,()=>Ai(se,me,be))},yr=(se,be)=>se instanceof Promise?se.then(be):be(),Ai=function(){var se=(0,_.Z)(function*(be,qe,me){const et=be.$hostElement$,Vt=et["s-rc"];me&&(se=>{const be=se.$cmpMeta$,qe=se.$hostElement$,me=be.$flags$,Qe=xn(qe.shadowRoot?qe.shadowRoot:qe.getRootNode(),be,se.$modeName$);10&me&&(qe["s-sc"]=Qe,qe.classList.add(Qe+"-h"),2&me&&qe.classList.add(Qe+"-s"))})(be);mr(be,qe),Vt&&(Vt.map(Qt=>Qt()),et["s-rc"]=void 0);{const Qt=et["s-p"],an=()=>Kt(be);0===Qt.length?an():(Promise.all(Qt).then(an),be.$flags$|=4,Qt.length=0)}});return function(qe,me,et){return se.apply(this,arguments)}}(),mr=(se,be,qe)=>{try{be=be.render&&be.render(),se.$flags$&=-17,se.$flags$|=2,((se,be)=>{const qe=se.$hostElement$,me=se.$cmpMeta$,et=se.$vnode$||Tt(null,null),Qe=(se=>se&&se.$tag$===dt)(be)?be:pt(null,null,be);if($e=qe.tagName,me.$attrsToReflect$&&(Qe.$attrs$=Qe.$attrs$||{},me.$attrsToReflect$.map(([Vt,Lt])=>Qe.$attrs$[Lt]=qe[Vt])),Qe.$tag$=null,Qe.$flags$|=4,se.$vnode$=Qe,Qe.$elm$=et.$elm$=qe.shadowRoot||qe,ee=qe["s-sc"],le=qe["s-cr"],Ae=0!=(1&me.$flags$),ve=!1,on(et,Qe),Xn.$flags$|=1,Ue){Qr(Qe.$elm$);let Vt,Lt,Qt,an,vn,rr,er=0;for(;er<Dr.length;er++)Vt=Dr[er],Lt=Vt.$nodeToRelocate$,Lt["s-ol"]||(Qt=Wn.createTextNode(""),Qt["s-nr"]=Lt,Lt.parentNode.insertBefore(Lt["s-ol"]=Qt,Lt));for(er=0;er<Dr.length;er++)if(Vt=Dr[er],Lt=Vt.$nodeToRelocate$,Vt.$slotRefNode$){for(an=Vt.$slotRefNode$.parentNode,vn=Vt.$slotRefNode$.nextSibling,Qt=Lt["s-ol"];Qt=Qt.previousSibling;)if(rr=Qt["s-nr"],rr&&rr["s-sn"]===Lt["s-sn"]&&an===rr.parentNode&&(rr=rr.nextSibling,!rr||!rr["s-nr"])){vn=rr;break}(!vn&&an!==Lt.parentNode||Lt.nextSibling!==vn)&&Lt!==vn&&(!Lt["s-hn"]&&Lt["s-ol"]&&(Lt["s-hn"]=Lt["s-ol"].parentNode.nodeName),an.insertBefore(Lt,vn))}else 1===Lt.nodeType&&(Lt.hidden=!0)}ve&&Jr(Qe.$elm$),Xn.$flags$&=-2,Dr.length=0})(se,be)}catch(me){Gt(me,se.$hostElement$)}return null},Kt=se=>{const qe=se.$hostElement$,et=se.$lazyInstance$,Qe=se.$ancestorComponent$;Jt(et,"componentDidRender"),64&se.$flags$?Jt(et,"componentDidUpdate"):(se.$flags$|=64,qt(qe),Jt(et,"componentDidLoad"),se.$onReadyResolve$(qe),Qe||rt()),se.$onInstanceResolve$(qe),se.$onRenderResolve$&&(se.$onRenderResolve$(),se.$onRenderResolve$=void 0),512&se.$flags$&&Ci(()=>ur(se,!1)),se.$flags$&=-517},Ze=se=>{{const be=Xt(se),qe=be.$hostElement$.isConnected;return qe&&2==(18&be.$flags$)&&ur(be,!1),qe}},rt=se=>{qt(Wn.documentElement),Ci(()=>gn(Jn,"appload",{detail:{namespace:"ionic"}}))},Jt=(se,be,qe)=>{if(se&&se[be])try{return se[be](qe)}catch(me){Gt(me)}},qt=se=>se.classList.add("hydrated"),Ye=(se,be,qe)=>{if(be.$members$){se.watchers&&(be.$watchers$=se.watchers);const me=Object.entries(be.$members$),et=se.prototype;if(me.map(([Qe,[Vt]])=>{31&Vt||2&qe&&32&Vt?Object.defineProperty(et,Qe,{get(){return((se,be)=>Xt(this).$instanceValues$.get(be))(0,Qe)},set(Lt){((se,be,qe,me)=>{const et=Xt(se),Qe=et.$hostElement$,Vt=et.$instanceValues$.get(be),Lt=et.$flags$,Qt=et.$lazyInstance$;qe=((se,be)=>null==se||De(se)?se:4&be?"false"!==se&&(""===se||!!se):2&be?parseFloat(se):1&be?String(se):se)(qe,me.$members$[be][0]);const an=Number.isNaN(Vt)&&Number.isNaN(qe);if((!(8&Lt)||void 0===Vt)&&qe!==Vt&&!an&&(et.$instanceValues$.set(be,qe),Qt)){if(me.$watchers$&&128&Lt){const rr=me.$watchers$[be];rr&&rr.map(er=>{try{Qt[er](qe,Vt,be)}catch(vr){Gt(vr,Qe)}})}2==(18&Lt)&&ur(et,!1)}})(this,Qe,Lt,be)},configurable:!0,enumerable:!0}):1&qe&&64&Vt&&Object.defineProperty(et,Qe,{value(...Lt){const Qt=Xt(this);return Qt.$onInstancePromise$.then(()=>Qt.$lazyInstance$[Qe](...Lt))}})}),1&qe){const Qe=new Map;et.attributeChangedCallback=function(Vt,Lt,Qt){Xn.jmp(()=>{const an=Qe.get(Vt);if(this.hasOwnProperty(an))Qt=this[an],delete this[an];else if(et.hasOwnProperty(an)&&"number"==typeof this[an]&&this[an]==Qt)return;this[an]=(null!==Qt||"boolean"!=typeof this[an])&&Qt})},se.observedAttributes=me.filter(([Vt,Lt])=>15&Lt[0]).map(([Vt,Lt])=>{const Qt=Lt[1]||Vt;return Qe.set(Qt,Vt),512&Lt[0]&&be.$attrsToReflect$.push([Vt,Qt]),Qt})}}return se},Ot=function(){var se=(0,_.Z)(function*(be,qe,me,et,Qe){if(!(32&qe.$flags$)){qe.$flags$|=32;{if((Qe=kn(me)).then){const an=()=>{};Qe=yield Qe,an()}Qe.isProxied||(me.$watchers$=Qe.watchers,Ye(Qe,me,2),Qe.isProxied=!0);const Qt=()=>{};qe.$flags$|=8;try{new Qe(qe)}catch(an){Gt(an)}qe.$flags$&=-9,qe.$flags$|=128,Qt(),lt(qe.$lazyInstance$)}if(Qe.style){let Qt=Qe.style;"string"!=typeof Qt&&(Qt=Qt[qe.$modeName$=(se=>Qn.map(be=>be(se)).find(be=>!!be))(be)]);const an=Cn(me,qe.$modeName$);if(!wn.has(an)){const vn=()=>{};Yn(an,Qt,!!(1&me.$flags$)),vn()}}}const Vt=qe.$ancestorComponent$,Lt=()=>ur(qe,!0);Vt&&Vt["s-rc"]?Vt["s-rc"].push(Lt):Lt()});return function(qe,me,et,Qe,Vt){return se.apply(this,arguments)}}(),lt=se=>{Jt(se,"connectedCallback")},ut=se=>{const be=se["s-cr"]=Wn.createComment("");be["s-cn"]=!0,se.insertBefore(be,se.firstChild)},_e=(se,be={})=>{var qe;const et=[],Qe=be.exclude||[],Vt=Jn.customElements,Lt=Wn.head,Qt=Lt.querySelector("meta[charset]"),an=Wn.createElement("style"),vn=[],rr=Wn.querySelectorAll(`[${_t}]`);let er,vr=!0,Wr=0;for(Object.assign(Xn,be),Xn.$resourcesUrl$=new URL(be.resourcesUrl||"./",Wn.baseURI).href,Xn.$flags$|=2;Wr<rr.length;Wr++)Yn(rr[Wr].getAttribute(_t),hr(rr[Wr].innerHTML),!0);se.map($i=>{$i[1].map(mt=>{const ot={$flags$:mt[0],$tagName$:mt[1],$members$:mt[2],$listeners$:mt[3]};ot.$members$=mt[2],ot.$listeners$=mt[3],ot.$attrsToReflect$=[],ot.$watchers$={};const xt=ot.$tagName$,tn=class extends HTMLElement{constructor(dn){super(dn),ze(dn=this,ot),1&ot.$flags$&&dn.attachShadow({mode:"open",delegatesFocus:!!(16&ot.$flags$)})}connectedCallback(){er&&(clearTimeout(er),er=null),vr?vn.push(this):Xn.jmp(()=>(se=>{if(!(1&Xn.$flags$)){const be=Xt(se),qe=be.$cmpMeta$,me=()=>{};if(1&be.$flags$)gt(se,be,qe.$listeners$),lt(be.$lazyInstance$);else{let et;if(be.$flags$|=1,et=se.getAttribute(ue),et){if(1&qe.$flags$){const Qe=xn(se.shadowRoot,qe,se.getAttribute("s-mode"));se.classList.remove(Qe+"-h",Qe+"-s")}((se,be,qe,me)=>{const Qe=se.shadowRoot,Vt=[],Qt=Qe?[]:null,an=me.$vnode$=Tt(be,null);Xn.$orgLocNodes$||Ct(Wn.body,Xn.$orgLocNodes$=new Map),se[ue]=qe,se.removeAttribute(ue),ht(an,Vt,[],Qt,se,se,qe),Vt.map(vn=>{const rr=vn.$hostId$+"."+vn.$nodeId$,er=Xn.$orgLocNodes$.get(rr),vr=vn.$elm$;er&&vi&&""===er["s-en"]&&er.parentNode.insertBefore(vr,er.nextSibling),Qe||(vr["s-hn"]=be,er&&(vr["s-ol"]=er,vr["s-ol"]["s-nr"]=vr)),Xn.$orgLocNodes$.delete(rr)}),Qe&&Qt.map(vn=>{vn&&Qe.appendChild(vn)})})(se,qe.$tagName$,et,be)}et||12&qe.$flags$&&ut(se);{let Qe=se;for(;Qe=Qe.parentNode||Qe.host;)if(1===Qe.nodeType&&Qe.hasAttribute("s-id")&&Qe["s-p"]||Qe["s-p"]){gi(be,be.$ancestorComponent$=Qe);break}}qe.$members$&&Object.entries(qe.$members$).map(([Qe,[Vt]])=>{if(31&Vt&&se.hasOwnProperty(Qe)){const Lt=se[Qe];delete se[Qe],se[Qe]=Lt}}),Ot(se,be,qe)}me()}})(this))}disconnectedCallback(){Xn.jmp(()=>(se=>{if(!(1&Xn.$flags$)){const be=Xt(this),qe=be.$lazyInstance$;be.$rmListeners$&&(be.$rmListeners$.map(me=>me()),be.$rmListeners$=void 0),Jt(qe,"disconnectedCallback")}})())}componentOnReady(){return Xt(this).$onReadyPromise$}};ot.$lazyBundleId$=$i[0],!Qe.includes(xt)&&!Vt.get(xt)&&(et.push(xt),Vt.define(xt,Ye(tn,ot,1)))})});{an.innerHTML=et+"{visibility:hidden}.hydrated{visibility:inherit}",an.setAttribute("data-styles","");const $i=null!==(qe=Xn.$nonce$)&&void 0!==qe?qe:He(Wn);null!=$i&&an.setAttribute("nonce",$i),Lt.insertBefore(an,Qt?Qt.nextSibling:Lt.firstChild)}vr=!1,vn.length?vn.map($i=>$i.connectedCallback()):Xn.jmp(()=>er=setTimeout(rt,30))},gt=(se,be,qe,me)=>{qe&&qe.map(([et,Qe,Vt])=>{const Lt=he(se,et),Qt=Nt(be,Vt),an=Ce(et);Xn.ael(Lt,Qe,Qt,an),(be.$rmListeners$=be.$rmListeners$||[]).push(()=>Xn.rel(Lt,Qe,Qt,an))})},Nt=(se,be)=>qe=>{try{256&se.$flags$?se.$lazyInstance$[be](qe):(se.$queuedListeners$=se.$queuedListeners$||[]).push([be,qe])}catch(me){Gt(me)}},he=(se,be)=>4&be?Wn:8&be?Jn:16&be?Wn.body:se,Ce=se=>0!=(2&se),It=new WeakMap,Xt=se=>It.get(se),Xe=(se,be)=>It.set(be.$lazyInstance$=se,be),ze=(se,be)=>{const qe={$flags$:0,$hostElement$:se,$cmpMeta$:be,$instanceValues$:new Map};return qe.$onInstancePromise$=new Promise(me=>qe.$onInstanceResolve$=me),qe.$onReadyPromise$=new Promise(me=>qe.$onReadyResolve$=me),se["s-p"]=[],se["s-rc"]=[],gt(se,qe,be.$listeners$),It.set(se,qe)},bt=(se,be)=>be in se,Gt=(se,be)=>(0,console.error)(se,be),pn=new Map,kn=(se,be,qe)=>{const me=se.$tagName$.replace(/-/g,"_"),et=se.$lazyBundleId$,Qe=pn.get(et);return Qe?Qe[me]:j(863)(`./${et}.entry.js`).then(Vt=>(pn.set(et,Vt),Vt[me]),Gt)},wn=new Map,Qn=[],Jn=typeof window<"u"?window:{},Wn=Jn.document||{head:{}},Xn={$flags$:0,$resourcesUrl$:"",jmp:se=>se(),raf:se=>requestAnimationFrame(se),ael:(se,be,qe,me)=>se.addEventListener(be,qe,me),rel:(se,be,qe,me)=>se.removeEventListener(be,qe,me),ce:(se,be)=>new CustomEvent(se,be)},ys=se=>{Object.assign(Xn,se)},vi=!0,Vi=se=>Promise.resolve(se),ji=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),An=[],cr=[],ri=(se,be)=>qe=>{se.push(qe),Ee||(Ee=!0,be&&4&Xn.$flags$?Ci(kr):Xn.raf(kr))},qi=se=>{for(let be=0;be<se.length;be++)try{se[be](performance.now())}catch(qe){Gt(qe)}se.length=0},kr=()=>{qi(An),qi(cr),(Ee=An.length>0)&&Xn.raf(kr)},Ci=se=>Vi().then(se),Li=ri(An,!1),Ur=ri(cr,!0)},8126:(In,Et,j)=>{"use strict";j.d(Et,{m:()=>de});var _=j(5861),y=j(7593),ee=j(3577),le=j(5273),$e=j(9613);const Ae=ye=>(0,$e.c)().duration(ye?400:300),ve=ye=>{let We,Oe;const Je=ye.width+8,wt=(0,$e.c)(),Se=(0,$e.c)();ye.isEndSide?(We=Je+"px",Oe="0px"):(We=-Je+"px",Oe="0px"),wt.addElement(ye.menuInnerEl).fromTo("transform",`translateX(${We})`,`translateX(${Oe})`);const ue="ios"===(0,le.b)(ye),_t=ue?.2:.25;return Se.addElement(ye.backdropEl).fromTo("opacity",.01,_t),Ae(ue).addAnimation([wt,Se])},Ue=ye=>{let We,Oe;const Je=(0,le.b)(ye),wt=ye.width;ye.isEndSide?(We=-wt+"px",Oe=wt+"px"):(We=wt+"px",Oe=-wt+"px");const Se=(0,$e.c)().addElement(ye.menuInnerEl).fromTo("transform",`translateX(${Oe})`,"translateX(0px)"),xe=(0,$e.c)().addElement(ye.contentEl).fromTo("transform","translateX(0px)",`translateX(${We})`),ue=(0,$e.c)().addElement(ye.backdropEl).fromTo("opacity",.01,.32);return Ae("ios"===Je).addAnimation([Se,xe,ue])},Ge=ye=>{const We=(0,le.b)(ye),Oe=ye.width*(ye.isEndSide?-1:1)+"px",Je=(0,$e.c)().addElement(ye.contentEl).fromTo("transform","translateX(0px)",`translateX(${Oe})`);return Ae("ios"===We).addAnimation(Je)},de=(()=>{const ye=new Map,We=[],Oe=function(){var je=(0,_.Z)(function*(Be){const ht=yield Y(Be);return!!ht&&ht.open()});return function(ht){return je.apply(this,arguments)}}(),Je=function(){var je=(0,_.Z)(function*(Be){const ht=yield void 0!==Be?Y(Be):it();return void 0!==ht&&ht.close()});return function(ht){return je.apply(this,arguments)}}(),wt=function(){var je=(0,_.Z)(function*(Be){const ht=yield Y(Be);return!!ht&&ht.toggle()});return function(ht){return je.apply(this,arguments)}}(),Se=function(){var je=(0,_.Z)(function*(Be,ht){const Ct=yield Y(ht);return Ct&&(Ct.disabled=!Be),Ct});return function(ht,Ct){return je.apply(this,arguments)}}(),xe=function(){var je=(0,_.Z)(function*(Be,ht){const Ct=yield Y(ht);return Ct&&(Ct.swipeGesture=Be),Ct});return function(ht,Ct){return je.apply(this,arguments)}}(),ue=function(){var je=(0,_.Z)(function*(Be){if(null!=Be){const ht=yield Y(Be);return void 0!==ht&&ht.isOpen()}return void 0!==(yield it())});return function(ht){return je.apply(this,arguments)}}(),_t=function(){var je=(0,_.Z)(function*(Be){const ht=yield Y(Be);return!!ht&&!ht.disabled});return function(ht){return je.apply(this,arguments)}}(),Y=function(){var je=(0,_.Z)(function*(Be){return yield Fe(),"start"===Be||"end"===Be?yt(nn=>nn.side===Be&&!nn.disabled)||yt(nn=>nn.side===Be):null!=Be?yt(Ct=>Ct.menuId===Be):yt(Ct=>!Ct.disabled)||(We.length>0?We[0].el:void 0)});return function(ht){return je.apply(this,arguments)}}(),it=function(){var je=(0,_.Z)(function*(){return yield Fe(),Tt()});return function(){return je.apply(this,arguments)}}(),tt=function(){var je=(0,_.Z)(function*(){return yield Fe(),dt()});return function(){return je.apply(this,arguments)}}(),Pt=function(){var je=(0,_.Z)(function*(){return yield Fe(),Mt()});return function(){return je.apply(this,arguments)}}(),Ve=(je,Be)=>{ye.set(je,Be)},De=je=>{const Be=je.side;We.filter(ht=>ht.side===Be&&ht!==je).forEach(ht=>ht.disabled=!0)},He=function(){var je=(0,_.Z)(function*(Be,ht,Ct){if(Mt())return!1;if(ht){const nn=yield it();nn&&Be.el!==nn&&(yield nn.setOpen(!1,!1))}return Be._setOpen(ht,Ct)});return function(ht,Ct,nn){return je.apply(this,arguments)}}(),Tt=()=>yt(je=>je._isOpen),dt=()=>We.map(je=>je.el),Mt=()=>We.some(je=>je.isAnimating),yt=je=>{const Be=We.find(je);if(void 0!==Be)return Be.el},Fe=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(je=>new Promise(Be=>(0,ee.c)(je,Be))));return Ve("reveal",Ge),Ve("push",Ue),Ve("overlay",ve),typeof document<"u"&&document.addEventListener("ionBackButton",je=>{const Be=Tt();Be&&je.detail.register(y.MENU_BACK_BUTTON_PRIORITY,()=>Be.close())}),{registerAnimation:Ve,get:Y,getMenus:tt,getOpen:it,isEnabled:_t,swipeGesture:xe,isAnimating:Pt,isOpen:ue,enable:Se,toggle:wt,close:Je,open:Oe,_getOpenSync:Tt,_createAnimation:(je,Be)=>{const ht=ye.get(je);if(!ht)throw new Error("animation not registered");return ht(Be)},_register:je=>{We.indexOf(je)<0&&(je.disabled||De(je),We.push(je))},_unregister:je=>{const Be=We.indexOf(je);Be>-1&&We.splice(Be,1)},_setOpen:He,_setActiveMenu:De}})()},1178:(In,Et,j)=>{"use strict";j.d(Et,{a:()=>y,b:()=>ee,p:()=>_});const _=(le,...$e)=>console.warn(`[Ionic Warning]: ${le}`,...$e),y=(le,...$e)=>console.error(`[Ionic Error]: ${le}`,...$e),ee=(le,...$e)=>console.error(`<${le.tagName.toLowerCase()}> must be used inside ${$e.join(" or ")}.`)},9866:(In,Et,j)=>{"use strict";j.d(Et,{L:()=>le,a:()=>$e,b:()=>Ae,c:()=>ve,d:()=>Ue,e:()=>Pt,g:()=>Ne,l:()=>tt,s:()=>Ve,t:()=>de});var _=j(5861),y=j(4083),ee=j(3577);const le="ionViewWillEnter",$e="ionViewDidEnter",Ae="ionViewWillLeave",ve="ionViewDidLeave",Ue="ionViewWillUnload",de=De=>new Promise((He,pt)=>{(0,y.w)(()=>{ye(De),We(De).then(Tt=>{Tt.animation&&Tt.animation.destroy(),Oe(De),He(Tt)},Tt=>{Oe(De),pt(Tt)})})}),ye=De=>{const He=De.enteringEl,pt=De.leavingEl;ke(He,pt,De.direction),De.showGoBack?He.classList.add("can-go-back"):He.classList.remove("can-go-back"),Ve(He,!1),He.style.setProperty("pointer-events","none"),pt&&(Ve(pt,!1),pt.style.setProperty("pointer-events","none"))},We=function(){var De=(0,_.Z)(function*(He){const pt=yield Je(He);return pt&&y.B.isBrowser?wt(pt,He):Se(He)});return function(pt){return De.apply(this,arguments)}}(),Oe=De=>{const He=De.enteringEl,pt=De.leavingEl;He.classList.remove("ion-page-invisible"),He.style.removeProperty("pointer-events"),void 0!==pt&&(pt.classList.remove("ion-page-invisible"),pt.style.removeProperty("pointer-events"))},Je=function(){var De=(0,_.Z)(function*(He){return He.leavingEl&&He.animated&&0!==He.duration?He.animationBuilder?He.animationBuilder:"ios"===He.mode?(yield Promise.resolve().then(j.bind(j,3551))).iosTransitionAnimation:(yield Promise.resolve().then(j.bind(j,1138))).mdTransitionAnimation:void 0});return function(pt){return De.apply(this,arguments)}}(),wt=function(){var De=(0,_.Z)(function*(He,pt){yield xe(pt,!0);const Tt=He(pt.baseEl,pt);Y(pt.enteringEl,pt.leavingEl);const dt=yield _t(Tt,pt);return pt.progressCallback&&pt.progressCallback(void 0),dt&&it(pt.enteringEl,pt.leavingEl),{hasCompleted:dt,animation:Tt}});return function(pt,Tt){return De.apply(this,arguments)}}(),Se=function(){var De=(0,_.Z)(function*(He){const pt=He.enteringEl,Tt=He.leavingEl;return yield xe(He,!1),Y(pt,Tt),it(pt,Tt),{hasCompleted:!0}});return function(pt){return De.apply(this,arguments)}}(),xe=function(){var De=(0,_.Z)(function*(He,pt){(void 0!==He.deepWait?He.deepWait:pt)&&(yield Promise.all([Pt(He.enteringEl),Pt(He.leavingEl)])),yield ue(He.viewIsReady,He.enteringEl)});return function(pt,Tt){return De.apply(this,arguments)}}(),ue=function(){var De=(0,_.Z)(function*(He,pt){He&&(yield He(pt))});return function(pt,Tt){return De.apply(this,arguments)}}(),_t=(De,He)=>{const pt=He.progressCallback,Tt=new Promise(dt=>{De.onFinish(Mt=>dt(1===Mt))});return pt?(De.progressStart(!0),pt(De)):De.play(),Tt},Y=(De,He)=>{tt(He,Ae),tt(De,le)},it=(De,He)=>{tt(De,$e),tt(He,ve)},tt=(De,He)=>{if(De){const pt=new CustomEvent(He,{bubbles:!1,cancelable:!1});De.dispatchEvent(pt)}},Pt=function(){var De=(0,_.Z)(function*(He){const pt=He;if(pt){if(null!=pt.componentOnReady){if(null!=(yield pt.componentOnReady()))return}else if(null!=pt.__registerHost)return void(yield new Promise(dt=>(0,ee.r)(dt)));yield Promise.all(Array.from(pt.children).map(Pt))}});return function(pt){return De.apply(this,arguments)}}(),Ve=(De,He)=>{He?(De.setAttribute("aria-hidden","true"),De.classList.add("ion-page-hidden")):(De.hidden=!1,De.removeAttribute("aria-hidden"),De.classList.remove("ion-page-hidden"))},ke=(De,He,pt)=>{void 0!==De&&(De.style.zIndex="back"===pt?"99":"101"),void 0!==He&&(He.style.zIndex="100")},Ne=De=>De.classList.contains("ion-page")?De:De.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||De},5273:(In,Et,j)=>{"use strict";j.d(Et,{a:()=>de,b:()=>Mt,c:()=>ee,g:()=>Ee,i:()=>yt});var _=j(4083);class y{constructor(){this.m=new Map}reset(je){this.m=new Map(Object.entries(je))}get(je,Be){const ht=this.m.get(je);return void 0!==ht?ht:Be}getBoolean(je,Be=!1){const ht=this.m.get(je);return void 0===ht?Be:"string"==typeof ht?"true"===ht:!!ht}getNumber(je,Be){const ht=parseFloat(this.m.get(je));return isNaN(ht)?void 0!==Be?Be:NaN:ht}set(je,Be){this.m.set(je,Be)}}const ee=new y,Ge="ionic-persist-config",Ee=Fe=>ye(Fe),de=(Fe,je)=>("string"==typeof Fe&&(je=Fe,Fe=void 0),Ee(Fe).includes(je)),ye=(Fe=window)=>{if(typeof Fe>"u")return[];Fe.Ionic=Fe.Ionic||{};let je=Fe.Ionic.platforms;return null==je&&(je=Fe.Ionic.platforms=We(Fe),je.forEach(Be=>Fe.document.documentElement.classList.add(`plt-${Be}`))),je},We=Fe=>{const je=ee.get("platform");return Object.keys(Tt).filter(Be=>{const ht=null==je?void 0:je[Be];return"function"==typeof ht?ht(Fe):Tt[Be](Fe)})},Je=Fe=>!!(He(Fe,/iPad/i)||He(Fe,/Macintosh/i)&&it(Fe)),xe=Fe=>He(Fe,/android|sink/i),it=Fe=>pt(Fe,"(any-pointer:coarse)"),Pt=Fe=>Ve(Fe)||ke(Fe),Ve=Fe=>!!(Fe.cordova||Fe.phonegap||Fe.PhoneGap),ke=Fe=>{const je=Fe.Capacitor;return!(null==je||!je.isNative)},He=(Fe,je)=>je.test(Fe.navigator.userAgent),pt=(Fe,je)=>{var Be;return null===(Be=Fe.matchMedia)||void 0===Be?void 0:Be.call(Fe,je).matches},Tt={ipad:Je,iphone:Fe=>He(Fe,/iPhone/i),ios:Fe=>He(Fe,/iPhone|iPod/i)||Je(Fe),android:xe,phablet:Fe=>{const je=Fe.innerWidth,Be=Fe.innerHeight,ht=Math.min(je,Be),Ct=Math.max(je,Be);return ht>390&&ht<520&&Ct>620&&Ct<800},tablet:Fe=>{const je=Fe.innerWidth,Be=Fe.innerHeight,ht=Math.min(je,Be),Ct=Math.max(je,Be);return Je(Fe)||(Fe=>xe(Fe)&&!He(Fe,/mobile/i))(Fe)||ht>460&&ht<820&&Ct>780&&Ct<1400},cordova:Ve,capacitor:ke,electron:Fe=>He(Fe,/electron/i),pwa:Fe=>{var je;return!!(null!==(je=Fe.matchMedia)&&void 0!==je&&je.call(Fe,"(display-mode: standalone)").matches||Fe.navigator.standalone)},mobile:it,mobileweb:Fe=>it(Fe)&&!Pt(Fe),desktop:Fe=>!it(Fe),hybrid:Pt};let dt;const Mt=Fe=>Fe&&(0,_.g)(Fe)||dt,yt=(Fe={})=>{if(typeof window>"u")return;const je=window.document,Be=window,ht=Be.Ionic=Be.Ionic||{},Ct={};Fe._ael&&(Ct.ael=Fe._ael),Fe._rel&&(Ct.rel=Fe._rel),Fe._ce&&(Ct.ce=Fe._ce),(0,_.a)(Ct);const nn=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Fe=>{try{const je=Fe.sessionStorage.getItem(Ge);return null!==je?JSON.parse(je):{}}catch{return{}}})(Be)),{persistConfig:!1}),ht.config),(Fe=>{const je={};return Fe.location.search.slice(1).split("&").map(Be=>Be.split("=")).map(([Be,ht])=>[decodeURIComponent(Be),decodeURIComponent(ht)]).filter(([Be])=>((Fe,je)=>Fe.substr(0,je.length)===je)(Be,"ionic:")).map(([Be,ht])=>[Be.slice("ionic:".length),ht]).forEach(([Be,ht])=>{je[Be]=ht}),je})(Be)),Fe);ee.reset(nn),ee.getBoolean("persistConfig")&&((Fe,je)=>{try{Fe.sessionStorage.setItem(Ge,JSON.stringify(je))}catch{return}})(Be,nn),ye(Be),ht.config=ee,ht.mode=dt=ee.get("mode",je.documentElement.getAttribute("mode")||(de(Be,"ios")?"ios":"md")),ee.set("mode",dt),je.documentElement.setAttribute("mode",dt),je.documentElement.classList.add(dt),ee.getBoolean("_testing")&&ee.set("animated",!1);const zt=kt=>{var Re;return null===(Re=kt.tagName)||void 0===Re?void 0:Re.startsWith("ION-")},Dn=kt=>["ios","md"].includes(kt);(0,_.c)(kt=>{for(;kt;){const Re=kt.mode||kt.getAttribute("mode");if(Re){if(Dn(Re))return Re;zt(kt)&&console.warn('Invalid ionic mode: "'+Re+'", expected: "ios" or "md"')}kt=kt.parentElement}return dt})}},3551:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{iosTransitionAnimation:()=>We,shadow:()=>ve});var _=j(9613),y=j(9866);j(3457),j(4083);const Ae=Oe=>document.querySelector(`${Oe}.ion-cloned-element`),ve=Oe=>Oe.shadowRoot||Oe,Ue=Oe=>{const Je="ION-TABS"===Oe.tagName?Oe:Oe.querySelector("ion-tabs"),wt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Je){const Se=Je.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Se?Se.querySelector(wt):null}return Oe.querySelector(wt)},Ge=(Oe,Je)=>{const wt="ION-TABS"===Oe.tagName?Oe:Oe.querySelector("ion-tabs");let Se=[];if(null!=wt){const xe=wt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=xe&&(Se=xe.querySelectorAll("ion-buttons"))}else Se=Oe.querySelectorAll("ion-buttons");for(const xe of Se){const ue=xe.closest("ion-header"),_t=ue&&!ue.classList.contains("header-collapse-condense-inactive"),Y=xe.querySelector("ion-back-button"),it=xe.classList.contains("buttons-collapse");if(null!==Y&&("start"===xe.slot||""===xe.slot)&&(it&&_t&&Je||!it))return Y}return null},de=(Oe,Je,wt,Se,xe,ue)=>{const _t=Je?`calc(100% - ${ue.right+4}px)`:ue.left-4+"px",Y=Je?"7px":"-7px",it=Je?"-4px":"4px",tt=Je?"-4px":"4px",Pt=Je?"right":"left",Ve=Je?"left":"right",De=wt?[{offset:0,opacity:1,transform:`translate3d(${it}, ${ue.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Y}, ${xe.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Y}, ${xe.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${it}, ${ue.top-46}px, 0) scale(1)`}],Tt=wt?[{offset:0,opacity:1,transform:`translate3d(${tt}, ${ue.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${tt}, ${ue.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${tt}, ${ue.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${tt}, ${ue.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${tt}, ${ue.top-46}px, 0) scale(1)`}],dt=(0,_.c)(),Mt=(0,_.c)(),yt=Ae("ion-back-button"),Fe=ve(yt).querySelector(".button-text"),je=ve(yt).querySelector("ion-icon");yt.text=Se.text,yt.mode=Se.mode,yt.icon=Se.icon,yt.color=Se.color,yt.disabled=Se.disabled,yt.style.setProperty("display","block"),yt.style.setProperty("position","fixed"),Mt.addElement(je),dt.addElement(Fe),dt.beforeStyles({"transform-origin":`${Pt} center`}).beforeAddWrite(()=>{Se.style.setProperty("display","none"),yt.style.setProperty(Pt,_t)}).afterAddWrite(()=>{Se.style.setProperty("display",""),yt.style.setProperty("display","none"),yt.style.removeProperty(Pt)}).keyframes(De),Mt.beforeStyles({"transform-origin":`${Ve} center`}).keyframes(Tt),Oe.addAnimation([dt,Mt])},ye=(Oe,Je,wt,Se,xe,ue)=>{const _t=Je?`calc(100% - ${xe.right}px)`:`${xe.left}px`,Y=Je?"-18px":"18px",it=Je?"right":"left",Ve=wt?[{offset:0,opacity:0,transform:`translate3d(${Y}, ${ue.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${xe.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${xe.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Y}, ${ue.top-4}px, 0) scale(0.5)`}],ke=Ae("ion-title"),Ne=(0,_.c)();ke.innerText=Se.innerText,ke.size=Se.size,ke.color=Se.color,Ne.addElement(ke),Ne.beforeStyles({"transform-origin":`${it} center`,height:"46px",display:"",position:"relative",[it]:_t}).beforeAddWrite(()=>{Se.style.setProperty("display","none")}).afterAddWrite(()=>{Se.style.setProperty("display",""),ke.style.setProperty("display","none")}).keyframes(Ve),Oe.addAnimation(Ne)},We=(Oe,Je)=>{var wt;try{const Se="cubic-bezier(0.32,0.72,0,1)",xe="opacity",ue="transform",_t="0%",it="rtl"===Oe.ownerDocument.dir,tt=it?"-99.5%":"99.5%",Pt=it?"33%":"-33%",Ve=Je.enteringEl,ke=Je.leavingEl,Ne="back"===Je.direction,De=Ve.querySelector(":scope > ion-content"),He=Ve.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),pt=Ve.querySelectorAll(":scope > ion-header > ion-toolbar"),Tt=(0,_.c)(),dt=(0,_.c)();if(Tt.addElement(Ve).duration((null!==(wt=Je.duration)&&void 0!==wt?wt:0)||540).easing(Je.easing||Se).fill("both").beforeRemoveClass("ion-page-invisible"),ke&&null!=Oe){const je=(0,_.c)();je.addElement(Oe),Tt.addAnimation(je)}if(De||0!==pt.length||0!==He.length?(dt.addElement(De),dt.addElement(He)):dt.addElement(Ve.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Tt.addAnimation(dt),Ne?dt.beforeClearStyles([xe]).fromTo("transform",`translateX(${Pt})`,`translateX(${_t})`).fromTo(xe,.8,1):dt.beforeClearStyles([xe]).fromTo("transform",`translateX(${tt})`,`translateX(${_t})`),De){const je=ve(De).querySelector(".transition-effect");if(je){const Be=je.querySelector(".transition-cover"),ht=je.querySelector(".transition-shadow"),Ct=(0,_.c)(),nn=(0,_.c)(),zt=(0,_.c)();Ct.addElement(je).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),nn.addElement(Be).beforeClearStyles([xe]).fromTo(xe,0,.1),zt.addElement(ht).beforeClearStyles([xe]).fromTo(xe,.03,.7),Ct.addAnimation([nn,zt]),dt.addAnimation([Ct])}}const Mt=Ve.querySelector("ion-header.header-collapse-condense"),{forward:yt,backward:Fe}=((Oe,Je,wt,Se,xe)=>{const ue=Ge(Se,wt),_t=Ue(xe),Y=Ue(Se),it=Ge(xe,wt),tt=null!==ue&&null!==_t&&!wt,Pt=null!==Y&&null!==it&&wt;if(tt){const Ve=_t.getBoundingClientRect(),ke=ue.getBoundingClientRect();ye(Oe,Je,wt,_t,Ve,ke),de(Oe,Je,wt,ue,Ve,ke)}else if(Pt){const Ve=Y.getBoundingClientRect(),ke=it.getBoundingClientRect();ye(Oe,Je,wt,Y,Ve,ke),de(Oe,Je,wt,it,Ve,ke)}return{forward:tt,backward:Pt}})(Tt,it,Ne,Ve,ke);if(pt.forEach(je=>{const Be=(0,_.c)();Be.addElement(je),Tt.addAnimation(Be);const ht=(0,_.c)();ht.addElement(je.querySelector("ion-title"));const Ct=(0,_.c)(),nn=Array.from(je.querySelectorAll("ion-buttons,[menuToggle]")),zt=je.closest("ion-header"),Dn=null==zt?void 0:zt.classList.contains("header-collapse-condense-inactive");let kt;kt=nn.filter(Ne?Yn=>{const xn=Yn.classList.contains("buttons-collapse");return xn&&!Dn||!xn}:Yn=>!Yn.classList.contains("buttons-collapse")),Ct.addElement(kt);const Re=(0,_.c)();Re.addElement(je.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const At=(0,_.c)();At.addElement(ve(je).querySelector(".toolbar-background"));const gn=(0,_.c)(),On=je.querySelector("ion-back-button");if(On&&gn.addElement(On),Be.addAnimation([ht,Ct,Re,At,gn]),Ct.fromTo(xe,.01,1),Re.fromTo(xe,.01,1),Ne)Dn||ht.fromTo("transform",`translateX(${Pt})`,`translateX(${_t})`).fromTo(xe,.01,1),Re.fromTo("transform",`translateX(${Pt})`,`translateX(${_t})`),gn.fromTo(xe,.01,1);else if(Mt||ht.fromTo("transform",`translateX(${tt})`,`translateX(${_t})`).fromTo(xe,.01,1),Re.fromTo("transform",`translateX(${tt})`,`translateX(${_t})`),At.beforeClearStyles([xe,"transform"]),(null==zt?void 0:zt.translucent)?At.fromTo("transform",it?"translateX(-100%)":"translateX(100%)","translateX(0px)"):At.fromTo(xe,.01,"var(--opacity)"),yt||gn.fromTo(xe,.01,1),On&&!yt){const xn=(0,_.c)();xn.addElement(ve(On).querySelector(".button-text")).fromTo("transform",it?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Be.addAnimation(xn)}}),ke){const je=(0,_.c)(),Be=ke.querySelector(":scope > ion-content"),ht=ke.querySelectorAll(":scope > ion-header > ion-toolbar"),Ct=ke.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Be||0!==ht.length||0!==Ct.length?(je.addElement(Be),je.addElement(Ct)):je.addElement(ke.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Tt.addAnimation(je),Ne){je.beforeClearStyles([xe]).fromTo("transform",`translateX(${_t})`,it?"translateX(-100%)":"translateX(100%)");const nn=(0,y.g)(ke);Tt.afterAddWrite(()=>{"normal"===Tt.getDirection()&&nn.style.setProperty("display","none")})}else je.fromTo("transform",`translateX(${_t})`,`translateX(${Pt})`).fromTo(xe,1,.8);if(Be){const nn=ve(Be).querySelector(".transition-effect");if(nn){const zt=nn.querySelector(".transition-cover"),Dn=nn.querySelector(".transition-shadow"),kt=(0,_.c)(),Re=(0,_.c)(),At=(0,_.c)();kt.addElement(nn).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Re.addElement(zt).beforeClearStyles([xe]).fromTo(xe,.1,0),At.addElement(Dn).beforeClearStyles([xe]).fromTo(xe,.7,.03),kt.addAnimation([Re,At]),je.addAnimation([kt])}}ht.forEach(nn=>{const zt=(0,_.c)();zt.addElement(nn);const Dn=(0,_.c)();Dn.addElement(nn.querySelector("ion-title"));const kt=(0,_.c)(),Re=nn.querySelectorAll("ion-buttons,[menuToggle]"),At=nn.closest("ion-header"),gn=null==At?void 0:At.classList.contains("header-collapse-condense-inactive"),On=Array.from(Re).filter(_r=>{const tr=_r.classList.contains("buttons-collapse");return tr&&!gn||!tr});kt.addElement(On);const Yn=(0,_.c)(),xn=nn.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");xn.length>0&&Yn.addElement(xn);const cn=(0,_.c)();cn.addElement(ve(nn).querySelector(".toolbar-background"));const Cn=(0,_.c)(),hr=nn.querySelector("ion-back-button");if(hr&&Cn.addElement(hr),zt.addAnimation([Dn,kt,Yn,Cn,cn]),Tt.addAnimation(zt),Cn.fromTo(xe,.99,0),kt.fromTo(xe,.99,0),Yn.fromTo(xe,.99,0),Ne){if(gn||Dn.fromTo("transform",`translateX(${_t})`,it?"translateX(-100%)":"translateX(100%)").fromTo(xe,.99,0),Yn.fromTo("transform",`translateX(${_t})`,it?"translateX(-100%)":"translateX(100%)"),cn.beforeClearStyles([xe,"transform"]),(null==At?void 0:At.translucent)?cn.fromTo("transform","translateX(0px)",it?"translateX(-100%)":"translateX(100%)"):cn.fromTo(xe,"var(--opacity)",0),hr&&!Fe){const tr=(0,_.c)();tr.addElement(ve(hr).querySelector(".button-text")).fromTo("transform",`translateX(${_t})`,`translateX(${(it?-124:124)+"px"})`),zt.addAnimation(tr)}}else gn||Dn.fromTo("transform",`translateX(${_t})`,`translateX(${Pt})`).fromTo(xe,.99,0).afterClearStyles([ue,xe]),Yn.fromTo("transform",`translateX(${_t})`,`translateX(${Pt})`).afterClearStyles([ue,xe]),Cn.afterClearStyles([xe]),Dn.afterClearStyles([xe]),kt.afterClearStyles([xe])})}return Tt}catch(Se){throw Se}}},1138:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{mdTransitionAnimation:()=>$e});var _=j(9613),y=j(9866);j(3457),j(4083);const $e=(Ae,ve)=>{var Ue,Ge,Ee;const We="back"===ve.direction,Je=ve.leavingEl,wt=(0,y.g)(ve.enteringEl),Se=wt.querySelector("ion-toolbar"),xe=(0,_.c)();if(xe.addElement(wt).fill("both").beforeRemoveClass("ion-page-invisible"),We?xe.duration((null!==(Ue=ve.duration)&&void 0!==Ue?Ue:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):xe.duration((null!==(Ge=ve.duration)&&void 0!==Ge?Ge:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Se){const ue=(0,_.c)();ue.addElement(Se),xe.addAnimation(ue)}if(Je&&We){xe.duration((null!==(Ee=ve.duration)&&void 0!==Ee?Ee:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ue=(0,_.c)();ue.addElement((0,y.g)(Je)).onFinish(_t=>{1===_t&&ue.elements.length>0&&ue.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),xe.addAnimation(ue)}return xe}},2583:(In,Et,j)=>{"use strict";j.d(Et,{B:()=>Ct,G:()=>nn,a:()=>Ee,b:()=>de,c:()=>Je,d:()=>zt,e:()=>Dn,f:()=>He,g:()=>Tt,h:()=>yt,i:()=>je,j:()=>Se,k:()=>Ue,m:()=>We,n:()=>_t,o:()=>Ne,s:()=>ht,t:()=>wt});var _=j(5861),y=j(5273),ee=j(6782),le=j(7593),$e=j(3577),Ae=j(1178);let ve=0;const Ue=new WeakMap,Ge=kt=>({create:Re=>xe(kt,Re),dismiss:(Re,At,gn)=>Ve(document,Re,At,kt,gn),getTop:()=>(0,_.Z)(function*(){return Ne(document,kt)})()}),Ee=Ge("ion-alert"),de=Ge("ion-action-sheet"),We=Ge("ion-modal"),Je=Ge("ion-popover"),wt=Ge("ion-toast"),Se=kt=>{typeof document<"u"&&Pt(document);const Re=ve++;kt.overlayIndex=Re,kt.hasAttribute("id")||(kt.id=`ion-overlay-${Re}`)},xe=(kt,Re)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(kt).then(()=>{const At=document.createElement(kt);return At.classList.add("overlay-hidden"),Object.assign(At,Object.assign(Object.assign({},Re),{hasController:!0})),dt(document).appendChild(At),new Promise(gn=>(0,$e.c)(At,gn))}):Promise.resolve(),ue='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',_t=(kt,Re)=>{let At=kt.querySelector(ue);const gn=null==At?void 0:At.shadowRoot;gn&&(At=gn.querySelector(ue)||At),At?(0,$e.f)(At):Re.focus()},it=(kt,Re)=>{const At=Array.from(kt.querySelectorAll(ue));let gn=At.length>0?At[At.length-1]:null;const On=null==gn?void 0:gn.shadowRoot;On&&(gn=On.querySelector(ue)||gn),gn?gn.focus():Re.focus()},Pt=kt=>{0===ve&&(ve=1,kt.addEventListener("focus",Re=>{((kt,Re)=>{const At=Ne(Re,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),gn=kt.target;At&&gn&&!At.classList.contains("ion-disable-focus-trap")&&(At.shadowRoot?(()=>{if(At.contains(gn))At.lastFocus=gn;else{const xn=At.lastFocus;_t(At,At),xn===Re.activeElement&&it(At,At),At.lastFocus=Re.activeElement}})():(()=>{if(At===gn)At.lastFocus=void 0;else{const xn=(0,$e.g)(At);if(!xn.contains(gn))return;const cn=xn.querySelector(".ion-overlay-wrapper");if(!cn)return;if(cn.contains(gn))At.lastFocus=gn;else{const Cn=At.lastFocus;_t(cn,At),Cn===Re.activeElement&&it(cn,At),At.lastFocus=Re.activeElement}}})())})(Re,kt)},!0),kt.addEventListener("ionBackButton",Re=>{const At=Ne(kt);null!=At&&At.backdropDismiss&&Re.detail.register(le.OVERLAY_BACK_BUTTON_PRIORITY,()=>At.dismiss(void 0,Ct))}),kt.addEventListener("keydown",Re=>{if("Escape"===Re.key){const At=Ne(kt);null!=At&&At.backdropDismiss&&At.dismiss(void 0,Ct)}}))},Ve=(kt,Re,At,gn,On)=>{const Yn=Ne(kt,gn,On);return Yn?Yn.dismiss(Re,At):Promise.reject("overlay does not exist")},Ne=(kt,Re,At)=>{const gn=((kt,Re)=>(void 0===Re&&(Re="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(kt.querySelectorAll(Re)).filter(At=>At.overlayIndex>0)))(kt,Re).filter(On=>!(kt=>kt.classList.contains("overlay-hidden"))(On));return void 0===At?gn[gn.length-1]:gn.find(On=>On.id===At)},De=(kt=!1)=>{const At=dt(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");At&&(kt?At.setAttribute("aria-hidden","true"):At.removeAttribute("aria-hidden"))},He=function(){var kt=(0,_.Z)(function*(Re,At,gn,On,Yn){var xn,cn;if(Re.presented)return;De(!0),Re.presented=!0,Re.willPresent.emit(),null===(xn=Re.willPresentShorthand)||void 0===xn||xn.emit();const Cn=(0,y.b)(Re),hr=Re.enterAnimation?Re.enterAnimation:y.c.get(At,"ios"===Cn?gn:On);(yield Mt(Re,hr,Re.el,Yn))&&(Re.didPresent.emit(),null===(cn=Re.didPresentShorthand)||void 0===cn||cn.emit()),"ION-TOAST"!==Re.el.tagName&&pt(Re.el),Re.keyboardClose&&(null===document.activeElement||!Re.el.contains(document.activeElement))&&Re.el.focus()});return function(At,gn,On,Yn,xn){return kt.apply(this,arguments)}}(),pt=function(){var kt=(0,_.Z)(function*(Re){let At=document.activeElement;if(!At)return;const gn=null==At?void 0:At.shadowRoot;gn&&(At=gn.querySelector(ue)||At),yield Re.onDidDismiss(),At.focus()});return function(At){return kt.apply(this,arguments)}}(),Tt=function(){var kt=(0,_.Z)(function*(Re,At,gn,On,Yn,xn,cn){var Cn,hr;if(!Re.presented)return!1;De(!1),Re.presented=!1;try{Re.el.style.setProperty("pointer-events","none"),Re.willDismiss.emit({data:At,role:gn}),null===(Cn=Re.willDismissShorthand)||void 0===Cn||Cn.emit({data:At,role:gn});const _r=(0,y.b)(Re),tr=Re.leaveAnimation?Re.leaveAnimation:y.c.get(On,"ios"===_r?Yn:xn);gn!==nn&&(yield Mt(Re,tr,Re.el,cn)),Re.didDismiss.emit({data:At,role:gn}),null===(hr=Re.didDismissShorthand)||void 0===hr||hr.emit({data:At,role:gn}),Ue.delete(Re),Re.el.classList.add("overlay-hidden"),Re.el.style.removeProperty("pointer-events"),void 0!==Re.el.lastFocus&&(Re.el.lastFocus=void 0)}catch(_r){console.error(_r)}return Re.el.remove(),!0});return function(At,gn,On,Yn,xn,cn,Cn){return kt.apply(this,arguments)}}(),dt=kt=>kt.querySelector("ion-app")||kt.body,Mt=function(){var kt=(0,_.Z)(function*(Re,At,gn,On){gn.classList.remove("overlay-hidden");const xn=At(Re.el,On);(!Re.animated||!y.c.getBoolean("animated",!0))&&xn.duration(0),Re.keyboardClose&&xn.beforeAddWrite(()=>{const Cn=gn.ownerDocument.activeElement;null!=Cn&&Cn.matches("input,ion-input, ion-textarea")&&Cn.blur()});const cn=Ue.get(Re)||[];return Ue.set(Re,[...cn,xn]),yield xn.play(),!0});return function(At,gn,On,Yn){return kt.apply(this,arguments)}}(),yt=(kt,Re)=>{let At;const gn=new Promise(On=>At=On);return Fe(kt,Re,On=>{At(On.detail)}),gn},Fe=(kt,Re,At)=>{const gn=On=>{(0,$e.b)(kt,Re,gn),At(On)};(0,$e.a)(kt,Re,gn)},je=kt=>"cancel"===kt||kt===Ct,Be=kt=>kt(),ht=(kt,Re)=>{if("function"==typeof kt)return y.c.get("_zoneGate",Be)(()=>{try{return kt(Re)}catch(gn){throw gn}})},Ct="backdrop",nn="gesture",zt=kt=>{let At,Re=!1;const gn=(0,ee.C)(),On=(cn=!1)=>{if(At&&!cn)return{delegate:At,inline:Re};const{el:Cn,hasController:hr,delegate:_r}=kt;return Re=null!==Cn.parentNode&&!hr,At=Re?_r||gn:_r,{inline:Re,delegate:At}};return{attachViewToDom:function(){var cn=(0,_.Z)(function*(Cn){const{delegate:hr}=On(!0);if(hr)return yield hr.attachViewToDom(kt.el,Cn);const{hasController:_r}=kt;if(_r&&void 0!==Cn)throw new Error("framework delegate is missing");return null});return function(hr){return cn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:cn}=On();cn&&void 0!==kt.el&&cn.removeViewFromDom(kt.el.parentElement,kt.el)}}},Dn=()=>{let kt;const Re=()=>{kt&&(kt(),kt=void 0)};return{addClickListener:(gn,On)=>{Re();const Yn=void 0!==On?document.getElementById(On):null;Yn?kt=((cn,Cn)=>{const hr=()=>{Cn.present()};return cn.addEventListener("click",hr),()=>{cn.removeEventListener("click",hr)}})(Yn,gn):(0,Ae.p)(`A trigger element with the ID "${On}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,gn)},removeClickListener:Re}}},6738:(In,Et,j)=>{"use strict";j.d(Et,{H:()=>tr,a:()=>zt,b:()=>ut,c:()=>Ke,d:()=>gt,g:()=>Nt,h:()=>hr,r:()=>xe});var _=j(5861);let $e,Ae,ee=0,le=!1,ve=!1;const Ue=typeof window<"u"?window:{},Ge=Ue.CSS,Ee=Ue.document||{head:{}},de={$flags$:0,$resourcesUrl$:"",jmp:he=>he(),raf:he=>requestAnimationFrame(he),ael:(he,Ce,St,It)=>he.addEventListener(Ce,St,It),rel:(he,Ce,St,It)=>he.removeEventListener(Ce,St,It)},ye=(()=>(Ee.head.attachShadow+"").indexOf("[native")>-1)(),We=he=>Promise.resolve(he),Oe=(()=>{try{return new CSSStyleSheet,!0}catch{}return!1})(),Je={},wt=new WeakMap,Se=he=>wt.get(he),xe=(he,Ce)=>wt.set(Ce.$lazyInstance$=he,Ce),_t=(he,Ce)=>Ce in he,Y=he=>console.error(he),it=new Map,Pt=new Map,Ve=[],ke=[],Ne=[],De=(he,Ce)=>St=>{he.push(St),le||(le=!0,Ce&&4&de.$flags$?dt(Tt):de.raf(Tt))},pt=(he,Ce)=>{let St=0,It=0;for(;St<he.length&&(It=performance.now())<Ce;)try{he[St++](It)}catch(Xt){Y(Xt)}St===he.length?he.length=0:0!==St&&he.splice(0,St)},Tt=()=>{ee++,(he=>{for(let Ce=0;Ce<he.length;Ce++)try{he[Ce](performance.now())}catch(St){Y(St)}he.length=0})(Ve);const he=2==(6&de.$flags$)?performance.now()+10*Math.ceil(ee*(1/22)):1/0;pt(ke,he),pt(Ne,he),ke.length>0&&(Ne.push(...ke),ke.length=0),(le=Ve.length+ke.length+Ne.length>0)?de.raf(Tt):ee=0},dt=he=>We().then(he),Mt=De(Ve,!1),yt=De(ke,!0),Fe={},Ct=he=>"object"==(he=typeof he)||"function"===he,zt=()=>Ge&&Ge.supports&&Ge.supports("color","var(--c)")?We():j.e(4952).then(j.t.bind(j,9723,23)).then(()=>(de.$cssShim$=Ue.__cssshim)?de.$cssShim$.i():0),On=new WeakMap,Cn=(he,Ce)=>"sc-"+he,hr=(he,Ce,...St)=>{let It=null,Xt=!1,Xe=!1,ze=[];const bt=pn=>{for(let kn=0;kn<pn.length;kn++)It=pn[kn],Array.isArray(It)?bt(It):null!=It&&"boolean"!=typeof It&&((Xt="function"!=typeof he&&!Ct(It))&&(It=String(It)),Xt&&Xe?ze[ze.length-1].$text$+=It:ze.push(Xt?_r(null,It):It),Xe=Xt)};if(bt(St),Ce){const pn=Ce.className||Ce.class;pn&&(Ce.class="object"!=typeof pn?pn:Object.keys(pn).filter(kn=>pn[kn]).join(" "))}const Gt=_r(he,null);return Gt.$attrs$=Ce,ze.length>0&&(Gt.$children$=ze),Gt},_r=(he,Ce)=>({$flags$:0,$tag$:he,$text$:Ce,$elm$:null,$children$:null,$attrs$:null}),tr={},zn=(he,Ce,St,It,Xt,Xe)=>{if(St!==It){let ze=_t(he,Ce),bt=Ce.toLowerCase();if("class"===Ce){const Gt=he.classList,pn=Cr(St),kn=Cr(It);Gt.remove(...pn.filter(wn=>wn&&!kn.includes(wn))),Gt.add(...kn.filter(wn=>wn&&!pn.includes(wn)))}else if("style"===Ce){for(const Gt in St)(!It||null==It[Gt])&&(Gt.includes("-")?he.style.removeProperty(Gt):he.style[Gt]="");for(const Gt in It)(!St||It[Gt]!==St[Gt])&&(Gt.includes("-")?he.style.setProperty(Gt,It[Gt]):he.style[Gt]=It[Gt])}else if("ref"===Ce)It&&It(he);else if(ze||"o"!==Ce[0]||"n"!==Ce[1]){const Gt=Ct(It);if((ze||Gt&&null!==It)&&!Xt)try{if(he.tagName.includes("-"))he[Ce]=It;else{let pn=null==It?"":It;"list"===Ce?ze=!1:(null==St||he[Ce]!=pn)&&(he[Ce]=pn)}}catch{}null==It||!1===It?he.removeAttribute(Ce):(!ze||4&Xe||Xt)&&!Gt&&he.setAttribute(Ce,It=!0===It?"":It)}else Ce="-"===Ce[2]?Ce.slice(3):_t(Ue,bt)?bt.slice(2):bt[2]+Ce.slice(3),St&&de.rel(he,Ce,St,!1),It&&de.ael(he,Ce,It,!1)}},yi=/\s/,Cr=he=>he?he.split(yi):[],di=(he,Ce,St,It)=>{const Xt=11===Ce.$elm$.nodeType&&Ce.$elm$.host?Ce.$elm$.host:Ce.$elm$,Xe=he&&he.$attrs$||Fe,ze=Ce.$attrs$||Fe;for(It in Xe)It in ze||zn(Xt,It,Xe[It],void 0,St,Ce.$flags$);for(It in ze)zn(Xt,It,Xe[It],ze[It],St,Ce.$flags$)},wi=(he,Ce,St,It)=>{let ze,bt,Xt=Ce.$children$[St],Xe=0;if(null!==Xt.$text$)ze=Xt.$elm$=Ee.createTextNode(Xt.$text$);else{if(ve||(ve="svg"===Xt.$tag$),ze=Xt.$elm$=Ee.createElementNS(ve?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Xt.$tag$),ve&&"foreignObject"===Xt.$tag$&&(ve=!1),di(null,Xt,ve),(he=>null!=he)($e)&&ze["s-si"]!==$e&&ze.classList.add(ze["s-si"]=$e),Xt.$children$)for(Xe=0;Xe<Xt.$children$.length;++Xe)bt=wi(he,Xt,Xe),bt&&ze.appendChild(bt);"svg"===Xt.$tag$?ve=!1:"foreignObject"===ze.tagName&&(ve=!0)}return ze},Gn=(he,Ce,St,It,Xt,Xe)=>{let bt,ze=he;for(ze.shadowRoot&&ze.tagName===Ae&&(ze=ze.shadowRoot);Xt<=Xe;++Xt)It[Xt]&&(bt=wi(null,St,Xt),bt&&(It[Xt].$elm$=bt,ze.insertBefore(bt,Ce)))},qn=(he,Ce,St,It,Xt)=>{for(;Ce<=St;++Ce)(It=he[Ce])&&(Xt=It.$elm$,Jr(It),Xt.remove())},yn=(he,Ce)=>he.$tag$===Ce.$tag$,on=(he,Ce)=>{const St=Ce.$elm$=he.$elm$,It=he.$children$,Xt=Ce.$children$,Xe=Ce.$tag$,ze=Ce.$text$;null===ze?(ve="svg"===Xe||"foreignObject"!==Xe&&ve,di(he,Ce,ve),null!==It&&null!==Xt?((he,Ce,St,It)=>{let Qn,Xt=0,Xe=0,ze=Ce.length-1,bt=Ce[0],Gt=Ce[ze],pn=It.length-1,kn=It[0],wn=It[pn];for(;Xt<=ze&&Xe<=pn;)null==bt?bt=Ce[++Xt]:null==Gt?Gt=Ce[--ze]:null==kn?kn=It[++Xe]:null==wn?wn=It[--pn]:yn(bt,kn)?(on(bt,kn),bt=Ce[++Xt],kn=It[++Xe]):yn(Gt,wn)?(on(Gt,wn),Gt=Ce[--ze],wn=It[--pn]):yn(bt,wn)?(on(bt,wn),he.insertBefore(bt.$elm$,Gt.$elm$.nextSibling),bt=Ce[++Xt],wn=It[--pn]):yn(Gt,kn)?(on(Gt,kn),he.insertBefore(Gt.$elm$,bt.$elm$),Gt=Ce[--ze],kn=It[++Xe]):(Qn=wi(Ce&&Ce[Xe],St,Xe),kn=It[++Xe],Qn&&bt.$elm$.parentNode.insertBefore(Qn,bt.$elm$));Xt>ze?Gn(he,null==It[pn+1]?null:It[pn+1].$elm$,St,It,Xe,pn):Xe>pn&&qn(Ce,Xt,ze)})(St,It,Ce,Xt):null!==Xt?(null!==he.$text$&&(St.textContent=""),Gn(St,null,Ce,Xt,0,Xt.length-1)):null!==It&&qn(It,0,It.length-1),ve&&"svg"===Xe&&(ve=!1)):he.$text$!==ze&&(St.data=ze)},Jr=he=>{he.$attrs$&&he.$attrs$.ref&&he.$attrs$.ref(null),he.$children$&&he.$children$.forEach(Jr)},Qr=(he,Ce)=>{Ce&&!he.$onRenderResolve$&&Ce["s-p"].push(new Promise(St=>he.$onRenderResolve$=St))},zr=(he,Ce,St,It)=>{if(Ce.$flags$|=16,4&Ce.$flags$)return void(Ce.$flags$|=512);const ze=Ce.$lazyInstance$,bt=()=>pi(he,Ce,St,ze,It);return Qr(Ce,Ce.$ancestorComponent$),It&&(Ce.$flags$|=256,Ce.$queuedListeners$&&(Ce.$queuedListeners$.forEach(([pn,kn])=>yr(ze,pn,kn)),Ce.$queuedListeners$=null)),Ai(void 0,()=>yt(bt))},pi=(he,Ce,St,It,Xt)=>{const ze=he["s-rc"];Xt&&((he,Ce,St)=>{const Xt=((he,Ce,St,It)=>{let Xt=Cn(Ce.$tagName$),Xe=Pt.get(Xt);if(he=11===he.nodeType?he:Ee,Xe)if("string"==typeof Xe){let bt,ze=On.get(he=he.head||he);if(ze||On.set(he,ze=new Set),!ze.has(Xt)){if(de.$cssShim$){bt=de.$cssShim$.createHostStyle(It,Xt,Xe,!!(10&Ce.$flags$));const Gt=bt["s-sc"];Gt&&(Xt=Gt,ze=null)}else bt=Ee.createElement("style"),bt.innerHTML=Xe;he.insertBefore(bt,he.querySelector("link")),ze&&ze.add(Xt)}}else he.adoptedStyleSheets.includes(Xe)||(he.adoptedStyleSheets=[...he.adoptedStyleSheets,Xe]);return Xt})(ye&&he.shadowRoot?he.shadowRoot:he.getRootNode(),Ce,0,he);10&Ce.$flags$&&(he["s-sc"]=Xt,he.classList.add(Xt+"-h"))})(he,St);((he,Ce,St,It)=>{Ae=he.tagName;const Xt=Ce.$vnode$||_r(null,null),Xe=(he=>he&&he.$tag$===tr)(It)?It:hr(null,null,It);Xe.$tag$=null,Xe.$flags$|=4,Ce.$vnode$=Xe,Xe.$elm$=Xt.$elm$=he.shadowRoot||he,$e=he["s-sc"],on(Xt,Xe)})(he,Ce,0,Lr(It)),de.$cssShim$&&de.$cssShim$.updateHost(he),Ce.$flags$&=-17,Ce.$flags$|=2,ze&&(ze.forEach(Gt=>Gt()),he["s-rc"]=void 0);{const Gt=he["s-p"],pn=()=>gi(he,Ce,St);0===Gt.length?pn():(Promise.all(Gt).then(pn),Ce.$flags$|=4,Gt.length=0)}},Lr=(he,Ce)=>{try{he=he.render()}catch(St){Y(St)}return he},gi=(he,Ce,St)=>{const Xt=Ce.$lazyInstance$,Xe=Ce.$ancestorComponent$;64&Ce.$flags$||(Ce.$flags$|=64,mr(he),yr(Xt,"componentDidLoad"),Ce.$onReadyResolve$(he),Xe||lr()),Ce.$onInstanceResolve$(he),Ce.$onRenderResolve$&&(Ce.$onRenderResolve$(),Ce.$onRenderResolve$=void 0),512&Ce.$flags$&&dt(()=>zr(he,Ce,St,!1)),Ce.$flags$&=-517},lr=he=>{mr(Ee.documentElement),de.$flags$|=2},yr=(he,Ce,St)=>{if(he&&he[Ce])try{return he[Ce](St)}catch(It){Y(It)}},Ai=(he,Ce)=>he&&he.then?he.then(Ce):Ce(),mr=he=>he.classList.add("hydrated"),Ye=(he,Ce,St)=>{if(Ce.$members$){const It=Object.entries(Ce.$members$),Xt=he.prototype;if(It.forEach(([Xe,[ze]])=>{31&ze||2&St&&32&ze?Object.defineProperty(Xt,Xe,{get(){return((he,Ce)=>Se(this).$instanceValues$.get(Ce))(0,Xe)},set(bt){((he,Ce,St,It)=>{const Xt=Se(he),Xe=Xt.$hostElement$,ze=Xt.$instanceValues$.get(Ce),bt=Xt.$flags$,Gt=Xt.$lazyInstance$;St=((he,Ce)=>null==he||Ct(he)?he:4&Ce?"false"!==he&&(""===he||!!he):2&Ce?parseFloat(he):1&Ce?String(he):he)(St,It.$members$[Ce][0]),St!==ze&&(!(8&bt)||void 0===ze)&&(Xt.$instanceValues$.set(Ce,St),Gt&&2==(18&bt)&&zr(Xe,Xt,It,!1))})(this,Xe,bt,Ce)},configurable:!0,enumerable:!0}):1&St&&64&ze&&Object.defineProperty(Xt,Xe,{value(...bt){const Gt=Se(this);return Gt.$onInstancePromise$.then(()=>Gt.$lazyInstance$[Xe](...bt))}})}),1&St){const Xe=new Map;Xt.attributeChangedCallback=function(ze,bt,Gt){de.jmp(()=>{const pn=Xe.get(ze);this[pn]=(null!==Gt||"boolean"!=typeof this[pn])&&Gt})},he.observedAttributes=It.filter(([ze,bt])=>15&bt[0]).map(([ze,bt])=>{const Gt=bt[1]||ze;return Xe.set(Gt,ze),Gt})}}return he},Ot=function(){var he=(0,_.Z)(function*(Ce,St,It,Xt,Xe){if(!(32&St.$flags$)){St.$flags$|=32;{if(Xe=((he,Ce,St)=>{const It=he.$tagName$.replace(/-/g,"_"),Xt=he.$lazyBundleIds$,Xe=it.get(Xt);return Xe?Xe[It]:j(5899)(`./${Xt}.entry.js`).then(ze=>(it.set(Xt,ze),ze[It]),Y)})(It),Xe.then){const kn=()=>{};Xe=yield Xe,kn()}Xe.isProxied||(Ye(Xe,It,2),Xe.isProxied=!0);const pn=()=>{};St.$flags$|=8;try{new Xe(St)}catch(kn){Y(kn)}St.$flags$&=-9,pn()}const Gt=Cn(It.$tagName$);if(!Pt.has(Gt)&&Xe.style){const pn=()=>{};let kn=Xe.style;8&It.$flags$&&(kn=yield j.e(5487).then(j.bind(j,5487)).then(wn=>wn.scopeCss(kn,Gt,!1))),((he,Ce,St)=>{let It=Pt.get(he);Oe&&St?(It=It||new CSSStyleSheet,It.replace(Ce)):It=Ce,Pt.set(he,It)})(Gt,kn,!!(1&It.$flags$)),pn()}}const ze=St.$ancestorComponent$,bt=()=>zr(Ce,St,It,!0);ze&&ze["s-rc"]?ze["s-rc"].push(bt):bt()});return function(St,It,Xt,Xe,ze){return he.apply(this,arguments)}}(),lt=(he,Ce)=>{if(!(1&de.$flags$)){const St=()=>{},It=Se(he);if(Ce.$listeners$&&(It.$rmListeners$=((he,Ce,St)=>{Ce.$queuedListeners$=Ce.$queuedListeners$||[];const It=St.map(([Xt,Xe,ze])=>{const bt=((he,Ce)=>32&Ce?Ee.body:he)(he,Xt),Gt=((he,Ce)=>St=>{256&he.$flags$?he.$lazyInstance$[Ce](St):he.$queuedListeners$.push([Ce,St])})(Ce,ze),pn=(he=>0!=(2&he))(Xt);return de.ael(bt,Xe,Gt,pn),()=>de.rel(bt,Xe,Gt,pn)});return()=>It.forEach(Xt=>Xt())})(he,It,Ce.$listeners$)),!(1&It.$flags$)){It.$flags$|=1;{let Xt=he;for(;Xt=Xt.parentNode||Xt.host;)if(Xt["s-p"]){Qr(It,It.$ancestorComponent$=Xt);break}}Ce.$members$&&Object.entries(Ce.$members$).forEach(([Xt,[Xe]])=>{if(31&Xe&&he.hasOwnProperty(Xt)){const ze=he[Xt];delete he[Xt],he[Xt]=ze}}),dt(()=>Ot(he,It,Ce))}St()}},ut=(he,Ce={})=>{const It=[],Xt=Ce.exclude||[],Xe=Ue.customElements,ze=Ee.head,bt=ze.querySelector("meta[charset]"),Gt=Ee.createElement("style"),pn=[];let kn,wn=!0;Object.assign(de,Ce),de.$resourcesUrl$=new URL(Ce.resourcesUrl||"./",Ee.baseURI).href,Ce.syncQueue&&(de.$flags$|=4),he.forEach(Qn=>Qn[1].forEach(Jn=>{const Wn={$flags$:Jn[0],$tagName$:Jn[1],$members$:Jn[2],$listeners$:Jn[3]};Wn.$members$=Jn[2],Wn.$listeners$=Jn[3],!ye&&1&Wn.$flags$&&(Wn.$flags$|=8);const Xn=Wn.$tagName$,ys=class extends HTMLElement{constructor(vi){super(vi),(he=>{const Ce={$flags$:0,$hostElement$:he,$instanceValues$:new Map};Ce.$onInstancePromise$=new Promise(St=>Ce.$onInstanceResolve$=St),Ce.$onReadyPromise$=new Promise(St=>Ce.$onReadyResolve$=St),he["s-p"]=[],he["s-rc"]=[],wt.set(he,Ce)})(vi=this),1&Wn.$flags$&&(ye?vi.attachShadow({mode:"open"}):"shadowRoot"in vi||(vi.shadowRoot=vi))}connectedCallback(){kn&&(clearTimeout(kn),kn=null),wn?pn.push(this):de.jmp(()=>lt(this,Wn))}disconnectedCallback(){de.jmp(()=>(he=>{if(!(1&de.$flags$)){const Ce=Se(he),St=Ce.$lazyInstance$;Ce.$rmListeners$&&(Ce.$rmListeners$(),Ce.$rmListeners$=void 0),de.$cssShim$&&de.$cssShim$.removeHost(he),yr(St,"componentDidUnload")}})(this))}forceUpdate(){((he,Ce)=>{{const St=Se(he);St.$hostElement$.isConnected&&2==(18&St.$flags$)&&zr(he,St,Ce,!1)}})(this,Wn)}componentOnReady(){return Se(this).$onReadyPromise$}};Wn.$lazyBundleIds$=Qn[0],!Xt.includes(Xn)&&!Xe.get(Xn)&&(It.push(Xn),Xe.define(Xn,Ye(ys,Wn,1)))})),Gt.innerHTML=It+"{visibility:hidden}.hydrated{visibility:inherit}",Gt.setAttribute("data-styles",""),ze.insertBefore(Gt,bt?bt.nextSibling:ze.firstChild),wn=!1,pn.length>0?pn.forEach(Qn=>Qn.connectedCallback()):de.jmp(()=>kn=setTimeout(lr,30))},Ke=(he,Ce,St)=>{const It=Nt(he);return{emit:Xt=>{const Xe=new CustomEvent(Ce,{bubbles:!!(4&St),composed:!!(2&St),cancelable:!!(1&St),detail:Xt});return It.dispatchEvent(Xe),Xe}}},gt=(he,Ce)=>Ce in Je?Je[Ce]:"window"===Ce?Ue:"document"===Ce?Ee:"isServer"!==Ce&&"isPrerender"!==Ce&&("isClient"===Ce||("resourcesUrl"===Ce||"publicPath"===Ce?(he=>{const Ce=new URL(".",de.$resourcesUrl$);return Ce.origin!==Ue.location.origin?Ce.href:Ce.pathname})():"queue"===Ce?{write:yt,read:Mt,tick:{then:St=>dt(St)}}:void 0)),Nt=he=>Se(he).$hostElement$},8175:(In,Et,j)=>{"use strict";j.d(Et,{e:()=>de});var _=j(5861),y=j(6805),ee=j(930),$e=j(9808),Ae=j(2340),ve=j(4650),Ue=j(1762),Ge=j(1205),Ee=j(529);let de=(()=>{class ye{constructor(Oe,Je,wt){this.afs=Oe,this.afAuth=Je,this.http=wt,this.updateLogin()}updateLogin(){var Oe=this;return(0,_.Z)(function*(){try{const Je=yield function le(ye,We){const Oe="object"==typeof We;return new Promise((Je,wt)=>{const Se=new ee.Hp({next:xe=>{Je(xe),Se.unsubscribe()},error:wt,complete:()=>{Oe?Je(We.defaultValue):wt(new y.K)}});ye.subscribe(Se)})}(Oe.afAuth.authState);console.log(Je),Je?(Oe.userData=Je,localStorage.setItem("user",JSON.stringify(Oe.userData)),ye.logged=!0):(Oe.userData=null,localStorage.removeItem("user"),ye.logged=!1),console.log("Logged: "+ye.logged),console.log("JWT: "+Oe.getJWT())}catch(Je){console.log(Je)}})()}checkLogged(){return null===localStorage.getItem("user")?(this.userData=null,ye.logged=!1,!1):(ye.logged=!0,!0)}doSignup(Oe){var Je=this;return(0,_.Z)(function*(){try{yield Je.afAuth.createUserWithEmailAndPassword(Oe.email,Oe.password),Je.updateLogin()}catch(wt){console.log(wt)}})()}doLogin(Oe){var Je=this;return(0,_.Z)(function*(){try{const wt=yield Je.afAuth.signInWithEmailAndPassword(Oe.email,Oe.password);if(wt.user)return Je.updateLogin(),wt}catch(wt){return wt}})()}doLogout(){var Oe=this;return(0,_.Z)(function*(){try{yield Oe.afAuth.signOut(),Oe.updateLogin()}catch(Je){console.log(Je)}})()}fetchJWT(){var Oe=this;return(0,_.Z)(function*(){try{const Je=(yield(0,$e.n)(Oe.http.post(`${Ae.N.url}login`,{email:"test@test.com"}))).token;Je&&Oe.setJWT(Je)}catch(Je){console.error(Je)}})()}setJWT(Oe){localStorage.setItem("JWT",Oe),this.token=Oe}getUser(){return JSON.parse(localStorage.getItem("user")||"{}")}getJWT(){return localStorage.getItem("JWT")}}return ye.logged=!1,ye.\u0275fac=function(Oe){return new(Oe||ye)(ve.LFG(Ue.ST),ve.LFG(Ge.zQ),ve.LFG(Ee.eN))},ye.\u0275prov=ve.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})()},2340:(In,Et,j)=>{"use strict";j.d(Et,{N:()=>_});const _={production:!0,firebase:{apiKey:"AIzaSyAx5viaf5WoWezx2kxJ8fnpWElWMypde0s",authDomain:"hightracks-46986.firebaseapp.com",projectId:"hightracks-46986",storageBucket:"hightracks-46986.appspot.com",messagingSenderId:"643779822309",appId:"1:643779822309:web:10e7cb0f1b7b47128c8a0c"},url:"http://webapps.masterdevevelopment.tech:3000/api/",e2eUrl:"http://hightracks.me/"}},1183:(In,Et,j)=>{"use strict";var _=j(4650),y=j(1481),ee=j(1194),le=j(650);const $e=[{path:"",loadChildren:()=>j.e(257).then(j.bind(j,257)).then(u=>u.routes)}];var Ae=j(1205),ve=j(9751),Ue=j(9646),Ge=j(8996),Ee=j(4986),de=j(4482),ye=j(5403),Oe=j(4004),Je=j(3900),wt=j(4976),Se=j(2011),xe=j(3942),ue=j(5861),_t=j(6881),Y=j(2090),it=j(4859);const tt="firebasestorage.googleapis.com",Pt="storageBucket";class De extends Y.ZR{constructor(a,l,p=0){super(pt(a),`Firebase Storage: ${l} (${pt(a)})`),this.status_=p,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,De.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return pt(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var He=(()=>{return(u=He||(He={})).UNKNOWN="unknown",u.OBJECT_NOT_FOUND="object-not-found",u.BUCKET_NOT_FOUND="bucket-not-found",u.PROJECT_NOT_FOUND="project-not-found",u.QUOTA_EXCEEDED="quota-exceeded",u.UNAUTHENTICATED="unauthenticated",u.UNAUTHORIZED="unauthorized",u.UNAUTHORIZED_APP="unauthorized-app",u.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",u.INVALID_CHECKSUM="invalid-checksum",u.CANCELED="canceled",u.INVALID_EVENT_NAME="invalid-event-name",u.INVALID_URL="invalid-url",u.INVALID_DEFAULT_BUCKET="invalid-default-bucket",u.NO_DEFAULT_BUCKET="no-default-bucket",u.CANNOT_SLICE_BLOB="cannot-slice-blob",u.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",u.NO_DOWNLOAD_URL="no-download-url",u.INVALID_ARGUMENT="invalid-argument",u.INVALID_ARGUMENT_COUNT="invalid-argument-count",u.APP_DELETED="app-deleted",u.INVALID_ROOT_OPERATION="invalid-root-operation",u.INVALID_FORMAT="invalid-format",u.INTERNAL_ERROR="internal-error",u.UNSUPPORTED_ENVIRONMENT="unsupported-environment",He;var u})();function pt(u){return"storage/"+u}function Tt(){return new De(He.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Be(){return new De(He.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ht(){return new De(He.CANCELED,"User canceled the upload/download.")}function Dn(){return new De(He.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gn(u){return new De(He.INVALID_ARGUMENT,u)}function On(){return new De(He.APP_DELETED,"The Firebase app was deleted.")}function Yn(u){return new De(He.INVALID_ROOT_OPERATION,"The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xn(u,a){return new De(He.INVALID_FORMAT,"String does not match format '"+u+"': "+a)}function cn(u){throw new De(He.INTERNAL_ERROR,"Internal error: "+u)}class Cn{constructor(a,l){this.bucket=a,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,l){let p;try{p=Cn.makeFromUrl(a,l)}catch{return new Cn(a,"")}if(""===p.path)return p;throw function nn(u){return new De(He.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+u+"'.")}(a)}static makeFromUrl(a,l){let p=null;const I="([A-Za-z0-9.\\-_]+)",te=new RegExp("^gs://"+I+"(/(.*))?$","i");function Pe(is){is.path_=decodeURIComponent(is.path)}const Yt=l.replace(/[.]/g,"\\."),Cs=[{regex:te,indices:{bucket:1,path:3},postModify:function R(is){"/"===is.path.charAt(is.path.length-1)&&(is.path_=is.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Yt}/v[A-Za-z0-9_]+/b/${I}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Pe},{regex:new RegExp(`^https?://${l===tt?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${I}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Pe}];for(let is=0;is<Cs.length;is++){const mu=Cs[is],sc=mu.regex.exec(a);if(sc){let Sc=sc[mu.indices.path];Sc||(Sc=""),p=new Cn(sc[mu.indices.bucket],Sc),mu.postModify(p);break}}if(null==p)throw function Ct(u){return new De(He.INVALID_URL,"Invalid URL '"+u+"'.")}(a);return p}}class hr{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function Cr(u){return"string"==typeof u||u instanceof String}function di(u){return wi()&&u instanceof Blob}function wi(){return typeof Blob<"u"&&!(0,Y.UG)()}function Gn(u,a,l,p){if(p<a)throw gn(`Invalid value for '${u}'. Expected ${a} or greater.`);if(p>l)throw gn(`Invalid value for '${u}'. Expected ${l} or less.`)}function qn(u,a,l){let p=a;return null==l&&(p=`https://${a}`),`${l}://${p}/v0${u}`}function ln(u){const a=encodeURIComponent;let l="?";for(const p in u)u.hasOwnProperty(p)&&(l=l+(a(p)+"=")+a(u[p])+"&");return l=l.slice(0,-1),l}var yn=(()=>{return(u=yn||(yn={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",yn;var u})();function on(u,a){const l=u>=500&&u<600,I=-1!==[408,429].indexOf(u),R=-1!==a.indexOf(u);return l||I||R}class Jr{constructor(a,l,p,I,R,V,te,pe,Pe,Ft,Yt,sn=!0){this.url_=a,this.method_=l,this.headers_=p,this.body_=I,this.successCodes_=R,this.additionalRetryCodes_=V,this.callback_=te,this.errorCallback_=pe,this.timeout_=Pe,this.progressCallback_=Ft,this.connectionFactory_=Yt,this.retry=sn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Rn,Zn)=>{this.resolve_=Rn,this.reject_=Zn,this.start_()})}start_(){const l=(p,I)=>{const R=this.resolve_,V=this.reject_,te=I.connection;if(I.wasSuccessCode)try{const pe=this.callback_(te,te.getResponse());!function bn(u){return void 0!==u}(pe)?R():R(pe)}catch(pe){V(pe)}else if(null!==te){const pe=Tt();pe.serverResponse=te.getErrorText(),V(this.errorCallback_?this.errorCallback_(te,pe):pe)}else V(I.canceled?this.appDelete_?On():ht():Be())};this.canceled_?l(0,new Dr(!1,null,!0)):this.backoffId_=function _r(u,a,l){let p=1,I=null,R=null,V=!1,te=0;function pe(){return 2===te}let Pe=!1;function Ft(...oi){Pe||(Pe=!0,a.apply(null,oi))}function Yt(oi){I=setTimeout(()=>{I=null,u(Rn,pe())},oi)}function sn(){R&&clearTimeout(R)}function Rn(oi,...Mi){if(Pe)return void sn();if(oi)return sn(),void Ft.call(null,oi,...Mi);if(pe()||V)return sn(),void Ft.call(null,oi,...Mi);let Cs;p<64&&(p*=2),1===te?(te=2,Cs=0):Cs=1e3*(p+Math.random()),Yt(Cs)}let Zn=!1;function Mr(oi){Zn||(Zn=!0,sn(),!Pe&&(null!==I?(oi||(te=2),clearTimeout(I),Yt(0)):oi||(te=1)))}return Yt(0),R=setTimeout(()=>{V=!0,Mr(!0)},l),Mr}((p,I)=>{if(I)return void p(!1,new Dr(!1,null,!0));const R=this.connectionFactory_();this.pendingConnection_=R;const V=te=>{null!==this.progressCallback_&&this.progressCallback_(te.loaded,te.lengthComputable?te.total:-1)};null!==this.progressCallback_&&R.addUploadProgressListener(V),R.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&R.removeUploadProgressListener(V),this.pendingConnection_=null;const te=R.getErrorCode()===yn.NO_ERROR,pe=R.getStatus();if(!te||on(pe,this.additionalRetryCodes_)&&this.retry){const Ft=R.getErrorCode()===yn.ABORT;return void p(!1,new Dr(!1,null,Ft))}const Pe=-1!==this.successCodes_.indexOf(pe);p(!0,new Dr(Pe,R))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&function tr(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Dr{constructor(a,l,p){this.wasSuccessCode=a,this.connection=l,this.canceled=!!p}}function lr(...u){const a=function ur(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==a){const l=new a;for(let p=0;p<u.length;p++)l.append(u[p]);return l.getBlob()}if(wi())return new Blob(u);throw new De(He.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kt{constructor(a,l){this.data=a,this.contentType=l||null}}function Ze(u,a){switch(u){case mr.RAW:return new Kt(rt(a));case mr.BASE64:case mr.BASE64URL:return new Kt(qt(u,a));case mr.DATA_URL:return new Kt(function Ie(u){const a=new we(u);return a.base64?qt(mr.BASE64,a.rest):function Jt(u){let a;try{a=decodeURIComponent(u)}catch{throw xn(mr.DATA_URL,"Malformed data URL.")}return rt(a)}(a.rest)}(a),function Ye(u){return new we(u).contentType}(a))}throw Tt()}function rt(u){const a=[];for(let l=0;l<u.length;l++){let p=u.charCodeAt(l);p<=127?a.push(p):p<=2047?a.push(192|p>>6,128|63&p):55296==(64512&p)?l<u.length-1&&56320==(64512&u.charCodeAt(l+1))?(p=65536|(1023&p)<<10|1023&u.charCodeAt(++l),a.push(240|p>>18,128|p>>12&63,128|p>>6&63,128|63&p)):a.push(239,191,189):56320==(64512&p)?a.push(239,191,189):a.push(224|p>>12,128|p>>6&63,128|63&p)}return new Uint8Array(a)}function qt(u,a){switch(u){case mr.BASE64:{const I=-1!==a.indexOf("-"),R=-1!==a.indexOf("_");if(I||R)throw xn(u,"Invalid character '"+(I?"-":"_")+"' found: is it base64url encoded?");break}case mr.BASE64URL:{const I=-1!==a.indexOf("+"),R=-1!==a.indexOf("/");if(I||R)throw xn(u,"Invalid character '"+(I?"+":"/")+"' found: is it base64 encoded?");a=a.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Ai(u){if(typeof atob>"u")throw function At(u){return new De(He.UNSUPPORTED_ENVIRONMENT,`${u} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(u)}(a)}catch(I){throw I.message.includes("polyfill")?I:xn(u,"Invalid character found")}const p=new Uint8Array(l.length);for(let I=0;I<l.length;I++)p[I]=l.charCodeAt(I);return p}class we{constructor(a){this.base64=!1,this.contentType=null;const l=a.match(/^data:([^,]+)?,/);if(null===l)throw xn(mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const p=l[1]||null;null!=p&&(this.base64=function Ot(u,a){return u.length>=a.length&&u.substring(u.length-a.length)===a}(p,";base64"),this.contentType=this.base64?p.substring(0,p.length-7):p),this.rest=a.substring(a.indexOf(",")+1)}}class lt{constructor(a,l){let p=0,I="";di(a)?(this.data_=a,p=a.size,I=a.type):a instanceof ArrayBuffer?(l?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),p=this.data_.length):a instanceof Uint8Array&&(l?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),p=a.length),this.size_=p,this.type_=I}size(){return this.size_}type(){return this.type_}slice(a,l){if(di(this.data_)){const I=function yr(u,a,l){return u.webkitSlice?u.webkitSlice(a,l):u.mozSlice?u.mozSlice(a,l):u.slice?u.slice(a,l):null}(this.data_,a,l);return null===I?null:new lt(I)}{const p=new Uint8Array(this.data_.buffer,a,l-a);return new lt(p,!0)}}static getBlob(...a){if(wi()){const l=a.map(p=>p instanceof lt?p.data_:p);return new lt(lr.apply(null,l))}{const l=a.map(V=>Cr(V)?Ze(mr.RAW,V).data:V.data_);let p=0;l.forEach(V=>{p+=V.byteLength});const I=new Uint8Array(p);let R=0;return l.forEach(V=>{for(let te=0;te<V.length;te++)I[R++]=V[te]}),new lt(I,!0)}}uploadData(){return this.data_}}function un(u){let a;try{a=JSON.parse(u)}catch{return null}return function yi(u){return"object"==typeof u&&!Array.isArray(u)}(a)?a:null}function _e(u){const a=u.lastIndexOf("/",u.length-2);return-1===a?u:u.slice(a+1)}function gt(u,a){return a}class Nt{constructor(a,l,p,I){this.server=a,this.local=l||a,this.writable=!!p,this.xform=I||gt}}let he=null;function St(){if(he)return he;const u=[];u.push(new Nt("bucket")),u.push(new Nt("generation")),u.push(new Nt("metageneration")),u.push(new Nt("name","fullPath",!0));const l=new Nt("name");l.xform=function a(R,V){return function Ce(u){return!Cr(u)||u.length<2?u:_e(u)}(V)},u.push(l);const I=new Nt("size");return I.xform=function p(R,V){return void 0!==V?Number(V):V},u.push(I),u.push(new Nt("timeCreated")),u.push(new Nt("updated")),u.push(new Nt("md5Hash",null,!0)),u.push(new Nt("cacheControl",null,!0)),u.push(new Nt("contentDisposition",null,!0)),u.push(new Nt("contentEncoding",null,!0)),u.push(new Nt("contentLanguage",null,!0)),u.push(new Nt("contentType",null,!0)),u.push(new Nt("metadata","customMetadata",!0)),he=u,he}function Xe(u,a,l){const p=un(a);return null===p?null:function Xt(u,a,l){const p={type:"file"},I=l.length;for(let R=0;R<I;R++){const V=l[R];p[V.local]=V.xform(p,a[V.server])}return function It(u,a){Object.defineProperty(u,"ref",{get:function l(){const R=new Cn(u.bucket,u.fullPath);return a._makeStorageReference(R)}})}(p,u),p}(u,p,l)}function bt(u,a){const l={},p=a.length;for(let I=0;I<p;I++){const R=a[I];R.writable&&(l[R.server]=u[R.local])}return JSON.stringify(l)}const Gt="prefixes",pn="items";class Qn{constructor(a,l,p,I){this.url=a,this.method=l,this.handler=p,this.timeout=I,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Jn(u){if(!u)throw Tt()}function Wn(u,a){return function l(p,I){const R=Xe(u,I,a);return Jn(null!==R),R}}function vi(u){return function a(l,p){let I;return I=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function Fe(){return new De(He.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function yt(){return new De(He.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function Mt(u){return new De(He.QUOTA_EXCEEDED,"Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===l.getStatus()?function je(u){return new De(He.UNAUTHORIZED,"User does not have permission to access '"+u+"'.")}(u.path):p,I.status=l.getStatus(),I.serverResponse=p.serverResponse,I}}function Vi(u){const a=vi(u);return function l(p,I){let R=a(p,I);return 404===p.getStatus()&&(R=function dt(u){return new De(He.OBJECT_NOT_FOUND,"Object '"+u+"' does not exist.")}(u.path)),R.serverResponse=I.serverResponse,R}}function ji(u,a,l){const I=qn(a.fullServerUrl(),u.host,u._protocol),V=u.maxOperationRetryTime,te=new Qn(I,"GET",Wn(u,l),V);return te.errorHandler=Vi(a),te}function An(u,a,l,p,I){const R={};R.prefix=a.isRoot?"":a.path+"/",l&&l.length>0&&(R.delimiter=l),p&&(R.pageToken=p),I&&(R.maxResults=I);const te=qn(a.bucketOnlyServerUrl(),u.host,u._protocol),Pe=u.maxOperationRetryTime,Ft=new Qn(te,"GET",function Xn(u,a){return function l(p,I){const R=function wn(u,a,l){const p=un(l);return null===p?null:function kn(u,a,l){const p={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[Gt])for(const I of l[Gt]){const R=I.replace(/\/$/,""),V=u._makeStorageReference(new Cn(a,R));p.prefixes.push(V)}if(l[pn])for(const I of l[pn]){const R=u._makeStorageReference(new Cn(a,I.name));p.items.push(R)}return p}(u,a,p)}(u,a,I);return Jn(null!==R),R}}(u,a.bucket),Pe);return Ft.urlParams=R,Ft.errorHandler=vi(a),Ft}function Li(u,a,l){const p=Object.assign({},l);return p.fullPath=u.path,p.size=a.size(),p.contentType||(p.contentType=function Ci(u,a){return u&&u.contentType||a&&a.type()||"application/octet-stream"}(null,a)),p}class se{constructor(a,l,p,I){this.current=a,this.total=l,this.finalized=!!p,this.metadata=I||null}}function be(u,a){let l=null;try{l=u.getResponseHeader("X-Goog-Upload-Status")}catch{Jn(!1)}return Jn(!!l&&-1!==(a||["active"]).indexOf(l)),l}const Vt={STATE_CHANGED:"state_changed"},Lt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qt(u){switch(u){case"running":case"pausing":case"canceling":return Lt.RUNNING;case"paused":return Lt.PAUSED;case"success":return Lt.SUCCESS;case"canceled":return Lt.CANCELED;default:return Lt.ERROR}}class an{constructor(a,l,p){if(function zn(u){return"function"==typeof u}(a)||null!=l||null!=p)this.next=a,this.error=null!=l?l:void 0,this.complete=null!=p?p:void 0;else{const R=a;this.next=R.next,this.error=R.error,this.complete=R.complete}}}function vn(u){return(...a)=>{Promise.resolve().then(()=>u(...a))}}let rr=null;class er{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yn.NO_ERROR,this.sendPromise_=new Promise(a=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yn.ABORT,a()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yn.NETWORK_ERROR,a()}),this.xhr_.addEventListener("load",()=>{a()})})}send(a,l,p,I){if(this.sent_)throw cn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,a,!0),void 0!==I)for(const R in I)I.hasOwnProperty(R)&&this.xhr_.setRequestHeader(R,I[R].toString());return void 0!==p?this.xhr_.send(p):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(a){return this.xhr_.getResponseHeader(a)}addUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",a)}removeUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",a)}}class vr extends er{initXhr(){this.xhr_.responseType="text"}}function Wr(){return rr?rr():new vr}class tn{constructor(a,l,p=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=a,this._blob=l,this._metadata=p,this._mappings=St(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=I=>{if(this._request=void 0,this._chunkMultiplier=1,I._codeEquals(He.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const R=this.isExponentialBackoffExpired();if(on(I.status,[])){if(!R)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();I=Be()}this._error=I,this._transition("error")}},this._metadataErrorHandler=I=>{this._request=void 0,I._codeEquals(He.CANCELED)?this.completeTransitions_():(this._error=I,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((I,R)=>{this._resolve=I,this._reject=R,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const a=this._transferred;return l=>this._updateProgress(a+l)}_shouldDoResumable(a){return a.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(a){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,p])=>{switch(this._state){case"running":a(l,p);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((a,l)=>{const p=function qe(u,a,l,p,I){const R=a.bucketOnlyServerUrl(),V=Li(a,p,I),te={name:V.fullPath},pe=qn(R,u.host,u._protocol),Ft={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${p.size()}`,"X-Goog-Upload-Header-Content-Type":V.contentType,"Content-Type":"application/json; charset=utf-8"},Yt=bt(V,l),Zn=new Qn(pe,"POST",function Rn(Mr){let oi;be(Mr);try{oi=Mr.getResponseHeader("X-Goog-Upload-URL")}catch{Jn(!1)}return Jn(Cr(oi)),oi},u.maxUploadRetryTime);return Zn.urlParams=te,Zn.headers=Ft,Zn.body=Yt,Zn.errorHandler=vi(a),Zn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),I=this._ref.storage._makeRequest(p,Wr,a,l);this._request=I,I.getPromise().then(R=>{this._request=void 0,this._uploadUrl=R,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const a=this._uploadUrl;this._resolveToken((l,p)=>{const I=function me(u,a,l,p){const pe=new Qn(l,"POST",function R(Pe){const Ft=be(Pe,["active","final"]);let Yt=null;try{Yt=Pe.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Jn(!1)}Yt||Jn(!1);const sn=Number(Yt);return Jn(!isNaN(sn)),new se(sn,p.size(),"final"===Ft)},u.maxUploadRetryTime);return pe.headers={"X-Goog-Upload-Command":"query"},pe.errorHandler=vi(a),pe}(this._ref.storage,this._ref._location,a,this._blob),R=this._ref.storage._makeRequest(I,Wr,l,p);this._request=R,R.getPromise().then(V=>{this._request=void 0,this._updateProgress(V.current),this._needToFetchStatus=!1,V.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const a=262144*this._chunkMultiplier,l=new se(this._transferred,this._blob.size()),p=this._uploadUrl;this._resolveToken((I,R)=>{let V;try{V=function Qe(u,a,l,p,I,R,V,te){const pe=new se(0,0);if(V?(pe.current=V.current,pe.total=V.total):(pe.current=0,pe.total=p.size()),p.size()!==pe.total)throw function kt(){return new De(He.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Pe=pe.total-pe.current;let Ft=Pe;I>0&&(Ft=Math.min(Ft,I));const Yt=pe.current;let Rn="";Rn=0===Ft?"finalize":Pe===Ft?"upload, finalize":"upload";const Zn={"X-Goog-Upload-Command":Rn,"X-Goog-Upload-Offset":`${pe.current}`},Mr=p.slice(Yt,Yt+Ft);if(null===Mr)throw Dn();const Cs=new Qn(l,"POST",function oi(is,mu){const sc=be(is,["active","final"]),yu=pe.current+Ft,Sc=p.size();let qu;return qu="final"===sc?Wn(a,R)(is,mu):null,new se(yu,Sc,"final"===sc,qu)},a.maxUploadRetryTime);return Cs.headers=Zn,Cs.body=Mr.uploadData(),Cs.progressCallback=te||null,Cs.errorHandler=vi(u),Cs}(this._ref._location,this._ref.storage,p,this._blob,a,this._mappings,l,this._makeProgressCallback())}catch(pe){return this._error=pe,void this._transition("error")}const te=this._ref.storage._makeRequest(V,Wr,I,R,!1);this._request=te,te.getPromise().then(pe=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(pe.current),pe.finalized?(this._metadata=pe.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((a,l)=>{const p=ji(this._ref.storage,this._ref._location,this._mappings),I=this._ref.storage._makeRequest(p,Wr,a,l);this._request=I,I.getPromise().then(R=>{this._request=void 0,this._metadata=R,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((a,l)=>{const p=function Ur(u,a,l,p,I){const R=a.bucketOnlyServerUrl(),V={"X-Goog-Upload-Protocol":"multipart"},pe=function te(){let Cs="";for(let is=0;is<2;is++)Cs+=Math.random().toString().slice(2);return Cs}();V["Content-Type"]="multipart/related; boundary="+pe;const Pe=Li(a,p,I),Ft=bt(Pe,l),Rn=lt.getBlob("--"+pe+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ft+"\r\n--"+pe+"\r\nContent-Type: "+Pe.contentType+"\r\n\r\n",p,"\r\n--"+pe+"--");if(null===Rn)throw Dn();const Zn={name:Pe.fullPath},Mr=qn(R,u.host,u._protocol),Mi=u.maxUploadRetryTime,Ms=new Qn(Mr,"POST",Wn(u,l),Mi);return Ms.urlParams=Zn,Ms.headers=V,Ms.body=Rn.uploadData(),Ms.errorHandler=vi(a),Ms}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),I=this._ref.storage._makeRequest(p,Wr,a,l);this._request=I,I.getPromise().then(R=>{this._request=void 0,this._metadata=R,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(a){const l=this._transferred;this._transferred=a,this._transferred!==l&&this._notifyObservers()}_transition(a){if(this._state!==a)switch(a){case"canceling":case"pausing":this._state=a,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const l="paused"===this._state;this._state=a,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=a,this._notifyObservers();break;case"canceled":this._error=ht(),this._state=a,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const a=Qt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:a,metadata:this._metadata,task:this,ref:this._ref}}on(a,l,p,I){const R=new an(l||void 0,p||void 0,I||void 0);return this._addObserver(R),()=>{this._removeObserver(R)}}then(a,l){return this._promise.then(a,l)}catch(a){return this.then(null,a)}_addObserver(a){this._observers.push(a),this._notifyObserver(a)}_removeObserver(a){const l=this._observers.indexOf(a);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let a=!0;switch(Qt(this._state)){case Lt.SUCCESS:vn(this._resolve.bind(null,this.snapshot))();break;case Lt.CANCELED:case Lt.ERROR:vn(this._reject.bind(null,this._error))();break;default:a=!1}a&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(a){switch(Qt(this._state)){case Lt.RUNNING:case Lt.PAUSED:a.next&&vn(a.next.bind(a,this.snapshot))();break;case Lt.SUCCESS:a.complete&&vn(a.complete.bind(a))();break;default:a.error&&vn(a.error.bind(a,this._error))()}}resume(){const a="paused"===this._state||"pausing"===this._state;return a&&this._transition("running"),a}pause(){const a="running"===this._state;return a&&this._transition("pausing"),a}cancel(){const a="running"===this._state||"pausing"===this._state;return a&&this._transition("canceling"),a}}class dn{constructor(a,l){this._service=a,this._location=l instanceof Cn?l:Cn.makeFromUrl(l,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,l){return new dn(a,l)}get root(){const a=new Cn(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _e(this._location.path)}get storage(){return this._service}get parent(){const a=function ut(u){if(0===u.length)return null;const a=u.lastIndexOf("/");return-1===a?"":u.slice(0,a)}(this._location.path);if(null===a)return null;const l=new Cn(this._location.bucket,a);return new dn(this._service,l)}_throwIfRoot(a){if(""===this._location.path)throw Yn(a)}}function _i(u,a,l){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,ue.Z)(function*(u,a,l){const I=yield Hi(u,{pageToken:l});a.prefixes.push(...I.prefixes),a.items.push(...I.items),null!=I.nextPageToken&&(yield _i(u,a,I.nextPageToken))})).apply(this,arguments)}function Hi(u,a){null!=a&&"number"==typeof a.maxResults&&Gn("options.maxResults",1,1e3,a.maxResults);const l=a||{},p=An(u.storage,u._location,"/",l.pageToken,l.maxResults);return u.storage.makeRequestWithTokens(p,Wr)}function Yi(u){u._throwIfRoot("getDownloadURL");const a=function ri(u,a,l){const I=qn(a.fullServerUrl(),u.host,u._protocol),V=u.maxOperationRetryTime,te=new Qn(I,"GET",function ys(u,a){return function l(p,I){const R=Xe(u,I,a);return Jn(null!==R),function ze(u,a,l,p){const I=un(a);if(null===I||!Cr(I.downloadTokens))return null;const R=I.downloadTokens;if(0===R.length)return null;const V=encodeURIComponent;return R.split(",").map(Pe=>{const Yt=u.fullPath;return qn("/b/"+V(u.bucket)+"/o/"+V(Yt),l,p)+ln({alt:"media",token:Pe})})[0]}(R,I,u.host,u._protocol)}}(u,l),V);return te.errorHandler=Vi(a),te}(u.storage,u._location,St());return u.storage.makeRequestWithTokens(a,Wr).then(l=>{if(null===l)throw function Re(){return new De(He.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return l})}function Os(u,a){const l=function Ke(u,a){const l=a.split("/").filter(p=>p.length>0).join("/");return 0===u.length?l:u+"/"+l}(u._location.path,a),p=new Cn(u._location.bucket,l);return new dn(u.storage,p)}function As(u,a){if(u instanceof lo){const l=u;if(null==l._bucket)throw function zt(){return new De(He.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Pt+"' property when initializing the app?")}();const p=new dn(l,l._bucket);return null!=a?As(p,a):p}return void 0!==a?Os(u,a):u}function ao(u,a){if(a&&function Da(u){return/^[A-Za-z]+:\/\//.test(u)}(a)){if(u instanceof lo)return function ko(u,a){return new dn(u,a)}(u,a);throw gn("To use ref(service, url), the first argument must be a Storage instance.")}return As(u,a)}function da(u,a){const l=null==a?void 0:a[Pt];return null==l?null:Cn.makeFromBucketSpec(l,u)}class lo{constructor(a,l,p,I,R){this.app=a,this._authProvider=l,this._appCheckProvider=p,this._url=I,this._firebaseVersion=R,this._bucket=null,this._host=tt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=I?Cn.makeFromBucketSpec(I,this._host):da(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._bucket=null!=this._url?Cn.makeFromBucketSpec(this._url,a):da(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){Gn("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){Gn("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){var a=this;return(0,ue.Z)(function*(){if(a._overrideAuthToken)return a._overrideAuthToken;const l=a._authProvider.getImmediate({optional:!0});if(l){const p=yield l.getToken();if(null!==p)return p.accessToken}return null})()}_getAppCheckToken(){var a=this;return(0,ue.Z)(function*(){const l=a._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new dn(this,a)}_makeRequest(a,l,p,I,R=!0){if(this._deleted)return new hr(On());{const V=function gi(u,a,l,p,I,R,V=!0){const te=ln(u.urlParams),pe=u.url+te,Pe=Object.assign({},u.headers);return function pi(u,a){a&&(u["X-Firebase-GMPID"]=a)}(Pe,a),function Qr(u,a){null!==a&&a.length>0&&(u.Authorization="Firebase "+a)}(Pe,l),function zr(u,a){u["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager")}(Pe,R),function Lr(u,a){null!==a&&(u["X-Firebase-AppCheck"]=a)}(Pe,p),new Jr(pe,u.method,Pe,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,I,V)}(a,this._appId,p,I,l,this._firebaseVersion,R);return this._requests.add(V),V.getPromise().then(()=>this._requests.delete(V),()=>this._requests.delete(V)),V}}makeRequestWithTokens(a,l){var p=this;return(0,ue.Z)(function*(){const[I,R]=yield Promise.all([p._getAuthToken(),p._getAppCheckToken()]);return p._makeRequest(a,l,I,R).getPromise()})()}}const us="@firebase/storage";function _s(u,a){return ao(u=(0,Y.m9)(u),a)}function Zi(u,{instanceIdentifier:a}){const l=u.getProvider("app").getImmediate(),p=u.getProvider("auth-internal"),I=u.getProvider("app-check-internal");return new lo(l,p,I,a,_t.SDK_VERSION)}!function bo(){(0,_t._registerComponent)(new it.wA("storage",Zi,"PUBLIC").setMultipleInstances(!0)),(0,_t.registerVersion)(us,"0.11.2",""),(0,_t.registerVersion)(us,"0.11.2","esm2017")}();class Pi{constructor(a,l,p){this._delegate=a,this.task=l,this.ref=p}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class po{constructor(a,l){this._delegate=a,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Pi(this._delegate.snapshot,this,this._ref)}then(a,l){return this._delegate.then(p=>{if(a)return a(new Pi(p,this,this._ref))},l)}on(a,l,p,I){let R;return l&&(R="function"==typeof l?V=>l(new Pi(V,this,this._ref)):{next:l.next?V=>l.next(new Pi(V,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(a,R,p||void 0,I||void 0)}}class go{constructor(a,l){this._delegate=a,this._service=l}get prefixes(){return this._delegate.prefixes.map(a=>new Oi(a,this._service))}get items(){return this._delegate.items.map(a=>new Oi(a,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Oi{constructor(a,l){this._delegate=a,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(a){const l=function ta(u,a){return Os(u,a)}(this._delegate,a);return new Oi(l,this.storage)}get root(){return new Oi(this._delegate.root,this.storage)}get parent(){const a=this._delegate.parent;return null==a?null:new Oi(a,this.storage)}put(a,l){return this._throwIfRoot("put"),new po(function co(u,a,l){return function ei(u,a,l){return u._throwIfRoot("uploadBytesResumable"),new tn(u,new lt(a),l)}(u=(0,Y.m9)(u),a,l)}(this._delegate,a,l),this)}putString(a,l=mr.RAW,p){this._throwIfRoot("putString");const I=Ze(l,a),R=Object.assign({},p);return null==R.contentType&&null!=I.contentType&&(R.contentType=I.contentType),new po(new tn(this._delegate,new lt(I.data,!0),R),this)}listAll(){return function ho(u){return function Oo(u){const a={prefixes:[],items:[]};return _i(u,a).then(()=>a)}(u=(0,Y.m9)(u))}(this._delegate).then(a=>new go(a,this.storage))}list(a){return function uo(u,a){return Hi(u=(0,Y.m9)(u),a)}(this._delegate,a||void 0).then(l=>new go(l,this.storage))}getMetadata(){return function ti(u){return function jo(u){u._throwIfRoot("getMetadata");const a=ji(u.storage,u._location,St());return u.storage.makeRequestWithTokens(a,Wr)}(u=(0,Y.m9)(u))}(this._delegate)}updateMetadata(a){return function ks(u,a){return function ua(u,a){u._throwIfRoot("updateMetadata");const l=function qi(u,a,l,p){const R=qn(a.fullServerUrl(),u.host,u._protocol),te=bt(l,p),Pe=u.maxOperationRetryTime,Ft=new Qn(R,"PATCH",Wn(u,p),Pe);return Ft.headers={"Content-Type":"application/json; charset=utf-8"},Ft.body=te,Ft.errorHandler=Vi(a),Ft}(u.storage,u._location,a,St());return u.storage.makeRequestWithTokens(l,Wr)}(u=(0,Y.m9)(u),a)}(this._delegate,a)}getDownloadURL(){return function fa(u){return Yi(u=(0,Y.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function fo(u){return function oo(u){u._throwIfRoot("deleteObject");const a=function kr(u,a){const p=qn(a.fullServerUrl(),u.host,u._protocol),te=new Qn(p,"DELETE",function V(pe,Pe){},u.maxOperationRetryTime);return te.successCodes=[200,204],te.errorHandler=Vi(a),te}(u.storage,u._location);return u.storage.makeRequestWithTokens(a,Wr)}(u=(0,Y.m9)(u))}(this._delegate)}_throwIfRoot(a){if(""===this._delegate._location.path)throw Yn(a)}}class ra{constructor(a,l){this.app=a,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(a){if(Ja(a))throw gn("ref() expected a child path but got a URL, use refFromURL instead.");return new Oi(_s(this._delegate,a),this)}refFromURL(a){if(!Ja(a))throw gn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cn.makeFromUrl(a,this._delegate.host)}catch{throw gn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Oi(_s(this._delegate,a),this)}setMaxUploadRetryTime(a){this._delegate.maxUploadRetryTime=a}setMaxOperationRetryTime(a){this._delegate.maxOperationRetryTime=a}useEmulator(a,l,p={}){!function na(u,a,l,p={}){!function Qa(u,a,l,p={}){u.host=`${a}:${l}`,u._protocol="http";const{mockUserToken:I}=p;I&&(u._overrideAuthToken="string"==typeof I?I:(0,Y.Sg)(I,u.app.options.projectId))}(u,a,l,p)}(this._delegate,a,l,p)}}function Ja(u){return/^[A-Za-z]+:\/\//.test(u)}function Gi(u,{instanceIdentifier:a}){const l=u.getProvider("app-compat").getImmediate(),p=u.getProvider("storage").getImmediate({identifier:a});return new ra(l,p)}!function Ua(u){const a={TaskState:Lt,TaskEvent:Vt,StringFormat:mr,Storage:ra,Reference:Oi};u.INTERNAL.registerComponent(new it.wA("storage-compat",Gi,"PUBLIC").setServiceProps(a).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.3.2")}(xe.Z);var Ns=j(6217),To=j(9260);function Tr(u){const a=function ia(u){return new ve.y(a=>{const l=V=>a.next(V);l(u.snapshot);const R=u.on("state_changed",l);return u.then(V=>{l(V),a.complete()},V=>{l(u.snapshot),(V=>{a.error(V)})(V)}),function(){R()}}).pipe(function We(u,a=Ee.z){return(0,de.e)((l,p)=>{let I=null,R=null,V=null;const te=()=>{if(I){I.unsubscribe(),I=null;const Pe=R;R=null,p.next(Pe)}};function pe(){const Pe=V+u,Ft=a.now();if(Ft<Pe)return I=this.schedule(void 0,Pe-Ft),void p.add(I);te()}l.subscribe((0,ye.x)(p,Pe=>{R=Pe,V=a.now(),I||(I=a.schedule(pe,u),p.add(I))},()=>{te(),p.complete()},void 0,()=>{R=I=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>a,percentageChanges:()=>a.pipe((0,Oe.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function So(u){return{getDownloadURL:()=>(0,Ue.of)(void 0).pipe(wt.fc,(0,Je.w)(()=>u.getDownloadURL()),wt.iC),getMetadata:()=>(0,Ue.of)(void 0).pipe(wt.fc,(0,Je.w)(()=>u.getMetadata()),wt.iC),delete:()=>(0,Ge.D)(u.delete()),child:a=>So(u.child(a)),updateMetadata:a=>(0,Ge.D)(u.updateMetadata(a)),put:(a,l)=>Tr(u.put(a,l)),putString:(a,l,p)=>Tr(u.putString(a,l,p)),list:a=>(0,Ge.D)(u.list(a)),listAll:()=>(0,Ge.D)(u.listAll())}}const pa=new _.OlP("angularfire2.storageBucket"),sa=new _.OlP("angularfire2.storage.maxUploadRetryTime"),b=new _.OlP("angularfire2.storage.maxOperationRetryTime"),q=new _.OlP("angularfire2.storage.use-emulator");let T=(()=>{class u{constructor(l,p,I,R,V,te,pe,Pe,Ft,Yt){const sn=(0,Se.on)(l,V,p);this.storage=(0,Se.cc)(`${sn.name}.storage.${I}`,"AngularFireStorage",sn.name,()=>{const Rn=V.runOutsideAngular(()=>sn.storage(I||void 0)),Zn=Ft;return Zn&&Rn.useEmulator(...Zn),pe&&Rn.setMaxUploadRetryTime(pe),Pe&&Rn.setMaxOperationRetryTime(Pe),Rn},[pe,Pe])}ref(l){return So(this.storage.ref(l))}refFromURL(l){return So(this.storage.refFromURL(l))}upload(l,p,I){return So(this.storage.ref(l)).put(p,I)}}return u.\u0275fac=function(l){return new(l||u)(_.LFG(Se.Dh),_.LFG(Se.xv,8),_.LFG(pa,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(wt.HU),_.LFG(sa,8),_.LFG(b,8),_.LFG(q,8),_.LFG(Ns.nm,8))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),ge=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({}),u})(),M=(()=>{class u{constructor(){To.Z.registerVersion("angularfire",wt.q4.full,"gcs-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({providers:[T],imports:[ge]}),u})();var F=j(1762),L=j(6451),ne=j(3099),vt=j(5026),Tn=j(1884),$r=j(8421),ii=j(4671),Qi=j(5032),ds=j(7669);j(3042);var ts=j(1877);const Ks="@firebase/database";let oa="";function Ys(u){oa=u}class ml{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,Y.Wl)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,Y.cI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class el{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,Y.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const Ta=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const a=window[u];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new ml(a)}}catch{}return new el},ja=Ta("localStorage"),ns=Ta("sessionStorage"),Rs=new ts.Yd("@firebase/database"),tl=function(){let u=1;return function(){return u++}}(),Sa=function(u){const a=(0,Y.dS)(u),l=new Y.gQ;l.update(a);const p=l.digest();return Y.US.encodeByteArray(p)},zo=function(...u){let a="";for(let l=0;l<u.length;l++){const p=u[l];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?a+=zo.apply(null,p):a+="object"==typeof p?(0,Y.Wl)(p):p,a+=" "}return a};let Fo=null,nl=!0;const ga=function(u,a){(0,Y.hu)(!a||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(Rs.logLevel=ts.in.VERBOSE,Fo=Rs.log.bind(Rs),a&&ns.set("logging_enabled",!0)):"function"==typeof u?Fo=u:(Fo=null,ns.remove("logging_enabled"))},as=function(...u){if(!0===nl&&(nl=!1,null===Fo&&!0===ns.get("logging_enabled")&&ga(!0)),Fo){const a=zo.apply(null,u);Fo(a)}},xo=function(u){return function(...a){as(u,...a)}},Go=function(...u){const a="FIREBASE INTERNAL ERROR: "+zo(...u);Rs.error(a)},Zs=function(...u){const a=`FIREBASE FATAL ERROR: ${zo(...u)}`;throw Rs.error(a),new Error(a)},hs=function(...u){const a="FIREBASE WARNING: "+zo(...u);Rs.warn(a)},ls=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},Vr="[MIN_NAME]",Ro="[MAX_NAME]",xa=function(u,a){if(u===a)return 0;if(u===Vr||a===Ro)return-1;if(a===Vr||u===Ro)return 1;{const l=Zt(u),p=Zt(a);return null!==l?null!==p?l-p==0?u.length-a.length:l-p:-1:null!==p?1:u<a?-1:1}},Lo=function(u,a){return u===a?0:u<a?-1:1},yl=function(u,a){if(a&&u in a)return a[u];throw new Error("Missing required key ("+u+") in object: "+(0,Y.Wl)(a))},mo=function(u){if("object"!=typeof u||null===u)return(0,Y.Wl)(u);const a=[];for(const p in u)a.push(p);a.sort();let l="{";for(let p=0;p<a.length;p++)0!==p&&(l+=","),l+=(0,Y.Wl)(a[p]),l+=":",l+=mo(u[a[p]]);return l+="}",l},jl=function(u,a){const l=u.length;if(l<=a)return[u];const p=[];for(let I=0;I<l;I+=a)p.push(u.substring(I,I+a>l?l:I+a));return p};function Sr(u,a){for(const l in u)u.hasOwnProperty(l)&&a(l,u[l])}const Hl=function(u){(0,Y.hu)(!ls(u),"Invalid JSON number");const p=1023;let I,R,V,te,pe;0===u?(R=0,V=0,I=1/u==-1/0?1:0):(I=u<0,(u=Math.abs(u))>=Math.pow(2,1-p)?(te=Math.min(Math.floor(Math.log(u)/Math.LN2),p),R=te+p,V=Math.round(u*Math.pow(2,52-te)-Math.pow(2,52))):(R=0,V=Math.round(u/Math.pow(2,-1074))));const Pe=[];for(pe=52;pe;pe-=1)Pe.push(V%2?1:0),V=Math.floor(V/2);for(pe=11;pe;pe-=1)Pe.push(R%2?1:0),R=Math.floor(R/2);Pe.push(I?1:0),Pe.reverse();const Ft=Pe.join("");let Yt="";for(pe=0;pe<64;pe+=8){let sn=parseInt(Ft.substr(pe,8),2).toString(16);1===sn.length&&(sn="0"+sn),Yt+=sn}return Yt.toLowerCase()},H=new RegExp("^-?(0*)\\d{1,10}$"),Zt=function(u){if(H.test(u)){const a=Number(u);if(a>=-2147483648&&a<=2147483647)return a}return null},en=function(u){try{u()}catch(a){setTimeout(()=>{throw hs("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},Vn=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ar=function(u,a){const l=setTimeout(u,a);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Kr{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(p=>this.appCheck=p)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,p)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(p=>p.addTokenListener(a))}notifyForInvalidToken(){hs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Br{constructor(a,l,p){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(I=>this.auth_=I)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?(as("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,p)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hs(a)}}let wr=(()=>{class u{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Ko=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qs="websocket",rl="long_polling";class _l{constructor(a,l,p,I,R=!1,V="",te=!1,pe=!1){this.secure=l,this.namespace=p,this.webSocketOnly=I,this.nodeAdmin=R,this.persistenceKey=V,this.includeNamespaceInQueryParams=te,this.isUsingEmulator=pe,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ja.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&ja.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qo(u,a,l){let p;if((0,Y.hu)("string"==typeof a,"typeof type must == string"),(0,Y.hu)("object"==typeof l,"typeof params must == object"),a===Qs)p=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(a!==rl)throw new Error("Unknown connection type: "+a);p=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function Rc(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(l.ns=u.namespace);const I=[];return Sr(l,(R,V)=>{I.push(R+"="+V)}),p+I.join("&")}class Wc{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,Y.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,Y.p$)(this.counters_)}}const Wi={},vo={};function Js(u){const a=u.toString();return Wi[a]||(Wi[a]=new Wc),Wi[a]}class ac{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let I=0;I<p.length;++I)p[I]&&en(()=>{this.onMessage_(p[I])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $o{constructor(a,l,p,I,R,V,te){this.connId=a,this.repoInfo=l,this.applicationId=p,this.appCheckToken=I,this.authToken=R,this.transportSessionId=V,this.lastSessionId=te,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xo(a),this.stats_=Js(l),this.urlFn=pe=>(this.appCheckToken&&(pe.ac=this.appCheckToken),qo(l,rl,pe))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new ac(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,Y.Yr)()||"complete"===document.readyState)u();else{let a=!1;const l=function(){document.body?a||(a=!0,u()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Il((...R)=>{const[V,te,pe,Pe,Ft]=R;if(this.incrementIncomingBytes_(R),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===V)this.id=te,this.password=pe;else{if("close"!==V)throw new Error("Unrecognized command received: "+V);te?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(te,()=>{this.onClosed_()})):this.onClosed_()}},(...R)=>{const[V,te]=R;this.incrementIncomingBytes_(R),this.myPacketOrderer.handleResponse(V,te)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ko.test(location.hostname)&&(p.r="f");const I=this.urlFn(p);this.log_("Connecting via long-poll to "+I),this.scriptTagHolder.addTag(I,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$o.forceAllow_=!0}static forceDisallow(){$o.forceDisallow_=!0}static isAvailable(){return!((0,Y.Yr)()||!$o.forceAllow_&&($o.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,Y.Wl)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const p=(0,Y.h$)(l),I=jl(p,1840);for(let R=0;R<I.length;R++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,I.length,I[R]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,Y.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=a,p.pw=l,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,Y.Wl)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Il{constructor(a,l,p,I){if(this.onDisconnect=p,this.urlFn=I,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Y.Yr)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=tl(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Il.createIFrame_();let R="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(R='<script>document.domain="'+document.domain+'";<\/script>');const V="<html><body>"+R+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(V),this.myIFrame.doc.close()}catch(te){as("frame writing exception"),te.stack&&as(te.stack),as(te)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||as("No IE domain setting required")}catch{const p=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),p="",I=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const V=this.pendingSegs.shift();p=p+"&seg"+I+"="+V.seg+"&ts"+I+"="+V.ts+"&d"+I+"="+V.d,I++}return l+=p,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,p){this.pendingSegs.push({seg:a,ts:l,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const p=()=>{this.outstandingRequests.delete(l),this.newRequest_()},I=setTimeout(p,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(I),p()})}addTag(a,l){(0,Y.Yr)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=a,p.onload=p.onreadystatechange=function(){const I=p.readyState;(!I||"loaded"===I||"complete"===I)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),l())},p.onerror=()=>{as("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch{}},Math.floor(1))}}let ma=null;typeof MozWebSocket<"u"?ma=MozWebSocket:typeof WebSocket<"u"&&(ma=WebSocket);let pr=(()=>{class u{constructor(l,p,I,R,V,te,pe){this.connId=l,this.applicationId=I,this.appCheckToken=R,this.authToken=V,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xo(this.connId),this.stats_=Js(p),this.connURL=u.connectionURL_(p,te,pe,R,I),this.nodeAdmin=p.nodeAdmin}static connectionURL_(l,p,I,R,V){const te={v:"5"};return!(0,Y.Yr)()&&typeof location<"u"&&location.hostname&&Ko.test(location.hostname)&&(te.r="f"),p&&(te.s=p),I&&(te.ls=I),R&&(te.ac=R),V&&(te.p=V),qo(l,Qs,te)}open(l,p){this.onDisconnect=p,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ja.set("previous_websocket_failure",!0);try{let I;if((0,Y.Yr)()){I={headers:{"User-Agent":`Firebase/5/${oa}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(I.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(I.headers["X-Firebase-AppCheck"]=this.appCheckToken);const V=process.env,te=0===this.connURL.indexOf("wss://")?V.HTTPS_PROXY||V.https_proxy:V.HTTP_PROXY||V.http_proxy;te&&(I.proxy={origin:te})}this.mySock=new ma(this.connURL,[],I)}catch(I){this.log_("Error instantiating WebSocket.");const R=I.message||I.data;return R&&this.log_(R),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=I=>{this.handleIncomingFrame(I)},this.mySock.onerror=I=>{this.log_("WebSocket error.  Closing connection.");const R=I.message||I.data;R&&this.log_(R),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const I=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);I&&I.length>1&&parseFloat(I[1])<4.4&&(l=!0)}return!l&&null!==ma&&!u.forceDisallow_}static previouslyFailed(){return ja.isInMemoryStorage||!0===ja.get("previous_websocket_failure")}markConnectionHealthy(){ja.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const I=(0,Y.cI)(p);this.onMessage(I)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,Y.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const p=Number(l);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const p=l.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const I=this.extractFrameCount_(p);null!==I&&this.appendFrame_(I)}}send(l){this.resetKeepAlive();const p=(0,Y.Wl)(l);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const I=jl(p,16384);I.length>1&&this.sendString_(String(I.length));for(let R=0;R<I.length;R++)this.sendString_(I[R])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),aa=(()=>{class u{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[$o,pr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const p=pr&&pr.isAvailable();let I=p&&!pr.previouslyFailed();if(l.webSocketOnly&&(p||hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),I=!0),I)this.transports_=[pr];else{const R=this.transports_=[];for(const V of u.ALL_TRANSPORTS)V&&V.isAvailable()&&R.push(V);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class Oc{constructor(a,l,p,I,R,V,te,pe,Pe,Ft){this.id=a,this.repoInfo_=l,this.applicationId_=p,this.appCheckToken_=I,this.authToken_=R,this.onMessage_=V,this.onReady_=te,this.onDisconnect_=pe,this.onKill_=Pe,this.lastSessionId=Ft,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xo("c:"+this.id+":"),this.transportManager_=new aa(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,p)},Math.floor(0));const I=a.healthyTimeout||0;I>0&&(this.healthyTimeout_=Ar(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(I)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=yl("t",a),p=yl("d",a);if("c"===l)this.onSecondaryControl_(p);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=yl("t",a),p=yl("d",a);"c"===l?this.onControl_(p):"d"===l&&this.onDataMessage_(p)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=yl("t",a);if("d"in a){const p=a.d;if("h"===l){const I=Object.assign({},p);this.repoInfo_.isUsingEmulator&&(I.h=this.repoInfo_.host),this.onHandshake_(I)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let I=0;I<this.pendingDataMessages.length;++I)this.onDataMessage_(this.pendingDataMessages[I]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(p):"r"===l?this.onReset_(p):"e"===l?Go("Server Error: "+p):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Go("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,p=a.v,I=a.h;this.sessionId=a.s,this.repoInfo_.host=I,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==p&&hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,p),Ar(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ar(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ja.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Xc{put(a,l,p,I){}merge(a,l,p,I){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,p){}onDisconnectMerge(a,l,p){}onDisconnectCancel(a,l){}reportStats(a){}}class Ds{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,Y.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const p=[...this.listeners_[a]];for(let I=0;I<p.length;I++)p[I].callback.apply(p[I].context,l)}}on(a,l,p){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:p});const I=this.getInitialEvent(a);I&&l.apply(p,I)}off(a,l,p){this.validateEventType_(a);const I=this.listeners_[a]||[];for(let R=0;R<I.length;R++)if(I[R].callback===l&&(!p||p===I[R].context))return void I.splice(R,1)}validateEventType_(a){(0,Y.hu)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class es extends Ds{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Y.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new es}getInitialEvent(a){return(0,Y.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}const bl=32,Gl=768;class qr{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let p=0;for(let I=0;I<this.pieces_.length;I++)this.pieces_[I].length>0&&(this.pieces_[p]=this.pieces_[I],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function Rr(){return new qr("")}function Yr(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function $t(u){return u.pieces_.length-u.pieceNum_}function Di(u){let a=u.pieceNum_;return a<u.pieces_.length&&a++,new qr(u.pieces_,a)}function to(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function la(u,a=0){return u.pieces_.slice(u.pieceNum_+a)}function Yo(u){if(u.pieceNum_>=u.pieces_.length)return null;const a=[];for(let l=u.pieceNum_;l<u.pieces_.length-1;l++)a.push(u.pieces_[l]);return new qr(a,0)}function ui(u,a){const l=[];for(let p=u.pieceNum_;p<u.pieces_.length;p++)l.push(u.pieces_[p]);if(a instanceof qr)for(let p=a.pieceNum_;p<a.pieces_.length;p++)l.push(a.pieces_[p]);else{const p=a.split("/");for(let I=0;I<p.length;I++)p[I].length>0&&l.push(p[I])}return new qr(l,0)}function Pr(u){return u.pieceNum_>=u.pieces_.length}function S(u,a){const l=Yr(u),p=Yr(a);if(null===l)return a;if(l===p)return S(Di(u),Di(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+u+")")}function x(u,a){const l=la(u,0),p=la(a,0);for(let I=0;I<l.length&&I<p.length;I++){const R=xa(l[I],p[I]);if(0!==R)return R}return l.length===p.length?0:l.length<p.length?-1:1}function w(u,a){if($t(u)!==$t(a))return!1;for(let l=u.pieceNum_,p=a.pieceNum_;l<=u.pieces_.length;l++,p++)if(u.pieces_[l]!==a.pieces_[p])return!1;return!0}function O(u,a){let l=u.pieceNum_,p=a.pieceNum_;if($t(u)>$t(a))return!1;for(;l<u.pieces_.length;){if(u.pieces_[l]!==a.pieces_[p])return!1;++l,++p}return!0}class z{constructor(a,l){this.errorPrefix_=l,this.parts_=la(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,Y.ug)(this.parts_[p]);at(this)}}function at(u){if(u.byteLength_>Gl)throw new Error(u.errorPrefix_+"has a key path longer than "+Gl+" bytes ("+u.byteLength_+").");if(u.parts_.length>bl)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bl+") or object contains a cycle "+Ut(u))}function Ut(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class En extends Ds{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const p=!document[a];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new En}getInitialEvent(a){return(0,Y.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const Hn=1e3;let _o,Is=(()=>{class u extends Xc{constructor(l,p,I,R,V,te,pe,Pe){if(super(),this.repoInfo_=l,this.applicationId_=p,this.onDataUpdate_=I,this.onConnectStatus_=R,this.onServerInfoUpdate_=V,this.authTokenProvider_=te,this.appCheckTokenProvider_=pe,this.authOverride_=Pe,this.id=u.nextPersistentConnectionId_++,this.log_=xo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hn,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Pe&&!(0,Y.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");En.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&es.getInstance().on("online",this.onOnline_,this)}sendRequest(l,p,I){const R=++this.requestNumber_,V={r:R,a:l,b:p};this.log_((0,Y.Wl)(V)),(0,Y.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(V),I&&(this.requestCBHash_[R]=I)}get(l){this.initConnection_();const p=new Y.BH,R={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:te=>{const pe=te.d;"ok"===te.s?p.resolve(pe):p.reject(pe)}};return this.outstandingGets_.push(R),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(l,p,I,R){this.initConnection_();const V=l._queryIdentifier,te=l._path.toString();this.log_("Listen called for "+te+" "+V),this.listens.has(te)||this.listens.set(te,new Map),(0,Y.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Y.hu)(!this.listens.get(te).has(V),"listen() called twice for same path/queryId.");const pe={onComplete:R,hashFn:p,query:l,tag:I};this.listens.get(te).set(V,pe),this.connected_&&this.sendListen_(pe)}sendGet_(l){const p=this.outstandingGets_[l];this.sendRequest("g",p.request,I=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(I)})}sendListen_(l){const p=l.query,I=p._path.toString(),R=p._queryIdentifier;this.log_("Listen on "+I+" for "+R);const V={p:I};l.tag&&(V.q=p._queryObject,V.t=l.tag),V.h=l.hashFn(),this.sendRequest("q",V,pe=>{const Pe=pe.d,Ft=pe.s;u.warnOnListenWarnings_(Pe,p),(this.listens.get(I)&&this.listens.get(I).get(R))===l&&(this.log_("listen response",pe),"ok"!==Ft&&this.removeListen_(I,R),l.onComplete&&l.onComplete(Ft,Pe))})}static warnOnListenWarnings_(l,p){if(l&&"object"==typeof l&&(0,Y.r3)(l,"w")){const I=(0,Y.DV)(l,"w");if(Array.isArray(I)&&~I.indexOf("no_index")){const R='".indexOn": "'+p._queryParams.getIndex().toString()+'"',V=p._path.toString();hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${R} at ${V} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,Y.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,p=(0,Y.w9)(l)?"auth":"gauth",I={cred:l};null===this.authOverride_?I.noauth=!0:"object"==typeof this.authOverride_&&(I.authvar=this.authOverride_),this.sendRequest(p,I,R=>{const V=R.s,te=R.d||"error";this.authToken_===l&&("ok"===V?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(V,te))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const p=l.s,I=l.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,I)})}unlisten(l,p){const I=l._path.toString(),R=l._queryIdentifier;this.log_("Unlisten called for "+I+" "+R),(0,Y.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(I,R)&&this.connected_&&this.sendUnlisten_(I,R,l._queryObject,p)}sendUnlisten_(l,p,I,R){this.log_("Unlisten on "+l+" for "+p);const V={p:l};R&&(V.q=I,V.t=R),this.sendRequest("n",V)}onDisconnectPut(l,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,p,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:p,onComplete:I})}onDisconnectMerge(l,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,p,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:p,onComplete:I})}onDisconnectCancel(l,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,p):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(l,p,I,R){const V={p,d:I};this.log_("onDisconnect "+l,V),this.sendRequest(l,V,te=>{R&&setTimeout(()=>{R(te.s,te.d)},Math.floor(0))})}put(l,p,I,R){this.putInternal("p",l,p,I,R)}merge(l,p,I,R){this.putInternal("m",l,p,I,R)}putInternal(l,p,I,R,V){this.initConnection_();const te={p,d:I};void 0!==V&&(te.h=V),this.outstandingPuts_.push({action:l,request:te,onComplete:R}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(l){const p=this.outstandingPuts_[l].action,I=this.outstandingPuts_[l].request,R=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(p,I,V=>{this.log_(p+" response",V),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),R&&R(V.s,V.d)})}reportStats(l){if(this.connected_){const p={c:l};this.log_("reportStats",p),this.sendRequest("s",p,I=>{"ok"!==I.s&&this.log_("reportStats","Error sending stats: "+I.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,Y.Wl)(l));const p=l.r,I=this.requestCBHash_[p];I&&(delete this.requestCBHash_[p],I(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,p){this.log_("handleServerMessage",l,p),"d"===l?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===l?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===l?this.onListenRevoked_(p.p,p.q):"ac"===l?this.onAuthRevoked_(p.s,p.d):"apc"===l?this.onAppCheckRevoked_(p.s,p.d):"sd"===l?this.onSecurityDebugPacket_(p):Go("Unrecognized action received from server: "+(0,Y.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,Y.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hn,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Hn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Hn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-l);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,ue.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const p=l.onDataMessage_.bind(l),I=l.onReady_.bind(l),R=l.onRealtimeDisconnect_.bind(l),V=l.id+":"+u.nextConnectionId_++,te=l.lastSessionId;let pe=!1,Pe=null;const Ft=function(){Pe?Pe.close():(pe=!0,R())};l.realtime_={close:Ft,sendRequest:function(Rn){(0,Y.hu)(Pe,"sendRequest call when we're not connected not allowed."),Pe.sendRequest(Rn)}};const sn=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Rn,Zn]=yield Promise.all([l.authTokenProvider_.getToken(sn),l.appCheckTokenProvider_.getToken(sn)]);pe?as("getToken() completed but was canceled"):(as("getToken() completed. Creating connection."),l.authToken_=Rn&&Rn.accessToken,l.appCheckToken_=Zn&&Zn.token,Pe=new Oc(V,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,p,I,R,Mr=>{hs(Mr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},te))}catch(Rn){l.log_("Failed to get token: "+Rn),pe||(l.repoInfo_.nodeAdmin&&hs(Rn),Ft())}}})()}interrupt(l){as("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){as("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,Y.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Hn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const p=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const p=this.outstandingPuts_[l];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,p){let I;I=p?p.map(V=>mo(V)).join("$"):"default";const R=this.removeListen_(l,I);R&&R.onComplete&&R.onComplete("permission_denied")}removeListen_(l,p){const I=new qr(l).toString();let R;if(this.listens.has(I)){const V=this.listens.get(I);R=V.get(p),V.delete(p),0===V.size&&this.listens.delete(I)}else R=void 0;return R}onAuthRevoked_(l,p){as("Auth token revoked: "+l+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,p){as("App check token revoked: "+l+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const p of l.values())this.sendListen_(p);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let p="js";(0,Y.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+p+"."+oa.replace(/\./g,"-")]=1,(0,Y.uI)()?l["framework.cordova"]=1:(0,Y.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=es.getInstance().currentlyOnline();return(0,Y.xb)(this.interruptReasons_)&&l}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class Or{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new Or(a,l)}}class hc{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const p=new Or(Vr,a),I=new Or(Vr,l);return 0!==this.compare(p,I)}minPost(){return Or.MIN}}class Qc extends hc{static get __EMPTY_NODE(){return _o}static set __EMPTY_NODE(a){_o=a}compare(a,l){return xa(a.name,l.name)}isDefinedOn(a){throw(0,Y.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return Or.MIN}maxPost(){return new Or(Ro,_o)}makePost(a,l){return(0,Y.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new Or(a,_o)}toString(){return".key"}}const Bo=new Qc;class Dl{constructor(a,l,p,I,R=null){this.isReverse_=I,this.resultGenerator_=R,this.nodeStack_=[];let V=1;for(;!a.isEmpty();)if(V=l?p(a.key,l):1,I&&(V*=-1),V<0)a=this.isReverse_?a.left:a.right;else{if(0===V){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let id,sl=(()=>{class u{constructor(l,p,I,R,V){this.key=l,this.value=p,this.color=null!=I?I:u.RED,this.left=null!=R?R:Zo.EMPTY_NODE,this.right=null!=V?V:Zo.EMPTY_NODE}copy(l,p,I,R,V){return new u(null!=l?l:this.key,null!=p?p:this.value,null!=I?I:this.color,null!=R?R:this.left,null!=V?V:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,p,I){let R=this;const V=I(l,R.key);return R=V<0?R.copy(null,null,null,R.left.insert(l,p,I),null):0===V?R.copy(null,p,null,null,null):R.copy(null,null,null,null,R.right.insert(l,p,I)),R.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zo.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,p){let I,R;if(I=this,p(l,I.key)<0)!I.left.isEmpty()&&!I.left.isRed_()&&!I.left.left.isRed_()&&(I=I.moveRedLeft_()),I=I.copy(null,null,null,I.left.remove(l,p),null);else{if(I.left.isRed_()&&(I=I.rotateRight_()),!I.right.isEmpty()&&!I.right.isRed_()&&!I.right.left.isRed_()&&(I=I.moveRedRight_()),0===p(l,I.key)){if(I.right.isEmpty())return Zo.EMPTY_NODE;R=I.right.min_(),I=I.copy(R.key,R.value,null,null,I.right.removeMin_())}I=I.copy(null,null,null,null,I.right.remove(l,p))}return I.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,p)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class Zo{constructor(a,l=Zo.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new Zo(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,sl.BLACK,null,null))}remove(a){return new Zo(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,sl.BLACK,null,null))}get(a){let l,p=this.root_;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l)return p.value;l<0?p=p.left:l>0&&(p=p.right)}return null}getPredecessorKey(a){let l,p=this.root_,I=null;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l){if(p.left.isEmpty())return I?I.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}l<0?p=p.left:l>0&&(I=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new Dl(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new Dl(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new Dl(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new Dl(this.root_,null,this.comparator_,!0,a)}}function nd(u,a){return xa(u.name,a.name)}function rd(u,a){return xa(u,a)}Zo.EMPTY_NODE=new class $d{copy(a,l,p,I,R){return this}insert(a,l,p){return new sl(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Bd=function(u){return"number"==typeof u?"number:"+Hl(u):"string:"+u},kc=function(u){if(u.isLeafNode()){const a=u.val();(0,Y.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,Y.r3)(a,".sv"),"Priority must be a string or number.")}else(0,Y.hu)(u===id||u.isEmpty(),"priority of unexpected type.");(0,Y.hu)(u===id||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Nc,Iu,Bs,Fc=(()=>{class u{constructor(l,p=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=p,this.lazyHash_=null,(0,Y.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),kc(this.priorityNode_)}static set __childrenNodeConstructor(l){Nc=l}static get __childrenNodeConstructor(){return Nc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new u(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Pr(l)?this:".priority"===Yr(l)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,p){return null}updateImmediateChild(l,p){return".priority"===l?this.updatePriority(p):p.isEmpty()&&".priority"!==l?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,p).updatePriority(this.priorityNode_)}updateChild(l,p){const I=Yr(l);return null===I?p:p.isEmpty()&&".priority"!==I?this:((0,Y.hu)(".priority"!==I||1===$t(l),".priority must be the last token in a path"),this.updateImmediateChild(I,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Di(l),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,p){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Bd(this.priorityNode_.val())+":");const p=typeof this.value_;l+=p+":",l+="number"===p?Hl(this.value_):this.value_,this.lazyHash_=Sa(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===u.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof u.__childrenNodeConstructor?-1:((0,Y.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const p=typeof l.value_,I=typeof this.value_,R=u.VALUE_TYPE_ORDER.indexOf(p),V=u.VALUE_TYPE_ORDER.indexOf(I);return(0,Y.hu)(R>=0,"Unknown leaf type: "+p),(0,Y.hu)(V>=0,"Unknown leaf type: "+I),R===V?"object"===I?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:V-R}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const xr=new class Jc extends hc{compare(a,l){const p=a.node.getPriority(),I=l.node.getPriority(),R=p.compareTo(I);return 0===R?xa(a.name,l.name):R}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return Or.MIN}maxPost(){return new Or(Ro,new Fc("[PRIORITY-POST]",Bs))}makePost(a,l){const p=Iu(a);return new Or(l,new Fc("[PRIORITY-POST]",p))}toString(){return".priority"}},Tl=Math.log(2);class Us{constructor(a){this.count=parseInt(Math.log(a+1)/Tl,10),this.current_=this.count-1;const I=(R=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&I}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const Ui=function(u,a,l,p){u.sort(a);const I=function(pe,Pe){const Ft=Pe-pe;let Yt,sn;if(0===Ft)return null;if(1===Ft)return Yt=u[pe],sn=l?l(Yt):Yt,new sl(sn,Yt.node,sl.BLACK,null,null);{const Rn=parseInt(Ft/2,10)+pe,Zn=I(pe,Rn),Mr=I(Rn+1,Pe);return Yt=u[Rn],sn=l?l(Yt):Yt,new sl(sn,Yt.node,sl.BLACK,Zn,Mr)}},te=function(pe){let Pe=null,Ft=null,Yt=u.length;const sn=function(Zn,Mr){const oi=Yt-Zn,Mi=Yt;Yt-=Zn;const Ms=I(oi+1,Mi),Cs=u[oi],is=l?l(Cs):Cs;Rn(new sl(is,Cs.node,Mr,null,Ms))},Rn=function(Zn){Pe?(Pe.left=Zn,Pe=Zn):(Ft=Zn,Pe=Zn)};for(let Zn=0;Zn<pe.count;++Zn){const Mr=pe.nextBitIsOne(),oi=Math.pow(2,pe.count-(Zn+1));Mr?sn(oi,sl.BLACK):(sn(oi,sl.BLACK),sn(oi,sl.RED))}return Ft}(new Us(u.length));return new Zo(p||a,te)};let Sl;const va={};class ps{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,Y.hu)(va&&xr,"ChildrenNode.ts has not been loaded"),Sl=Sl||new ps({".priority":va},{".priority":xr}),Sl}get(a){const l=(0,Y.DV)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof Zo?l:null}hasIndex(a){return(0,Y.r3)(this.indexSet_,a.toString())}addIndex(a,l){(0,Y.hu)(a!==Bo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let I=!1;const R=l.getIterator(Or.Wrap);let te,V=R.getNext();for(;V;)I=I||a.isDefinedOn(V.node),p.push(V),V=R.getNext();te=I?Ui(p,a.getCompare()):va;const pe=a.toString(),Pe=Object.assign({},this.indexSet_);Pe[pe]=a;const Ft=Object.assign({},this.indexes_);return Ft[pe]=te,new ps(Ft,Pe)}addToIndexes(a,l){const p=(0,Y.UI)(this.indexes_,(I,R)=>{const V=(0,Y.DV)(this.indexSet_,R);if((0,Y.hu)(V,"Missing index implementation for "+R),I===va){if(V.isDefinedOn(a.node)){const te=[],pe=l.getIterator(Or.Wrap);let Pe=pe.getNext();for(;Pe;)Pe.name!==a.name&&te.push(Pe),Pe=pe.getNext();return te.push(a),Ui(te,V.getCompare())}return va}{const te=l.get(a.name);let pe=I;return te&&(pe=pe.remove(new Or(a.name,te))),pe.insert(a,a.node)}});return new ps(p,this.indexSet_)}removeFromIndexes(a,l){const p=(0,Y.UI)(this.indexes_,I=>{if(I===va)return I;{const R=l.get(a.name);return R?I.remove(new Or(a.name,R)):I}});return new ps(p,this.indexSet_)}}let fc,ni=(()=>{class u{constructor(l,p,I){this.children_=l,this.priorityNode_=p,this.indexMap_=I,this.lazyHash_=null,this.priorityNode_&&kc(this.priorityNode_),this.children_.isEmpty()&&(0,Y.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fc||(fc=new u(new Zo(rd),null,ps.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fc}updatePriority(l){return this.children_.isEmpty()?this:new u(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const p=this.children_.get(l);return null===p?fc:p}}getChild(l){const p=Yr(l);return null===p?this:this.getImmediateChild(p).getChild(Di(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,p){if((0,Y.hu)(p,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(p);{const I=new Or(l,p);let R,V;p.isEmpty()?(R=this.children_.remove(l),V=this.indexMap_.removeFromIndexes(I,this.children_)):(R=this.children_.insert(l,p),V=this.indexMap_.addToIndexes(I,this.children_));const te=R.isEmpty()?fc:this.priorityNode_;return new u(R,te,V)}}updateChild(l,p){const I=Yr(l);if(null===I)return p;{(0,Y.hu)(".priority"!==Yr(l)||1===$t(l),".priority must be the last token in a path");const R=this.getImmediateChild(I).updateChild(Di(l),p);return this.updateImmediateChild(I,R)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const p={};let I=0,R=0,V=!0;if(this.forEachChild(xr,(te,pe)=>{p[te]=pe.val(l),I++,V&&u.INTEGER_REGEXP_.test(te)?R=Math.max(R,Number(te)):V=!1}),!l&&V&&R<2*I){const te=[];for(const pe in p)te[pe]=p[pe];return te}return l&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Bd(this.getPriority().val())+":"),this.forEachChild(xr,(p,I)=>{const R=I.hash();""!==R&&(l+=":"+p+":"+R)}),this.lazyHash_=""===l?"":Sa(l)}return this.lazyHash_}getPredecessorChildName(l,p,I){const R=this.resolveIndex_(I);if(R){const V=R.getPredecessorKey(new Or(l,p));return V?V.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const p=this.resolveIndex_(l);if(p){const I=p.minKey();return I&&I.name}return this.children_.minKey()}getFirstChild(l){const p=this.getFirstChildName(l);return p?new Or(p,this.children_.get(p)):null}getLastChildName(l){const p=this.resolveIndex_(l);if(p){const I=p.maxKey();return I&&I.name}return this.children_.maxKey()}getLastChild(l){const p=this.getLastChildName(l);return p?new Or(p,this.children_.get(p)):null}forEachChild(l,p){const I=this.resolveIndex_(l);return I?I.inorderTraversal(R=>p(R.name,R.node)):this.children_.inorderTraversal(p)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,p){const I=this.resolveIndex_(p);if(I)return I.getIteratorFrom(l,R=>R);{const R=this.children_.getIteratorFrom(l.name,Or.Wrap);let V=R.peek();for(;null!=V&&p.compare(V,l)<0;)R.getNext(),V=R.peek();return R}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,p){const I=this.resolveIndex_(p);if(I)return I.getReverseIteratorFrom(l,R=>R);{const R=this.children_.getReverseIteratorFrom(l.name,Or.Wrap);let V=R.peek();for(;null!=V&&p.compare(V,l)>0;)R.getNext(),V=R.peek();return R}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===wu?-1:0}withIndex(l){if(l===Bo||this.indexMap_.hasIndex(l))return this;{const p=this.indexMap_.addIndex(l,this.children_);return new u(this.children_,this.priorityNode_,p)}}isIndexed(l){return l===Bo||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const p=l;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const I=this.getIterator(xr),R=p.getIterator(xr);let V=I.getNext(),te=R.getNext();for(;V&&te;){if(V.name!==te.name||!V.node.equals(te.node))return!1;V=I.getNext(),te=R.getNext()}return null===V&&null===te}return!1}return!1}}resolveIndex_(l){return l===Bo?null:this.indexMap_.get(l.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const wu=new class no extends ni{constructor(){super(new Zo(rd),ni.EMPTY_NODE,ps.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return ni.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Or,{MIN:{value:new Or(Vr,ni.EMPTY_NODE)},MAX:{value:new Or(Ro,wu)}}),Qc.__EMPTY_NODE=ni.EMPTY_NODE,Fc.__childrenNodeConstructor=ni,function Eu(u){id=u}(wu),function ol(u){Bs=u}(wu);const Al=!0;function Hr(u,a=null){if(null===u)return ni.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(a=u[".priority"]),(0,Y.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new Fc(u,Hr(a));if(u instanceof Array||!Al){let l=ni.EMPTY_NODE;return Sr(u,(p,I)=>{if((0,Y.r3)(u,p)&&"."!==p.substring(0,1)){const R=Hr(I);(R.isLeafNode()||!R.isEmpty())&&(l=l.updateImmediateChild(p,R))}}),l.updatePriority(Hr(a))}{const l=[];let p=!1;if(Sr(u,(V,te)=>{if("."!==V.substring(0,1)){const pe=Hr(te);pe.isEmpty()||(p=p||!pe.getPriority().isEmpty(),l.push(new Or(V,pe)))}}),0===l.length)return ni.EMPTY_NODE;const R=Ui(l,nd,V=>V.name,rd);if(p){const V=Ui(l,xr.getCompare());return new ni(R,Hr(a),new ps({".priority":V},{".priority":xr}))}return new ni(R,Hr(a),ps.Default)}}!function sd(u){Iu=u}(Hr);class ro extends hc{constructor(a){super(),this.indexPath_=a,(0,Y.hu)(!Pr(a)&&".priority"!==Yr(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const p=this.extractChild(a.node),I=this.extractChild(l.node),R=p.compareTo(I);return 0===R?xa(a.name,l.name):R}makePost(a,l){const p=Hr(a),I=ni.EMPTY_NODE.updateChild(this.indexPath_,p);return new Or(l,I)}maxPost(){const a=ni.EMPTY_NODE.updateChild(this.indexPath_,wu);return new Or(Ro,a)}toString(){return la(this.indexPath_,0).join("/")}}const pc=new class Lc extends hc{compare(a,l){const p=a.node.compareTo(l.node);return 0===p?xa(a.name,l.name):p}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return Or.MIN}maxPost(){return Or.MAX}makePost(a,l){const p=Hr(a);return new Or(l,p)}toString(){return".value"}};function Uo(u){return{type:"value",snapshotNode:u}}function Ma(u,a){return{type:"child_added",snapshotNode:a,childName:u}}function Xo(u,a){return{type:"child_removed",snapshotNode:a,childName:u}}function Eo(u,a,l){return{type:"child_changed",snapshotNode:a,childName:u,oldSnap:l}}class Ha{constructor(a){this.index_=a}updateChild(a,l,p,I,R,V){(0,Y.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const te=a.getImmediateChild(l);return te.getChild(I).equals(p.getChild(I))&&te.isEmpty()===p.isEmpty()||(null!=V&&(p.isEmpty()?a.hasChild(l)?V.trackChildChange(Xo(l,te)):(0,Y.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):te.isEmpty()?V.trackChildChange(Ma(l,p)):V.trackChildChange(Eo(l,p,te))),a.isLeafNode()&&p.isEmpty())?a:a.updateImmediateChild(l,p).withIndex(this.index_)}updateFullNode(a,l,p){return null!=p&&(a.isLeafNode()||a.forEachChild(xr,(I,R)=>{l.hasChild(I)||p.trackChildChange(Xo(I,R))}),l.isLeafNode()||l.forEachChild(xr,(I,R)=>{if(a.hasChild(I)){const V=a.getImmediateChild(I);V.equals(R)||p.trackChildChange(Eo(I,R,V))}else p.trackChildChange(Ma(I,R))})),l.withIndex(this.index_)}updatePriority(a,l){return a.isEmpty()?ni.EMPTY_NODE:a.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Qo{constructor(a){this.indexedFilter_=new Ha(a.getIndex()),this.index_=a.getIndex(),this.startPost_=Qo.getStartPost_(a),this.endPost_=Qo.getEndPost_(a),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){const l=this.startIsInclusive_?this.index_.compare(this.getStartPost(),a)<=0:this.index_.compare(this.getStartPost(),a)<0,p=this.endIsInclusive_?this.index_.compare(a,this.getEndPost())<=0:this.index_.compare(a,this.getEndPost())<0;return l&&p}updateChild(a,l,p,I,R,V){return this.matches(new Or(l,p))||(p=ni.EMPTY_NODE),this.indexedFilter_.updateChild(a,l,p,I,R,V)}updateFullNode(a,l,p){l.isLeafNode()&&(l=ni.EMPTY_NODE);let I=l.withIndex(this.index_);I=I.updatePriority(ni.EMPTY_NODE);const R=this;return l.forEachChild(xr,(V,te)=>{R.matches(new Or(V,te))||(I=I.updateImmediateChild(V,ni.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,I,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const l=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),l)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const l=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),l)}return a.getIndex().maxPost()}}class tu{constructor(a){this.withinDirectionalStart=l=>this.reverse_?this.withinEndPost(l):this.withinStartPost(l),this.withinDirectionalEnd=l=>this.reverse_?this.withinStartPost(l):this.withinEndPost(l),this.withinStartPost=l=>{const p=this.index_.compare(this.rangedFilter_.getStartPost(),l);return this.startIsInclusive_?p<=0:p<0},this.withinEndPost=l=>{const p=this.index_.compare(l,this.rangedFilter_.getEndPost());return this.endIsInclusive_?p<=0:p<0},this.rangedFilter_=new Qo(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft(),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}updateChild(a,l,p,I,R,V){return this.rangedFilter_.matches(new Or(l,p))||(p=ni.EMPTY_NODE),a.getImmediateChild(l).equals(p)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,l,p,I,R,V):this.fullLimitUpdateChild_(a,l,p,R,V)}updateFullNode(a,l,p){let I;if(l.isLeafNode()||l.isEmpty())I=ni.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let R;I=ni.EMPTY_NODE.withIndex(this.index_),R=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let V=0;for(;R.hasNext()&&V<this.limit_;){const te=R.getNext();if(this.withinDirectionalStart(te)){if(!this.withinDirectionalEnd(te))break;I=I.updateImmediateChild(te.name,te.node),V++}}}else{let R;I=l.withIndex(this.index_),I=I.updatePriority(ni.EMPTY_NODE),R=this.reverse_?I.getReverseIterator(this.index_):I.getIterator(this.index_);let V=0;for(;R.hasNext();){const te=R.getNext();V<this.limit_&&this.withinDirectionalStart(te)&&this.withinDirectionalEnd(te)?V++:I=I.updateImmediateChild(te.name,ni.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,I,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,l,p,I,R){let V;if(this.reverse_){const Yt=this.index_.getCompare();V=(sn,Rn)=>Yt(Rn,sn)}else V=this.index_.getCompare();const te=a;(0,Y.hu)(te.numChildren()===this.limit_,"");const pe=new Or(l,p),Pe=this.reverse_?te.getFirstChild(this.index_):te.getLastChild(this.index_),Ft=this.rangedFilter_.matches(pe);if(te.hasChild(l)){const Yt=te.getImmediateChild(l);let sn=I.getChildAfterChild(this.index_,Pe,this.reverse_);for(;null!=sn&&(sn.name===l||te.hasChild(sn.name));)sn=I.getChildAfterChild(this.index_,sn,this.reverse_);const Rn=null==sn?1:V(sn,pe);if(Ft&&!p.isEmpty()&&Rn>=0)return null!=R&&R.trackChildChange(Eo(l,p,Yt)),te.updateImmediateChild(l,p);{null!=R&&R.trackChildChange(Xo(l,Yt));const Mr=te.updateImmediateChild(l,ni.EMPTY_NODE);return null!=sn&&this.rangedFilter_.matches(sn)?(null!=R&&R.trackChildChange(Ma(sn.name,sn.node)),Mr.updateImmediateChild(sn.name,sn.node)):Mr}}return p.isEmpty()?a:Ft&&V(Pe,pe)>=0?(null!=R&&(R.trackChildChange(Xo(Pe.name,Pe.node)),R.trackChildChange(Ma(l,p))),te.updateImmediateChild(l,p).updateImmediateChild(Pe.name,ni.EMPTY_NODE)):a}}class za{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ro}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Y.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xr}copy(){const a=new za;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.startAfterSet_=this.startAfterSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.endBeforeSet_=this.endBeforeSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function Z(u,a,l){const p=u.copy();return p.startSet_=!0,void 0===a&&(a=null),p.indexStartValue_=a,null!=l?(p.startNameSet_=!0,p.indexStartName_=l):(p.startNameSet_=!1,p.indexStartName_=""),p}function ct(u,a,l){const p=u.copy();return p.endSet_=!0,void 0===a&&(a=null),p.indexEndValue_=a,void 0!==l?(p.endNameSet_=!0,p.indexEndName_=l):(p.endNameSet_=!1,p.indexEndName_=""),p}function Wt(u,a){const l=u.copy();return l.index_=a,l}function Un(u){const a={};if(u.isDefault())return a;let l;if(u.index_===xr?l="$priority":u.index_===pc?l="$value":u.index_===Bo?l="$key":((0,Y.hu)(u.index_ instanceof ro,"Unrecognized index type!"),l=u.index_.toString()),a.orderBy=(0,Y.Wl)(l),u.startSet_){const p=u.startAfterSet_?"startAfter":"startAt";a[p]=(0,Y.Wl)(u.indexStartValue_),u.startNameSet_&&(a[p]+=","+(0,Y.Wl)(u.indexStartName_))}if(u.endSet_){const p=u.endBeforeSet_?"endBefore":"endAt";a[p]=(0,Y.Wl)(u.indexEndValue_),u.endNameSet_&&(a[p]+=","+(0,Y.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?a.limitToFirst=u.limit_:a.limitToLast=u.limit_),a}function Nn(u){const a={};if(u.startSet_&&(a.sp=u.indexStartValue_,u.startNameSet_&&(a.sn=u.indexStartName_),a.sin=!u.startAfterSet_),u.endSet_&&(a.ep=u.indexEndValue_,u.endNameSet_&&(a.en=u.indexEndName_),a.ein=!u.endBeforeSet_),u.limitSet_){a.l=u.limit_;let l=u.viewFrom_;""===l&&(l=u.isViewFromLeft()?"l":"r"),a.vf=l}return u.index_!==xr&&(a.i=u.index_.toString()),a}class ir extends Xc{constructor(a,l,p,I){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=I,this.log_=xo("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,Y.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,p,I){const R=a._path.toString();this.log_("Listen called for "+R+" "+a._queryIdentifier);const V=ir.getListenId_(a,p),te={};this.listens_[V]=te;const pe=Un(a._queryParams);this.restRequest_(R+".json",pe,(Pe,Ft)=>{let Yt=Ft;if(404===Pe&&(Yt=null,Pe=null),null===Pe&&this.onDataUpdate_(R,Yt,!1,p),(0,Y.DV)(this.listens_,V)===te){let sn;sn=Pe?401===Pe?"permission_denied":"rest_error:"+Pe:"ok",I(sn,null)}})}unlisten(a,l){const p=ir.getListenId_(a,l);delete this.listens_[p]}get(a){const l=Un(a._queryParams),p=a._path.toString(),I=new Y.BH;return this.restRequest_(p+".json",l,(R,V)=>{let te=V;404===R&&(te=null,R=null),null===R?(this.onDataUpdate_(p,te,!1,null),I.resolve(te)):I.reject(new Error(te))}),I.promise}refreshAuthToken(a){}restRequest_(a,l={},p){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([I,R])=>{I&&I.accessToken&&(l.auth=I.accessToken),R&&R.token&&(l.ac=R.token);const V=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,Y.xO)(l);this.log_("Sending REST request for "+V);const te=new XMLHttpRequest;te.onreadystatechange=()=>{if(p&&4===te.readyState){this.log_("REST Response for "+V+" received. status:",te.status,"response:",te.responseText);let pe=null;if(te.status>=200&&te.status<300){try{pe=(0,Y.cI)(te.responseText)}catch{hs("Failed to parse JSON response for "+V+": "+te.responseText)}p(null,pe)}else 401!==te.status&&404!==te.status&&hs("Got unsuccessful REST response for "+V+" Status: "+te.status),p(te.status);p=null}},te.open("GET",V,!0),te.send()})}}class jr{constructor(){this.rootNode_=ni.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function Nr(){return{value:null,children:new Map}}function Po(u,a,l){if(Pr(a))u.value=l,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(a,l);else{const p=Yr(a);u.children.has(p)||u.children.set(p,Nr()),Po(u.children.get(p),a=Di(a),l)}}function ws(u,a){if(Pr(a))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const l=u.value;return u.value=null,l.forEachChild(xr,(p,I)=>{Po(u,new qr(p),I)}),ws(u,a)}}if(u.children.size>0){const l=Yr(a);return a=Di(a),u.children.has(l)&&ws(u.children.get(l),a)&&u.children.delete(l),0===u.children.size}return!0}function xl(u,a,l){null!==u.value?l(a,u.value):function Vs(u,a){u.children.forEach((l,p)=>{a(p,l)})}(u,(p,I)=>{xl(I,new qr(a.toString()+"/"+p),l)})}class Wl{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&Sr(this.last_,(p,I)=>{l[p]=l[p]-I}),this.last_=a,l}}class Vd{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Wl(a);const p=1e4+2e4*Math.random();Ar(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const a=this.statsListener_.get(),l={};let p=!1;Sr(a,(I,R)=>{R>0&&(0,Y.r3)(this.statsToReport_,I)&&(l[I]=R,p=!0)}),p&&this.server_.reportStats(l),Ar(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var io=(()=>{return(u=io||(io={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",io;var u})();function hi(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class Si{constructor(a,l,p){this.path=a,this.affectedTree=l,this.revert=p,this.type=io.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(Pr(this.path)){if(null!=this.affectedTree.value)return(0,Y.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new qr(a));return new Si(Rr(),l,this.revert)}}return(0,Y.hu)(Yr(this.path)===a,"operationForChild called for unrelated child."),new Si(Di(this.path),this.affectedTree,this.revert)}}class al{constructor(a,l){this.source=a,this.path=l,this.type=io.LISTEN_COMPLETE}operationForChild(a){return Pr(this.path)?new al(this.source,Rr()):new al(this.source,Di(this.path))}}class _a{constructor(a,l,p){this.source=a,this.path=l,this.snap=p,this.type=io.OVERWRITE}operationForChild(a){return Pr(this.path)?new _a(this.source,Rr(),this.snap.getImmediateChild(a)):new _a(this.source,Di(this.path),this.snap)}}class Kl{constructor(a,l,p){this.source=a,this.path=l,this.children=p,this.type=io.MERGE}operationForChild(a){if(Pr(this.path)){const l=this.children.subtree(new qr(a));return l.isEmpty()?null:l.value?new _a(this.source,Rr(),l.value):new Kl(this.source,Rr(),l)}return(0,Y.hu)(Yr(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new Kl(this.source,Di(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ql{constructor(a,l,p){this.node_=a,this.fullyInitialized_=l,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(Pr(a))return this.isFullyInitialized()&&!this.filtered_;const l=Yr(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class xh{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function bu(u,a,l,p,I,R){const V=p.filter(te=>te.type===l);V.sort((te,pe)=>function Cp(u,a,l){if(null==a.childName||null==l.childName)throw(0,Y.g5)("Should only compare child_ events.");const p=new Or(a.childName,a.snapshotNode),I=new Or(l.childName,l.snapshotNode);return u.index_.compare(p,I)}(u,te,pe)),V.forEach(te=>{const pe=function Rh(u,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,u.index_)),a}(u,te,R);I.forEach(Pe=>{Pe.respondsTo(te.type)&&a.push(Pe.createEvent(pe,u.query_))})})}function Mh(u,a){return{eventCache:u,serverCache:a}}function Rl(u,a,l,p){return Mh(new ql(a,l,p),u.serverCache)}function Ph(u,a,l,p){return Mh(u.eventCache,new ql(a,l,p))}function od(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function ll(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let Hd;class gs{constructor(a,l=(()=>(Hd||(Hd=new Zo(Lo)),Hd))()){this.value=a,this.children=l}static fromObject(a){let l=new gs(null);return Sr(a,(p,I)=>{l=l.set(new qr(p),I)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:Rr(),value:this.value};if(Pr(a))return null;{const p=Yr(a),I=this.children.get(p);if(null!==I){const R=I.findRootMostMatchingPathAndValue(Di(a),l);return null!=R?{path:ui(new qr(p),R.path),value:R.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(Pr(a))return this;{const l=Yr(a),p=this.children.get(l);return null!==p?p.subtree(Di(a)):new gs(null)}}set(a,l){if(Pr(a))return new gs(l,this.children);{const p=Yr(a),R=(this.children.get(p)||new gs(null)).set(Di(a),l),V=this.children.insert(p,R);return new gs(this.value,V)}}remove(a){if(Pr(a))return this.children.isEmpty()?new gs(null):new gs(null,this.children);{const l=Yr(a),p=this.children.get(l);if(p){const I=p.remove(Di(a));let R;return R=I.isEmpty()?this.children.remove(l):this.children.insert(l,I),null===this.value&&R.isEmpty()?new gs(null):new gs(this.value,R)}return this}}get(a){if(Pr(a))return this.value;{const l=Yr(a),p=this.children.get(l);return p?p.get(Di(a)):null}}setTree(a,l){if(Pr(a))return l;{const p=Yr(a),R=(this.children.get(p)||new gs(null)).setTree(Di(a),l);let V;return V=R.isEmpty()?this.children.remove(p):this.children.insert(p,R),new gs(this.value,V)}}fold(a){return this.fold_(Rr(),a)}fold_(a,l){const p={};return this.children.inorderTraversal((I,R)=>{p[I]=R.fold_(ui(a,I),l)}),l(a,this.value,p)}findOnPath(a,l){return this.findOnPath_(a,Rr(),l)}findOnPath_(a,l,p){const I=!!this.value&&p(l,this.value);if(I)return I;if(Pr(a))return null;{const R=Yr(a),V=this.children.get(R);return V?V.findOnPath_(Di(a),ui(l,R),p):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,Rr(),l)}foreachOnPath_(a,l,p){if(Pr(a))return this;{this.value&&p(l,this.value);const I=Yr(a),R=this.children.get(I);return R?R.foreachOnPath_(Di(a),ui(l,I),p):new gs(null)}}foreach(a){this.foreach_(Rr(),a)}foreach_(a,l){this.children.inorderTraversal((p,I)=>{I.foreach_(ui(a,p),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,p)=>{p.value&&a(l,p.value)})}}class Ga{constructor(a){this.writeTree_=a}static empty(){return new Ga(new gs(null))}}function Pa(u,a,l){if(Pr(a))return new Ga(new gs(l));{const p=u.writeTree_.findRootMostValueAndPath(a);if(null!=p){const I=p.path;let R=p.value;const V=S(I,a);return R=R.updateChild(V,l),new Ga(u.writeTree_.set(I,R))}{const I=new gs(l),R=u.writeTree_.setTree(a,I);return new Ga(R)}}}function $c(u,a,l){let p=u;return Sr(l,(I,R)=>{p=Pa(p,ui(a,I),R)}),p}function Ml(u,a){if(Pr(a))return Ga.empty();{const l=u.writeTree_.setTree(a,new gs(null));return new Ga(l)}}function gc(u,a){return null!=mc(u,a)}function mc(u,a){const l=u.writeTree_.findRootMostValueAndPath(a);return null!=l?u.writeTree_.get(l.path).getChild(S(l.path,a)):null}function Oh(u){const a=[],l=u.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(xr,(p,I)=>{a.push(new Or(p,I))}):u.writeTree_.children.inorderTraversal((p,I)=>{null!=I.value&&a.push(new Or(p,I.value))}),a}function Ea(u,a){if(Pr(a))return u;{const l=mc(u,a);return new Ga(null!=l?new gs(l):u.writeTree_.subtree(a))}}function ru(u){return u.writeTree_.isEmpty()}function Pl(u,a){return ld(Rr(),u.writeTree_,a)}function ld(u,a,l){if(null!=a.value)return l.updateChild(u,a.value);{let p=null;return a.children.inorderTraversal((I,R)=>{".priority"===I?((0,Y.hu)(null!==R.value,"Priority writes must always be leaf nodes"),p=R.value):l=ld(ui(u,I),R,l)}),!l.getChild(u).isEmpty()&&null!==p&&(l=l.updateChild(ui(u,".priority"),p)),l}}function yc(u,a){return Rf(a,u)}function Du(u,a){if(u.snap)return O(u.path,a);for(const l in u.children)if(u.children.hasOwnProperty(l)&&O(ui(u.path,l),a))return!0;return!1}function Zl(u){return u.visible}function hd(u,a,l){let p=Ga.empty();for(let I=0;I<u.length;++I){const R=u[I];if(a(R)){const V=R.path;let te;if(R.snap)O(l,V)?(te=S(l,V),p=Pa(p,te,R.snap)):O(V,l)&&(te=S(V,l),p=Pa(p,Rr(),R.snap.getChild(te)));else{if(!R.children)throw(0,Y.g5)("WriteRecord should have .snap or .children");if(O(l,V))te=S(l,V),p=$c(p,te,R.children);else if(O(V,l))if(te=S(V,l),Pr(te))p=$c(p,Rr(),R.children);else{const pe=(0,Y.DV)(R.children,Yr(te));if(pe){const Pe=pe.getChild(Di(te));p=Pa(p,Rr(),Pe)}}}}}return p}function Tu(u,a,l,p,I){if(p||I){const R=Ea(u.visibleWrites,a);return!I&&ru(R)?l:I||null!=l||gc(R,Rr())?Pl(hd(u.allWrites,function(Pe){return(Pe.visible||I)&&(!p||!~p.indexOf(Pe.writeId))&&(O(Pe.path,a)||O(a,Pe.path))},a),l||ni.EMPTY_NODE):null}{const R=mc(u.visibleWrites,a);if(null!=R)return R;{const V=Ea(u.visibleWrites,a);return ru(V)?l:null!=l||gc(V,Rr())?Pl(V,l||ni.EMPTY_NODE):null}}}function js(u,a,l,p){return Tu(u.writeTree,u.treePath,a,l,p)}function fd(u,a){return function vc(u,a,l){let p=ni.EMPTY_NODE;const I=mc(u.visibleWrites,a);if(I)return I.isLeafNode()||I.forEachChild(xr,(R,V)=>{p=p.updateImmediateChild(R,V)}),p;if(l){const R=Ea(u.visibleWrites,a);return l.forEachChild(xr,(V,te)=>{const pe=Pl(Ea(R,new qr(V)),te);p=p.updateImmediateChild(V,pe)}),Oh(R).forEach(V=>{p=p.updateImmediateChild(V.name,V.node)}),p}return Oh(Ea(u.visibleWrites,a)).forEach(V=>{p=p.updateImmediateChild(V.name,V.node)}),p}(u.writeTree,u.treePath,a)}function Xl(u,a,l,p){return function kh(u,a,l,p,I){(0,Y.hu)(p||I,"Either existingEventSnap or existingServerSnap must exist");const R=ui(a,l);if(gc(u.visibleWrites,R))return null;{const V=Ea(u.visibleWrites,R);return ru(V)?I.getChild(l):Pl(V,I.getChild(l))}}(u.writeTree,u.treePath,a,l,p)}function iu(u,a){return function bp(u,a){return mc(u.visibleWrites,a)}(u.writeTree,ui(u.treePath,a))}function zd(u,a,l){return function Nh(u,a,l,p){const I=ui(a,l),R=mc(u.visibleWrites,I);return null!=R?R:p.isCompleteForChild(l)?Pl(Ea(u.visibleWrites,I),p.getNode().getImmediateChild(l)):null}(u.writeTree,u.treePath,a,l)}function Su(u,a){return Rf(ui(u.treePath,a),u.writeTree)}function Rf(u,a){return{treePath:u,writeTree:a}}class Fh{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,p=a.childName;(0,Y.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,Y.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const I=this.changeMap.get(p);if(I){const R=I.type;if("child_added"===l&&"child_removed"===R)this.changeMap.set(p,Eo(p,a.snapshotNode,I.snapshotNode));else if("child_removed"===l&&"child_added"===R)this.changeMap.delete(p);else if("child_removed"===l&&"child_changed"===R)this.changeMap.set(p,Xo(p,I.oldSnap));else if("child_changed"===l&&"child_added"===R)this.changeMap.set(p,Ma(p,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==R)throw(0,Y.g5)("Illegal combination of changes: "+a+" occurred after "+I);this.changeMap.set(p,Eo(p,a.snapshotNode,I.oldSnap))}}else this.changeMap.set(p,a)}getChanges(){return Array.from(this.changeMap.values())}}const Lh=new class Zr{getCompleteChild(a){return null}getChildAfterChild(a,l,p){return null}};class Au{constructor(a,l,p=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=p}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const p=null!=this.optCompleteServerCache_?new ql(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zd(this.writes_,a,p)}}getChildAfterChild(a,l,p){const I=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ll(this.viewCache_),R=function Ia(u,a,l,p,I,R){return function _c(u,a,l,p,I,R,V){let te;const pe=Ea(u.visibleWrites,a),Pe=mc(pe,Rr());if(null!=Pe)te=Pe;else{if(null==l)return[];te=Pl(pe,l)}if(te=te.withIndex(V),te.isEmpty()||te.isLeafNode())return[];{const Ft=[],Yt=V.getCompare(),sn=R?te.getReverseIteratorFrom(p,V):te.getIteratorFrom(p,V);let Rn=sn.getNext();for(;Rn&&Ft.length<I;)0!==Yt(Rn,p)&&Ft.push(Rn),Rn=sn.getNext();return Ft}}(u.writeTree,u.treePath,a,l,p,I,R)}(this.writes_,I,l,1,p,a);return 0===R.length?null:R[0]}}function Wd(u,a,l,p,I,R){const V=a.eventCache;if(null!=iu(p,l))return a;{let te,pe;if(Pr(l))if((0,Y.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const Pe=ll(a),Yt=fd(p,Pe instanceof ni?Pe:ni.EMPTY_NODE);te=u.filter.updateFullNode(a.eventCache.getNode(),Yt,R)}else{const Pe=js(p,ll(a));te=u.filter.updateFullNode(a.eventCache.getNode(),Pe,R)}else{const Pe=Yr(l);if(".priority"===Pe){(0,Y.hu)(1===$t(l),"Can't have a priority with additional path components");const Ft=V.getNode();pe=a.serverCache.getNode();const Yt=Xl(p,l,Ft,pe);te=null!=Yt?u.filter.updatePriority(Ft,Yt):V.getNode()}else{const Ft=Di(l);let Yt;if(V.isCompleteForChild(Pe)){pe=a.serverCache.getNode();const sn=Xl(p,l,V.getNode(),pe);Yt=null!=sn?V.getNode().getImmediateChild(Pe).updateChild(Ft,sn):V.getNode().getImmediateChild(Pe)}else Yt=zd(p,Pe,a.serverCache);te=null!=Yt?u.filter.updateChild(V.getNode(),Pe,Yt,Ft,I,R):V.getNode()}}return Rl(a,te,V.isFullyInitialized()||Pr(l),u.filter.filtersNodes())}}function pd(u,a,l,p,I,R,V,te){const pe=a.serverCache;let Pe;const Ft=V?u.filter:u.filter.getIndexedFilter();if(Pr(l))Pe=Ft.updateFullNode(pe.getNode(),p,null);else if(Ft.filtersNodes()&&!pe.isFiltered()){const Rn=pe.getNode().updateChild(l,p);Pe=Ft.updateFullNode(pe.getNode(),Rn,null)}else{const Rn=Yr(l);if(!pe.isCompleteForPath(l)&&$t(l)>1)return a;const Zn=Di(l),oi=pe.getNode().getImmediateChild(Rn).updateChild(Zn,p);Pe=".priority"===Rn?Ft.updatePriority(pe.getNode(),oi):Ft.updateChild(pe.getNode(),Rn,oi,Zn,Lh,null)}const Yt=Ph(a,Pe,pe.isFullyInitialized()||Pr(l),Ft.filtersNodes());return Wd(u,Yt,l,I,new Au(I,Yt,R),te)}function xu(u,a,l,p,I,R,V){const te=a.eventCache;let pe,Pe;const Ft=new Au(I,a,R);if(Pr(l))Pe=u.filter.updateFullNode(a.eventCache.getNode(),p,V),pe=Rl(a,Pe,!0,u.filter.filtersNodes());else{const Yt=Yr(l);if(".priority"===Yt)Pe=u.filter.updatePriority(a.eventCache.getNode(),p),pe=Rl(a,Pe,te.isFullyInitialized(),te.isFiltered());else{const sn=Di(l),Rn=te.getNode().getImmediateChild(Yt);let Zn;if(Pr(sn))Zn=p;else{const Mr=Ft.getCompleteChild(Yt);Zn=null!=Mr?".priority"===to(sn)&&Mr.getChild(Yo(sn)).isEmpty()?Mr:Mr.updateChild(sn,p):ni.EMPTY_NODE}pe=Rn.equals(Zn)?a:Rl(a,u.filter.updateChild(te.getNode(),Yt,Zn,sn,Ft,V),te.isFullyInitialized(),u.filter.filtersNodes())}}return pe}function Ic(u,a){return u.eventCache.isCompleteForChild(a)}function Kd(u,a,l){return l.foreach((p,I)=>{a=a.updateChild(p,I)}),a}function wc(u,a,l,p,I,R,V,te){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let Pe,pe=a;Pe=Pr(l)?p:new gs(null).setTree(l,p);const Ft=a.serverCache.getNode();return Pe.children.inorderTraversal((Yt,sn)=>{if(Ft.hasChild(Yt)){const Zn=Kd(0,a.serverCache.getNode().getImmediateChild(Yt),sn);pe=pd(u,pe,new qr(Yt),Zn,I,R,V,te)}}),Pe.children.inorderTraversal((Yt,sn)=>{const Rn=!a.serverCache.isCompleteForChild(Yt)&&null===sn.value;if(!Ft.hasChild(Yt)&&!Rn){const Mr=Kd(0,a.serverCache.getNode().getImmediateChild(Yt),sn);pe=pd(u,pe,new qr(Yt),Mr,I,R,V,te)}}),pe}class Tp{constructor(a,l){this.query_=a,this.eventRegistrations_=[];const p=this.query_._queryParams,I=new Ha(p.getIndex()),R=function Ud(u){return u.loadsAllData()?new Ha(u.getIndex()):u.hasLimit()?new tu(u):new Qo(u)}(p);this.processor_=function su(u){return{filter:u}}(R);const V=l.serverCache,te=l.eventCache,pe=I.updateFullNode(ni.EMPTY_NODE,V.getNode(),null),Pe=R.updateFullNode(ni.EMPTY_NODE,te.getNode(),null),Ft=new ql(pe,V.isFullyInitialized(),I.filtersNodes()),Yt=new ql(Pe,te.isFullyInitialized(),R.filtersNodes());this.viewCache_=Mh(Yt,Ft),this.eventGenerator_=new xh(this.query_)}get query(){return this.query_}}function Wa(u,a){const l=ll(u.viewCache_);return l&&(u.query._queryParams.loadsAllData()||!Pr(a)&&!l.getImmediateChild(Yr(a)).isEmpty())?l.getChild(a):null}function ms(u){return 0===u.eventRegistrations_.length}function gd(u,a,l){const p=[];if(l){(0,Y.hu)(null==a,"A cancel should cancel all event registrations.");const I=u.query._path;u.eventRegistrations_.forEach(R=>{const V=R.createCancelEvent(l,I);V&&p.push(V)})}if(a){let I=[];for(let R=0;R<u.eventRegistrations_.length;++R){const V=u.eventRegistrations_[R];if(V.matches(a)){if(a.hasAnyCallback()){I=I.concat(u.eventRegistrations_.slice(R+1));break}}else I.push(V)}u.eventRegistrations_=I}else u.eventRegistrations_=[];return p}function kl(u,a,l,p){a.type===io.MERGE&&null!==a.source.queryId&&((0,Y.hu)(ll(u.viewCache_),"We should always have a full cache before handling merges"),(0,Y.hu)(od(u.viewCache_),"Missing event cache, even though we have a server cache"));const I=u.viewCache_,R=function wa(u,a,l,p,I){const R=new Fh;let V,te;if(l.type===io.OVERWRITE){const Pe=l;Pe.source.fromUser?V=xu(u,a,Pe.path,Pe.snap,p,I,R):((0,Y.hu)(Pe.source.fromServer,"Unknown source."),te=Pe.source.tagged||a.serverCache.isFiltered()&&!Pr(Pe.path),V=pd(u,a,Pe.path,Pe.snap,p,I,te,R))}else if(l.type===io.MERGE){const Pe=l;Pe.source.fromUser?V=function ou(u,a,l,p,I,R,V){let te=a;return p.foreach((pe,Pe)=>{const Ft=ui(l,pe);Ic(a,Yr(Ft))&&(te=xu(u,te,Ft,Pe,I,R,V))}),p.foreach((pe,Pe)=>{const Ft=ui(l,pe);Ic(a,Yr(Ft))||(te=xu(u,te,Ft,Pe,I,R,V))}),te}(u,a,Pe.path,Pe.children,p,I,R):((0,Y.hu)(Pe.source.fromServer,"Unknown source."),te=Pe.source.tagged||a.serverCache.isFiltered(),V=wc(u,a,Pe.path,Pe.children,p,I,te,R))}else if(l.type===io.ACK_USER_WRITE){const Pe=l;V=Pe.revert?function Mf(u,a,l,p,I,R){let V;if(null!=iu(p,l))return a;{const te=new Au(p,a,I),pe=a.eventCache.getNode();let Pe;if(Pr(l)||".priority"===Yr(l)){let Ft;if(a.serverCache.isFullyInitialized())Ft=js(p,ll(a));else{const Yt=a.serverCache.getNode();(0,Y.hu)(Yt instanceof ni,"serverChildren would be complete if leaf node"),Ft=fd(p,Yt)}Pe=u.filter.updateFullNode(pe,Ft,R)}else{const Ft=Yr(l);let Yt=zd(p,Ft,a.serverCache);null==Yt&&a.serverCache.isCompleteForChild(Ft)&&(Yt=pe.getImmediateChild(Ft)),Pe=null!=Yt?u.filter.updateChild(pe,Ft,Yt,Di(l),te,R):a.eventCache.getNode().hasChild(Ft)?u.filter.updateChild(pe,Ft,ni.EMPTY_NODE,Di(l),te,R):pe,Pe.isEmpty()&&a.serverCache.isFullyInitialized()&&(V=js(p,ll(a)),V.isLeafNode()&&(Pe=u.filter.updateFullNode(Pe,V,R)))}return V=a.serverCache.isFullyInitialized()||null!=iu(p,Rr()),Rl(a,Pe,V,u.filter.filtersNodes())}}(u,a,Pe.path,p,I,R):function ca(u,a,l,p,I,R,V){if(null!=iu(I,l))return a;const te=a.serverCache.isFiltered(),pe=a.serverCache;if(null!=p.value){if(Pr(l)&&pe.isFullyInitialized()||pe.isCompleteForPath(l))return pd(u,a,l,pe.getNode().getChild(l),I,R,te,V);if(Pr(l)){let Pe=new gs(null);return pe.getNode().forEachChild(Bo,(Ft,Yt)=>{Pe=Pe.set(new qr(Ft),Yt)}),wc(u,a,l,Pe,I,R,te,V)}return a}{let Pe=new gs(null);return p.foreach((Ft,Yt)=>{const sn=ui(l,Ft);pe.isCompleteForPath(sn)&&(Pe=Pe.set(Ft,pe.getNode().getChild(sn)))}),wc(u,a,l,Pe,I,R,te,V)}}(u,a,Pe.path,Pe.affectedTree,p,I,R)}else{if(l.type!==io.LISTEN_COMPLETE)throw(0,Y.g5)("Unknown operation type: "+l.type);V=function Ol(u,a,l,p,I){const R=a.serverCache;return Wd(u,Ph(a,R.getNode(),R.isFullyInitialized()||Pr(l),R.isFiltered()),l,p,Lh,I)}(u,a,l.path,p,R)}const pe=R.getChanges();return function Ec(u,a,l){const p=a.eventCache;if(p.isFullyInitialized()){const I=p.getNode().isLeafNode()||p.getNode().isEmpty(),R=od(u);(l.length>0||!u.eventCache.isFullyInitialized()||I&&!p.getNode().equals(R)||!p.getNode().getPriority().equals(R.getPriority()))&&l.push(Uo(od(a)))}}(a,V,pe),{viewCache:V,changes:pe}}(u.processor_,I,a,l,p);return function Gd(u,a){(0,Y.hu)(a.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,Y.hu)(a.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,R.viewCache),(0,Y.hu)(R.viewCache.serverCache.isFullyInitialized()||!I.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=R.viewCache,lu(u,R.changes,R.viewCache.eventCache.getNode(),null)}function lu(u,a,l,p){return function jd(u,a,l,p){const I=[],R=[];return a.forEach(V=>{"child_changed"===V.type&&u.index_.indexedValueChanged(V.oldSnap,V.snapshotNode)&&R.push(function eu(u,a){return{type:"child_moved",snapshotNode:a,childName:u}}(V.childName,V.snapshotNode))}),bu(u,I,"child_removed",a,p,l),bu(u,I,"child_added",a,p,l),bu(u,I,"child_moved",R,p,l),bu(u,I,"child_changed",a,p,l),bu(u,I,"value",a,p,l),I}(u.eventGenerator_,a,l,p?[p]:u.eventRegistrations_)}let cu,rn;class Nl{constructor(){this.views=new Map}}function yd(u,a,l,p){const I=a.source.queryId;if(null!==I){const R=u.views.get(I);return(0,Y.hu)(null!=R,"SyncTree gave us an op for an invalid query."),kl(R,a,l,p)}{let R=[];for(const V of u.views.values())R=R.concat(kl(V,a,l,p));return R}}function Pf(u,a,l,p,I){const V=u.views.get(a._queryIdentifier);if(!V){let te=js(l,I?p:null),pe=!1;te?pe=!0:p instanceof ni?(te=fd(l,p),pe=!1):(te=ni.EMPTY_NODE,pe=!1);const Pe=Mh(new ql(te,pe,!1),new ql(p,I,!1));return new Tp(a,Pe)}return V}function m(u){const a=[];for(const l of u.views.values())l.query._queryParams.loadsAllData()||a.push(l);return a}function A(u,a){let l=null;for(const p of u.views.values())l=l||Wa(p,a);return l}function K(u,a){return a._queryParams.loadsAllData()?Dt(u):u.views.get(a._queryIdentifier)}function oe(u,a){return null!=K(u,a)}function st(u){return null!=Dt(u)}function Dt(u){for(const a of u.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let ar=1;class Ki{constructor(a){this.listenProvider_=a,this.syncPointTree_=new gs(null),this.pendingWriteTree_=function Dp(){return{visibleWrites:Ga.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Oa(u,a,l,p,I){return function cd(u,a,l,p,I){(0,Y.hu)(p>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===I&&(I=!0),u.allWrites.push({path:a,snap:l,writeId:p,visible:I}),I&&(u.visibleWrites=Pa(u.visibleWrites,a,l)),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p,I),I?Ou(u,new _a({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function Jl(u,a,l=!1){const p=function Yl(u,a){for(let l=0;l<u.allWrites.length;l++){const p=u.allWrites[l];if(p.writeId===a)return p}return null}(u.pendingWriteTree_,a);if(function wo(u,a){const l=u.allWrites.findIndex(te=>te.writeId===a);(0,Y.hu)(l>=0,"removeWrite called with nonexistent writeId.");const p=u.allWrites[l];u.allWrites.splice(l,1);let I=p.visible,R=!1,V=u.allWrites.length-1;for(;I&&V>=0;){const te=u.allWrites[V];te.visible&&(V>=l&&Du(te,p.path)?I=!1:O(p.path,te.path)&&(R=!0)),V--}return!!I&&(R?(function dd(u){u.visibleWrites=hd(u.allWrites,Zl,Rr()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(p.snap?u.visibleWrites=Ml(u.visibleWrites,p.path):Sr(p.children,pe=>{u.visibleWrites=Ml(u.visibleWrites,ui(p.path,pe))}),!0))}(u.pendingWriteTree_,a)){let R=new gs(null);return null!=p.snap?R=R.set(Rr(),!0):Sr(p.children,V=>{R=R.set(new qr(V),!0)}),Ou(u,new Si(p.path,R,l))}return[]}function cs(u,a,l){return Ou(u,new _a({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function ec(u,a,l,p,I=!1){const R=a._path,V=u.syncPointTree_.get(R);let te=[];if(V&&("default"===a._queryIdentifier||oe(V,a))){const pe=function g(u,a,l,p){const I=a._queryIdentifier,R=[];let V=[];const te=st(u);if("default"===I)for(const[pe,Pe]of u.views.entries())V=V.concat(gd(Pe,l,p)),ms(Pe)&&(u.views.delete(pe),Pe.query._queryParams.loadsAllData()||R.push(Pe.query));else{const pe=u.views.get(I);pe&&(V=V.concat(gd(pe,l,p)),ms(pe)&&(u.views.delete(I),pe.query._queryParams.loadsAllData()||R.push(pe.query)))}return te&&!st(u)&&R.push(new(function Ql(){return(0,Y.hu)(cu,"Reference.ts has not been loaded"),cu}())(a._repo,a._path)),{removed:R,events:V}}(V,a,l,p);(function $h(u){return 0===u.views.size})(V)&&(u.syncPointTree_=u.syncPointTree_.remove(R));const Pe=pe.removed;if(te=pe.events,!I){const Ft=-1!==Pe.findIndex(sn=>sn._queryParams.loadsAllData()),Yt=u.syncPointTree_.findOnPath(R,(sn,Rn)=>st(Rn));if(Ft&&!Yt){const sn=u.syncPointTree_.subtree(R);if(!sn.isEmpty()){const Rn=function bg(u){return u.fold((a,l,p)=>{if(l&&st(l))return[Dt(l)];{let I=[];return l&&(I=m(l)),Sr(p,(R,V)=>{I=I.concat(V)}),I}})}(sn);for(let Zn=0;Zn<Rn.length;++Zn){const Mr=Rn[Zn],oi=Mr.query,Mi=Of(u,Mr);u.listenProvider_.startListening(Ts(oi),Jd(u,oi),Mi.hashFn,Mi.onComplete)}}}!Yt&&Pe.length>0&&!p&&(Ft?u.listenProvider_.stopListening(Ts(a),null):Pe.forEach(sn=>{const Rn=u.queryToTagMap.get(Bh(sn));u.listenProvider_.stopListening(Ts(sn),Rn)}))}!function Vh(u,a){for(let l=0;l<a.length;++l){const p=a[l];if(!p._queryParams.loadsAllData()){const I=Bh(p),R=u.queryToTagMap.get(I);u.queryToTagMap.delete(I),u.tagToQueryMap.delete(R)}}}(u,Pe)}return te}function Pu(u,a,l,p){const I=eh(u,p);if(null!=I){const R=ku(I),V=R.path,te=R.queryId,pe=S(V,a);return Uh(u,V,new _a(hi(te),pe,l))}return[]}function vd(u,a,l,p=!1){const I=a._path;let R=null,V=!1;u.syncPointTree_.foreachOnPath(I,(sn,Rn)=>{const Zn=S(sn,I);R=R||A(Rn,Zn),V=V||st(Rn)});let pe,te=u.syncPointTree_.get(I);te?(V=V||st(te),R=R||A(te,Rr())):(te=new Nl,u.syncPointTree_=u.syncPointTree_.set(I,te)),null!=R?pe=!0:(pe=!1,R=ni.EMPTY_NODE,u.syncPointTree_.subtree(I).foreachChild((Rn,Zn)=>{const Mr=A(Zn,Rr());Mr&&(R=R.updateImmediateChild(Rn,Mr))}));const Pe=oe(te,a);if(!Pe&&!a._queryParams.loadsAllData()){const sn=Bh(a);(0,Y.hu)(!u.queryToTagMap.has(sn),"View does not exist, but we have a tag");const Rn=function Xm(){return ar++}();u.queryToTagMap.set(sn,Rn),u.tagToQueryMap.set(Rn,sn)}let Yt=function C(u,a,l,p,I,R){const V=Pf(u,a,p,I,R);return u.views.has(a._queryIdentifier)||u.views.set(a._queryIdentifier,V),function au(u,a){u.eventRegistrations_.push(a)}(V,l),function md(u,a){const l=u.viewCache_.eventCache,p=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(xr,(R,V)=>{p.push(Ma(R,V))}),l.isFullyInitialized()&&p.push(Uo(l.getNode())),lu(u,p,l.getNode(),a)}(V,l)}(te,a,l,yc(u.pendingWriteTree_,I),R,pe);if(!Pe&&!V&&!p){const sn=K(te,a);Yt=Yt.concat(function Ed(u,a,l){const p=a._path,I=Jd(u,a),R=Of(u,l),V=u.listenProvider_.startListening(Ts(a),I,R.hashFn,R.onComplete),te=u.syncPointTree_.subtree(p);if(I)(0,Y.hu)(!st(te.value),"If we're adding a query, it shouldn't be shadowed");else{const pe=te.fold((Pe,Ft,Yt)=>{if(!Pr(Pe)&&Ft&&st(Ft))return[Dt(Ft).query];{let sn=[];return Ft&&(sn=sn.concat(m(Ft).map(Rn=>Rn.query))),Sr(Yt,(Rn,Zn)=>{sn=sn.concat(Zn)}),sn}});for(let Pe=0;Pe<pe.length;++Pe){const Ft=pe[Pe];u.listenProvider_.stopListening(Ts(Ft),Jd(u,Ft))}}return V}(u,a,sn))}return Yt}function _d(u,a,l){const I=u.pendingWriteTree_,R=u.syncPointTree_.findOnPath(a,(V,te)=>{const Pe=A(te,S(V,a));if(Pe)return Pe});return Tu(I,a,R,l,!0)}function Ou(u,a){return Cg(a,u.syncPointTree_,null,yc(u.pendingWriteTree_,Rr()))}function Cg(u,a,l,p){if(Pr(u.path))return Qd(u,a,l,p);{const I=a.get(Rr());null==l&&null!=I&&(l=A(I,Rr()));let R=[];const V=Yr(u.path),te=u.operationForChild(V),pe=a.children.get(V);if(pe&&te){const Pe=l?l.getImmediateChild(V):null,Ft=Su(p,V);R=R.concat(Cg(te,pe,Pe,Ft))}return I&&(R=R.concat(yd(I,u,p,l))),R}}function Qd(u,a,l,p){const I=a.get(Rr());null==l&&null!=I&&(l=A(I,Rr()));let R=[];return a.children.inorderTraversal((V,te)=>{const pe=l?l.getImmediateChild(V):null,Pe=Su(p,V),Ft=u.operationForChild(V);Ft&&(R=R.concat(Qd(Ft,te,pe,Pe)))}),I&&(R=R.concat(yd(I,u,p,l))),R}function Of(u,a){const l=a.query,p=Jd(u,l);return{hashFn:()=>(function qd(u){return u.viewCache_.serverCache.getNode()}(a)||ni.EMPTY_NODE).hash(),onComplete:I=>{if("ok"===I)return p?function Cc(u,a,l){const p=eh(u,l);if(p){const I=ku(p),R=I.path,V=I.queryId,te=S(R,a);return Uh(u,R,new al(hi(V),te))}return[]}(u,l._path,p):function Mu(u,a){return Ou(u,new al({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(u,l._path);{const R=function Q(u,a){let l="Unknown Error";"too_big"===u?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?l="Client doesn't have permission to access the desired data.":"unavailable"===u&&(l="The service is unavailable");const p=new Error(u+" at "+a._path.toString()+": "+l);return p.code=u.toUpperCase(),p}(I,l);return ec(u,l,null,R)}}}}function Jd(u,a){const l=Bh(a);return u.queryToTagMap.get(l)}function Bh(u){return u._path.toString()+"$"+u._queryIdentifier}function eh(u,a){return u.tagToQueryMap.get(a)}function ku(u){const a=u.indexOf("$");return(0,Y.hu)(-1!==a&&a<u.length-1,"Bad queryKey."),{queryId:u.substr(a+1),path:new qr(u.substr(0,a))}}function Uh(u,a,l){const p=u.syncPointTree_.get(a);return(0,Y.hu)(p,"Missing sync point for query tag that we're tracking"),yd(p,l,yc(u.pendingWriteTree_,a),null)}function Ts(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function or(){return(0,Y.hu)(rn,"Reference.ts has not been loaded"),rn}())(u._repo,u._path):u}class tc{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new tc(l)}node(){return this.node_}}class Id{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=ui(this.path_,a);return new Id(this.syncTree_,l)}node(){return _d(this.syncTree_,this.path_)}}const Ap=function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u},wd=function(u,a,l){return u&&"object"==typeof u?((0,Y.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?Nu(u[".sv"],a,l):"object"==typeof u[".sv"]?Dg(u[".sv"],a):void(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},Nu=function(u,a,l){if("timestamp"===u)return l.timestamp;(0,Y.hu)(!1,"Unexpected server value: "+u)},Dg=function(u,a,l){u.hasOwnProperty("increment")||(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const p=u.increment;"number"!=typeof p&&(0,Y.hu)(!1,"Unexpected increment value: "+p);const I=a.node();if((0,Y.hu)(null!==I&&typeof I<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!I.isLeafNode())return p;const V=I.getValue();return"number"!=typeof V?p:V+p},jh=function(u,a,l,p){return xp(a,new Id(l,u),p)},th=function(u,a,l){return xp(u,new tc(a),l)};function xp(u,a,l){const p=u.getPriority().val(),I=wd(p,a.getImmediateChild(".priority"),l);let R;if(u.isLeafNode()){const V=u,te=wd(V.getValue(),a,l);return te!==V.getValue()||I!==V.getPriority().val()?new Fc(te,Hr(I)):u}{const V=u;return R=V,I!==V.getPriority().val()&&(R=R.updatePriority(new Fc(I))),V.forEachChild(xr,(te,pe)=>{const Pe=xp(pe,a.getImmediateChild(te),l);Pe!==pe&&(R=R.updateImmediateChild(te,Pe))}),R}}class uu{constructor(a="",l=null,p={children:{},childCount:0}){this.name=a,this.parent=l,this.node=p}}function du(u,a){let l=a instanceof qr?a:new qr(a),p=u,I=Yr(l);for(;null!==I;){const R=(0,Y.DV)(p.node.children,I)||{children:{},childCount:0};p=new uu(I,p,R),l=Di(l),I=Yr(l)}return p}function Fl(u){return u.node.value}function Hh(u,a){u.node.value=a,Rp(u)}function nh(u){return u.node.childCount>0}function kf(u,a){Sr(u.node.children,(l,p)=>{a(new uu(l,u,p))})}function Nf(u,a,l,p){l&&!p&&a(u),kf(u,I=>{Nf(I,a,!0,p)}),l&&p&&a(u)}function zh(u){return new qr(null===u.parent?u.name:zh(u.parent)+"/"+u.name)}function Rp(u){null!==u.parent&&function Fu(u,a,l){const p=function Tg(u){return void 0===Fl(u)&&!nh(u)}(l),I=(0,Y.r3)(u.node.children,a);p&&I?(delete u.node.children[a],u.node.childCount--,Rp(u)):!p&&!I&&(u.node.children[a]=l.node,u.node.childCount++,Rp(u))}(u.parent,u.name,u)}const Lu=/[\[\].#$\/\u0000-\u001F\u007F]/,Sg=/[\[\].#$\u0000-\u001F\u007F]/,Ff=10485760,Gh=function(u){return"string"==typeof u&&0!==u.length&&!Lu.test(u)},bc=function(u){return"string"==typeof u&&0!==u.length&&!Sg.test(u)},Wh=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!ls(u)||u&&"object"==typeof u&&(0,Y.r3)(u,".sv")},Ka=function(u,a,l,p){p&&void 0===a||$u((0,Y.gK)(u,"value"),a,l)},$u=function(u,a,l){const p=l instanceof qr?new z(l,u):l;if(void 0===a)throw new Error(u+"contains undefined "+Ut(p));if("function"==typeof a)throw new Error(u+"contains a function "+Ut(p)+" with contents = "+a.toString());if(ls(a))throw new Error(u+"contains "+a.toString()+" "+Ut(p));if("string"==typeof a&&a.length>Ff/3&&(0,Y.ug)(a)>Ff)throw new Error(u+"contains a string greater than "+Ff+" utf8 bytes "+Ut(p)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let I=!1,R=!1;if(Sr(a,(V,te)=>{if(".value"===V)I=!0;else if(".priority"!==V&&".sv"!==V&&(R=!0,!Gh(V)))throw new Error(u+" contains an invalid key ("+V+") "+Ut(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function re(u,a){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(a),u.byteLength_+=(0,Y.ug)(a),at(u)})(p,V),$u(u,te,p),function ae(u){const a=u.parts_.pop();u.byteLength_-=(0,Y.ug)(a),u.parts_.length>0&&(u.byteLength_-=1)}(p)}),I&&R)throw new Error(u+' contains ".value" child '+Ut(p)+" in addition to actual children.")}},rc=function(u,a,l,p){if(p&&void 0===a)return;const I=(0,Y.gK)(u,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(I+" must be an object containing the children to replace.");const R=[];Sr(a,(V,te)=>{const pe=new qr(V);if($u(I,te,ui(l,pe)),".priority"===to(pe)&&!Wh(te))throw new Error(I+"contains an invalid value for '"+pe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");R.push(pe)}),function(u,a){let l,p;for(l=0;l<a.length;l++){p=a[l];const R=la(p);for(let V=0;V<R.length;V++)if((".priority"!==R[V]||V!==R.length-1)&&!Gh(R[V]))throw new Error(u+"contains an invalid key ("+R[V]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(x);let I=null;for(l=0;l<a.length;l++){if(p=a[l],null!==I&&O(I,p))throw new Error(u+"contains a path "+I.toString()+" that is ancestor of another path "+p.toString());I=p}}(I,R)},hu=function(u,a,l){if(!l||void 0!==a){if(ls(a))throw new Error((0,Y.gK)(u,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Wh(a))throw new Error((0,Y.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Bc=function(u,a,l,p){if(!(p&&void 0===l||Gh(l)))throw new Error((0,Y.gK)(u,a)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ih=function(u,a,l,p){if(!(p&&void 0===l||bc(l)))throw new Error((0,Y.gK)(u,a)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mp=function(u,a,l,p){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),ih(u,a,l,p)},ul=function(u,a){if(".info"===Yr(a))throw new Error(u+" failed = Can't modify data under /.info/")},Lf=function(u,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!Gh(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),bc(u)}(l))throw new Error((0,Y.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Pp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sh(u,a){let l=null;for(let p=0;p<a.length;p++){const I=a[p],R=I.getPath();null!==l&&!w(R,l.path)&&(u.eventLists_.push(l),l=null),null===l&&(l={events:[],path:R}),l.events.push(I)}l&&u.eventLists_.push(l)}function Kh(u,a,l){sh(u,l),Cd(u,p=>w(p,a))}function dl(u,a,l){sh(u,l),Cd(u,p=>O(p,a)||O(a,p))}function Cd(u,a){u.recursionDepth_++;let l=!0;for(let p=0;p<u.eventLists_.length;p++){const I=u.eventLists_[p];I&&(a(I.path)?(fu(u.eventLists_[p]),u.eventLists_[p]=null):l=!1)}l&&(u.eventLists_=[]),u.recursionDepth_--}function fu(u){for(let a=0;a<u.events.length;a++){const l=u.events[a];if(null!==l){u.events[a]=null;const p=l.getEventRunner();Fo&&as("event: "+l.toString()),en(p)}}}const Bu="repo_interrupt",Jm=25;class Ag{constructor(a,l,p,I){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=p,this.appCheckProvider_=I,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nr(),this.transactionQueueTree_=new uu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xg(u){const l=u.infoData_.getNode(new qr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function qh(u){return Ap({timestamp:xg(u)})}function oh(u,a,l,p,I){u.dataUpdateCount++;const R=new qr(a);l=u.interceptServerDataCallback_?u.interceptServerDataCallback_(a,l):l;let V=[];if(I)if(p){const pe=(0,Y.UI)(l,Pe=>Hr(Pe));V=function Zd(u,a,l,p){const I=eh(u,p);if(I){const R=ku(I),V=R.path,te=R.queryId,pe=S(V,a),Pe=gs.fromObject(l);return Uh(u,V,new Kl(hi(te),pe,Pe))}return[]}(u.serverSyncTree_,R,pe,I)}else{const pe=Hr(l);V=Pu(u.serverSyncTree_,R,pe,I)}else if(p){const pe=(0,Y.UI)(l,Pe=>Hr(Pe));V=function Yd(u,a,l){const p=gs.fromObject(l);return Ou(u,new Kl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,p))}(u.serverSyncTree_,R,pe)}else{const pe=Hr(l);V=cs(u.serverSyncTree_,R,pe)}let te=R;V.length>0&&(te=Dd(u,R)),dl(u.eventQueue_,te,V)}function Ll(u,a){$f(u,"connected",a),!1===a&&function Mg(u){bd(u,"onDisconnectEvents");const a=qh(u),l=Nr();xl(u.onDisconnect_,Rr(),(I,R)=>{const V=jh(I,R,u.serverSyncTree_,a);Po(l,I,V)});let p=[];xl(l,Rr(),(I,R)=>{p=p.concat(cs(u.serverSyncTree_,I,R));const V=Dc(u,I);Dd(u,V)}),u.onDisconnect_=Nr(),dl(u.eventQueue_,Rr(),p)}(u)}function $f(u,a,l){const p=new qr("/.info/"+a),I=Hr(l);u.infoData_.updateSnapshot(p,I);const R=cs(u.infoSyncTree_,p,I);dl(u.eventQueue_,p,R)}function Bf(u){return u.nextWriteId_++}function Rg(u,a,l,p,I){bd(u,"set",{path:a.toString(),value:l,priority:p});const R=qh(u),V=Hr(l,p),te=_d(u.serverSyncTree_,a),pe=th(V,te,R),Pe=Bf(u),Ft=Oa(u.serverSyncTree_,a,pe,Pe,!0);sh(u.eventQueue_,Ft),u.server_.put(a.toString(),V.val(!0),(sn,Rn)=>{const Zn="ok"===sn;Zn||hs("set at "+a+" failed: "+sn);const Mr=Jl(u.serverSyncTree_,Pe,!Zn);dl(u.eventQueue_,a,Mr),pu(0,I,sn,Rn)});const Yt=Dc(u,a);Dd(u,Yt),dl(u.eventQueue_,Yt,[])}function Op(u,a,l){u.server_.onDisconnectCancel(a.toString(),(p,I)=>{"ok"===p&&ws(u.onDisconnect_,a),pu(0,l,p,I)})}function Yh(u,a,l,p){const I=Hr(l);u.server_.onDisconnectPut(a.toString(),I.val(!0),(R,V)=>{"ok"===R&&Po(u.onDisconnect_,a,I),pu(0,p,R,V)})}function Fp(u,a,l){let p;p=".info"===Yr(a._path)?ec(u.infoSyncTree_,a,l):ec(u.serverSyncTree_,a,l),Kh(u.eventQueue_,a._path,p)}function hl(u){u.persistentConnection_&&u.persistentConnection_.interrupt(Bu)}function bd(u,...a){let l="";u.persistentConnection_&&(l=u.persistentConnection_.id+":"),as(l,...a)}function pu(u,a,l,p){a&&en(()=>{if("ok"===l)a(null);else{const I=(l||"error").toUpperCase();let R=I;p&&(R+=": "+p);const V=new Error(R);V.code=I,a(V)}})}function ah(u,a,l){return _d(u.serverSyncTree_,a,l)||ni.EMPTY_NODE}function Uu(u,a=u.transactionQueueTree_){if(a||ch(u,a),Fl(a)){const l=Xr(u,a);(0,Y.hu)(l.length>0,"Sending zero length transaction queue"),l.every(I=>0===I.status)&&function Lp(u,a,l){const p=l.map(Pe=>Pe.currentWriteId),I=ah(u,a,p);let R=I;const V=I.hash();for(let Pe=0;Pe<l.length;Pe++){const Ft=l[Pe];(0,Y.hu)(0===Ft.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ft.status=1,Ft.retryCount++;const Yt=S(a,Ft.path);R=R.updateChild(Yt,Ft.currentOutputSnapshotRaw)}const te=R.val(!0),pe=a;u.server_.put(pe.toString(),te,Pe=>{bd(u,"transaction put response",{path:pe.toString(),status:Pe});let Ft=[];if("ok"===Pe){const Yt=[];for(let sn=0;sn<l.length;sn++)l[sn].status=2,Ft=Ft.concat(Jl(u.serverSyncTree_,l[sn].currentWriteId)),l[sn].onComplete&&Yt.push(()=>l[sn].onComplete(null,!0,l[sn].currentOutputSnapshotResolved)),l[sn].unwatcher();ch(u,du(u.transactionQueueTree_,a)),Uu(u,u.transactionQueueTree_),dl(u.eventQueue_,a,Ft);for(let sn=0;sn<Yt.length;sn++)en(Yt[sn])}else{if("datastale"===Pe)for(let Yt=0;Yt<l.length;Yt++)l[Yt].status=3===l[Yt].status?4:0;else{hs("transaction at "+pe.toString()+" failed: "+Pe);for(let Yt=0;Yt<l.length;Yt++)l[Yt].status=4,l[Yt].abortReason=Pe}Dd(u,a)}},V)}(u,zh(a),l)}else nh(a)&&kf(a,l=>{Uu(u,l)})}function Dd(u,a){const l=$p(u,a),p=zh(l);return function Na(u,a,l){if(0===a.length)return;const p=[];let I=[];const V=a.filter(te=>0===te.status).map(te=>te.currentWriteId);for(let te=0;te<a.length;te++){const pe=a[te],Pe=S(l,pe.path);let Yt,Ft=!1;if((0,Y.hu)(null!==Pe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===pe.status)Ft=!0,Yt=pe.abortReason,I=I.concat(Jl(u.serverSyncTree_,pe.currentWriteId,!0));else if(0===pe.status)if(pe.retryCount>=Jm)Ft=!0,Yt="maxretry",I=I.concat(Jl(u.serverSyncTree_,pe.currentWriteId,!0));else{const sn=ah(u,pe.path,V);pe.currentInputSnapshot=sn;const Rn=a[te].update(sn.val());if(void 0!==Rn){$u("transaction failed: Data returned ",Rn,pe.path);let Zn=Hr(Rn);"object"==typeof Rn&&null!=Rn&&(0,Y.r3)(Rn,".priority")||(Zn=Zn.updatePriority(sn.getPriority()));const oi=pe.currentWriteId,Mi=qh(u),Ms=th(Zn,sn,Mi);pe.currentOutputSnapshotRaw=Zn,pe.currentOutputSnapshotResolved=Ms,pe.currentWriteId=Bf(u),V.splice(V.indexOf(oi),1),I=I.concat(Oa(u.serverSyncTree_,pe.path,Ms,pe.currentWriteId,pe.applyLocally)),I=I.concat(Jl(u.serverSyncTree_,oi,!0))}else Ft=!0,Yt="nodata",I=I.concat(Jl(u.serverSyncTree_,pe.currentWriteId,!0))}dl(u.eventQueue_,l,I),I=[],Ft&&(a[te].status=2,setTimeout(a[te].unwatcher,Math.floor(0)),a[te].onComplete&&p.push("nodata"===Yt?()=>a[te].onComplete(null,!1,a[te].currentInputSnapshot):()=>a[te].onComplete(new Error(Yt),!1,null)))}ch(u,u.transactionQueueTree_);for(let te=0;te<p.length;te++)en(p[te]);Uu(u,u.transactionQueueTree_)}(u,Xr(u,l),p),p}function $p(u,a){let l,p=u.transactionQueueTree_;for(l=Yr(a);null!==l&&void 0===Fl(p);)p=du(p,l),l=Yr(a=Di(a));return p}function Xr(u,a){const l=[];return lh(u,a,l),l.sort((p,I)=>p.order-I.order),l}function lh(u,a,l){const p=Fl(a);if(p)for(let I=0;I<p.length;I++)l.push(p[I]);kf(a,I=>{lh(u,I,l)})}function ch(u,a){const l=Fl(a);if(l){let p=0;for(let I=0;I<l.length;I++)2!==l[I].status&&(l[p]=l[I],p++);l.length=p,Hh(a,l.length>0?l:void 0)}kf(a,p=>{ch(u,p)})}function Dc(u,a){const l=zh($p(u,a)),p=du(u.transactionQueueTree_,a);return function rh(u,a,l){let p=l?u:u.parent;for(;null!==p;){if(a(p))return!0;p=p.parent}}(p,I=>{Vu(u,I)}),Vu(u,p),Nf(p,I=>{Vu(u,I)}),l}function Vu(u,a){const l=Fl(a);if(l){const p=[];let I=[],R=-1;for(let V=0;V<l.length;V++)3===l[V].status||(1===l[V].status?((0,Y.hu)(R===V-1,"All SENT items should be at beginning of queue."),R=V,l[V].status=3,l[V].abortReason="set"):((0,Y.hu)(0===l[V].status,"Unexpected transaction status in abort"),l[V].unwatcher(),I=I.concat(Jl(u.serverSyncTree_,l[V].currentWriteId,!0)),l[V].onComplete&&p.push(l[V].onComplete.bind(null,new Error("set"),!1,null))));-1===R?Hh(a,void 0):l.length=R+1,dl(u.eventQueue_,zh(a),I);for(let V=0;V<p.length;V++)en(p[V])}}const Bp=function(u,a){const l=Td(u),p=l.namespace;return"firebase.com"===l.domain&&Zs(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==l.domain&&Zs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new _l(l.host,l.secure,p,"ws"===l.scheme||"wss"===l.scheme,a,"",p!==l.subdomain),path:new qr(l.pathString)}},Td=function(u){let a="",l="",p="",I="",R="",V=!0,te="https",pe=443;if("string"==typeof u){let Pe=u.indexOf("//");Pe>=0&&(te=u.substring(0,Pe-1),u=u.substring(Pe+2));let Ft=u.indexOf("/");-1===Ft&&(Ft=u.length);let Yt=u.indexOf("?");-1===Yt&&(Yt=u.length),a=u.substring(0,Math.min(Ft,Yt)),Ft<Yt&&(I=function Pg(u){let a="";const l=u.split("/");for(let p=0;p<l.length;p++)if(l[p].length>0){let I=l[p];try{I=decodeURIComponent(I.replace(/\+/g," "))}catch{}a+="/"+I}return a}(u.substring(Ft,Yt)));const sn=function ju(u){const a={};"?"===u.charAt(0)&&(u=u.substring(1));for(const l of u.split("&")){if(0===l.length)continue;const p=l.split("=");2===p.length?a[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):hs(`Invalid query segment '${l}' in query '${u}'`)}return a}(u.substring(Math.min(u.length,Yt)));Pe=a.indexOf(":"),Pe>=0?(V="https"===te||"wss"===te,pe=parseInt(a.substring(Pe+1),10)):Pe=a.length;const Rn=a.slice(0,Pe);if("localhost"===Rn.toLowerCase())l="localhost";else if(Rn.split(".").length<=2)l=Rn;else{const Zn=a.indexOf(".");p=a.substring(0,Zn).toLowerCase(),l=a.substring(Zn+1),R=p}"ns"in sn&&(R=sn.ns)}return{host:a,port:pe,domain:l,subdomain:p,secure:V,scheme:te,pathString:I,namespace:R}},Up="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Hu=function(){let u=0;const a=[];return function(l){const p=l===u;let I;u=l;const R=new Array(8);for(I=7;I>=0;I--)R[I]=Up.charAt(l%64),l=Math.floor(l/64);(0,Y.hu)(0===l,"Cannot push at time == 0");let V=R.join("");if(p){for(I=11;I>=0&&63===a[I];I--)a[I]=0;a[I]++}else for(I=0;I<12;I++)a[I]=Math.floor(64*Math.random());for(I=0;I<12;I++)V+=Up.charAt(a[I]);return(0,Y.hu)(20===V.length,"nextPushId: Length should be 20."),V}}();class Og{constructor(a,l,p,I){this.eventType=a,this.eventRegistration=l,this.snapshot=p,this.prevName=I}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Y.Wl)(this.snapshot.exportVal())}}class Vp{constructor(a,l,p){this.eventRegistration=a,this.error=l,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Xh{constructor(a,l){this.snapshotCallback=a,this.cancelCallback=l}onValue(a,l){this.snapshotCallback.call(null,a,l)}onCancel(a){return(0,Y.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class zu{constructor(a,l){this._repo=a,this._path=l}cancel(){const a=new Y.BH;return Op(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){ul("OnDisconnect.remove",this._path);const a=new Y.BH;return Yh(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){ul("OnDisconnect.set",this._path),Ka("OnDisconnect.set",a,this._path,!1);const l=new Y.BH;return Yh(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}setWithPriority(a,l){ul("OnDisconnect.setWithPriority",this._path),Ka("OnDisconnect.setWithPriority",a,this._path,!1),hu("OnDisconnect.setWithPriority",l,!1);const p=new Y.BH;return function kp(u,a,l,p,I){const R=Hr(l,p);u.server_.onDisconnectPut(a.toString(),R.val(!0),(V,te)=>{"ok"===V&&Po(u.onDisconnect_,a,R),pu(0,I,V,te)})}(this._repo,this._path,a,l,p.wrapCallback(()=>{})),p.promise}update(a){ul("OnDisconnect.update",this._path),rc("OnDisconnect.update",a,this._path,!1);const l=new Y.BH;return function Np(u,a,l,p){if((0,Y.xb)(l))return as("onDisconnect().update() called with empty data.  Don't do anything."),void pu(0,p,"ok",void 0);u.server_.onDisconnectMerge(a.toString(),l,(I,R)=>{"ok"===I&&Sr(l,(V,te)=>{const pe=Hr(te);Po(u.onDisconnect_,ui(a,V),pe)}),pu(0,p,I,R)})}(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}}class qa{constructor(a,l,p,I){this._repo=a,this._path=l,this._queryParams=p,this._orderByCalled=I}get key(){return Pr(this._path)?null:to(this._path)}get ref(){return new Tc(this._repo,this._path)}get _queryIdentifier(){const a=Nn(this._queryParams),l=mo(a);return"{}"===l?"default":l}get _queryObject(){return Nn(this._queryParams)}isEqual(a){if(!((a=(0,Y.m9)(a))instanceof qa))return!1;const l=this._repo===a._repo,p=w(this._path,a._path);return l&&p&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _u(u){let a="";for(let l=u.pieceNum_;l<u.pieces_.length;l++)""!==u.pieces_[l]&&(a+="/"+encodeURIComponent(String(u.pieces_[l])));return a||"/"}(this._path)}}function uh(u,a){if(!0===u._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function $l(u){let a=null,l=null;if(u.hasStart()&&(a=u.getIndexStartValue()),u.hasEnd()&&(l=u.getIndexEndValue()),u.getIndex()===Bo){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",I="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==Vr)throw new Error(p);if("string"!=typeof a)throw new Error(I)}if(u.hasEnd()){if(u.getIndexEndName()!==Ro)throw new Error(p);if("string"!=typeof l)throw new Error(I)}}else if(u.getIndex()===xr){if(null!=a&&!Wh(a)||null!=l&&!Wh(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Y.hu)(u.getIndex()instanceof ro||u.getIndex()===pc,"unknown index type."),null!=a&&"object"==typeof a||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qh(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Tc extends qa{constructor(a,l){super(a,l,new za,!1)}get parent(){const a=Yo(this._path);return null===a?null:new Tc(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class Sd{constructor(a,l,p){this._node=a,this.ref=l,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const l=new qr(a),p=fl(this.ref,a);return new Sd(this._node.getChild(l),p,xr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,I)=>a(new Sd(I,fl(this.ref,p),xr)))}hasChild(a){const l=new qr(a);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ny(u,a){return(u=(0,Y.m9)(u))._checkNotDeleted("ref"),void 0!==a?fl(u._root,a):u._root}function jp(u,a){(u=(0,Y.m9)(u))._checkNotDeleted("refFromURL");const l=Bp(a,u._repo.repoInfo_.nodeAdmin);Lf("refFromURL",l);const p=l.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&p.host!==u._repo.repoInfo_.host&&Zs("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+u._repo.repoInfo_.host+")"),ny(u,l.path.toString())}function fl(u,a){return null===Yr((u=(0,Y.m9)(u))._path)?Mp("child","path",a,!1):ih("child","path",a,!1),new Tc(u._repo,ui(u._path,a))}function zp(u,a){u=(0,Y.m9)(u),ul("set",u._path),Ka("set",a,u._path,!1);const l=new Y.BH;return Rg(u._repo,u._path,a,null,l.wrapCallback(()=>{})),l.promise}function ry(u,a){rc("update",a,u._path,!1);const l=new Y.BH;return function Uf(u,a,l,p){bd(u,"update",{path:a.toString(),value:l});let I=!0;const R=qh(u),V={};if(Sr(l,(te,pe)=>{I=!1,V[te]=jh(ui(a,te),Hr(pe),u.serverSyncTree_,R)}),I)as("update() called with empty data.  Don't do anything."),pu(0,p,"ok",void 0);else{const te=Bf(u),pe=function Ru(u,a,l,p){!function ud(u,a,l,p){(0,Y.hu)(p>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:a,children:l,writeId:p,visible:!0}),u.visibleWrites=$c(u.visibleWrites,a,l),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p);const I=gs.fromObject(l);return Ou(u,new Kl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,I))}(u.serverSyncTree_,a,V,te);sh(u.eventQueue_,pe),u.server_.merge(a.toString(),l,(Pe,Ft)=>{const Yt="ok"===Pe;Yt||hs("update at "+a+" failed: "+Pe);const sn=Jl(u.serverSyncTree_,te,!Yt),Rn=sn.length>0?Dd(u,a):a;dl(u.eventQueue_,Rn,sn),pu(0,p,Pe,Ft)}),Sr(l,Pe=>{const Ft=Dc(u,ui(a,Pe));Dd(u,Ft)}),dl(u.eventQueue_,a,[])}}(u._repo,u._path,a,l.wrapCallback(()=>{})),l.promise}function zf(u){u=(0,Y.m9)(u);const a=new Xh(()=>{}),l=new Co(a);return function ty(u,a,l){const p=function Xd(u,a){const l=a._path;let p=null;u.syncPointTree_.foreachOnPath(l,(Pe,Ft)=>{const Yt=S(Pe,l);p=p||A(Ft,Yt)});let I=u.syncPointTree_.get(l);I?p=p||A(I,Rr()):(I=new Nl,u.syncPointTree_=u.syncPointTree_.set(l,I));const R=null!=p,V=R?new ql(p,!0,!1):null;return function Sp(u){return od(u.viewCache_)}(Pf(I,a,yc(u.pendingWriteTree_,a._path),R?V.getNode():ni.EMPTY_NODE,R))}(u.serverSyncTree_,a);return null!=p?Promise.resolve(p):u.server_.get(a).then(I=>{const R=Hr(I).withIndex(a._queryParams.getIndex());let V;if(vd(u.serverSyncTree_,a,l,!0),a._queryParams.loadsAllData())V=cs(u.serverSyncTree_,a._path,R);else{const te=Jd(u.serverSyncTree_,a);V=Pu(u.serverSyncTree_,a._path,R,te)}return dl(u.eventQueue_,a._path,V),ec(u.serverSyncTree_,a,l,null,!0),R},I=>(bd(u,"get for query "+(0,Y.Wl)(a)+" failed: "+I),Promise.reject(new Error(I))))}(u._repo,u,l).then(p=>new Sd(p,new Tc(u._repo,u._path),u._queryParams.getIndex()))}class Co{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,l){const p=l._queryParams.getIndex();return new Og("value",this,new Sd(a.snapshotNode,new Tc(l._repo,l._path),p))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Vp(this,a,l):null}matches(a){return a instanceof Co&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Gf{constructor(a,l){this.eventType=a,this.callbackContext=l}respondsTo(a){let l="children_added"===a?"child_added":a;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Vp(this,a,l):null}createEvent(a,l){(0,Y.hu)(null!=a.childName,"Child events should have a childName.");const p=fl(new Tc(l._repo,l._path),a.childName),I=l._queryParams.getIndex();return new Og(a.type,this,new Sd(a.snapshotNode,p,I),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof Gf&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Jh(u,a,l,p,I){let R;if("object"==typeof p&&(R=void 0,I=p),"function"==typeof p&&(R=p),I&&I.onlyOnce){const pe=l,Pe=(Ft,Yt)=>{Fp(u._repo,u,te),pe(Ft,Yt)};Pe.userCallback=l.userCallback,Pe.context=l.context,l=Pe}const V=new Xh(l,R||void 0),te="value"===a?new Co(V):new Gf(a,V);return function Vf(u,a,l){let p;p=".info"===Yr(a._path)?vd(u.infoSyncTree_,a,l):vd(u.serverSyncTree_,a,l),Kh(u.eventQueue_,a._path,p)}(u._repo,u,te),()=>Fp(u._repo,u,te)}function Wp(u,a,l,p){return Jh(u,"value",a,l,p)}function Ng(u,a,l,p){return Jh(u,"child_added",a,l,p)}function ef(u,a,l,p){return Jh(u,"child_changed",a,l,p)}function Fg(u,a,l,p){return Jh(u,"child_moved",a,l,p)}function dh(u,a,l,p){return Jh(u,"child_removed",a,l,p)}function hh(u,a,l){let p=null;const I=l?new Xh(l):null;"value"===a?p=new Co(I):a&&(p=new Gf(a,I)),Fp(u._repo,u,p)}class Bl{}class Lg extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ka("endAt",this._value,a._path,!0);const l=ct(a._queryParams,this._value,this._key);if(Qh(l),$l(l),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qa(a._repo,a._path,l,a._orderByCalled)}}class Kp extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ka("endBefore",this._value,a._path,!1);const l=function Rt(u,a,l){let p;return p=ct(u,a,u.index_===Bo||l?l:Vr),p.endBeforeSet_=!0,p}(a._queryParams,this._value,this._key);if(Qh(l),$l(l),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qa(a._repo,a._path,l,a._orderByCalled)}}class Uc extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ka("startAt",this._value,a._path,!0);const l=Z(a._queryParams,this._value,this._key);if(Qh(l),$l(l),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qa(a._repo,a._path,l,a._orderByCalled)}}class qp extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ka("startAfter",this._value,a._path,!1);const l=function Te(u,a,l){let p;return p=Z(u,a,u.index_===Bo||l?l:Ro),p.startAfterSet_=!0,p}(a._queryParams,this._value,this._key);if(Qh(l),$l(l),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qa(a._repo,a._path,l,a._orderByCalled)}}class iy extends Bl{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qa(a._repo,a._path,function P(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="l",l}(a._queryParams,this._limit),a._orderByCalled)}}class nf extends Bl{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qa(a._repo,a._path,function B(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="r",l}(a._queryParams,this._limit),a._orderByCalled)}}class Zp extends Bl{constructor(a){super(),this._path=a}_apply(a){uh(a,"orderByChild");const l=new qr(this._path);if(Pr(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new ro(l),I=Wt(a._queryParams,p);return $l(I),new qa(a._repo,a._path,I,!0)}}class Xp extends Bl{_apply(a){uh(a,"orderByKey");const l=Wt(a._queryParams,Bo);return $l(l),new qa(a._repo,a._path,l,!0)}}class Bg extends Bl{_apply(a){uh(a,"orderByPriority");const l=Wt(a._queryParams,xr);return $l(l),new qa(a._repo,a._path,l,!0)}}class Ku extends Bl{_apply(a){uh(a,"orderByValue");const l=Wt(a._queryParams,pc);return $l(l),new qa(a._repo,a._path,l,!0)}}class af extends Bl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){if(Ka("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Lg(this._value,this._key)._apply(new Uc(this._value,this._key)._apply(a))}}function ic(u,...a){let l=(0,Y.m9)(u);for(const p of a)l=p._apply(l);return l}(function cl(u){(0,Y.hu)(!cu,"__referenceConstructor has already been defined"),cu=u})(Tc),function Bn(u){(0,Y.hu)(!rn,"__referenceConstructor has already been defined"),rn=u}(Tc);const Ug="FIREBASE_DATABASE_EMULATOR_HOST",Yf={};let Zf=!1;function lf(u,a,l,p,I){let R=p||u.options.databaseURL;void 0===R&&(u.options.projectId||Zs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),as("Using default host for project ",u.options.projectId),R=`${u.options.projectId}-default-rtdb.firebaseio.com`);let pe,Pe,V=Bp(R,I),te=V.repoInfo;typeof process<"u"&&process.env&&(Pe=process.env[Ug]),Pe?(pe=!0,R=`http://${Pe}?ns=${te.namespace}`,V=Bp(R,I),te=V.repoInfo):pe=!V.repoInfo.secure;const Ft=I&&pe?new wr(wr.OWNER):new Br(u.name,u.options,a);Lf("Invalid Firebase Database URL",V),Pr(V.path)||Zs("Database URL must point to the root of a Firebase Database (not including a child path).");const Yt=function Hg(u,a,l,p){let I=Yf[a.name];I||(I={},Yf[a.name]=I);let R=I[u.toURLString()];return R&&Zs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),R=new Ag(u,Zf,l,p),I[u.toURLString()]=R,R}(te,u,Ft,new Kr(u.name,l));return new Xf(Yt,u)}class Xf{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function ey(u,a,l){if(u.stats_=Js(u.repoInfo_),u.forceRestClient_||Vn())u.server_=new ir(u.repoInfo_,(p,I,R,V)=>{oh(u,p,I,R,V)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>Ll(u,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Y.Wl)(l)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}u.persistentConnection_=new Is(u.repoInfo_,a,(p,I,R,V)=>{oh(u,p,I,R,V)},p=>{Ll(u,p)},p=>{!function ka(u,a){Sr(a,(l,p)=>{$f(u,l,p)})}(u,p)},u.authTokenProvider_,u.appCheckProvider_,l),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(p=>{u.server_.refreshAuthToken(p)}),u.appCheckProvider_.addTokenChangeListener(p=>{u.server_.refreshAppCheckToken(p.token)}),u.statsReporter_=function oc(u,a){const l=u.toString();return vo[l]||(vo[l]=a()),vo[l]}(u.repoInfo_,()=>new Vd(u.stats_,u.server_)),u.infoData_=new jr,u.infoSyncTree_=new Ki({startListening:(p,I,R,V)=>{let te=[];const pe=u.infoData_.getNode(p._path);return pe.isEmpty()||(te=cs(u.infoSyncTree_,p._path,pe),setTimeout(()=>{V("ok")},0)),te},stopListening:()=>{}}),$f(u,"connected",!1),u.serverSyncTree_=new Ki({startListening:(p,I,R,V)=>(u.server_.listen(p,R,I,(te,pe)=>{const Pe=V(te,pe);dl(u.eventQueue_,p._path,Pe)}),[]),stopListening:(p,I)=>{u.server_.unlisten(p,I)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tc(this._repo,Rr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function jg(u,a){const l=Yf[a];(!l||l[u.key]!==u)&&Zs(`Database ${a}(${u.repoInfo_}) has already been deleted.`),hl(u),delete l[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&Zs("Cannot call "+a+" on a deleted database.")}}function ph(){aa.IS_TRANSPORT_INITIALIZED&&hs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Qp(){ph(),$o.forceDisallow()}function cf(){ph(),pr.forceDisallow(),$o.forceAllow()}function eg(u,a){ga(u,a)}const tg={".sv":"timestamp"};class Fa{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Is.prototype.simpleListen=function(u,a){this.sendRequest("q",{p:u},a)},Is.prototype.echo=function(u,a){this.sendRequest("echo",{d:u},a)},function Jf(u){Ys(_t.SDK_VERSION),(0,_t._registerComponent)(new it.wA("database",(a,{instanceIdentifier:l})=>lf(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,_t.registerVersion)(Ks,"0.14.4",u),(0,_t.registerVersion)(Ks,"0.14.4","esm2017")}();const Gg=new ts.Yd("@firebase/database-compat"),Wg=function(u){Gg.warn("FIREBASE WARNING: "+u)};class uy{constructor(a){this._delegate=a}cancel(a){(0,Y.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.cancel","onComplete",a,!0);const l=this._delegate.cancel();return a&&l.then(()=>a(null),p=>a(p)),l}remove(a){(0,Y.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.remove","onComplete",a,!0);const l=this._delegate.remove();return a&&l.then(()=>a(null),p=>a(p)),l}set(a,l){(0,Y.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Y.Wj)("OnDisconnect.set","onComplete",l,!0);const p=this._delegate.set(a);return l&&p.then(()=>l(null),I=>l(I)),p}setWithPriority(a,l,p){(0,Y.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Y.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const I=this._delegate.setWithPriority(a,l);return p&&I.then(()=>p(null),R=>p(R)),I}update(a,l){if((0,Y.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const I={};for(let R=0;R<a.length;++R)I[""+R]=a[R];a=I,Wg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Y.Wj)("OnDisconnect.update","onComplete",l,!0);const p=this._delegate.update(a);return l&&p.then(()=>l(null),I=>l(I)),p}}class ig{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return(0,Y.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Vc{constructor(a,l){this._database=a,this._delegate=l}val(){return(0,Y.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Y.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Y.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Y.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,Y.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),ih("DataSnapshot.child","path",a,!1),new Vc(this._database,this._delegate.child(a))}hasChild(a){return(0,Y.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ih("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,Y.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,Y.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Y.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(l=>a(new Vc(this._database,l)))}hasChildren(){return(0,Y.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Y.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Y.Dv)("DataSnapshot.ref",0,0,arguments.length),new ba(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ca{constructor(a,l){this.database=a,this._delegate=l}on(a,l,p,I){var R;(0,Y.Dv)("Query.on",2,4,arguments.length),(0,Y.Wj)("Query.on","callback",l,!1);const V=Ca.getCancelAndContextArgs_("Query.on",p,I),te=(Pe,Ft)=>{l.call(V.context,new Vc(this.database,Pe),Ft)};te.userCallback=l,te.context=V.context;const pe=null===(R=V.cancel)||void 0===R?void 0:R.bind(V.context);switch(a){case"value":return Wp(this._delegate,te,pe),l;case"child_added":return Ng(this._delegate,te,pe),l;case"child_removed":return dh(this._delegate,te,pe),l;case"child_changed":return ef(this._delegate,te,pe),l;case"child_moved":return Fg(this._delegate,te,pe),l;default:throw new Error((0,Y.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,l,p){if((0,Y.Dv)("Query.off",0,3,arguments.length),function(u,a,l){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Y.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,Y.Wj)("Query.off","callback",l,!0),(0,Y.lb)("Query.off","context",p,!0),l){const I=()=>{};I.userCallback=l,I.context=p,hh(this._delegate,a,I)}else hh(this._delegate,a)}get(){return zf(this._delegate).then(a=>new Vc(this.database,a))}once(a,l,p,I){(0,Y.Dv)("Query.once",1,4,arguments.length),(0,Y.Wj)("Query.once","callback",l,!0);const R=Ca.getCancelAndContextArgs_("Query.once",p,I),V=new Y.BH,te=(Pe,Ft)=>{const Yt=new Vc(this.database,Pe);l&&l.call(R.context,Yt,Ft),V.resolve(Yt)};te.userCallback=l,te.context=R.context;const pe=Pe=>{R.cancel&&R.cancel.call(R.context,Pe),V.reject(Pe)};switch(a){case"value":Wp(this._delegate,te,pe,{onlyOnce:!0});break;case"child_added":Ng(this._delegate,te,pe,{onlyOnce:!0});break;case"child_removed":dh(this._delegate,te,pe,{onlyOnce:!0});break;case"child_changed":ef(this._delegate,te,pe,{onlyOnce:!0});break;case"child_moved":Fg(this._delegate,te,pe,{onlyOnce:!0});break;default:throw new Error((0,Y.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return V.promise}limitToFirst(a){return(0,Y.Dv)("Query.limitToFirst",1,1,arguments.length),new Ca(this.database,ic(this._delegate,function $g(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new iy(u)}(a)))}limitToLast(a){return(0,Y.Dv)("Query.limitToLast",1,1,arguments.length),new Ca(this.database,ic(this._delegate,function Gu(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new nf(u)}(a)))}orderByChild(a){return(0,Y.Dv)("Query.orderByChild",1,1,arguments.length),new Ca(this.database,ic(this._delegate,function fh(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ih("orderByChild","path",u,!1),new Zp(u)}(a)))}orderByKey(){return(0,Y.Dv)("Query.orderByKey",0,0,arguments.length),new Ca(this.database,ic(this._delegate,function rf(){return new Xp}()))}orderByPriority(){return(0,Y.Dv)("Query.orderByPriority",0,0,arguments.length),new Ca(this.database,ic(this._delegate,function Wu(){return new Bg}()))}orderByValue(){return(0,Y.Dv)("Query.orderByValue",0,0,arguments.length),new Ca(this.database,ic(this._delegate,function sf(){return new Ku}()))}startAt(a=null,l){return(0,Y.Dv)("Query.startAt",0,2,arguments.length),new Ca(this.database,ic(this._delegate,function Kf(u=null,a){return Bc("startAt","key",a,!0),new Uc(u,a)}(a,l)))}startAfter(a=null,l){return(0,Y.Dv)("Query.startAfter",0,2,arguments.length),new Ca(this.database,ic(this._delegate,function Yp(u,a){return Bc("startAfter","key",a,!0),new qp(u,a)}(a,l)))}endAt(a=null,l){return(0,Y.Dv)("Query.endAt",0,2,arguments.length),new Ca(this.database,ic(this._delegate,function tf(u,a){return Bc("endAt","key",a,!0),new Lg(u,a)}(a,l)))}endBefore(a=null,l){return(0,Y.Dv)("Query.endBefore",0,2,arguments.length),new Ca(this.database,ic(this._delegate,function Wf(u,a){return Bc("endBefore","key",a,!0),new Kp(u,a)}(a,l)))}equalTo(a,l){return(0,Y.Dv)("Query.equalTo",1,2,arguments.length),new Ca(this.database,ic(this._delegate,function qf(u,a){return Bc("equalTo","key",a,!0),new af(u,a)}(a,l)))}toString(){return(0,Y.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Y.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,Y.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof Ca))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,l,p){const I={cancel:void 0,context:void 0};if(l&&p)I.cancel=l,(0,Y.Wj)(a,"cancel",I.cancel,!0),I.context=p,(0,Y.lb)(a,"context",I.context,!0);else if(l)if("object"==typeof l&&null!==l)I.context=l;else{if("function"!=typeof l)throw new Error((0,Y.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");I.cancel=l}return I}get ref(){return new ba(this.database,new Tc(this._delegate._repo,this._delegate._path))}}class ba extends Ca{constructor(a,l){super(a,new qa(l._repo,l._path,new za,!1)),this.database=a,this._delegate=l}getKey(){return(0,Y.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,Y.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new ba(this.database,fl(this._delegate,a))}getParent(){(0,Y.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new ba(this.database,a):null}getRoot(){return(0,Y.Dv)("Reference.root",0,0,arguments.length),new ba(this.database,this._delegate.root)}set(a,l){(0,Y.Dv)("Reference.set",1,2,arguments.length),(0,Y.Wj)("Reference.set","onComplete",l,!0);const p=zp(this._delegate,a);return l&&p.then(()=>l(null),I=>l(I)),p}update(a,l){if((0,Y.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const I={};for(let R=0;R<a.length;++R)I[""+R]=a[R];a=I,Wg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ul("Reference.update",this._delegate._path),(0,Y.Wj)("Reference.update","onComplete",l,!0);const p=ry(this._delegate,a);return l&&p.then(()=>l(null),I=>l(I)),p}setWithPriority(a,l,p){(0,Y.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Y.Wj)("Reference.setWithPriority","onComplete",p,!0);const I=function Hf(u,a,l){if(ul("setWithPriority",u._path),Ka("setWithPriority",a,u._path,!1),hu("setWithPriority",l,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const p=new Y.BH;return Rg(u._repo,u._path,a,l,p.wrapCallback(()=>{})),p.promise}(this._delegate,a,l);return p&&I.then(()=>p(null),R=>p(R)),I}remove(a){(0,Y.Dv)("Reference.remove",0,1,arguments.length),(0,Y.Wj)("Reference.remove","onComplete",a,!0);const l=function Ad(u){return ul("remove",u._path),zp(u,null)}(this._delegate);return a&&l.then(()=>a(null),p=>a(p)),l}transaction(a,l,p){(0,Y.Dv)("Reference.transaction",1,3,arguments.length),(0,Y.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,Y.Wj)("Reference.transaction","onComplete",l,!0),function(u,a,l,p){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,Y.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const I=function ay(u,a,l){var p;if(u=(0,Y.m9)(u),ul("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const I=null===(p=null==l?void 0:l.applyLocally)||void 0===p||p,R=new Y.BH,te=Wp(u,()=>{});return function Zh(u,a,l,p,I,R){bd(u,"transaction on "+a);const V={path:a,update:l,onComplete:p,status:null,order:tl(),applyLocally:R,retryCount:0,unwatcher:I,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},te=ah(u,a,void 0);V.currentInputSnapshot=te;const pe=V.update(te.val());if(void 0===pe)V.unwatcher(),V.currentOutputSnapshotRaw=null,V.currentOutputSnapshotResolved=null,V.onComplete&&V.onComplete(null,!1,V.currentInputSnapshot);else{$u("transaction failed: Data returned ",pe,V.path),V.status=0;const Pe=du(u.transactionQueueTree_,a),Ft=Fl(Pe)||[];let Yt;Ft.push(V),Hh(Pe,Ft),"object"==typeof pe&&null!==pe&&(0,Y.r3)(pe,".priority")?(Yt=(0,Y.DV)(pe,".priority"),(0,Y.hu)(Wh(Yt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Yt=(_d(u.serverSyncTree_,a)||ni.EMPTY_NODE).getPriority().val();const sn=qh(u),Rn=Hr(pe,Yt),Zn=th(Rn,te,sn);V.currentOutputSnapshotRaw=Rn,V.currentOutputSnapshotResolved=Zn,V.currentWriteId=Bf(u);const Mr=Oa(u.serverSyncTree_,a,Zn,V.currentWriteId,V.applyLocally);dl(u.eventQueue_,a,Mr),Uu(u,u.transactionQueueTree_)}}(u._repo,u._path,a,(pe,Pe,Ft)=>{let Yt=null;pe?R.reject(pe):(Yt=new Sd(Ft,new Tc(u._repo,u._path),xr),R.resolve(new Fa(Pe,Yt)))},te,I),R.promise}(this._delegate,a,{applyLocally:p}).then(R=>new ig(R.committed,new Vc(this.database,R.snapshot)));return l&&I.then(R=>l(null,R.committed,R.snapshot),R=>l(R,!1,null)),I}setPriority(a,l){(0,Y.Dv)("Reference.setPriority",1,2,arguments.length),(0,Y.Wj)("Reference.setPriority","onComplete",l,!0);const p=function Gp(u,a){u=(0,Y.m9)(u),ul("setPriority",u._path),hu("setPriority",a,!1);const l=new Y.BH;return Rg(u._repo,ui(u._path,".priority"),a,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,a);return l&&p.then(()=>l(null),I=>l(I)),p}push(a,l){(0,Y.Dv)("Reference.push",0,2,arguments.length),(0,Y.Wj)("Reference.push","onComplete",l,!0);const p=function kg(u,a){u=(0,Y.m9)(u),ul("push",u._path),Ka("push",a,u._path,!0);const l=xg(u._repo),p=Hu(l),I=fl(u,p),R=fl(u,p);let V;return V=null!=a?zp(R,a).then(()=>R):Promise.resolve(R),I.then=V.then.bind(V),I.catch=V.then.bind(V,void 0),I}(this._delegate,a),I=p.then(V=>new ba(this.database,V));l&&I.then(()=>l(null),V=>l(V));const R=new ba(this.database,p);return R.then=I.then.bind(I),R.catch=I.catch.bind(I,void 0),R}onDisconnect(){return ul("Reference.onDisconnect",this._delegate._path),new uy(new zu(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class jc{constructor(a,l){this._delegate=a,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Qp,forceLongPolling:cf}}useEmulator(a,l,p={}){!function Qf(u,a,l,p={}){(u=(0,Y.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Zs("Cannot call useEmulator() after instance has already been initialized.");const I=u._repoInternal;let R;if(I.repoInfo_.nodeAdmin)p.mockUserToken&&Zs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),R=new wr(wr.OWNER);else if(p.mockUserToken){const V="string"==typeof p.mockUserToken?p.mockUserToken:(0,Y.Sg)(p.mockUserToken,u.app.options.projectId);R=new wr(V)}!function Vg(u,a,l,p){u.repoInfo_=new _l(`${a}:${l}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams,!0),p&&(u.authTokenProvider_=p)}(I,a,l,R)}(this._delegate,a,l,p)}ref(a){if((0,Y.Dv)("database.ref",0,1,arguments.length),a instanceof ba){const l=jp(this._delegate,a.toString());return new ba(this,l)}{const l=ny(this._delegate,a);return new ba(this,l)}}refFromURL(a){(0,Y.Dv)("database.refFromURL",1,1,arguments.length);const p=jp(this._delegate,a);return new ba(this,p)}goOffline(){return(0,Y.Dv)("database.goOffline",0,0,arguments.length),function zg(u){(u=(0,Y.m9)(u))._checkNotDeleted("goOffline"),hl(u._repo)}(this._delegate)}goOnline(){return(0,Y.Dv)("database.goOnline",0,0,arguments.length),function sy(u){(u=(0,Y.m9)(u))._checkNotDeleted("goOnline"),function jf(u){u.persistentConnection_&&u.persistentConnection_.resume(Bu)}(u._repo)}(this._delegate)}}jc.ServerValue={TIMESTAMP:function ng(){return tg}(),increment:u=>function oy(u){return{".sv":{increment:u}}}(u)};var gh=Object.freeze({__proto__:null,initStandalone:function gu({app:u,url:a,version:l,customAuthImpl:p,namespace:I,nodeAdmin:R=!1}){Ys(l);const V=new it.zt("auth-internal",new it.H0("database-standalone"));return V.setComponent(new it.wA("auth-internal",()=>p,"PRIVATE")),{instance:new jc(lf(u,V,void 0,a,R),u),namespace:I}}});const sg=jc.ServerValue;function df(u){return null==u}function hf(u){return"function"==typeof u.set}function Hc(u,a){return hf(a)?a:u.ref(a)}function ff(u,a){if(function qg(u){return"string"==typeof u}(u))return a.stringCase();if(hf(u))return a.firebaseCase();if(function og(u){return"function"==typeof u.exportVal}(u))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function Ul(u,a,l="on",p=Ee.z){return new ve.y(I=>{let R=null;return R=u[l](a,(V,te)=>{p.schedule(()=>{I.next({snapshot:V,prevKey:te})}),"once"===l&&p.schedule(()=>I.complete())},V=>{p.schedule(()=>I.error(V))}),"on"===l?{unsubscribe(){null!=R&&u.off(a,R)}}:{unsubscribe(){}}}).pipe((0,Oe.U)(I=>{const{snapshot:R,prevKey:V}=I;let te=null;return R.exists()&&(te=R.key),{type:a,payload:R,prevKey:V,key:te}}),(0,ne.B)())}function pf(u,a){const l=u.length;for(let p=0;p<l;p++)if(u[p].payload.key===a)return p;return-1}function dy(u,a){const{payload:l,prevKey:p,key:I}=a,R=pf(u,I),V=function Rd(u,a){if(df(a))return 0;{const l=pf(u,a);return-1===l?u.length:l+1}}(u,p);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let te=null;a.payload.forEach(pe=>{const Pe={payload:pe,type:"value",prevKey:te,key:pe.key};return te=pe.key,u=[...u,Pe],!1})}return u;case"child_added":if(R>-1){const te=u[R-1];(te&&te.key||null)!==p&&(u=u.filter(pe=>pe.payload.key!==l.key)).splice(V,0,a)}else{if(null==p)return[a,...u];(u=u.slice()).splice(V,0,a)}return u;case"child_removed":return u.filter(te=>te.payload.key!==l.key);case"child_changed":return u.map(te=>te.payload.key===I?a:te);case"child_moved":if(R>-1){const te=u.splice(R,1)[0];return(u=u.slice()).splice(V,0,te),u}return u;default:return u}}function gf(u){return(df(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function yh(u,a,l){return function mh(u,a,l){return Ul(u,"value","once",l).pipe((0,Je.w)(p=>{const I=[(0,Ue.of)(p)];return a.forEach(R=>I.push(Ul(u,R,"on",l))),(0,L.T)(...I).pipe((0,vt.R)(dy,[]))}),(0,Tn.x)())}(u,a=gf(a),l)}function ep(u,a,l){const p=(a=gf(a)).map(I=>Ul(u,I,"on",l));return(0,L.T)(...p)}function hy(u,a){return function(p,I){return ff(p,{stringCase:()=>u.child(p)[a](I),firebaseCase:()=>p[a](I),snapshotCase:()=>p.ref[a](I)})}}function fy(u){return function(l){return l?ff(l,{stringCase:()=>u.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):u.remove()}}function lg(u,a){return function(){return Ul(u,"value","on",a)}}!function xd(u){u.INTERNAL.registerComponent(new it.wA("database-compat",(a,{instanceIdentifier:l})=>{const p=a.getProvider("app-compat").getImmediate(),I=a.getProvider("database").getImmediate({identifier:l});return new jc(I,p)},"PUBLIC").setServiceProps({Reference:ba,Query:Ca,Database:jc,DataSnapshot:Vc,enableLogging:eg,INTERNAL:gh,ServerValue:sg}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.4")}(xe.Z);const cg=new _.OlP("angularfire2.realtimeDatabaseURL"),gy=new _.OlP("angularfire2.database.use-emulator");let ug=(()=>{class u{constructor(l,p,I,R,V,te,pe,Pe,Ft,Yt,sn,Rn,Zn,Mr,oi){this.schedulers=te;const Mi=pe,Ms=(0,Se.on)(l,V,p);Pe&&(0,Ae.nw)(Ms,V,Ft,sn,Rn,Zn,Yt,Mr),this.database=(0,Se.cc)(`${Ms.name}.database.${I}`,"AngularFireDatabase",Ms.name,()=>{const Cs=V.runOutsideAngular(()=>Ms.database(I||void 0));return Mi&&Cs.useEmulator(...Mi),Cs},[Mi])}list(l,p){const I=this.schedulers.ngZone.runOutsideAngular(()=>Hc(this.database,l));let R=I;return p&&(R=p(I)),function Zg(u,a){const l=a.schedulers.outsideAngular,p=a.schedulers.ngZone.run(()=>u.ref);return{query:u,update:hy(p,"update"),set:hy(p,"set"),push:I=>p.push(I),remove:fy(p),snapshotChanges:I=>yh(u,I,l).pipe(wt.iC),stateChanges:I=>ep(u,I,l).pipe(wt.iC),auditTrail:I=>function Yg(u,a,l){return function ag(u,a,l){return function zc(u,a){return Ul(u,"value","on",a).pipe((0,Oe.U)(l=>{let p;return l.payload.forEach(I=>(p=I.key,!1)),{data:l,lastKeyToLoad:p}}))}(u,l).pipe(function Ao(...u){const a=(0,ds.jO)(u);return(0,de.e)((l,p)=>{const I=u.length,R=new Array(I);let V=u.map(()=>!1),te=!1;for(let pe=0;pe<I;pe++)(0,$r.Xf)(u[pe]).subscribe((0,ye.x)(p,Pe=>{R[pe]=Pe,!te&&!V[pe]&&(V[pe]=!0,(te=V.every(ii.y))&&(V=null))},Qi.Z));l.subscribe((0,ye.x)(p,pe=>{if(te){const Pe=[pe,...R];p.next(a?a(...Pe):Pe)}}))})}(a),(0,Oe.U)(([I,R])=>{const V=I.lastKeyToLoad,te=R.map(pe=>pe.key);return{actions:R,lastKeyToLoad:V,loadedKeys:te}}),function xi(u){return(0,de.e)((a,l)=>{let p=!1,I=0;a.subscribe((0,ye.x)(l,R=>(p||(p=!u(R,I++)))&&l.next(R)))})}(I=>-1===I.loadedKeys.indexOf(I.lastKeyToLoad)),(0,Oe.U)(I=>I.actions))}(u,ep(u,a).pipe((0,vt.R)((I,R)=>[...I,R],[])),l)}(u,I,l).pipe(wt.iC),valueChanges:(I,R)=>yh(u,I,l).pipe((0,Oe.U)(te=>te.map(pe=>R&&R.idField?Object.assign(Object.assign({},pe.payload.val()),{[R.idField]:pe.key}):pe.payload.val())),wt.iC)}}(R,this)}object(l){return function py(u,a){return{query:u,snapshotChanges:()=>lg(u,a.schedulers.outsideAngular)().pipe(wt.iC),update:l=>u.ref.update(l),set:l=>u.ref.set(l),remove:()=>u.ref.remove(),valueChanges:()=>lg(u,a.schedulers.outsideAngular)().pipe(wt.iC,(0,Oe.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Hc(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(l){return new(l||u)(_.LFG(Se.Dh),_.LFG(Se.xv,8),_.LFG(cg,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(wt.HU),_.LFG(gy,8),_.LFG(Ae.zQ,8),_.LFG(Ae.Qv,8),_.LFG(Ae.L6,8),_.LFG(Ae._Q,8),_.LFG(Ae.rT,8),_.LFG(Ae.lh,8),_.LFG(Ae.f7,8),_.LFG(Ns.nm,8))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Xg=(()=>{class u{constructor(){To.Z.registerVersion("angularfire",wt.q4.full,"rtdb-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({providers:[ug]}),u})();var mf=j(8175);let my=(()=>{class u{constructor(l){this.authService=l,this.authService.fetchJWT()}}return u.\u0275fac=function(l){return new(l||u)(_.Y36(mf.e))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-root"]],standalone:!0,features:[_.jDz],decls:2,vars:0,template:function(l,p){1&l&&(_.TgZ(0,"ion-app"),_._UZ(1,"ion-router-outlet"),_.qZA())},dependencies:[le.Pc,le.dr,le.jP,Ae.ww,F.yb,M,Xg]}),u})();var vh=j(2340),Qg=j(529),tp=j(6738);vh.N.production&&(0,_.G48)(),(0,y.Cg)(my,{providers:[(0,Qg.h_)(),{provide:ee.wN,useClass:le.r4},(0,_.RIp)(le.Pc.forRoot({})),(0,ee.bU)($e),(0,_.RIp)(Se.hO.initializeApp(vh.N.firebase))]}),window,(0,tp.a)().then(()=>{(0,tp.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[32,"keyup","handleBackdropKeyUp"]]]]]],undefined)})},1135:(In,Et,j)=>{"use strict";j.d(Et,{X:()=>y});var _=j(7579);class y extends _.x{constructor(le){super(),this._value=le}get value(){return this.getValue()}_subscribe(le){const $e=super._subscribe(le);return!$e.closed&&le.next(this._value),$e}getValue(){const{hasError:le,thrownError:$e,_value:Ae}=this;if(le)throw $e;return this._throwIfClosed(),Ae}next(le){super.next(this._value=le)}}},9751:(In,Et,j)=>{"use strict";j.d(Et,{y:()=>Ue});var _=j(930),y=j(727),ee=j(8822),le=j(9635),$e=j(2416),Ae=j(576),ve=j(2806);let Ue=(()=>{class ye{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const Je=new ye;return Je.source=this,Je.operator=Oe,Je}subscribe(Oe,Je,wt){const Se=function de(ye){return ye&&ye instanceof _.Lv||function Ee(ye){return ye&&(0,Ae.m)(ye.next)&&(0,Ae.m)(ye.error)&&(0,Ae.m)(ye.complete)}(ye)&&(0,y.Nn)(ye)}(Oe)?Oe:new _.Hp(Oe,Je,wt);return(0,ve.x)(()=>{const{operator:xe,source:ue}=this;Se.add(xe?xe.call(Se,ue):ue?this._subscribe(Se):this._trySubscribe(Se))}),Se}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(Je){Oe.error(Je)}}forEach(Oe,Je){return new(Je=Ge(Je))((wt,Se)=>{const xe=new _.Hp({next:ue=>{try{Oe(ue)}catch(_t){Se(_t),xe.unsubscribe()}},error:Se,complete:wt});this.subscribe(xe)})}_subscribe(Oe){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Oe)}[ee.L](){return this}pipe(...Oe){return(0,le.U)(Oe)(this)}toPromise(Oe){return new(Oe=Ge(Oe))((Je,wt)=>{let Se;this.subscribe(xe=>Se=xe,xe=>wt(xe),()=>Je(Se))})}}return ye.create=We=>new ye(We),ye})();function Ge(ye){var We;return null!==(We=null!=ye?ye:$e.v.Promise)&&void 0!==We?We:Promise}},7579:(In,Et,j)=>{"use strict";j.d(Et,{x:()=>ve});var _=j(9751),y=j(727);const le=(0,j(3888).d)(Ge=>function(){Ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=j(8737),Ae=j(2806);let ve=(()=>{class Ge extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(de){const ye=new Ue(this,this);return ye.operator=de,ye}_throwIfClosed(){if(this.closed)throw new le}next(de){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ye of this.currentObservers)ye.next(de)}})}error(de){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=de;const{observers:ye}=this;for(;ye.length;)ye.shift().error(de)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:de}=this;for(;de.length;)de.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var de;return(null===(de=this.observers)||void 0===de?void 0:de.length)>0}_trySubscribe(de){return this._throwIfClosed(),super._trySubscribe(de)}_subscribe(de){return this._throwIfClosed(),this._checkFinalizedStatuses(de),this._innerSubscribe(de)}_innerSubscribe(de){const{hasError:ye,isStopped:We,observers:Oe}=this;return ye||We?y.Lc:(this.currentObservers=null,Oe.push(de),new y.w0(()=>{this.currentObservers=null,(0,$e.P)(Oe,de)}))}_checkFinalizedStatuses(de){const{hasError:ye,thrownError:We,isStopped:Oe}=this;ye?de.error(We):Oe&&de.complete()}asObservable(){const de=new _.y;return de.source=this,de}}return Ge.create=(Ee,de)=>new Ue(Ee,de),Ge})();class Ue extends ve{constructor(Ee,de){super(),this.destination=Ee,this.source=de}next(Ee){var de,ye;null===(ye=null===(de=this.destination)||void 0===de?void 0:de.next)||void 0===ye||ye.call(de,Ee)}error(Ee){var de,ye;null===(ye=null===(de=this.destination)||void 0===de?void 0:de.error)||void 0===ye||ye.call(de,Ee)}complete(){var Ee,de;null===(de=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.complete)||void 0===de||de.call(Ee)}_subscribe(Ee){var de,ye;return null!==(ye=null===(de=this.source)||void 0===de?void 0:de.subscribe(Ee))&&void 0!==ye?ye:y.Lc}}},930:(In,Et,j)=>{"use strict";j.d(Et,{Hp:()=>wt,Lv:()=>ye});var _=j(576),y=j(727),ee=j(2416),le=j(7849),$e=j(5032);const Ae=Ge("C",void 0,void 0);function Ge(Y,it,tt){return{kind:Y,value:it,error:tt}}var Ee=j(3410),de=j(2806);class ye extends y.w0{constructor(it){super(),this.isStopped=!1,it?(this.destination=it,(0,y.Nn)(it)&&it.add(this)):this.destination=_t}static create(it,tt,Pt){return new wt(it,tt,Pt)}next(it){this.isStopped?ue(function Ue(Y){return Ge("N",Y,void 0)}(it),this):this._next(it)}error(it){this.isStopped?ue(function ve(Y){return Ge("E",void 0,Y)}(it),this):(this.isStopped=!0,this._error(it))}complete(){this.isStopped?ue(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(it){this.destination.next(it)}_error(it){try{this.destination.error(it)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Oe(Y,it){return We.call(Y,it)}class Je{constructor(it){this.partialObserver=it}next(it){const{partialObserver:tt}=this;if(tt.next)try{tt.next(it)}catch(Pt){Se(Pt)}}error(it){const{partialObserver:tt}=this;if(tt.error)try{tt.error(it)}catch(Pt){Se(Pt)}else Se(it)}complete(){const{partialObserver:it}=this;if(it.complete)try{it.complete()}catch(tt){Se(tt)}}}class wt extends ye{constructor(it,tt,Pt){let Ve;if(super(),(0,_.m)(it)||!it)Ve={next:null!=it?it:void 0,error:null!=tt?tt:void 0,complete:null!=Pt?Pt:void 0};else{let ke;this&&ee.v.useDeprecatedNextContext?(ke=Object.create(it),ke.unsubscribe=()=>this.unsubscribe(),Ve={next:it.next&&Oe(it.next,ke),error:it.error&&Oe(it.error,ke),complete:it.complete&&Oe(it.complete,ke)}):Ve=it}this.destination=new Je(Ve)}}function Se(Y){ee.v.useDeprecatedSynchronousErrorHandling?(0,de.O)(Y):(0,le.h)(Y)}function ue(Y,it){const{onStoppedNotification:tt}=ee.v;tt&&Ee.z.setTimeout(()=>tt(Y,it))}const _t={closed:!0,next:$e.Z,error:function xe(Y){throw Y},complete:$e.Z}},727:(In,Et,j)=>{"use strict";j.d(Et,{Lc:()=>Ae,w0:()=>$e,Nn:()=>ve});var _=j(576);const ee=(0,j(3888).d)(Ge=>function(de){Ge(this),this.message=de?`${de.length} errors occurred during unsubscription:\n${de.map((ye,We)=>`${We+1}) ${ye.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=de});var le=j(8737);class $e{constructor(Ee){this.initialTeardown=Ee,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ee;if(!this.closed){this.closed=!0;const{_parentage:de}=this;if(de)if(this._parentage=null,Array.isArray(de))for(const Oe of de)Oe.remove(this);else de.remove(this);const{initialTeardown:ye}=this;if((0,_.m)(ye))try{ye()}catch(Oe){Ee=Oe instanceof ee?Oe.errors:[Oe]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Oe of We)try{Ue(Oe)}catch(Je){Ee=null!=Ee?Ee:[],Je instanceof ee?Ee=[...Ee,...Je.errors]:Ee.push(Je)}}if(Ee)throw new ee(Ee)}}add(Ee){var de;if(Ee&&Ee!==this)if(this.closed)Ue(Ee);else{if(Ee instanceof $e){if(Ee.closed||Ee._hasParent(this))return;Ee._addParent(this)}(this._finalizers=null!==(de=this._finalizers)&&void 0!==de?de:[]).push(Ee)}}_hasParent(Ee){const{_parentage:de}=this;return de===Ee||Array.isArray(de)&&de.includes(Ee)}_addParent(Ee){const{_parentage:de}=this;this._parentage=Array.isArray(de)?(de.push(Ee),de):de?[de,Ee]:Ee}_removeParent(Ee){const{_parentage:de}=this;de===Ee?this._parentage=null:Array.isArray(de)&&(0,le.P)(de,Ee)}remove(Ee){const{_finalizers:de}=this;de&&(0,le.P)(de,Ee),Ee instanceof $e&&Ee._removeParent(this)}}$e.EMPTY=(()=>{const Ge=new $e;return Ge.closed=!0,Ge})();const Ae=$e.EMPTY;function ve(Ge){return Ge instanceof $e||Ge&&"closed"in Ge&&(0,_.m)(Ge.remove)&&(0,_.m)(Ge.add)&&(0,_.m)(Ge.unsubscribe)}function Ue(Ge){(0,_.m)(Ge)?Ge():Ge.unsubscribe()}},2416:(In,Et,j)=>{"use strict";j.d(Et,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9808:(In,Et,j)=>{"use strict";j.d(Et,{n:()=>y});var _=j(6805);function y(ee,le){const $e="object"==typeof le;return new Promise((Ae,ve)=>{let Ge,Ue=!1;ee.subscribe({next:Ee=>{Ge=Ee,Ue=!0},error:ve,complete:()=>{Ue?Ae(Ge):$e?Ae(le.defaultValue):ve(new _.K)}})})}},7272:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>$e});var _=j(8189),ee=j(7669),le=j(8996);function $e(...Ae){return function y(){return(0,_.J)(1)}()((0,le.D)(Ae,(0,ee.yG)(Ae)))}},515:(In,Et,j)=>{"use strict";j.d(Et,{E:()=>y});const y=new(j(9751).y)($e=>$e.complete())},8996:(In,Et,j)=>{"use strict";j.d(Et,{D:()=>it});var _=j(8421),y=j(5363),ee=j(9468),Ae=j(9751),Ue=j(2202),Ge=j(576),Ee=j(9672);function ye(tt,Pt){if(!tt)throw new Error("Iterable cannot be null");return new Ae.y(Ve=>{(0,Ee.f)(Ve,Pt,()=>{const ke=tt[Symbol.asyncIterator]();(0,Ee.f)(Ve,Pt,()=>{ke.next().then(Ne=>{Ne.done?Ve.complete():Ve.next(Ne.value)})},0,!0)})})}var We=j(3670),Oe=j(8239),Je=j(1144),wt=j(6495),Se=j(2206),xe=j(4532),ue=j(3260);function it(tt,Pt){return Pt?function Y(tt,Pt){if(null!=tt){if((0,We.c)(tt))return function le(tt,Pt){return(0,_.Xf)(tt).pipe((0,ee.R)(Pt),(0,y.Q)(Pt))}(tt,Pt);if((0,Je.z)(tt))return function ve(tt,Pt){return new Ae.y(Ve=>{let ke=0;return Pt.schedule(function(){ke===tt.length?Ve.complete():(Ve.next(tt[ke++]),Ve.closed||this.schedule())})})}(tt,Pt);if((0,Oe.t)(tt))return function $e(tt,Pt){return(0,_.Xf)(tt).pipe((0,ee.R)(Pt),(0,y.Q)(Pt))}(tt,Pt);if((0,Se.D)(tt))return ye(tt,Pt);if((0,wt.T)(tt))return function de(tt,Pt){return new Ae.y(Ve=>{let ke;return(0,Ee.f)(Ve,Pt,()=>{ke=tt[Ue.h](),(0,Ee.f)(Ve,Pt,()=>{let Ne,De;try{({value:Ne,done:De}=ke.next())}catch(He){return void Ve.error(He)}De?Ve.complete():Ve.next(Ne)},0,!0)}),()=>(0,Ge.m)(null==ke?void 0:ke.return)&&ke.return()})}(tt,Pt);if((0,ue.L)(tt))return function _t(tt,Pt){return ye((0,ue.Q)(tt),Pt)}(tt,Pt)}throw(0,xe.z)(tt)}(tt,Pt):(0,_.Xf)(tt)}},8421:(In,Et,j)=>{"use strict";j.d(Et,{Xf:()=>We});var _=j(655),y=j(1144),ee=j(8239),le=j(9751),$e=j(3670),Ae=j(2206),ve=j(4532),Ue=j(6495),Ge=j(3260),Ee=j(576),de=j(7849),ye=j(8822);function We(Y){if(Y instanceof le.y)return Y;if(null!=Y){if((0,$e.c)(Y))return function Oe(Y){return new le.y(it=>{const tt=Y[ye.L]();if((0,Ee.m)(tt.subscribe))return tt.subscribe(it);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Y);if((0,y.z)(Y))return function Je(Y){return new le.y(it=>{for(let tt=0;tt<Y.length&&!it.closed;tt++)it.next(Y[tt]);it.complete()})}(Y);if((0,ee.t)(Y))return function wt(Y){return new le.y(it=>{Y.then(tt=>{it.closed||(it.next(tt),it.complete())},tt=>it.error(tt)).then(null,de.h)})}(Y);if((0,Ae.D)(Y))return xe(Y);if((0,Ue.T)(Y))return function Se(Y){return new le.y(it=>{for(const tt of Y)if(it.next(tt),it.closed)return;it.complete()})}(Y);if((0,Ge.L)(Y))return function ue(Y){return xe((0,Ge.Q)(Y))}(Y)}throw(0,ve.z)(Y)}function xe(Y){return new le.y(it=>{(function _t(Y,it){var tt,Pt,Ve,ke;return(0,_.mG)(this,void 0,void 0,function*(){try{for(tt=(0,_.KL)(Y);!(Pt=yield tt.next()).done;)if(it.next(Pt.value),it.closed)return}catch(Ne){Ve={error:Ne}}finally{try{Pt&&!Pt.done&&(ke=tt.return)&&(yield ke.call(tt))}finally{if(Ve)throw Ve.error}}it.complete()})})(Y,it).catch(tt=>it.error(tt))})}},6451:(In,Et,j)=>{"use strict";j.d(Et,{T:()=>Ae});var _=j(8189),y=j(8421),ee=j(515),le=j(7669),$e=j(8996);function Ae(...ve){const Ue=(0,le.yG)(ve),Ge=(0,le._6)(ve,1/0),Ee=ve;return Ee.length?1===Ee.length?(0,y.Xf)(Ee[0]):(0,_.J)(Ge)((0,$e.D)(Ee,Ue)):ee.E}},9646:(In,Et,j)=>{"use strict";j.d(Et,{of:()=>ee});var _=j(7669),y=j(8996);function ee(...le){const $e=(0,_.yG)(le);return(0,y.D)(le,$e)}},5403:(In,Et,j)=>{"use strict";j.d(Et,{x:()=>y});var _=j(930);function y(le,$e,Ae,ve,Ue){return new ee(le,$e,Ae,ve,Ue)}class ee extends _.Lv{constructor($e,Ae,ve,Ue,Ge,Ee){super($e),this.onFinalize=Ge,this.shouldUnsubscribe=Ee,this._next=Ae?function(de){try{Ae(de)}catch(ye){$e.error(ye)}}:super._next,this._error=Ue?function(de){try{Ue(de)}catch(ye){$e.error(ye)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(de){$e.error(de)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var $e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===($e=this.onFinalize)||void 0===$e||$e.call(this))}}}},4351:(In,Et,j)=>{"use strict";j.d(Et,{b:()=>ee});var _=j(5577),y=j(576);function ee(le,$e){return(0,y.m)($e)?(0,_.z)(le,$e,1):(0,_.z)(le,1)}},6590:(In,Et,j)=>{"use strict";j.d(Et,{d:()=>ee});var _=j(4482),y=j(5403);function ee(le){return(0,_.e)(($e,Ae)=>{let ve=!1;$e.subscribe((0,y.x)(Ae,Ue=>{ve=!0,Ae.next(Ue)},()=>{ve||Ae.next(le),Ae.complete()}))})}},1884:(In,Et,j)=>{"use strict";j.d(Et,{x:()=>le});var _=j(4671),y=j(4482),ee=j(5403);function le(Ae,ve=_.y){return Ae=null!=Ae?Ae:$e,(0,y.e)((Ue,Ge)=>{let Ee,de=!0;Ue.subscribe((0,ee.x)(Ge,ye=>{const We=ve(ye);(de||!Ae(Ee,We))&&(de=!1,Ee=We,Ge.next(ye))}))})}function $e(Ae,ve){return Ae===ve}},9300:(In,Et,j)=>{"use strict";j.d(Et,{h:()=>ee});var _=j(4482),y=j(5403);function ee(le,$e){return(0,_.e)((Ae,ve)=>{let Ue=0;Ae.subscribe((0,y.x)(ve,Ge=>le.call($e,Ge,Ue++)&&ve.next(Ge)))})}},590:(In,Et,j)=>{"use strict";j.d(Et,{P:()=>ve});var _=j(6805),y=j(9300),ee=j(5698),le=j(6590),$e=j(8068),Ae=j(4671);function ve(Ue,Ge){const Ee=arguments.length>=2;return de=>de.pipe(Ue?(0,y.h)((ye,We)=>Ue(ye,We,de)):Ae.y,(0,ee.q)(1),Ee?(0,le.d)(Ge):(0,$e.T)(()=>new _.K))}},4004:(In,Et,j)=>{"use strict";j.d(Et,{U:()=>ee});var _=j(4482),y=j(5403);function ee(le,$e){return(0,_.e)((Ae,ve)=>{let Ue=0;Ae.subscribe((0,y.x)(ve,Ge=>{ve.next(le.call($e,Ge,Ue++))}))})}},8189:(In,Et,j)=>{"use strict";j.d(Et,{J:()=>ee});var _=j(5577),y=j(4671);function ee(le=1/0){return(0,_.z)(y.y,le)}},5577:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>Ue});var _=j(4004),y=j(8421),ee=j(4482),le=j(9672),$e=j(5403),ve=j(576);function Ue(Ge,Ee,de=1/0){return(0,ve.m)(Ee)?Ue((ye,We)=>(0,_.U)((Oe,Je)=>Ee(ye,Oe,We,Je))((0,y.Xf)(Ge(ye,We))),de):("number"==typeof Ee&&(de=Ee),(0,ee.e)((ye,We)=>function Ae(Ge,Ee,de,ye,We,Oe,Je,wt){const Se=[];let xe=0,ue=0,_t=!1;const Y=()=>{_t&&!Se.length&&!xe&&Ee.complete()},it=Pt=>xe<ye?tt(Pt):Se.push(Pt),tt=Pt=>{Oe&&Ee.next(Pt),xe++;let Ve=!1;(0,y.Xf)(de(Pt,ue++)).subscribe((0,$e.x)(Ee,ke=>{null==We||We(ke),Oe?it(ke):Ee.next(ke)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(xe--;Se.length&&xe<ye;){const ke=Se.shift();Je?(0,le.f)(Ee,Je,()=>tt(ke)):tt(ke)}Y()}catch(ke){Ee.error(ke)}}))};return Ge.subscribe((0,$e.x)(Ee,it,()=>{_t=!0,Y()})),()=>{null==wt||wt()}}(ye,We,Ge,de)))}},5363:(In,Et,j)=>{"use strict";j.d(Et,{Q:()=>le});var _=j(9672),y=j(4482),ee=j(5403);function le($e,Ae=0){return(0,y.e)((ve,Ue)=>{ve.subscribe((0,ee.x)(Ue,Ge=>(0,_.f)(Ue,$e,()=>Ue.next(Ge),Ae),()=>(0,_.f)(Ue,$e,()=>Ue.complete(),Ae),Ge=>(0,_.f)(Ue,$e,()=>Ue.error(Ge),Ae)))})}},5026:(In,Et,j)=>{"use strict";j.d(Et,{R:()=>le});var _=j(4482),y=j(5403);function le($e,Ae){return(0,_.e)(function ee($e,Ae,ve,Ue,Ge){return(Ee,de)=>{let ye=ve,We=Ae,Oe=0;Ee.subscribe((0,y.x)(de,Je=>{const wt=Oe++;We=ye?$e(We,Je,wt):(ye=!0,Je),Ue&&de.next(We)},Ge&&(()=>{ye&&de.next(We),de.complete()})))}}($e,Ae,arguments.length>=2,!0))}},3099:(In,Et,j)=>{"use strict";j.d(Et,{B:()=>$e});var _=j(8421),y=j(7579),ee=j(930),le=j(4482);function $e(ve={}){const{connector:Ue=(()=>new y.x),resetOnError:Ge=!0,resetOnComplete:Ee=!0,resetOnRefCountZero:de=!0}=ve;return ye=>{let We,Oe,Je,wt=0,Se=!1,xe=!1;const ue=()=>{null==Oe||Oe.unsubscribe(),Oe=void 0},_t=()=>{ue(),We=Je=void 0,Se=xe=!1},Y=()=>{const it=We;_t(),null==it||it.unsubscribe()};return(0,le.e)((it,tt)=>{wt++,!xe&&!Se&&ue();const Pt=Je=null!=Je?Je:Ue();tt.add(()=>{wt--,0===wt&&!xe&&!Se&&(Oe=Ae(Y,de))}),Pt.subscribe(tt),!We&&wt>0&&(We=new ee.Hp({next:Ve=>Pt.next(Ve),error:Ve=>{xe=!0,ue(),Oe=Ae(_t,Ge,Ve),Pt.error(Ve)},complete:()=>{Se=!0,ue(),Oe=Ae(_t,Ee),Pt.complete()}}),(0,_.Xf)(it).subscribe(We))})(ye)}}function Ae(ve,Ue,...Ge){if(!0===Ue)return void ve();if(!1===Ue)return;const Ee=new ee.Hp({next:()=>{Ee.unsubscribe(),ve()}});return Ue(...Ge).subscribe(Ee)}},8675:(In,Et,j)=>{"use strict";j.d(Et,{O:()=>le});var _=j(7272),y=j(7669),ee=j(4482);function le(...$e){const Ae=(0,y.yG)($e);return(0,ee.e)((ve,Ue)=>{(Ae?(0,_.z)($e,ve,Ae):(0,_.z)($e,ve)).subscribe(Ue)})}},9468:(In,Et,j)=>{"use strict";j.d(Et,{R:()=>y});var _=j(4482);function y(ee,le=0){return(0,_.e)(($e,Ae)=>{Ae.add(ee.schedule(()=>$e.subscribe(Ae),le))})}},3900:(In,Et,j)=>{"use strict";j.d(Et,{w:()=>le});var _=j(8421),y=j(4482),ee=j(5403);function le($e,Ae){return(0,y.e)((ve,Ue)=>{let Ge=null,Ee=0,de=!1;const ye=()=>de&&!Ge&&Ue.complete();ve.subscribe((0,ee.x)(Ue,We=>{null==Ge||Ge.unsubscribe();let Oe=0;const Je=Ee++;(0,_.Xf)($e(We,Je)).subscribe(Ge=(0,ee.x)(Ue,wt=>Ue.next(Ae?Ae(We,wt,Je,Oe++):wt),()=>{Ge=null,ye()}))},()=>{de=!0,ye()}))})}},5698:(In,Et,j)=>{"use strict";j.d(Et,{q:()=>le});var _=j(515),y=j(4482),ee=j(5403);function le($e){return $e<=0?()=>_.E:(0,y.e)((Ae,ve)=>{let Ue=0;Ae.subscribe((0,ee.x)(ve,Ge=>{++Ue<=$e&&(ve.next(Ge),$e<=Ue&&ve.complete())}))})}},8505:(In,Et,j)=>{"use strict";j.d(Et,{b:()=>$e});var _=j(576),y=j(4482),ee=j(5403),le=j(4671);function $e(Ae,ve,Ue){const Ge=(0,_.m)(Ae)||ve||Ue?{next:Ae,error:ve,complete:Ue}:Ae;return Ge?(0,y.e)((Ee,de)=>{var ye;null===(ye=Ge.subscribe)||void 0===ye||ye.call(Ge);let We=!0;Ee.subscribe((0,ee.x)(de,Oe=>{var Je;null===(Je=Ge.next)||void 0===Je||Je.call(Ge,Oe),de.next(Oe)},()=>{var Oe;We=!1,null===(Oe=Ge.complete)||void 0===Oe||Oe.call(Ge),de.complete()},Oe=>{var Je;We=!1,null===(Je=Ge.error)||void 0===Je||Je.call(Ge,Oe),de.error(Oe)},()=>{var Oe,Je;We&&(null===(Oe=Ge.unsubscribe)||void 0===Oe||Oe.call(Ge)),null===(Je=Ge.finalize)||void 0===Je||Je.call(Ge)}))}):le.y}},8068:(In,Et,j)=>{"use strict";j.d(Et,{T:()=>le});var _=j(6805),y=j(4482),ee=j(5403);function le(Ae=$e){return(0,y.e)((ve,Ue)=>{let Ge=!1;ve.subscribe((0,ee.x)(Ue,Ee=>{Ge=!0,Ue.next(Ee)},()=>Ge?Ue.complete():Ue.error(Ae())))})}function $e(){return new _.K}},4408:(In,Et,j)=>{"use strict";j.d(Et,{o:()=>$e});var _=j(727);class y extends _.w0{constructor(ve,Ue){super()}schedule(ve,Ue=0){return this}}const ee={setInterval(Ae,ve,...Ue){const{delegate:Ge}=ee;return null!=Ge&&Ge.setInterval?Ge.setInterval(Ae,ve,...Ue):setInterval(Ae,ve,...Ue)},clearInterval(Ae){const{delegate:ve}=ee;return((null==ve?void 0:ve.clearInterval)||clearInterval)(Ae)},delegate:void 0};var le=j(8737);class $e extends y{constructor(ve,Ue){super(ve,Ue),this.scheduler=ve,this.work=Ue,this.pending=!1}schedule(ve,Ue=0){var Ge;if(this.closed)return this;this.state=ve;const Ee=this.id,de=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(de,Ee,Ue)),this.pending=!0,this.delay=Ue,this.id=null!==(Ge=this.id)&&void 0!==Ge?Ge:this.requestAsyncId(de,this.id,Ue),this}requestAsyncId(ve,Ue,Ge=0){return ee.setInterval(ve.flush.bind(ve,this),Ge)}recycleAsyncId(ve,Ue,Ge=0){if(null!=Ge&&this.delay===Ge&&!1===this.pending)return Ue;null!=Ue&&ee.clearInterval(Ue)}execute(ve,Ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ge=this._execute(ve,Ue);if(Ge)return Ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Ue){let Ee,Ge=!1;try{this.work(ve)}catch(de){Ge=!0,Ee=de||new Error("Scheduled action threw falsy error")}if(Ge)return this.unsubscribe(),Ee}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Ue}=this,{actions:Ge}=Ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(Ge,this),null!=ve&&(this.id=this.recycleAsyncId(Ue,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(In,Et,j)=>{"use strict";j.d(Et,{v:()=>ee});var _=j(6063);class y{constructor($e,Ae=y.now){this.schedulerActionCtor=$e,this.now=Ae}schedule($e,Ae=0,ve){return new this.schedulerActionCtor(this,$e).schedule(ve,Ae)}}y.now=_.l.now;class ee extends y{constructor($e,Ae=y.now){super($e,Ae),this.actions=[],this._active=!1}flush($e){const{actions:Ae}=this;if(this._active)return void Ae.push($e);let ve;this._active=!0;do{if(ve=$e.execute($e.state,$e.delay))break}while($e=Ae.shift());if(this._active=!1,ve){for(;$e=Ae.shift();)$e.unsubscribe();throw ve}}}},4986:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>ee});var _=j(4408);const ee=new(j(7565).v)(_.o)},6063:(In,Et,j)=>{"use strict";j.d(Et,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>_});const _={setTimeout(y,ee,...le){const{delegate:$e}=_;return null!=$e&&$e.setTimeout?$e.setTimeout(y,ee,...le):setTimeout(y,ee,...le)},clearTimeout(y){const{delegate:ee}=_;return((null==ee?void 0:ee.clearTimeout)||clearTimeout)(y)},delegate:void 0}},2202:(In,Et,j)=>{"use strict";j.d(Et,{h:()=>y});const y=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(In,Et,j)=>{"use strict";j.d(Et,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(In,Et,j)=>{"use strict";j.d(Et,{K:()=>y});const y=(0,j(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(In,Et,j)=>{"use strict";j.d(Et,{_6:()=>Ae,jO:()=>le,yG:()=>$e});var _=j(576);function ee(ve){return ve[ve.length-1]}function le(ve){return(0,_.m)(ee(ve))?ve.pop():void 0}function $e(ve){return function y(ve){return ve&&(0,_.m)(ve.schedule)}(ee(ve))?ve.pop():void 0}function Ae(ve,Ue){return"number"==typeof ee(ve)?ve.pop():Ue}},4742:(In,Et,j)=>{"use strict";j.d(Et,{D:()=>$e});const{isArray:_}=Array,{getPrototypeOf:y,prototype:ee,keys:le}=Object;function $e(ve){if(1===ve.length){const Ue=ve[0];if(_(Ue))return{args:Ue,keys:null};if(function Ae(ve){return ve&&"object"==typeof ve&&y(ve)===ee}(Ue)){const Ge=le(Ue);return{args:Ge.map(Ee=>Ue[Ee]),keys:Ge}}}return{args:ve,keys:null}}},8737:(In,Et,j)=>{"use strict";function _(y,ee){if(y){const le=y.indexOf(ee);0<=le&&y.splice(le,1)}}j.d(Et,{P:()=>_})},3888:(In,Et,j)=>{"use strict";function _(y){const le=y($e=>{Error.call($e),$e.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}j.d(Et,{d:()=>_})},1810:(In,Et,j)=>{"use strict";function _(y,ee){return y.reduce((le,$e,Ae)=>(le[$e]=ee[Ae],le),{})}j.d(Et,{n:()=>_})},2806:(In,Et,j)=>{"use strict";j.d(Et,{O:()=>le,x:()=>ee});var _=j(2416);let y=null;function ee($e){if(_.v.useDeprecatedSynchronousErrorHandling){const Ae=!y;if(Ae&&(y={errorThrown:!1,error:null}),$e(),Ae){const{errorThrown:ve,error:Ue}=y;if(y=null,ve)throw Ue}}else $e()}function le($e){_.v.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=$e)}},9672:(In,Et,j)=>{"use strict";function _(y,ee,le,$e=0,Ae=!1){const ve=ee.schedule(function(){le(),Ae?y.add(this.schedule(null,$e)):this.unsubscribe()},$e);if(y.add(ve),!Ae)return ve}j.d(Et,{f:()=>_})},4671:(In,Et,j)=>{"use strict";function _(y){return y}j.d(Et,{y:()=>_})},1144:(In,Et,j)=>{"use strict";j.d(Et,{z:()=>_});const _=y=>y&&"number"==typeof y.length&&"function"!=typeof y},2206:(In,Et,j)=>{"use strict";j.d(Et,{D:()=>y});var _=j(576);function y(ee){return Symbol.asyncIterator&&(0,_.m)(null==ee?void 0:ee[Symbol.asyncIterator])}},576:(In,Et,j)=>{"use strict";function _(y){return"function"==typeof y}j.d(Et,{m:()=>_})},3670:(In,Et,j)=>{"use strict";j.d(Et,{c:()=>ee});var _=j(8822),y=j(576);function ee(le){return(0,y.m)(le[_.L])}},6495:(In,Et,j)=>{"use strict";j.d(Et,{T:()=>ee});var _=j(2202),y=j(576);function ee(le){return(0,y.m)(null==le?void 0:le[_.h])}},8239:(In,Et,j)=>{"use strict";j.d(Et,{t:()=>y});var _=j(576);function y(ee){return(0,_.m)(null==ee?void 0:ee.then)}},3260:(In,Et,j)=>{"use strict";j.d(Et,{L:()=>le,Q:()=>ee});var _=j(655),y=j(576);function ee($e){return(0,_.FC)(this,arguments,function*(){const ve=$e.getReader();try{for(;;){const{value:Ue,done:Ge}=yield(0,_.qq)(ve.read());if(Ge)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Ue)}}finally{ve.releaseLock()}})}function le($e){return(0,y.m)(null==$e?void 0:$e.getReader)}},4482:(In,Et,j)=>{"use strict";j.d(Et,{A:()=>y,e:()=>ee});var _=j(576);function y(le){return(0,_.m)(null==le?void 0:le.lift)}function ee(le){return $e=>{if(y($e))return $e.lift(function(Ae){try{return le(Ae,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(In,Et,j)=>{"use strict";j.d(Et,{Z:()=>le});var _=j(4004);const{isArray:y}=Array;function le($e){return(0,_.U)(Ae=>function ee($e,Ae){return y(Ae)?$e(...Ae):$e(Ae)}($e,Ae))}},5032:(In,Et,j)=>{"use strict";function _(){}j.d(Et,{Z:()=>_})},9635:(In,Et,j)=>{"use strict";j.d(Et,{U:()=>ee,z:()=>y});var _=j(4671);function y(...le){return ee(le)}function ee(le){return 0===le.length?_.y:1===le.length?le[0]:function(Ae){return le.reduce((ve,Ue)=>Ue(ve),Ae)}}},7849:(In,Et,j)=>{"use strict";j.d(Et,{h:()=>ee});var _=j(2416),y=j(3410);function ee(le){y.z.setTimeout(()=>{const{onUnhandledError:$e}=_.v;if(!$e)throw le;$e(le)})}},4532:(In,Et,j)=>{"use strict";function _(y){return new TypeError(`You provided ${null!==y&&"object"==typeof y?"an invalid object":`'${y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Et,{z:()=>_})},863:(In,Et,j)=>{var _={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7879,9230],"./ion-datetime_3.entry.js":[4959,7879,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function y(ee){if(!j.o(_,ee))return Promise.resolve().then(()=>{var Ae=new Error("Cannot find module '"+ee+"'");throw Ae.code="MODULE_NOT_FOUND",Ae});var le=_[ee],$e=le[0];return Promise.all(le.slice(1).map(j.e)).then(()=>j($e))}y.keys=()=>Object.keys(_),y.id=863,In.exports=y},5899:(In,Et,j)=>{var _={"./pwa-action-sheet.entry.js":[2987,2987],"./pwa-camera-modal-instance.entry.js":[3527,3527],"./pwa-camera-modal.entry.js":[7839,7839],"./pwa-camera.entry.js":[7943,7943],"./pwa-toast.entry.js":[3822,3822]};function y(ee){if(!j.o(_,ee))return Promise.resolve().then(()=>{var Ae=new Error("Cannot find module '"+ee+"'");throw Ae.code="MODULE_NOT_FOUND",Ae});var le=_[ee],$e=le[0];return j.e(le[1]).then(()=>j($e))}y.keys=()=>Object.keys(_),y.id=5899,In.exports=y},655:(In,Et,j)=>{"use strict";function le(dt,Mt){var yt={};for(var Fe in dt)Object.prototype.hasOwnProperty.call(dt,Fe)&&Mt.indexOf(Fe)<0&&(yt[Fe]=dt[Fe]);if(null!=dt&&"function"==typeof Object.getOwnPropertySymbols){var je=0;for(Fe=Object.getOwnPropertySymbols(dt);je<Fe.length;je++)Mt.indexOf(Fe[je])<0&&Object.prototype.propertyIsEnumerable.call(dt,Fe[je])&&(yt[Fe[je]]=dt[Fe[je]])}return yt}function $e(dt,Mt,yt,Fe){var ht,je=arguments.length,Be=je<3?Mt:null===Fe?Fe=Object.getOwnPropertyDescriptor(Mt,yt):Fe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Be=Reflect.decorate(dt,Mt,yt,Fe);else for(var Ct=dt.length-1;Ct>=0;Ct--)(ht=dt[Ct])&&(Be=(je<3?ht(Be):je>3?ht(Mt,yt,Be):ht(Mt,yt))||Be);return je>3&&Be&&Object.defineProperty(Mt,yt,Be),Be}function ye(dt,Mt,yt,Fe){return new(yt||(yt=Promise))(function(Be,ht){function Ct(Dn){try{zt(Fe.next(Dn))}catch(kt){ht(kt)}}function nn(Dn){try{zt(Fe.throw(Dn))}catch(kt){ht(kt)}}function zt(Dn){Dn.done?Be(Dn.value):function je(Be){return Be instanceof yt?Be:new yt(function(ht){ht(Be)})}(Dn.value).then(Ct,nn)}zt((Fe=Fe.apply(dt,Mt||[])).next())})}function Y(dt){return this instanceof Y?(this.v=dt,this):new Y(dt)}function it(dt,Mt,yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,Fe=yt.apply(dt,Mt||[]),Be=[];return je={},ht("next"),ht("throw"),ht("return"),je[Symbol.asyncIterator]=function(){return this},je;function ht(Re){Fe[Re]&&(je[Re]=function(At){return new Promise(function(gn,On){Be.push([Re,At,gn,On])>1||Ct(Re,At)})})}function Ct(Re,At){try{!function nn(Re){Re.value instanceof Y?Promise.resolve(Re.value.v).then(zt,Dn):kt(Be[0][2],Re)}(Fe[Re](At))}catch(gn){kt(Be[0][3],gn)}}function zt(Re){Ct("next",Re)}function Dn(Re){Ct("throw",Re)}function kt(Re,At){Re(At),Be.shift(),Be.length&&Ct(Be[0][0],Be[0][1])}}function Pt(dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt,Mt=dt[Symbol.asyncIterator];return Mt?Mt.call(dt):(dt=function wt(dt){var Mt="function"==typeof Symbol&&Symbol.iterator,yt=Mt&&dt[Mt],Fe=0;if(yt)return yt.call(dt);if(dt&&"number"==typeof dt.length)return{next:function(){return dt&&Fe>=dt.length&&(dt=void 0),{value:dt&&dt[Fe++],done:!dt}}};throw new TypeError(Mt?"Object is not iterable.":"Symbol.iterator is not defined.")}(dt),yt={},Fe("next"),Fe("throw"),Fe("return"),yt[Symbol.asyncIterator]=function(){return this},yt);function Fe(Be){yt[Be]=dt[Be]&&function(ht){return new Promise(function(Ct,nn){!function je(Be,ht,Ct,nn){Promise.resolve(nn).then(function(zt){Be({value:zt,done:Ct})},ht)}(Ct,nn,(ht=dt[Be](ht)).done,ht.value)})}}}j.d(Et,{FC:()=>it,KL:()=>Pt,_T:()=>le,gn:()=>$e,mG:()=>ye,qq:()=>Y})},6895:(In,Et,j)=>{"use strict";j.d(Et,{Do:()=>ue,EM:()=>ho,HT:()=>le,JF:()=>No,K0:()=>Ae,Mx:()=>Vi,O5:()=>be,PM:()=>co,S$:()=>wt,V_:()=>Ge,Ye:()=>_t,b0:()=>xe,bD:()=>ha,ez:()=>us,q:()=>ee,sg:()=>Li,tP:()=>er,uU:()=>_i,w_:()=>$e});var _=j(4650);let y=null;function ee(){return y}function le($){y||(y=$)}class $e{}const Ae=new _.OlP("DocumentToken");let ve=(()=>{class ${historyGo(H){throw new Error("Not implemented")}}return $.\u0275fac=function(H){return new(H||$)},$.\u0275prov=_.Yz7({token:$,factory:function(){return function Ue(){return(0,_.LFG)(Ee)}()},providedIn:"platform"}),$})();const Ge=new _.OlP("Location Initialized");let Ee=(()=>{class $ extends ve{constructor(H){super(),this._doc=H,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState(H){const ie=ee().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",H,!1),()=>ie.removeEventListener("popstate",H)}onHashChange(H){const ie=ee().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",H,!1),()=>ie.removeEventListener("hashchange",H)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(H){this._location.pathname=H}pushState(H,ie,Le){de()?this._history.pushState(H,ie,Le):this._location.hash=Le}replaceState(H,ie,Le){de()?this._history.replaceState(H,ie,Le):this._location.hash=Le}forward(){this._history.forward()}back(){this._history.back()}historyGo(H=0){this._history.go(H)}getState(){return this._history.state}}return $.\u0275fac=function(H){return new(H||$)(_.LFG(Ae))},$.\u0275prov=_.Yz7({token:$,factory:function(){return function ye(){return new Ee((0,_.LFG)(Ae))}()},providedIn:"platform"}),$})();function de(){return!!window.history.pushState}function We($,Q){if(0==$.length)return Q;if(0==Q.length)return $;let H=0;return $.endsWith("/")&&H++,Q.startsWith("/")&&H++,2==H?$+Q.substring(1):1==H?$+Q:$+"/"+Q}function Oe($){const Q=$.match(/#|\?|$/),H=Q&&Q.index||$.length;return $.slice(0,H-("/"===$[H-1]?1:0))+$.slice(H)}function Je($){return $&&"?"!==$[0]?"?"+$:$}let wt=(()=>{class ${historyGo(H){throw new Error("Not implemented")}}return $.\u0275fac=function(H){return new(H||$)},$.\u0275prov=_.Yz7({token:$,factory:function(){return(0,_.f3M)(xe)},providedIn:"root"}),$})();const Se=new _.OlP("appBaseHref");let xe=(()=>{class $ extends wt{constructor(H,ie){var Le,Zt,en;super(),this._platformLocation=H,this._removeListenerFns=[],this._baseHref=null!==(Le=null!==(Zt=null!=ie?ie:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Zt?Zt:null===(en=(0,_.f3M)(Ae).location)||void 0===en?void 0:en.origin)&&void 0!==Le?Le:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}prepareExternalUrl(H){return We(this._baseHref,H)}path(H=!1){const ie=this._platformLocation.pathname+Je(this._platformLocation.search),Le=this._platformLocation.hash;return Le&&H?`${ie}${Le}`:ie}pushState(H,ie,Le,Zt){const en=this.prepareExternalUrl(Le+Je(Zt));this._platformLocation.pushState(H,ie,en)}replaceState(H,ie,Le,Zt){const en=this.prepareExternalUrl(Le+Je(Zt));this._platformLocation.replaceState(H,ie,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){var ie,Le;null===(ie=(Le=this._platformLocation).historyGo)||void 0===ie||ie.call(Le,H)}}return $.\u0275fac=function(H){return new(H||$)(_.LFG(ve),_.LFG(Se,8))},$.\u0275prov=_.Yz7({token:$,factory:$.\u0275fac,providedIn:"root"}),$})(),ue=(()=>{class $ extends wt{constructor(H,ie){super(),this._platformLocation=H,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}path(H=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl(H){const ie=We(this._baseHref,H);return ie.length>0?"#"+ie:ie}pushState(H,ie,Le,Zt){let en=this.prepareExternalUrl(Le+Je(Zt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.pushState(H,ie,en)}replaceState(H,ie,Le,Zt){let en=this.prepareExternalUrl(Le+Je(Zt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.replaceState(H,ie,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){var ie,Le;null===(ie=(Le=this._platformLocation).historyGo)||void 0===ie||ie.call(Le,H)}}return $.\u0275fac=function(H){return new(H||$)(_.LFG(ve),_.LFG(Se,8))},$.\u0275prov=_.Yz7({token:$,factory:$.\u0275fac}),$})(),_t=(()=>{class ${constructor(H){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=H;const ie=this._locationStrategy.getBaseHref();this._basePath=function Pt($){if(new RegExp("^(https?:)?//").test($)){const[,H]=$.split(/\/\/[^\/]+/);return H}return $}(Oe(tt(ie))),this._locationStrategy.onPopState(Le=>{this._subject.emit({url:this.path(!0),pop:!0,state:Le.state,type:Le.type})})}ngOnDestroy(){var H;null===(H=this._urlChangeSubscription)||void 0===H||H.unsubscribe(),this._urlChangeListeners=[]}path(H=!1){return this.normalize(this._locationStrategy.path(H))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(H,ie=""){return this.path()==this.normalize(H+Je(ie))}normalize(H){return $.stripTrailingSlash(function it($,Q){if(!$||!Q.startsWith($))return Q;const H=Q.substring($.length);return""===H||["/",";","?","#"].includes(H[0])?H:Q}(this._basePath,tt(H)))}prepareExternalUrl(H){return H&&"/"!==H[0]&&(H="/"+H),this._locationStrategy.prepareExternalUrl(H)}go(H,ie="",Le=null){this._locationStrategy.pushState(Le,"",H,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Je(ie)),Le)}replaceState(H,ie="",Le=null){this._locationStrategy.replaceState(Le,"",H,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Je(ie)),Le)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(H=0){var ie,Le;null===(ie=(Le=this._locationStrategy).historyGo)||void 0===ie||ie.call(Le,H)}onUrlChange(H){return this._urlChangeListeners.push(H),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)})),()=>{const ie=this._urlChangeListeners.indexOf(H);var Le;this._urlChangeListeners.splice(ie,1),0===this._urlChangeListeners.length&&(null===(Le=this._urlChangeSubscription)||void 0===Le||Le.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(H="",ie){this._urlChangeListeners.forEach(Le=>Le(H,ie))}subscribe(H,ie,Le){return this._subject.subscribe({next:H,error:ie,complete:Le})}}return $.normalizeQueryParams=Je,$.joinWithSlash=We,$.stripTrailingSlash=Oe,$.\u0275fac=function(H){return new(H||$)(_.LFG(wt))},$.\u0275prov=_.Yz7({token:$,factory:function(){return function Y(){return new _t((0,_.LFG)(wt))}()},providedIn:"root"}),$})();function tt($){return $.replace(/\/index.html$/,"")}var De=(()=>((De=De||{})[De.Format=0]="Format",De[De.Standalone=1]="Standalone",De))(),He=(()=>((He=He||{})[He.Narrow=0]="Narrow",He[He.Abbreviated=1]="Abbreviated",He[He.Wide=2]="Wide",He[He.Short=3]="Short",He))(),pt=(()=>((pt=pt||{})[pt.Short=0]="Short",pt[pt.Medium=1]="Medium",pt[pt.Long=2]="Long",pt[pt.Full=3]="Full",pt))(),Tt=(()=>((Tt=Tt||{})[Tt.Decimal=0]="Decimal",Tt[Tt.Group=1]="Group",Tt[Tt.List=2]="List",Tt[Tt.PercentSign=3]="PercentSign",Tt[Tt.PlusSign=4]="PlusSign",Tt[Tt.MinusSign=5]="MinusSign",Tt[Tt.Exponential=6]="Exponential",Tt[Tt.SuperscriptingExponent=7]="SuperscriptingExponent",Tt[Tt.PerMille=8]="PerMille",Tt[Tt.Infinity=9]="Infinity",Tt[Tt.NaN=10]="NaN",Tt[Tt.TimeSeparator=11]="TimeSeparator",Tt[Tt.CurrencyDecimal=12]="CurrencyDecimal",Tt[Tt.CurrencyGroup=13]="CurrencyGroup",Tt))();function nn($,Q){return tr((0,_.cg1)($)[_.wAp.DateFormat],Q)}function zt($,Q){return tr((0,_.cg1)($)[_.wAp.TimeFormat],Q)}function Dn($,Q){return tr((0,_.cg1)($)[_.wAp.DateTimeFormat],Q)}function kt($,Q){const H=(0,_.cg1)($),ie=H[_.wAp.NumberSymbols][Q];if(typeof ie>"u"){if(Q===Tt.CurrencyDecimal)return H[_.wAp.NumberSymbols][Tt.Decimal];if(Q===Tt.CurrencyGroup)return H[_.wAp.NumberSymbols][Tt.Group]}return ie}function cn($){if(!$[_.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${$[_.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function tr($,Q){for(let H=Q;H>-1;H--)if(typeof $[H]<"u")return $[H];throw new Error("Locale data API: locale data undefined")}function bn($){const[Q,H]=$.split(":");return{hours:+Q,minutes:+H}}const di=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,wi={},Gn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var qn=(()=>((qn=qn||{})[qn.Short=0]="Short",qn[qn.ShortGMT=1]="ShortGMT",qn[qn.Long=2]="Long",qn[qn.Extended=3]="Extended",qn))(),ln=(()=>((ln=ln||{})[ln.FullYear=0]="FullYear",ln[ln.Month=1]="Month",ln[ln.Date=2]="Date",ln[ln.Hours=3]="Hours",ln[ln.Minutes=4]="Minutes",ln[ln.Seconds=5]="Seconds",ln[ln.FractionalSeconds=6]="FractionalSeconds",ln[ln.Day=7]="Day",ln))(),yn=(()=>((yn=yn||{})[yn.DayPeriods=0]="DayPeriods",yn[yn.Days=1]="Days",yn[yn.Months=2]="Months",yn[yn.Eras=3]="Eras",yn))();function on($,Q,H,ie){let Le=function lt($){if(ut($))return $;if("number"==typeof $&&!isNaN($))return new Date($);if("string"==typeof $){if($=$.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test($)){const[Le,Zt=1,en=1]=$.split("-").map(Vn=>+Vn);return Jr(Le,Zt-1,en)}const H=parseFloat($);if(!isNaN($-H))return new Date(H);let ie;if(ie=$.match(di))return function un($){const Q=new Date(0);let H=0,ie=0;const Le=$[8]?Q.setUTCFullYear:Q.setFullYear,Zt=$[8]?Q.setUTCHours:Q.setHours;$[9]&&(H=Number($[9]+$[10]),ie=Number($[9]+$[11])),Le.call(Q,Number($[1]),Number($[2])-1,Number($[3]));const en=Number($[4]||0)-H,Vn=Number($[5]||0)-ie,Ar=Number($[6]||0),Kr=Math.floor(1e3*parseFloat("0."+($[7]||0)));return Zt.call(Q,en,Vn,Ar,Kr),Q}(ie)}const Q=new Date($);if(!ut(Q))throw new Error(`Unable to convert "${$}" into a date`);return Q}($);Q=Dr(H,Q)||Q;let Vn,en=[];for(;Q;){if(Vn=Gn.exec(Q),!Vn){en.push(Q);break}{en=en.concat(Vn.slice(1));const Br=en.pop();if(!Br)break;Q=Br}}let Ar=Le.getTimezoneOffset();ie&&(Ar=Ie(ie,Ar),Le=function Ot($,Q,H){const ie=H?-1:1,Le=$.getTimezoneOffset();return function Ye($,Q){return($=new Date($.getTime())).setMinutes($.getMinutes()+Q),$}($,ie*(Ie(Q,Le)-Le))}(Le,ie,!0));let Kr="";return en.forEach(Br=>{const wr=function we($){if(qt[$])return qt[$];let Q;switch($){case"G":case"GG":case"GGG":Q=ur(yn.Eras,He.Abbreviated);break;case"GGGG":Q=ur(yn.Eras,He.Wide);break;case"GGGGG":Q=ur(yn.Eras,He.Narrow);break;case"y":Q=Lr(ln.FullYear,1,0,!1,!0);break;case"yy":Q=Lr(ln.FullYear,2,0,!0,!0);break;case"yyy":Q=Lr(ln.FullYear,3,0,!1,!0);break;case"yyyy":Q=Lr(ln.FullYear,4,0,!1,!0);break;case"Y":Q=Jt(1);break;case"YY":Q=Jt(2,!0);break;case"YYY":Q=Jt(3);break;case"YYYY":Q=Jt(4);break;case"M":case"L":Q=Lr(ln.Month,1,1);break;case"MM":case"LL":Q=Lr(ln.Month,2,1);break;case"MMM":Q=ur(yn.Months,He.Abbreviated);break;case"MMMM":Q=ur(yn.Months,He.Wide);break;case"MMMMM":Q=ur(yn.Months,He.Narrow);break;case"LLL":Q=ur(yn.Months,He.Abbreviated,De.Standalone);break;case"LLLL":Q=ur(yn.Months,He.Wide,De.Standalone);break;case"LLLLL":Q=ur(yn.Months,He.Narrow,De.Standalone);break;case"w":Q=rt(1);break;case"ww":Q=rt(2);break;case"W":Q=rt(1,!0);break;case"d":Q=Lr(ln.Date,1);break;case"dd":Q=Lr(ln.Date,2);break;case"c":case"cc":Q=Lr(ln.Day,1);break;case"ccc":Q=ur(yn.Days,He.Abbreviated,De.Standalone);break;case"cccc":Q=ur(yn.Days,He.Wide,De.Standalone);break;case"ccccc":Q=ur(yn.Days,He.Narrow,De.Standalone);break;case"cccccc":Q=ur(yn.Days,He.Short,De.Standalone);break;case"E":case"EE":case"EEE":Q=ur(yn.Days,He.Abbreviated);break;case"EEEE":Q=ur(yn.Days,He.Wide);break;case"EEEEE":Q=ur(yn.Days,He.Narrow);break;case"EEEEEE":Q=ur(yn.Days,He.Short);break;case"a":case"aa":case"aaa":Q=ur(yn.DayPeriods,He.Abbreviated);break;case"aaaa":Q=ur(yn.DayPeriods,He.Wide);break;case"aaaaa":Q=ur(yn.DayPeriods,He.Narrow);break;case"b":case"bb":case"bbb":Q=ur(yn.DayPeriods,He.Abbreviated,De.Standalone,!0);break;case"bbbb":Q=ur(yn.DayPeriods,He.Wide,De.Standalone,!0);break;case"bbbbb":Q=ur(yn.DayPeriods,He.Narrow,De.Standalone,!0);break;case"B":case"BB":case"BBB":Q=ur(yn.DayPeriods,He.Abbreviated,De.Format,!0);break;case"BBBB":Q=ur(yn.DayPeriods,He.Wide,De.Format,!0);break;case"BBBBB":Q=ur(yn.DayPeriods,He.Narrow,De.Format,!0);break;case"h":Q=Lr(ln.Hours,1,-12);break;case"hh":Q=Lr(ln.Hours,2,-12);break;case"H":Q=Lr(ln.Hours,1);break;case"HH":Q=Lr(ln.Hours,2);break;case"m":Q=Lr(ln.Minutes,1);break;case"mm":Q=Lr(ln.Minutes,2);break;case"s":Q=Lr(ln.Seconds,1);break;case"ss":Q=Lr(ln.Seconds,2);break;case"S":Q=Lr(ln.FractionalSeconds,1);break;case"SS":Q=Lr(ln.FractionalSeconds,2);break;case"SSS":Q=Lr(ln.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Q=yr(qn.Short);break;case"ZZZZZ":Q=yr(qn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Q=yr(qn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Q=yr(qn.Long);break;default:return null}return qt[$]=Q,Q}(Br);Kr+=wr?wr(Le,H,Ar):"''"===Br?"'":Br.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Kr}function Jr($,Q,H){const ie=new Date(0);return ie.setFullYear($,Q,H),ie.setHours(0,0,0),ie}function Dr($,Q){const H=function Mt($){return(0,_.cg1)($)[_.wAp.LocaleId]}($);if(wi[H]=wi[H]||{},wi[H][Q])return wi[H][Q];let ie="";switch(Q){case"shortDate":ie=nn($,pt.Short);break;case"mediumDate":ie=nn($,pt.Medium);break;case"longDate":ie=nn($,pt.Long);break;case"fullDate":ie=nn($,pt.Full);break;case"shortTime":ie=zt($,pt.Short);break;case"mediumTime":ie=zt($,pt.Medium);break;case"longTime":ie=zt($,pt.Long);break;case"fullTime":ie=zt($,pt.Full);break;case"short":const Le=Dr($,"shortTime"),Zt=Dr($,"shortDate");ie=Qr(Dn($,pt.Short),[Le,Zt]);break;case"medium":const en=Dr($,"mediumTime"),Vn=Dr($,"mediumDate");ie=Qr(Dn($,pt.Medium),[en,Vn]);break;case"long":const Ar=Dr($,"longTime"),Kr=Dr($,"longDate");ie=Qr(Dn($,pt.Long),[Ar,Kr]);break;case"full":const Br=Dr($,"fullTime"),wr=Dr($,"fullDate");ie=Qr(Dn($,pt.Full),[Br,wr])}return ie&&(wi[H][Q]=ie),ie}function Qr($,Q){return Q&&($=$.replace(/\{([^}]+)}/g,function(H,ie){return null!=Q&&ie in Q?Q[ie]:H})),$}function zr($,Q,H="-",ie,Le){let Zt="";($<0||Le&&$<=0)&&(Le?$=1-$:($=-$,Zt=H));let en=String($);for(;en.length<Q;)en="0"+en;return ie&&(en=en.slice(en.length-Q)),Zt+en}function Lr($,Q,H=0,ie=!1,Le=!1){return function(Zt,en){let Vn=function gi($,Q){switch($){case ln.FullYear:return Q.getFullYear();case ln.Month:return Q.getMonth();case ln.Date:return Q.getDate();case ln.Hours:return Q.getHours();case ln.Minutes:return Q.getMinutes();case ln.Seconds:return Q.getSeconds();case ln.FractionalSeconds:return Q.getMilliseconds();case ln.Day:return Q.getDay();default:throw new Error(`Unknown DateType value "${$}".`)}}($,Zt);if((H>0||Vn>-H)&&(Vn+=H),$===ln.Hours)0===Vn&&-12===H&&(Vn=12);else if($===ln.FractionalSeconds)return function pi($,Q){return zr($,3).substring(0,Q)}(Vn,Q);const Ar=kt(en,Tt.MinusSign);return zr(Vn,Q,Ar,ie,Le)}}function ur($,Q,H=De.Format,ie=!1){return function(Le,Zt){return function lr($,Q,H,ie,Le,Zt){switch(H){case yn.Months:return function je($,Q,H){const ie=(0,_.cg1)($),Zt=tr([ie[_.wAp.MonthsFormat],ie[_.wAp.MonthsStandalone]],Q);return tr(Zt,H)}(Q,Le,ie)[$.getMonth()];case yn.Days:return function Fe($,Q,H){const ie=(0,_.cg1)($),Zt=tr([ie[_.wAp.DaysFormat],ie[_.wAp.DaysStandalone]],Q);return tr(Zt,H)}(Q,Le,ie)[$.getDay()];case yn.DayPeriods:const en=$.getHours(),Vn=$.getMinutes();if(Zt){const Kr=function Cn($){const Q=(0,_.cg1)($);return cn(Q),(Q[_.wAp.ExtraData][2]||[]).map(ie=>"string"==typeof ie?bn(ie):[bn(ie[0]),bn(ie[1])])}(Q),Br=function hr($,Q,H){const ie=(0,_.cg1)($);cn(ie);const Zt=tr([ie[_.wAp.ExtraData][0],ie[_.wAp.ExtraData][1]],Q)||[];return tr(Zt,H)||[]}(Q,Le,ie),wr=Kr.findIndex(Ri=>{if(Array.isArray(Ri)){const[bi,Bi]=Ri,Wo=en>=bi.hours&&Vn>=bi.minutes,yo=en<Bi.hours||en===Bi.hours&&Vn<Bi.minutes;if(bi.hours<Bi.hours){if(Wo&&yo)return!0}else if(Wo||yo)return!0}else if(Ri.hours===en&&Ri.minutes===Vn)return!0;return!1});if(-1!==wr)return Br[wr]}return function yt($,Q,H){const ie=(0,_.cg1)($),Zt=tr([ie[_.wAp.DayPeriodsFormat],ie[_.wAp.DayPeriodsStandalone]],Q);return tr(Zt,H)}(Q,Le,ie)[en<12?0:1];case yn.Eras:return function Be($,Q){return tr((0,_.cg1)($)[_.wAp.Eras],Q)}(Q,ie)[$.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${H}`)}}(Le,Zt,$,Q,H,ie)}}function yr($){return function(Q,H,ie){const Le=-1*ie,Zt=kt(H,Tt.MinusSign),en=Le>0?Math.floor(Le/60):Math.ceil(Le/60);switch($){case qn.Short:return(Le>=0?"+":"")+zr(en,2,Zt)+zr(Math.abs(Le%60),2,Zt);case qn.ShortGMT:return"GMT"+(Le>=0?"+":"")+zr(en,1,Zt);case qn.Long:return"GMT"+(Le>=0?"+":"")+zr(en,2,Zt)+":"+zr(Math.abs(Le%60),2,Zt);case qn.Extended:return 0===ie?"Z":(Le>=0?"+":"")+zr(en,2,Zt)+":"+zr(Math.abs(Le%60),2,Zt);default:throw new Error(`Unknown zone width "${$}"`)}}}const Ai=0,mr=4;function Ze($){return Jr($.getFullYear(),$.getMonth(),$.getDate()+(mr-$.getDay()))}function rt($,Q=!1){return function(H,ie){let Le;if(Q){const Zt=new Date(H.getFullYear(),H.getMonth(),1).getDay()-1,en=H.getDate();Le=1+Math.floor((en+Zt)/7)}else{const Zt=Ze(H),en=function Kt($){const Q=Jr($,Ai,1).getDay();return Jr($,0,1+(Q<=mr?mr:mr+7)-Q)}(Zt.getFullYear()),Vn=Zt.getTime()-en.getTime();Le=1+Math.round(Vn/6048e5)}return zr(Le,$,kt(ie,Tt.MinusSign))}}function Jt($,Q=!1){return function(H,ie){return zr(Ze(H).getFullYear(),$,kt(ie,Tt.MinusSign),Q)}}const qt={};function Ie($,Q){$=$.replace(/:/g,"");const H=Date.parse("Jan 01, 1970 00:00:00 "+$)/6e4;return isNaN(H)?Q:H}function ut($){return $ instanceof Date&&!isNaN($.valueOf())}function Vi($,Q){Q=encodeURIComponent(Q);for(const H of $.split(";")){const ie=H.indexOf("="),[Le,Zt]=-1==ie?[H,""]:[H.slice(0,ie),H.slice(ie+1)];if(Le.trim()===Q)return decodeURIComponent(Zt)}return null}class Ci{constructor(Q,H,ie,Le){this.$implicit=Q,this.ngForOf=H,this.index=ie,this.count=Le}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Li=(()=>{class ${set ngForOf(H){this._ngForOf=H,this._ngForOfDirty=!0}set ngForTrackBy(H){this._trackByFn=H}get ngForTrackBy(){return this._trackByFn}constructor(H,ie,Le){this._viewContainer=H,this._template=ie,this._differs=Le,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(H){H&&(this._template=H)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const H=this._ngForOf;!this._differ&&H&&(this._differ=this._differs.find(H).create(this.ngForTrackBy))}if(this._differ){const H=this._differ.diff(this._ngForOf);H&&this._applyChanges(H)}}_applyChanges(H){const ie=this._viewContainer;H.forEachOperation((Le,Zt,en)=>{if(null==Le.previousIndex)ie.createEmbeddedView(this._template,new Ci(Le.item,this._ngForOf,-1,-1),null===en?void 0:en);else if(null==en)ie.remove(null===Zt?void 0:Zt);else if(null!==Zt){const Vn=ie.get(Zt);ie.move(Vn,en),Ur(Vn,Le)}});for(let Le=0,Zt=ie.length;Le<Zt;Le++){const Vn=ie.get(Le).context;Vn.index=Le,Vn.count=Zt,Vn.ngForOf=this._ngForOf}H.forEachIdentityChange(Le=>{Ur(ie.get(Le.currentIndex),Le)})}static ngTemplateContextGuard(H,ie){return!0}}return $.\u0275fac=function(H){return new(H||$)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},$.\u0275dir=_.lG2({type:$,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),$})();function Ur($,Q){$.context.$implicit=Q.item}let be=(()=>{class ${constructor(H,ie){this._viewContainer=H,this._context=new qe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf(H){this._context.$implicit=this._context.ngIf=H,this._updateView()}set ngIfThen(H){me("ngIfThen",H),this._thenTemplateRef=H,this._thenViewRef=null,this._updateView()}set ngIfElse(H){me("ngIfElse",H),this._elseTemplateRef=H,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(H,ie){return!0}}return $.\u0275fac=function(H){return new(H||$)(_.Y36(_.s_b),_.Y36(_.Rgc))},$.\u0275dir=_.lG2({type:$,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),$})();class qe{constructor(){this.$implicit=null,this.ngIf=null}}function me($,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${$} must be a TemplateRef, but received '${(0,_.AaK)(Q)}'.`)}let er=(()=>{class ${constructor(H){this._viewContainerRef=H,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(H){if(H.ngTemplateOutlet||H.ngTemplateOutletInjector){const ie=this._viewContainerRef;if(this._viewRef&&ie.remove(ie.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Le,ngTemplateOutletContext:Zt,ngTemplateOutletInjector:en}=this;this._viewRef=ie.createEmbeddedView(Le,Zt,en?{injector:en}:void 0)}else this._viewRef=null}else this._viewRef&&H.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return $.\u0275fac=function(H){return new(H||$)(_.Y36(_.s_b))},$.\u0275dir=_.lG2({type:$,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[_.TTD]}),$})();const vs=new _.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Oo=new _.OlP("DATE_PIPE_DEFAULT_OPTIONS");let _i=(()=>{class ${constructor(H,ie,Le){this.locale=H,this.defaultTimezone=ie,this.defaultOptions=Le}transform(H,ie,Le,Zt){if(null==H||""===H||H!=H)return null;try{var en,Vn,Ar,Kr,Br;const wr=null!==(en=null!=ie?ie:null===(Vn=this.defaultOptions)||void 0===Vn?void 0:Vn.dateFormat)&&void 0!==en?en:"mediumDate",Ri=null!==(Ar=null!==(Kr=null!=Le?Le:null===(Br=this.defaultOptions)||void 0===Br?void 0:Br.timezone)&&void 0!==Kr?Kr:this.defaultTimezone)&&void 0!==Ar?Ar:void 0;return on(H,wr,Zt||this.locale,Ri)}catch(wr){throw function Wr($,Q){return new _.vHH(2100,!1)}()}}}return $.\u0275fac=function(H){return new(H||$)(_.Y36(_.soG,16),_.Y36(vs,24),_.Y36(Oo,24))},$.\u0275pipe=_.Yjl({name:"date",type:$,pure:!0,standalone:!0}),$})(),us=(()=>{class ${}return $.\u0275fac=function(H){return new(H||$)},$.\u0275mod=_.oAB({type:$}),$.\u0275inj=_.cJS({}),$})();const ha="browser",Ws="server";function co($){return $===Ws}let ho=(()=>{class ${}return $.\u0275prov=(0,_.Yz7)({token:$,providedIn:"root",factory:()=>new fa((0,_.LFG)(Ae),window)}),$})();class fa{constructor(Q,H){this.document=Q,this.window=H,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const H=function _s($,Q){const H=$.getElementById(Q)||$.getElementsByName(Q)[0];if(H)return H;if("function"==typeof $.createTreeWalker&&$.body&&($.body.createShadowRoot||$.body.attachShadow)){const ie=$.createTreeWalker($.body,NodeFilter.SHOW_ELEMENT);let Le=ie.currentNode;for(;Le;){const Zt=Le.shadowRoot;if(Zt){const en=Zt.getElementById(Q)||Zt.querySelector(`[name="${Q}"]`);if(en)return en}Le=ie.nextNode()}}return null}(this.document,Q);H&&(this.scrollToElement(H),H.focus())}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const H=this.window.history;H&&H.scrollRestoration&&(H.scrollRestoration=Q)}}scrollToElement(Q){const H=Q.getBoundingClientRect(),ie=H.left+this.window.pageXOffset,Le=H.top+this.window.pageYOffset,Zt=this.offset();this.window.scrollTo(ie-Zt[0],Le-Zt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=fo(this.window.history)||fo(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fo($){return Object.getOwnPropertyDescriptor($,"scrollRestoration")}class No{}},529:(In,Et,j)=>{"use strict";j.d(Et,{UA:()=>Tt,eN:()=>Mt,h_:()=>Jr});var _=j(6895),y=j(4650),ee=j(9646),le=j(9751),$e=j(4351),Ae=j(9300),ve=j(4004);class Ue{}class Ge{}class Ee{constructor(Ze){this.normalizedNames=new Map,this.lazyUpdate=null,Ze?this.lazyInit="string"==typeof Ze?()=>{this.headers=new Map,Ze.split("\n").forEach(rt=>{const Jt=rt.indexOf(":");if(Jt>0){const qt=rt.slice(0,Jt),we=qt.toLowerCase(),Ie=rt.slice(Jt+1).trim();this.maybeSetNormalizedName(qt,we),this.headers.has(we)?this.headers.get(we).push(Ie):this.headers.set(we,[Ie])}})}:()=>{this.headers=new Map,Object.entries(Ze).forEach(([rt,Jt])=>{let qt;if(qt="string"==typeof Jt?[Jt]:"number"==typeof Jt?[Jt.toString()]:Jt.map(we=>we.toString()),qt.length>0){const we=rt.toLowerCase();this.headers.set(we,qt),this.maybeSetNormalizedName(rt,we)}})}:this.headers=new Map}has(Ze){return this.init(),this.headers.has(Ze.toLowerCase())}get(Ze){this.init();const rt=this.headers.get(Ze.toLowerCase());return rt&&rt.length>0?rt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ze){return this.init(),this.headers.get(Ze.toLowerCase())||null}append(Ze,rt){return this.clone({name:Ze,value:rt,op:"a"})}set(Ze,rt){return this.clone({name:Ze,value:rt,op:"s"})}delete(Ze,rt){return this.clone({name:Ze,value:rt,op:"d"})}maybeSetNormalizedName(Ze,rt){this.normalizedNames.has(rt)||this.normalizedNames.set(rt,Ze)}init(){this.lazyInit&&(this.lazyInit instanceof Ee?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ze=>this.applyUpdate(Ze)),this.lazyUpdate=null))}copyFrom(Ze){Ze.init(),Array.from(Ze.headers.keys()).forEach(rt=>{this.headers.set(rt,Ze.headers.get(rt)),this.normalizedNames.set(rt,Ze.normalizedNames.get(rt))})}clone(Ze){const rt=new Ee;return rt.lazyInit=this.lazyInit&&this.lazyInit instanceof Ee?this.lazyInit:this,rt.lazyUpdate=(this.lazyUpdate||[]).concat([Ze]),rt}applyUpdate(Ze){const rt=Ze.name.toLowerCase();switch(Ze.op){case"a":case"s":let Jt=Ze.value;if("string"==typeof Jt&&(Jt=[Jt]),0===Jt.length)return;this.maybeSetNormalizedName(Ze.name,rt);const qt=("a"===Ze.op?this.headers.get(rt):void 0)||[];qt.push(...Jt),this.headers.set(rt,qt);break;case"d":const we=Ze.value;if(we){let Ie=this.headers.get(rt);if(!Ie)return;Ie=Ie.filter(Ye=>-1===we.indexOf(Ye)),0===Ie.length?(this.headers.delete(rt),this.normalizedNames.delete(rt)):this.headers.set(rt,Ie)}else this.headers.delete(rt),this.normalizedNames.delete(rt)}}forEach(Ze){this.init(),Array.from(this.normalizedNames.keys()).forEach(rt=>Ze(this.normalizedNames.get(rt),this.headers.get(rt)))}}class ye{encodeKey(Ze){return wt(Ze)}encodeValue(Ze){return wt(Ze)}decodeKey(Ze){return decodeURIComponent(Ze)}decodeValue(Ze){return decodeURIComponent(Ze)}}const Oe=/%(\d[a-f0-9])/gi,Je={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wt(Kt){return encodeURIComponent(Kt).replace(Oe,(Ze,rt)=>{var Jt;return null!==(Jt=Je[rt])&&void 0!==Jt?Jt:Ze})}function Se(Kt){return`${Kt}`}class xe{constructor(Ze={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ze.encoder||new ye,Ze.fromString){if(Ze.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function We(Kt,Ze){const rt=new Map;return Kt.length>0&&Kt.replace(/^\?/,"").split("&").forEach(qt=>{const we=qt.indexOf("="),[Ie,Ye]=-1==we?[Ze.decodeKey(qt),""]:[Ze.decodeKey(qt.slice(0,we)),Ze.decodeValue(qt.slice(we+1))],Ot=rt.get(Ie)||[];Ot.push(Ye),rt.set(Ie,Ot)}),rt}(Ze.fromString,this.encoder)}else Ze.fromObject?(this.map=new Map,Object.keys(Ze.fromObject).forEach(rt=>{const Jt=Ze.fromObject[rt],qt=Array.isArray(Jt)?Jt.map(Se):[Se(Jt)];this.map.set(rt,qt)})):this.map=null}has(Ze){return this.init(),this.map.has(Ze)}get(Ze){this.init();const rt=this.map.get(Ze);return rt?rt[0]:null}getAll(Ze){return this.init(),this.map.get(Ze)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ze,rt){return this.clone({param:Ze,value:rt,op:"a"})}appendAll(Ze){const rt=[];return Object.keys(Ze).forEach(Jt=>{const qt=Ze[Jt];Array.isArray(qt)?qt.forEach(we=>{rt.push({param:Jt,value:we,op:"a"})}):rt.push({param:Jt,value:qt,op:"a"})}),this.clone(rt)}set(Ze,rt){return this.clone({param:Ze,value:rt,op:"s"})}delete(Ze,rt){return this.clone({param:Ze,value:rt,op:"d"})}toString(){return this.init(),this.keys().map(Ze=>{const rt=this.encoder.encodeKey(Ze);return this.map.get(Ze).map(Jt=>rt+"="+this.encoder.encodeValue(Jt)).join("&")}).filter(Ze=>""!==Ze).join("&")}clone(Ze){const rt=new xe({encoder:this.encoder});return rt.cloneFrom=this.cloneFrom||this,rt.updates=(this.updates||[]).concat(Ze),rt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ze=>this.map.set(Ze,this.cloneFrom.map.get(Ze))),this.updates.forEach(Ze=>{switch(Ze.op){case"a":case"s":const rt=("a"===Ze.op?this.map.get(Ze.param):void 0)||[];rt.push(Se(Ze.value)),this.map.set(Ze.param,rt);break;case"d":if(void 0===Ze.value){this.map.delete(Ze.param);break}{let Jt=this.map.get(Ze.param)||[];const qt=Jt.indexOf(Se(Ze.value));-1!==qt&&Jt.splice(qt,1),Jt.length>0?this.map.set(Ze.param,Jt):this.map.delete(Ze.param)}}}),this.cloneFrom=this.updates=null)}}class _t{constructor(){this.map=new Map}set(Ze,rt){return this.map.set(Ze,rt),this}get(Ze){return this.map.has(Ze)||this.map.set(Ze,Ze.defaultValue()),this.map.get(Ze)}delete(Ze){return this.map.delete(Ze),this}has(Ze){return this.map.has(Ze)}keys(){return this.map.keys()}}function it(Kt){return typeof ArrayBuffer<"u"&&Kt instanceof ArrayBuffer}function tt(Kt){return typeof Blob<"u"&&Kt instanceof Blob}function Pt(Kt){return typeof FormData<"u"&&Kt instanceof FormData}class ke{constructor(Ze,rt,Jt,qt){let we;if(this.url=rt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ze.toUpperCase(),function Y(Kt){switch(Kt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||qt?(this.body=void 0!==Jt?Jt:null,we=qt):we=Jt,we&&(this.reportProgress=!!we.reportProgress,this.withCredentials=!!we.withCredentials,we.responseType&&(this.responseType=we.responseType),we.headers&&(this.headers=we.headers),we.context&&(this.context=we.context),we.params&&(this.params=we.params)),this.headers||(this.headers=new Ee),this.context||(this.context=new _t),this.params){const Ie=this.params.toString();if(0===Ie.length)this.urlWithParams=rt;else{const Ye=rt.indexOf("?");this.urlWithParams=rt+(-1===Ye?"?":Ye<rt.length-1?"&":"")+Ie}}else this.params=new xe,this.urlWithParams=rt}serializeBody(){return null===this.body?null:it(this.body)||tt(this.body)||Pt(this.body)||function Ve(Kt){return typeof URLSearchParams<"u"&&Kt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Pt(this.body)?null:tt(this.body)?this.body.type||null:it(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ze={}){var rt;const Jt=Ze.method||this.method,qt=Ze.url||this.url,we=Ze.responseType||this.responseType,Ie=void 0!==Ze.body?Ze.body:this.body,Ye=void 0!==Ze.withCredentials?Ze.withCredentials:this.withCredentials,Ot=void 0!==Ze.reportProgress?Ze.reportProgress:this.reportProgress;let lt=Ze.headers||this.headers,un=Ze.params||this.params;const ut=null!==(rt=Ze.context)&&void 0!==rt?rt:this.context;return void 0!==Ze.setHeaders&&(lt=Object.keys(Ze.setHeaders).reduce((Ke,_e)=>Ke.set(_e,Ze.setHeaders[_e]),lt)),Ze.setParams&&(un=Object.keys(Ze.setParams).reduce((Ke,_e)=>Ke.set(_e,Ze.setParams[_e]),un)),new ke(Jt,qt,Ie,{params:un,headers:lt,context:ut,reportProgress:Ot,responseType:we,withCredentials:Ye})}}var Ne=(()=>((Ne=Ne||{})[Ne.Sent=0]="Sent",Ne[Ne.UploadProgress=1]="UploadProgress",Ne[Ne.ResponseHeader=2]="ResponseHeader",Ne[Ne.DownloadProgress=3]="DownloadProgress",Ne[Ne.Response=4]="Response",Ne[Ne.User=5]="User",Ne))();class De{constructor(Ze,rt=200,Jt="OK"){this.headers=Ze.headers||new Ee,this.status=void 0!==Ze.status?Ze.status:rt,this.statusText=Ze.statusText||Jt,this.url=Ze.url||null,this.ok=this.status>=200&&this.status<300}}class He extends De{constructor(Ze={}){super(Ze),this.type=Ne.ResponseHeader}clone(Ze={}){return new He({headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class pt extends De{constructor(Ze={}){super(Ze),this.type=Ne.Response,this.body=void 0!==Ze.body?Ze.body:null}clone(Ze={}){return new pt({body:void 0!==Ze.body?Ze.body:this.body,headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class Tt extends De{constructor(Ze){super(Ze,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ze.url||"(unknown url)"}`:`Http failure response for ${Ze.url||"(unknown url)"}: ${Ze.status} ${Ze.statusText}`,this.error=Ze.error||null}}function dt(Kt,Ze){return{body:Ze,headers:Kt.headers,context:Kt.context,observe:Kt.observe,params:Kt.params,reportProgress:Kt.reportProgress,responseType:Kt.responseType,withCredentials:Kt.withCredentials}}let Mt=(()=>{class Kt{constructor(rt){this.handler=rt}request(rt,Jt,qt={}){let we;if(rt instanceof ke)we=rt;else{let Ot,lt;Ot=qt.headers instanceof Ee?qt.headers:new Ee(qt.headers),qt.params&&(lt=qt.params instanceof xe?qt.params:new xe({fromObject:qt.params})),we=new ke(rt,Jt,void 0!==qt.body?qt.body:null,{headers:Ot,context:qt.context,params:lt,reportProgress:qt.reportProgress,responseType:qt.responseType||"json",withCredentials:qt.withCredentials})}const Ie=(0,ee.of)(we).pipe((0,$e.b)(Ot=>this.handler.handle(Ot)));if(rt instanceof ke||"events"===qt.observe)return Ie;const Ye=Ie.pipe((0,Ae.h)(Ot=>Ot instanceof pt));switch(qt.observe||"body"){case"body":switch(we.responseType){case"arraybuffer":return Ye.pipe((0,ve.U)(Ot=>{if(null!==Ot.body&&!(Ot.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ot.body}));case"blob":return Ye.pipe((0,ve.U)(Ot=>{if(null!==Ot.body&&!(Ot.body instanceof Blob))throw new Error("Response is not a Blob.");return Ot.body}));case"text":return Ye.pipe((0,ve.U)(Ot=>{if(null!==Ot.body&&"string"!=typeof Ot.body)throw new Error("Response is not a string.");return Ot.body}));default:return Ye.pipe((0,ve.U)(Ot=>Ot.body))}case"response":return Ye;default:throw new Error(`Unreachable: unhandled observe type ${qt.observe}}`)}}delete(rt,Jt={}){return this.request("DELETE",rt,Jt)}get(rt,Jt={}){return this.request("GET",rt,Jt)}head(rt,Jt={}){return this.request("HEAD",rt,Jt)}jsonp(rt,Jt){return this.request("JSONP",rt,{params:(new xe).append(Jt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(rt,Jt={}){return this.request("OPTIONS",rt,Jt)}patch(rt,Jt,qt={}){return this.request("PATCH",rt,dt(qt,Jt))}post(rt,Jt,qt={}){return this.request("POST",rt,dt(qt,Jt))}put(rt,Jt,qt={}){return this.request("PUT",rt,dt(qt,Jt))}}return Kt.\u0275fac=function(rt){return new(rt||Kt)(y.LFG(Ue))},Kt.\u0275prov=y.Yz7({token:Kt,factory:Kt.\u0275fac}),Kt})();function yt(Kt,Ze){return Ze(Kt)}const ht=new y.OlP("HTTP_INTERCEPTOR_FNS");let nn=(()=>{class Kt extends Ue{constructor(rt,Jt){super(),this.backend=rt,this.injector=Jt,this.chain=null}handle(rt){if(null===this.chain){const Jt=Array.from(new Set(this.injector.get(ht)));this.chain=Jt.reduceRight((qt,we)=>function je(Kt,Ze,rt){return(Jt,qt)=>rt.runInContext(()=>Ze(Jt,we=>Kt(we,qt)))}(qt,we,this.injector),yt)}return this.chain(rt,Jt=>this.backend.handle(Jt))}}return Kt.\u0275fac=function(rt){return new(rt||Kt)(y.LFG(Ge),y.LFG(y.lqb))},Kt.\u0275prov=y.Yz7({token:Kt,factory:Kt.\u0275fac}),Kt})();const hr=/^\)\]\}',?\n/;let tr=(()=>{class Kt{constructor(rt){this.xhrFactory=rt}handle(rt){if("JSONP"===rt.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new le.y(Jt=>{const qt=this.xhrFactory.build();if(qt.open(rt.method,rt.urlWithParams),rt.withCredentials&&(qt.withCredentials=!0),rt.headers.forEach((_e,gt)=>qt.setRequestHeader(_e,gt.join(","))),rt.headers.has("Accept")||qt.setRequestHeader("Accept","application/json, text/plain, */*"),!rt.headers.has("Content-Type")){const _e=rt.detectContentTypeHeader();null!==_e&&qt.setRequestHeader("Content-Type",_e)}if(rt.responseType){const _e=rt.responseType.toLowerCase();qt.responseType="json"!==_e?_e:"text"}const we=rt.serializeBody();let Ie=null;const Ye=()=>{if(null!==Ie)return Ie;const _e=qt.statusText||"OK",gt=new Ee(qt.getAllResponseHeaders()),Nt=function _r(Kt){return"responseURL"in Kt&&Kt.responseURL?Kt.responseURL:/^X-Request-URL:/m.test(Kt.getAllResponseHeaders())?Kt.getResponseHeader("X-Request-URL"):null}(qt)||rt.url;return Ie=new He({headers:gt,status:qt.status,statusText:_e,url:Nt}),Ie},Ot=()=>{let{headers:_e,status:gt,statusText:Nt,url:he}=Ye(),Ce=null;204!==gt&&(Ce=typeof qt.response>"u"?qt.responseText:qt.response),0===gt&&(gt=Ce?200:0);let St=gt>=200&&gt<300;if("json"===rt.responseType&&"string"==typeof Ce){const It=Ce;Ce=Ce.replace(hr,"");try{Ce=""!==Ce?JSON.parse(Ce):null}catch(Xt){Ce=It,St&&(St=!1,Ce={error:Xt,text:Ce})}}St?(Jt.next(new pt({body:Ce,headers:_e,status:gt,statusText:Nt,url:he||void 0})),Jt.complete()):Jt.error(new Tt({error:Ce,headers:_e,status:gt,statusText:Nt,url:he||void 0}))},lt=_e=>{const{url:gt}=Ye(),Nt=new Tt({error:_e,status:qt.status||0,statusText:qt.statusText||"Unknown Error",url:gt||void 0});Jt.error(Nt)};let un=!1;const ut=_e=>{un||(Jt.next(Ye()),un=!0);let gt={type:Ne.DownloadProgress,loaded:_e.loaded};_e.lengthComputable&&(gt.total=_e.total),"text"===rt.responseType&&qt.responseText&&(gt.partialText=qt.responseText),Jt.next(gt)},Ke=_e=>{let gt={type:Ne.UploadProgress,loaded:_e.loaded};_e.lengthComputable&&(gt.total=_e.total),Jt.next(gt)};return qt.addEventListener("load",Ot),qt.addEventListener("error",lt),qt.addEventListener("timeout",lt),qt.addEventListener("abort",lt),rt.reportProgress&&(qt.addEventListener("progress",ut),null!==we&&qt.upload&&qt.upload.addEventListener("progress",Ke)),qt.send(we),Jt.next({type:Ne.Sent}),()=>{qt.removeEventListener("error",lt),qt.removeEventListener("abort",lt),qt.removeEventListener("load",Ot),qt.removeEventListener("timeout",lt),rt.reportProgress&&(qt.removeEventListener("progress",ut),null!==we&&qt.upload&&qt.upload.removeEventListener("progress",Ke)),qt.readyState!==qt.DONE&&qt.abort()}})}}return Kt.\u0275fac=function(rt){return new(rt||Kt)(y.LFG(_.JF))},Kt.\u0275prov=y.Yz7({token:Kt,factory:Kt.\u0275fac}),Kt})();const bn=new y.OlP("XSRF_ENABLED"),yi=new y.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),di=new y.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class wi{}let Gn=(()=>{class Kt{constructor(rt,Jt,qt){this.doc=rt,this.platform=Jt,this.cookieName=qt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const rt=this.doc.cookie||"";return rt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,_.Mx)(rt,this.cookieName),this.lastCookieString=rt),this.lastToken}}return Kt.\u0275fac=function(rt){return new(rt||Kt)(y.LFG(_.K0),y.LFG(y.Lbi),y.LFG(yi))},Kt.\u0275prov=y.Yz7({token:Kt,factory:Kt.\u0275fac}),Kt})();function qn(Kt,Ze){const rt=Kt.url.toLowerCase();if(!(0,y.f3M)(bn)||"GET"===Kt.method||"HEAD"===Kt.method||rt.startsWith("http://")||rt.startsWith("https://"))return Ze(Kt);const Jt=(0,y.f3M)(wi).getToken(),qt=(0,y.f3M)(di);return null!=Jt&&!Kt.headers.has(qt)&&(Kt=Kt.clone({headers:Kt.headers.set(qt,Jt)})),Ze(Kt)}function Jr(...Kt){const Ze=[Mt,tr,nn,{provide:Ue,useExisting:nn},{provide:Ge,useExisting:tr},{provide:ht,useValue:qn,multi:!0},{provide:bn,useValue:!0},{provide:wi,useClass:Gn}];for(const rt of Kt)Ze.push(...rt.\u0275providers);return(0,y.MR2)(Ze)}},4650:(In,Et,j)=>{"use strict";j.d(Et,{$8M:()=>eo,$WT:()=>Wn,$Z:()=>Kf,AFp:()=>UE,ALo:()=>c,AaK:()=>Ue,BQk:()=>op,CHM:()=>L,CRH:()=>vE,CZH:()=>p_,CqO:()=>lv,D6c:()=>xw,DdM:()=>i_,EJc:()=>GI,EpF:()=>am,F$t:()=>Ty,F4k:()=>lm,FYo:()=>Bc,FiY:()=>Ii,G48:()=>fw,Gf:()=>mE,GfV:()=>Lf,GkF:()=>vu,Gpc:()=>de,Hsn:()=>hm,JOm:()=>Uo,KtG:()=>ne,LFG:()=>yr,LMc:()=>Mw,LSH:()=>Cc,Lbi:()=>jI,Lck:()=>Jv,MAs:()=>im,MMx:()=>ev,MR2:()=>ku,NdJ:()=>by,OlP:()=>Ni,Oqu:()=>fg,P3R:()=>Xd,PXZ:()=>ow,Q6J:()=>Ey,QGY:()=>Cy,Qsj:()=>ih,R0b:()=>td,RDi:()=>Lh,RIp:()=>Uh,Rgc:()=>ki,SBq:()=>rc,Sil:()=>KI,Suo:()=>yE,TTD:()=>uo,TgZ:()=>sp,X6Q:()=>hw,XFs:()=>bn,Xpm:()=>St,Xts:()=>Of,Y36:()=>Uc,YKP:()=>gl,YNc:()=>rm,Yjl:()=>kn,Yz7:()=>kt,Z0I:()=>On,ZZ4:()=>Z0,_Bn:()=>Dh,_UZ:()=>sm,_Vd:()=>Ka,_uU:()=>bv,aQg:()=>X0,c2e:()=>HI,cJS:()=>At,cg1:()=>Pm,dDg:()=>nw,dqk:()=>Gn,eJc:()=>k0,ekj:()=>Dm,eoX:()=>YE,f3M:()=>mr,g9A:()=>jE,h0i:()=>Xa,hij:()=>xm,iGM:()=>gE,iPO:()=>cw,ifc:()=>Ot,ip1:()=>BE,jDz:()=>Sf,kL8:()=>Om,lG2:()=>pn,lqb:()=>Fl,lri:()=>KE,n5z:()=>qc,oAB:()=>ze,oxw:()=>uv,q4F:()=>Pp,qLn:()=>fu,qOj:()=>mf,qZA:()=>Md,rWj:()=>qE,s9C:()=>fm,sBO:()=>pw,s_b:()=>$a,soG:()=>g_,tb:()=>XE,tp0:()=>$s,uIk:()=>mu,vHH:()=>Se,vpe:()=>Fn,wAp:()=>Fr,xi3:()=>G,xp6:()=>lh,ynx:()=>om,z2F:()=>m_,zSh:()=>jh,zs3:()=>zu});var _=j(7579),y=j(727),ee=j(9751),le=j(6451),$e=j(3099);function Ae(n){for(let i in n)if(n[i]===Ae)return i;throw Error("Could not find renamed property on target object.")}function ve(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Ue(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ue).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Ge(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Ee=Ae({__forward_ref__:Ae});function de(n){return n.__forward_ref__=de,n.toString=function(){return Ue(this())},n}function ye(n){return We(n)?n():n}function We(n){return"function"==typeof n&&n.hasOwnProperty(Ee)&&n.__forward_ref__===de}function Oe(n){return n&&!!n.\u0275providers}const wt="https://g.co/ng/security#xss";class Se extends Error{constructor(i,o){super(xe(i,o)),this.code=i}}function xe(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function ue(n){return"string"==typeof n?n:null==n?"":String(n)}function _t(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ue(n)}function Pt(n,i){throw new Se(-201,!1)}function ht(n,i){null==n&&function Ct(n,i,o,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${o} ${d} ${i} <=Actual]`))}(i,n,null,"!=")}function kt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function At(n){return{providers:n.providers||[],imports:n.imports||[]}}function gn(n){return Yn(n,Cn)||Yn(n,_r)}function On(n){return null!==gn(n)}function Yn(n,i){return n.hasOwnProperty(i)?n[i]:null}function cn(n){return n&&(n.hasOwnProperty(hr)||n.hasOwnProperty(tr))?n[hr]:null}const Cn=Ae({\u0275prov:Ae}),hr=Ae({\u0275inj:Ae}),_r=Ae({ngInjectableDef:Ae}),tr=Ae({ngInjectorDef:Ae});var bn=(()=>((bn=bn||{})[bn.Default=0]="Default",bn[bn.Host=1]="Host",bn[bn.Self=2]="Self",bn[bn.SkipSelf=4]="SkipSelf",bn[bn.Optional=8]="Optional",bn))();let zn;function Cr(n){const i=zn;return zn=n,i}function di(n,i,o){const d=gn(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:o&bn.Optional?null:void 0!==i?i:void Pt(Ue(n))}const Gn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),on={},Jr="__NG_DI_FLAG__",Dr="ngTempTokenPath",Qr="ngTokenPath",zr=/\n/gm,pi="\u0275",Lr="__source";let gi;function ur(n){const i=gi;return gi=n,i}function lr(n,i=bn.Default){if(void 0===gi)throw new Se(-203,!1);return null===gi?di(n,void 0,i):gi.get(n,i&bn.Optional?null:void 0,i)}function yr(n,i=bn.Default){return(function yi(){return zn}()||lr)(ye(n),i)}function mr(n,i=bn.Default){return yr(n,Kt(i))}function Kt(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ze(n){const i=[];for(let o=0;o<n.length;o++){const d=ye(n[o]);if(Array.isArray(d)){if(0===d.length)throw new Se(900,!1);let h,v=bn.Default;for(let D=0;D<d.length;D++){const N=d[D],U=Jt(N);"number"==typeof U?-1===U?h=N.token:v|=U:h=N}i.push(yr(h,v))}else i.push(yr(d))}return i}function rt(n,i){return n[Jr]=i,n.prototype[Jr]=i,n}function Jt(n){return n[Jr]}function Ie(n){return{toString:n}.toString()}var Ye=(()=>((Ye=Ye||{})[Ye.OnPush=0]="OnPush",Ye[Ye.Default=1]="Default",Ye))(),Ot=(()=>{return(n=Ot||(Ot={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ot;var n})();const lt={},un=[],ut=Ae({\u0275cmp:Ae}),Ke=Ae({\u0275dir:Ae}),_e=Ae({\u0275pipe:Ae}),gt=Ae({\u0275mod:Ae}),Nt=Ae({\u0275fac:Ae}),he=Ae({__NG_ELEMENT_ID__:Ae});let Ce=0;function St(n){return Ie(()=>{const i=ys(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ye.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Ot.Emulated,id:"c"+Ce++,styles:n.styles||un,_:null,schemas:n.schemas||null,tView:null};vi(o);const d=n.dependencies;return o.directiveDefs=Vi(d,!1),o.pipeDefs=Vi(d,!0),o})}function Xt(n){return wn(n)||Qn(n)}function Xe(n){return null!==n}function ze(n){return Ie(()=>({type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Gt(n,i){if(null==n)return lt;const o={};for(const d in n)if(n.hasOwnProperty(d)){let h=n[d],v=h;Array.isArray(h)&&(v=h[1],h=h[0]),o[h]=d,i&&(i[h]=v)}return o}function pn(n){return Ie(()=>{const i=ys(n);return vi(i),i})}function kn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function wn(n){return n[ut]||null}function Qn(n){return n[Ke]||null}function Jn(n){return n[_e]||null}function Wn(n){const i=wn(n)||Qn(n)||Jn(n);return null!==i&&i.standalone}function Xn(n,i){const o=n[gt]||null;if(!o&&!0===i)throw new Error(`Type ${Ue(n)} does not have '\u0275mod' property.`);return o}function ys(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Gt(n.inputs,i),outputs:Gt(n.outputs)}}function vi(n){var i;null===(i=n.features)||void 0===i||i.forEach(o=>o(n))}function Vi(n,i){if(!n)return null;const o=i?Jn:Xt;return()=>("function"==typeof n?n():n).map(d=>o(d)).filter(Xe)}const ji=0,An=1,cr=2,ri=3,qi=4,kr=5,Ci=6,Li=7,Ur=8,se=9,be=10,qe=11,me=12,et=13,Qe=14,Vt=15,Lt=16,Qt=17,an=18,vn=19,rr=20,er=21,vr=22,$i=1,mt=2,ot=7,xt=8,tn=9,dn=10;function Er(n){return Array.isArray(n)&&"object"==typeof n[$i]}function Ir(n){return Array.isArray(n)&&!0===n[$i]}function ei(n){return 0!=(4&n.flags)}function vs(n){return n.componentOffset>-1}function Oo(n){return 1==(1&n.flags)}function _i(n){return!!n.template}function Ss(n){return 0!=(256&n[cr])}function ti(n,i){return n.hasOwnProperty(Nt)?n[Nt]:null}class ks{constructor(i,o,d){this.previousValue=i,this.currentValue=o,this.firstChange=d}isFirstChange(){return this.firstChange}}function uo(){return ho}function ho(n){return n.type.prototype.ngOnChanges&&(n.setInput=fo),fa}function fa(){const n=ta(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===lt)n.previous=i;else for(let d in i)o[d]=i[d];n.current=null,this.ngOnChanges(i)}}function fo(n,i,o,d){const h=this.declaredInputs[o],v=ta(n)||function No(n,i){return n[_s]=i}(n,{previous:lt,current:null}),D=v.current||(v.current={}),N=v.previous,U=N[h];D[h]=new ks(U&&U.currentValue,i,N===lt),n[d]=i}uo.ngInherit=!0;const _s="__ngSimpleChanges__";function ta(n){return n[_s]||null}const zi=function(n,i,o){};function Pi(n){for(;Array.isArray(n);)n=n[ji];return n}function go(n,i){return Pi(i[n])}function Oi(n,i){return Pi(i[n.index])}function Ja(n,i){return n.data[i]}function os(n,i){return n[i]}function Xi(n,i){const o=i[n];return Er(o)?o:o[ji]}function Gi(n){return 64==(64&n[cr])}function Ns(n,i){return null==i?null:n[i]}function To(n){n[an]=0}function ia(n,i){n[kr]+=i;let o=n,d=n[ri];for(;null!==d&&(1===i&&1===o[kr]||-1===i&&0===o[kr]);)d[kr]+=i,o=d,d=d[ri]}const Tr={lFrame:as(null),bindingsEnabled:!0};function T(){return Tr.bindingsEnabled}function M(){return Tr.lFrame.lView}function F(){return Tr.lFrame.tView}function L(n){return Tr.lFrame.contextLView=n,n[Ur]}function ne(n){return Tr.lFrame.contextLView=null,n}function vt(){let n=Tn();for(;null!==n&&64===n.type;)n=n.parent;return n}function Tn(){return Tr.lFrame.currentTNode}function ii(n,i){const o=Tr.lFrame;o.currentTNode=n,o.isParent=i}function Qi(){return Tr.lFrame.isParent}function ds(){Tr.lFrame.isParent=!1}function ts(){const n=Tr.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function oa(){return Tr.lFrame.bindingIndex++}function Ta(n,i){const o=Tr.lFrame;o.bindingIndex=o.bindingRootIndex=n,ns(i)}function ns(n){Tr.lFrame.currentDirectiveIndex=n}function tl(){return Tr.lFrame.currentQueryIndex}function Sa(n){Tr.lFrame.currentQueryIndex=n}function zo(n){const i=n[An];return 2===i.type?i.declTNode:1===i.type?n[Ci]:null}function Fo(n,i,o){if(o&bn.SkipSelf){let h=i,v=n;for(;!(h=h.parent,null!==h||o&bn.Host||(h=zo(v),null===h||(v=v[Vt],10&h.type))););if(null===h)return!1;i=h,n=v}const d=Tr.lFrame=ga();return d.currentTNode=i,d.lView=n,!0}function nl(n){const i=ga(),o=n[An];Tr.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function ga(){const n=Tr.lFrame,i=null===n?null:n.child;return null===i?as(n):i}function as(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function xo(){const n=Tr.lFrame;return Tr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Go=xo;function Zs(){const n=xo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ls(){return Tr.lFrame.selectedIndex}function Fs(n){Tr.lFrame.selectedIndex=n}function Vr(){const n=Tr.lFrame;return Ja(n.tView,n.selectedIndex)}function Sr(n,i){for(let X=i.directiveStart,fe=i.directiveEnd;X<fe;X++){const ft=n.data[X].type.prototype,{ngAfterContentInit:jt,ngAfterContentChecked:mn,ngAfterViewInit:Pn,ngAfterViewChecked:nr,ngOnDestroy:br}=ft;var o,d,h,v,D,N,U;jt&&(null!==(o=n.contentHooks)&&void 0!==o?o:n.contentHooks=[]).push(-X,jt),mn&&((null!==(d=n.contentHooks)&&void 0!==d?d:n.contentHooks=[]).push(X,mn),(null!==(h=n.contentCheckHooks)&&void 0!==h?h:n.contentCheckHooks=[]).push(X,mn)),Pn&&(null!==(v=n.viewHooks)&&void 0!==v?v:n.viewHooks=[]).push(-X,Pn),nr&&((null!==(D=n.viewHooks)&&void 0!==D?D:n.viewHooks=[]).push(X,nr),(null!==(N=n.viewCheckHooks)&&void 0!==N?N:n.viewCheckHooks=[]).push(X,nr)),null!=br&&(null!==(U=n.destroyHooks)&&void 0!==U?U:n.destroyHooks=[]).push(X,br)}}function Hl(n,i,o){Q(n,i,3,o)}function vl(n,i,o,d){(3&n[cr])===o&&Q(n,i,o,d)}function $(n,i){let o=n[cr];(3&o)===i&&(o&=2047,o+=1,n[cr]=o)}function Q(n,i,o,d){const v=null!=d?d:-1,D=i.length-1;let N=0;for(let U=void 0!==d?65535&n[an]:0;U<D;U++)if("number"==typeof i[U+1]){if(N=i[U],null!=d&&N>=d)break}else i[U]<0&&(n[an]+=65536),(N<v||-1==v)&&(H(n,o,i,U),n[an]=(4294901760&n[an])+U+2),U++}function H(n,i,o,d){const h=o[d]<0,v=o[d+1],N=n[h?-o[d]:o[d]];if(h){if(n[cr]>>11<n[an]>>16&&(3&n[cr])===i){n[cr]+=2048,zi(4,N,v);try{v.call(N)}finally{zi(5,N,v)}}}else{zi(4,N,v);try{v.call(N)}finally{zi(5,N,v)}}}const ie=-1;class Le{constructor(i,o,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=d}}function bi(n,i,o){let d=0;for(;d<o.length;){const h=o[d];if("number"==typeof h){if(0!==h)break;d++;const v=o[d++],D=o[d++],N=o[d++];n.setAttribute(i,D,N,v)}else{const v=h,D=o[++d];Wo(v)?n.setProperty(i,v,D):n.setAttribute(i,v,D),d++}}return d}function Bi(n){return 3===n||4===n||6===n}function Wo(n){return 64===n.charCodeAt(0)}function yo(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let d=0;d<i.length;d++){const h=i[d];"number"==typeof h?o=h:0===o||Ko(n,o,h,null,-1===o||2===o?i[++d]:null)}}return n}function Ko(n,i,o,d,h){let v=0,D=n.length;if(-1===i)D=-1;else for(;v<n.length;){const N=n[v++];if("number"==typeof N){if(N===i){D=-1;break}if(N>i){D=v-1;break}}}for(;v<n.length;){const N=n[v];if("number"==typeof N)break;if(N===o){if(null===d)return void(null!==h&&(n[v+1]=h));if(d===n[v+1])return void(n[v+2]=h)}v++,null!==d&&v++,null!==h&&v++}-1!==D&&(n.splice(D,0,i),v=D+1),n.splice(v++,0,o),null!==d&&n.splice(v++,0,d),null!==h&&n.splice(v++,0,h)}function Es(n){return n!==ie}function Xs(n){return 32767&n}function Qs(n,i){let o=function Ls(n){return n>>16}(n),d=i;for(;o>0;)d=d[Vt],o--;return d}let rl=!0;function _l(n){const i=rl;return rl=n,i}const qo=255,Wc=5;let Wi=0;const vo={};function oc(n,i){const o=_n(n,i);if(-1!==o)return o;const d=i[An];d.firstCreatePass&&(n.injectorIndex=i.length,ac(d.data,n),ac(i,null),ac(d.blueprint,null));const h=Ji(n,i),v=n.injectorIndex;if(Es(h)){const D=Xs(h),N=Qs(h,i),U=N[An].data;for(let X=0;X<8;X++)i[v+X]=N[D+X]|U[D+X]}return i[v+8]=h,v}function ac(n,i){n.push(0,0,0,0,0,0,0,0,i)}function _n(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Ji(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,d=null,h=i;for(;null!==h;){if(d=Mc(h),null===d)return ie;if(o++,h=h[Vt],-1!==d.injectorIndex)return d.injectorIndex|o<<16}return ie}function mi(n,i,o){!function Js(n,i,o){let d;"string"==typeof o?d=o.charCodeAt(0)||0:o.hasOwnProperty(he)&&(d=o[he]),null==d&&(d=o[he]=Wi++);const h=d&qo;i.data[n+(h>>Wc)]|=1<<h}(n,i,o)}function Kn(n,i,o){if(o&bn.Optional||void 0!==n)return n;Pt()}function dr(n,i,o,d){if(o&bn.Optional&&void 0===d&&(d=null),!(o&(bn.Self|bn.Host))){const h=n[se],v=Cr(void 0);try{return h?h.get(i,d,o&bn.Optional):di(i,d,o&bn.Optional)}finally{Cr(v)}}return Kn(d,0,o)}function lc(n,i,o,d=bn.Default,h){if(null!==n){if(1024&i[cr]){const D=function Il(n,i,o,d,h){let v=n,D=i;for(;null!==v&&null!==D&&1024&D[cr]&&!(256&D[cr]);){const N=jn(v,D,o,d|bn.Self,vo);if(N!==vo)return N;let U=v.parent;if(!U){const X=D[er];if(X){const fe=X.get(o,vo,d);if(fe!==vo)return fe}U=Mc(D),D=D[Vt]}v=U}return h}(n,i,o,d,vo);if(D!==vo)return D}const v=jn(n,i,o,d,vo);if(v!==vo)return v}return dr(i,o,d,h)}function jn(n,i,o,d,h){const v=function il(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(he)?n[he]:void 0;return"number"==typeof i?i>=0?i&qo:Ld:i}(o);if("function"==typeof v){if(!Fo(i,n,d))return d&bn.Host?Kn(h,0,d):dr(i,o,d,h);try{const D=v(d);if(null!=D||d&bn.Optional)return D;Pt()}finally{Go()}}else if("number"==typeof v){let D=null,N=_n(n,i),U=ie,X=d&bn.Host?i[Lt][Ci]:null;for((-1===N||d&bn.SkipSelf)&&(U=-1===N?Ji(n,i):i[N+8],U!==ie&&El(d,!1)?(D=i[An],N=Xs(U),i=Qs(U,i)):N=-1);-1!==N;){const fe=i[An];if(cc(v,N,fe.data)){const Me=Ht(N,i,o,D,d,X);if(Me!==vo)return Me}U=i[N+8],U!==ie&&El(d,i[An].data[N+8]===X)&&cc(v,N,i)?(D=fe,N=Xs(U),i=Qs(U,i)):N=-1}}return h}function Ht(n,i,o,d,h,v){const D=i[An],N=D.data[n+8],fe=hn(N,D,o,null==d?vs(N)&&rl:d!=D&&0!=(3&N.type),h&bn.Host&&v===N);return null!==fe?si(i,D,fe,N):vo}function hn(n,i,o,d,h){const v=n.providerIndexes,D=i.data,N=1048575&v,U=n.directiveStart,fe=v>>20,ft=h?N+fe:n.directiveEnd;for(let jt=d?N:N+fe;jt<ft;jt++){const mn=D[jt];if(jt<U&&o===mn||jt>=U&&mn.type===o)return jt}if(h){const jt=D[U];if(jt&&_i(jt)&&jt.type===o)return U}return null}function si(n,i,o,d){let h=n[o];const v=i.data;if(function Zt(n){return n instanceof Le}(h)){const D=h;D.resolving&&function Y(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Se(-200,`Circular dependency in DI detected for ${n}${o}`)}(_t(v[o]));const N=_l(D.canSeeViewProviders);D.resolving=!0;const U=D.injectImpl?Cr(D.injectImpl):null;Fo(n,d,bn.Default);try{h=n[o]=D.factory(void 0,v,n,d),i.firstCreatePass&&o>=d.directiveStart&&function jl(n,i,o){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:v}=i.type.prototype;if(d){var D,N;const Me=ho(i);(null!==(D=o.preOrderHooks)&&void 0!==D?D:o.preOrderHooks=[]).push(n,Me),(null!==(N=o.preOrderCheckHooks)&&void 0!==N?N:o.preOrderCheckHooks=[]).push(n,Me)}var U,X,fe;h&&(null!==(U=o.preOrderHooks)&&void 0!==U?U:o.preOrderHooks=[]).push(0-n,h),v&&((null!==(X=o.preOrderHooks)&&void 0!==X?X:o.preOrderHooks=[]).push(n,v),(null!==(fe=o.preOrderCheckHooks)&&void 0!==fe?fe:o.preOrderCheckHooks=[]).push(n,v))}(o,v[o],i)}finally{null!==U&&Cr(U),_l(N),D.resolving=!1,Go()}}return h}function cc(n,i,o){return!!(o[i+(n>>Wc)]&1<<n)}function El(n,i){return!(n&bn.Self||n&bn.Host&&i)}class Ra{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,d){return lc(this._tNode,this._lView,i,Kt(d),o)}}function Ld(){return new Ra(vt(),M())}function qc(n){return Ie(()=>{const i=n.prototype.constructor,o=i[Nt]||$o(i),d=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==d;){const v=h[Nt]||$o(h);if(v&&v!==o)return v;h=Object.getPrototypeOf(h)}return v=>new v})}function $o(n){return We(n)?()=>{const i=$o(ye(n));return i&&i()}:ti(n)}function Mc(n){const i=n[An],o=i.type;return 2===o?i.declTNode:1===o?n[Ci]:null}function eo(n){return function Kc(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const d=o.length;let h=0;for(;h<d;){const v=o[h];if(Bi(v))break;if(0===v)h+=2;else if("number"==typeof v)for(h++;h<d&&"string"==typeof o[h];)h++;else{if(v===i)return o[h+1];h+=2}}}return null}(vt(),n)}const pr="__parameters__";function sr(n,i,o){return Ie(()=>{const d=function ci(n){return function(...o){if(n){const d=n(...o);for(const h in d)this[h]=d[h]}}}(i);function h(...v){if(this instanceof h)return d.apply(this,v),this;const D=new h(...v);return N.annotation=D,N;function N(U,X,fe){const Me=U.hasOwnProperty(pr)?U[pr]:Object.defineProperty(U,pr,{value:[]})[pr];for(;Me.length<=fe;)Me.push(null);return(Me[fe]=Me[fe]||[]).push(D),U}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Ni{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=kt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rr(n,i){n.forEach(o=>Array.isArray(o)?Rr(o,i):i(o))}function Yr(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function $t(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Di(n,i){const o=[];for(let d=0;d<n;d++)o.push(i);return o}function ui(n,i,o){let d=S(n,i);return d>=0?n[1|d]=o:(d=~d,function la(n,i,o,d){let h=n.length;if(h==i)n.push(o,d);else if(1===h)n.push(d,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>i;)n[h]=n[h-2],h--;n[i]=o,n[i+1]=d}}(n,d,i,o)),d}function Pr(n,i){const o=S(n,i);if(o>=0)return n[1|o]}function S(n,i){return function w(n,i,o){let d=0,h=n.length>>o;for(;h!==d;){const v=d+(h-d>>1),D=n[v<<o];if(i===D)return v<<o;D>i?h=v:d=v+1}return~(h<<o)}(n,i,1)}const Ii=rt(sr("Optional"),8),$s=rt(sr("SkipSelf"),4);var Uo=(()=>((Uo=Uo||{})[Uo.Important=1]="Important",Uo[Uo.DashCase=2]="DashCase",Uo))();const Ha=new Map;let Qo=0;const Rt="__ngContext__";function Wt(n,i){Er(i)?(n[Rt]=i[rr],function za(n){Ha.set(n[rr],n)}(i)):n[Rt]=i}let Io;function nu(n,i){return Io(n,i)}function io(n){const i=n[ri];return Ir(i)?i[ri]:i}function hi(n){return al(n[et])}function Si(n){return al(n[qi])}function al(n){for(;null!==n&&!Ir(n);)n=n[qi];return n}function _a(n,i,o,d,h){if(null!=d){let v,D=!1;Ir(d)?v=d:Er(d)&&(D=!0,d=d[ji]);const N=Pi(d);0===n&&null!==o?null==h?gc(i,o,N):Ml(i,o,N,h||null,!0):1===n&&null!==o?Ml(i,o,N,h||null,!0):2===n?function hd(n,i,o){const d=ru(n,i);d&&function Oh(n,i,o,d){n.removeChild(i,o,d)}(n,d,i,o)}(i,N,D):3===n&&i.destroyNode(N),null!=v&&function bp(n,i,o,d,h){const v=o[ot];v!==Pi(o)&&_a(i,n,d,v,h);for(let N=dn;N<o.length;N++){const U=o[N];vc(U[An],U,n,i,d,v)}}(i,n,v,o,h)}}function jd(n,i,o){return n.createElement(i,o)}function od(n,i){const o=n[tn],d=o.indexOf(i),h=i[ri];512&i[cr]&&(i[cr]&=-513,ia(h,-1)),o.splice(d,1)}function ll(n,i){if(n.length<=dn)return;const o=dn+i,d=n[o];if(d){const h=d[Qt];null!==h&&h!==n&&od(h,d),i>0&&(n[o-1][qi]=d[qi]);const v=$t(n,dn+i);!function bu(n,i){vc(n,i,i[qe],2,null,null),i[ji]=null,i[Ci]=null}(d[An],d);const D=v[vn];null!==D&&D.detachView(v[An]),d[ri]=null,d[qi]=null,d[cr]&=-65}return d}function Hd(n,i){if(!(128&i[cr])){const o=i[qe];o.destroyNode&&vc(n,i,o,3,null,null),function Mh(n){let i=n[et];if(!i)return ad(n[An],n);for(;i;){let o=null;if(Er(i))o=i[et];else{const d=i[dn];d&&(o=d)}if(!o){for(;i&&!i[qi]&&i!==n;)Er(i)&&ad(i[An],i),i=i[ri];null===i&&(i=n),Er(i)&&ad(i[An],i),o=i&&i[qi]}i=o}}(i)}}function ad(n,i){if(!(128&i[cr])){i[cr]&=-65,i[cr]|=128,function Ga(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let d=0;d<o.length;d+=2){const h=i[o[d]];if(!(h instanceof Le)){const v=o[d+1];if(Array.isArray(v))for(let D=0;D<v.length;D+=2){const N=h[v[D]],U=v[D+1];zi(4,N,U);try{U.call(N)}finally{zi(5,N,U)}}else{zi(4,h,v);try{v.call(h)}finally{zi(5,h,v)}}}}}(n,i),function gs(n,i){const o=n.cleanup,d=i[Li];let h=-1;if(null!==o)for(let v=0;v<o.length-1;v+=2)if("string"==typeof o[v]){const D=o[v+3];D>=0?d[h=D]():d[h=-D].unsubscribe(),v+=2}else{const D=d[h=o[v+1]];o[v].call(D)}if(null!==d){for(let v=h+1;v<d.length;v++)(0,d[v])();i[Li]=null}}(n,i),1===i[An].type&&i[qe].destroy();const o=i[Qt];if(null!==o&&Ir(i[ri])){o!==i[ri]&&od(o,i);const d=i[vn];null!==d&&d.detachView(n)}!function P(n){Ha.delete(n[rr])}(i)}}function Pa(n,i,o){return function $c(n,i,o){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return o[ji];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:v}=n.data[d.directiveStart+h];if(v===Ot.None||v===Ot.Emulated)return null}return Oi(d,o)}}(n,i.parent,o)}function Ml(n,i,o,d,h){n.insertBefore(i,o,d,h)}function gc(n,i,o){n.appendChild(i,o)}function mc(n,i,o,d,h){null!==d?Ml(n,i,o,d,h):gc(n,i,o)}function ru(n,i){return n.parentNode(i)}function ld(n,i,o){return cd(n,i,o)}let ud,Zr,su,cd=function yc(n,i,o){return 40&n.type?Oi(n,o):null};function wo(n,i,o,d){const h=Pa(n,d,i),v=i[qe],N=ld(d.parent||i[Ci],d,i);if(null!=h)if(Array.isArray(o))for(let U=0;U<o.length;U++)mc(v,h,o[U],N,!1);else mc(v,h,o,N,!1);void 0!==ud&&ud(v,d,i,o,h)}function Du(n,i){if(null!==i){const o=i.type;if(3&o)return Oi(i,n);if(4&o)return Zl(-1,n[i.index]);if(8&o){const d=i.child;if(null!==d)return Du(n,d);{const h=n[i.index];return Ir(h)?Zl(-1,h):Pi(h)}}if(32&o)return nu(i,n)()||Pi(n[i.index]);{const d=dd(n,i);return null!==d?Array.isArray(d)?d[0]:Du(io(n[Lt]),d):Du(n,i.next)}}return null}function dd(n,i){return null!==i?n[Lt][Ci].projection[i.projection]:null}function Zl(n,i){const o=dn+n+1;if(o<i.length){const d=i[o],h=d[An].firstChild;if(null!==h)return Du(d,h)}return i[ot]}function Tu(n,i,o,d,h,v,D){for(;null!=o;){const N=d[o.index],U=o.type;if(D&&0===i&&(N&&Wt(Pi(N),d),o.flags|=2),32!=(32&o.flags))if(8&U)Tu(n,i,o.child,d,h,v,!1),_a(i,n,h,N,v);else if(32&U){const X=nu(o,d);let fe;for(;fe=X();)_a(i,n,h,fe,v);_a(i,n,h,N,v)}else 16&U?Nh(n,i,d,o,h,v):_a(i,n,h,N,v);o=D?o.projectionNext:o.next}}function vc(n,i,o,d,h,v){Tu(o,d,n.firstChild,i,h,v,!1)}function Nh(n,i,o,d,h,v){const D=o[Lt],U=D[Ci].projection[d.projection];if(Array.isArray(U))for(let X=0;X<U.length;X++)_a(i,n,h,U[X],v);else Tu(n,i,U,D[ri],h,v,!0)}function js(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function fd(n,i,o){const{mergedAttrs:d,classes:h,styles:v}=o;null!==d&&bi(n,i,d),null!==h&&js(n,i,h),null!==v&&function Dp(n,i,o){n.setAttribute(i,"style",o)}(n,i,v)}function Lh(n){Zr=n}function Wd(n){var i;return(null===(i=function Gd(){if(void 0===su&&(su=null,Gn.trustedTypes))try{su=Gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return su}())||void 0===i?void 0:i.createScriptURL(n))||n}class pd{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wt})`}}function ca(n){return n instanceof pd?n.changingThisBreaksApplicationSecurity:n}function Ol(n,i){const o=function Mf(n){return n instanceof pd&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${wt})`)}return o===i}const lu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var cs=(()=>((cs=cs||{})[cs.NONE=0]="NONE",cs[cs.HTML=1]="HTML",cs[cs.STYLE=2]="STYLE",cs[cs.SCRIPT=3]="SCRIPT",cs[cs.URL=4]="URL",cs[cs.RESOURCE_URL=5]="RESOURCE_URL",cs))();function Cc(n){const i=Qd();return i?i.sanitize(cs.URL,n)||"":Ol(n,"URL")?ca(n):function cu(n){return(n=String(n)).match(lu)?n:"unsafe:"+n}(ue(n))}function ec(n){const i=Qd();if(i)return Wd(i.sanitize(cs.RESOURCE_URL,n)||"");if(Ol(n,"ResourceURL"))return Wd(ca(n));throw new Se(904,!1)}function Xd(n,i,o){return function _d(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?ec:Cc}(i,o)(n)}function Qd(){const n=M();return n&&n[me]}const Of=new Ni("ENVIRONMENT_INITIALIZER"),Jd=new Ni("INJECTOR",-1),Bh=new Ni("INJECTOR_DEF_TYPES");class eh{get(i,o=on){if(o===on){const d=new Error(`NullInjectorError: No provider for ${Ue(i)}!`);throw d.name="NullInjectorError",d}return o}}function ku(n){return{\u0275providers:n}}function Uh(...n){return{\u0275providers:bg(0,n),\u0275fromNgModule:!0}}function bg(n,...i){const o=[],d=new Set;let h;return Rr(i,v=>{const D=v;Vh(D,o,[],d)&&(h||(h=[]),h.push(D))}),void 0!==h&&Ts(h,o),o}function Ts(n,i){for(let o=0;o<n.length;o++){const{providers:h}=n[o];Ed(h,v=>{i.push(v)})}}function Vh(n,i,o,d){if(!(n=ye(n)))return!1;let h=null,v=cn(n);const D=!v&&wn(n);if(v||D){if(D&&!D.standalone)return!1;h=n}else{const U=n.ngModule;if(v=cn(U),!v)return!1;h=U}const N=d.has(h);if(D){if(N)return!1;if(d.add(h),D.dependencies){const U="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const X of U)Vh(X,i,o,d)}}else{if(!v)return!1;{if(null!=v.imports&&!N){let X;d.add(h);try{Rr(v.imports,fe=>{Vh(fe,i,o,d)&&(X||(X=[]),X.push(fe))})}finally{}void 0!==X&&Ts(X,i)}if(!N){const X=ti(h)||(()=>new h);i.push({provide:h,useFactory:X,deps:un},{provide:Bh,useValue:h,multi:!0},{provide:Of,useValue:()=>yr(h),multi:!0})}const U=v.providers;null==U||N||Ed(U,fe=>{i.push(fe)})}}return h!==n&&void 0!==n.providers}function Ed(n,i){for(let o of n)Oe(o)&&(o=o.\u0275providers),Array.isArray(o)?Ed(o,i):i(o)}const tc=Ae({provide:String,useValue:Ae});function Id(n){return null!==n&&"object"==typeof n&&tc in n}function Nu(n){return"function"==typeof n}const jh=new Ni("Set Injector scope."),th={},xp={};let uu;function du(){return void 0===uu&&(uu=new eh),uu}class Fl{}class Hh extends Fl{get destroyed(){return this._destroyed}constructor(i,o,d,h){super(),this.parent=o,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lu(i,D=>this.processProvider(D)),this.records.set(Jd,rh(void 0,this)),h.has("environment")&&this.records.set(Fl,rh(void 0,this));const v=this.records.get(jh);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Bh.multi,un,bn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=ur(this),d=Cr(void 0);try{return i()}finally{ur(o),Cr(d)}}get(i,o=on,d=bn.Default){this.assertNotDestroyed(),d=Kt(d);const h=ur(this),v=Cr(void 0);try{if(!(d&bn.SkipSelf)){let N=this.records.get(i);if(void 0===N){const U=function Fu(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ni}(i)&&gn(i);N=U&&this.injectableDefInScope(U)?rh(nh(i),th):null,this.records.set(i,N)}if(null!=N)return this.hydrate(i,N)}return(d&bn.Self?du():this.parent).get(i,o=d&bn.Optional&&o===on?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[Dr]=D[Dr]||[]).unshift(Ue(i)),h)throw D;return function qt(n,i,o,d){const h=n[Dr];throw i[Lr]&&h.unshift(i[Lr]),n.message=function we(n,i,o,d=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==pi?n.slice(2):n;let h=Ue(i);if(Array.isArray(i))h=i.map(Ue).join(" -> ");else if("object"==typeof i){let v=[];for(let D in i)if(i.hasOwnProperty(D)){let N=i[D];v.push(D+":"+("string"==typeof N?JSON.stringify(N):Ue(N)))}h=`{${v.join(", ")}}`}return`${o}${d?"("+d+")":""}[${h}]: ${n.replace(zr,"\n  ")}`}("\n"+n.message,h,o,d),n[Qr]=h,n[Dr]=null,n}(D,i,"R3InjectorError",this.source)}throw D}finally{Cr(v),ur(h)}}resolveInjectorInitializers(){const i=ur(this),o=Cr(void 0);try{const d=this.get(Of.multi,un,bn.Self);for(const h of d)h()}finally{ur(i),Cr(o)}}toString(){const i=[],o=this.records;for(const d of o.keys())i.push(Ue(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(i){let o=Nu(i=ye(i))?i:ye(i&&i.provide);const d=function kf(n){return Id(n)?rh(void 0,n.useValue):rh(Nf(n),th)}(i);if(Nu(i)||!0!==i.multi)this.records.get(o);else{let h=this.records.get(o);h||(h=rh(void 0,th,!0),h.factory=()=>Ze(h.multi),this.records.set(o,h)),o=i,h.multi.push(i)}this.records.set(o,d)}hydrate(i,o){return o.value===th&&(o.value=xp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Rp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=ye(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function nh(n){const i=gn(n),o=null!==i?i.factory:ti(n);if(null!==o)return o;if(n instanceof Ni)throw new Se(204,!1);if(n instanceof Function)return function Tg(n){const i=n.length;if(i>0)throw Di(i,"?"),new Se(204,!1);const o=function xn(n){return n&&(n[Cn]||n[_r])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Se(204,!1)}function Nf(n,i,o){let d;if(Nu(n)){const h=ye(n);return ti(h)||nh(h)}if(Id(n))d=()=>ye(n.useValue);else if(function wd(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Ze(n.deps||[]));else if(function Ap(n){return!(!n||!n.useExisting)}(n))d=()=>yr(ye(n.useExisting));else{const h=ye(n&&(n.useClass||n.provide));if(!function zh(n){return!!n.deps}(n))return ti(h)||nh(h);d=()=>new h(...Ze(n.deps))}return d}function rh(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function Lu(n,i){for(const o of n)Array.isArray(o)?Lu(o,i):o&&Oe(o)?Lu(o.\u0275providers,i):i(o)}class Sg{}class Ff{}class Wh{resolveComponentFactory(i){throw function Gh(n){const i=Error(`No component factory found for ${Ue(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Ka=(()=>{class n{}return n.NULL=new Wh,n})();function $u(){return nc(vt(),M())}function nc(n,i){return new rc(Oi(n,i))}let rc=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=$u,n})();function hu(n){return n instanceof rc?n.nativeElement:n}class Bc{}let ih=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Mp(){const n=M(),o=Xi(vt().index,n);return(Er(o)?o:n)[qe]}(),n})(),ul=(()=>{class n{}return n.\u0275prov=kt({token:n,providedIn:"root",factory:()=>null}),n})();class Lf{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Pp=new Lf("15.2.9"),sh={},Kh="ngOriginalError";function Cd(n){return n[Kh]}class fu{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Cd(i);for(;o&&Cd(o);)o=Cd(o);return o||null}}function ka(n){return n instanceof Function?n():n}function Op(n,i,o){let d=n.length;for(;;){const h=n.indexOf(i,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const v=i.length;if(h+v===d||n.charCodeAt(h+v)<=32)return h}o=h+1}}const Yh="ng-template";function kp(n,i,o){let d=0,h=!0;for(;d<n.length;){let v=n[d++];if("string"==typeof v&&h){const D=n[d++];if(o&&"class"===v&&-1!==Op(D.toLowerCase(),i,0))return!0}else{if(1===v){for(;d<n.length&&"string"==typeof(v=n[d++]);)if(v.toLowerCase()===i)return!0;return!1}"number"==typeof v&&(h=!1)}}return!1}function Np(n){return 4===n.type&&n.value!==Yh}function Vf(n,i,o){return i===(4!==n.type||o?n.value:Yh)}function Fp(n,i,o){let d=4;const h=n.attrs||[],v=function Zh(n){for(let i=0;i<n.length;i++)if(Bi(n[i]))return i;return n.length}(h);let D=!1;for(let N=0;N<i.length;N++){const U=i[N];if("number"!=typeof U){if(!D)if(4&d){if(d=2|1&d,""!==U&&!Vf(n,U,o)||""===U&&1===i.length){if(hl(d))return!1;D=!0}}else{const X=8&d?U:i[++N];if(8&d&&null!==n.attrs){if(!kp(n.attrs,X,o)){if(hl(d))return!1;D=!0}continue}const Me=jf(8&d?"class":U,h,Np(n),o);if(-1===Me){if(hl(d))return!1;D=!0;continue}if(""!==X){let ft;ft=Me>v?"":h[Me+1].toLowerCase();const jt=8&d?ft:null;if(jt&&-1!==Op(jt,X,0)||2&d&&X!==ft){if(hl(d))return!1;D=!0}}}}else{if(!D&&!hl(d)&&!hl(U))return!1;if(D&&hl(U))continue;D=!1,d=U|1&d}}return hl(d)||D}function hl(n){return 0==(1&n)}function jf(n,i,o,d){if(null===i)return-1;let h=0;if(d||!o){let v=!1;for(;h<i.length;){const D=i[h];if(D===n)return h;if(3===D||6===D)v=!0;else{if(1===D||2===D){let N=i[++h];for(;"string"==typeof N;)N=i[++h];continue}if(4===D)break;if(0===D){h+=4;continue}}h+=v?1:2}return-1}return function ah(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const d=n[o];if("number"==typeof d)return-1;if(d===i)return o;o++}return-1}(i,n)}function bd(n,i,o=!1){for(let d=0;d<i.length;d++)if(Fp(n,i[d],o))return!0;return!1}function Uu(n,i){e:for(let o=0;o<i.length;o++){const d=i[o];if(n.length===d.length){for(let h=0;h<n.length;h++)if(n[h]!==d[h])continue e;return!0}}return!1}function Lp(n,i){return n?":not("+i.trim()+")":i}function Dd(n){let i=n[0],o=1,d=2,h="",v=!1;for(;o<n.length;){let D=n[o];if("string"==typeof D)if(2&d){const N=n[++o];h+="["+D+(N.length>0?'="'+N+'"':"")+"]"}else 8&d?h+="."+D:4&d&&(h+=" "+D);else""!==h&&!hl(D)&&(i+=Lp(v,h),h=""),d=D,v=v||!hl(d);o++}return""!==h&&(i+=Lp(v,h)),i}const Xr={};function lh(n){ch(F(),M(),ls()+n,!1)}function ch(n,i,o,d){if(!d)if(3==(3&i[cr])){const v=n.preOrderCheckHooks;null!==v&&Hl(i,v,o)}else{const v=n.preOrderHooks;null!==v&&vl(i,v,0,o)}Fs(o)}function Vp(n,i=null,o=null,d){const h=Xh(n,i,o,d);return h.resolveInjectorInitializers(),h}function Xh(n,i=null,o=null,d,h=new Set){const v=[o||un,Uh(n)];return d=d||("object"==typeof n?void 0:Ue(n)),new Hh(v,i||du(),d||null,h)}let zu=(()=>{class n{static create(o,d){if(Array.isArray(o))return Vp({name:""},d,o,"");{var h;const v=null!==(h=o.name)&&void 0!==h?h:"";return Vp({name:v},o.parent,o.providers,v)}}}return n.THROW_IF_NOT_FOUND=on,n.NULL=new eh,n.\u0275prov=kt({token:n,providedIn:"any",factory:()=>yr(Jd)}),n.__NG_ELEMENT_ID__=-1,n})();function Uc(n,i=bn.Default){const o=M();return null===o?yr(n,i):lc(vt(),o,ye(n),i)}function Kf(){throw new Error("invalid")}function Yp(n,i){const o=n.contentQueries;if(null!==o)for(let d=0;d<o.length;d+=2){const v=o[d+1];if(-1!==v){const D=n.data[v];Sa(o[d]),D.contentQueries(2,i[v],v)}}}function nf(n,i,o,d,h,v,D,N,U,X,fe){const Me=i.blueprint.slice();return Me[ji]=h,Me[cr]=76|d,(null!==fe||n&&1024&n[cr])&&(Me[cr]|=1024),To(Me),Me[ri]=Me[Vt]=n,Me[Ur]=o,Me[be]=D||n&&n[be],Me[qe]=N||n&&n[qe],Me[me]=U||n&&n[me]||null,Me[se]=X||n&&n[se]||null,Me[Ci]=v,Me[rr]=function tu(){return Qo++}(),Me[er]=fe,Me[Lt]=2==i.type?n[Lt]:Me,Me}function Gu(n,i,o,d,h){let v=n.data[i];if(null===v)v=function Zp(n,i,o,d,h){const v=Tn(),D=Qi(),U=n.data[i]=function Zf(n,i,o,d,h,v){return{type:o,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?v:v&&v.parent,o,i,d,h);return null===n.firstChild&&(n.firstChild=U),null!==v&&(D?null==v.child&&null!==U.parent&&(v.child=U):null===v.next&&(v.next=U,U.prev=v)),U}(n,i,o,d,h),function ml(){return Tr.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=o,v.value=d,v.attrs=h;const D=function $r(){const n=Tr.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();v.injectorIndex=null===D?-1:D.injectorIndex}return ii(v,!0),v}function fh(n,i,o,d){if(0===o)return-1;const h=i.length;for(let v=0;v<o;v++)i.push(d),n.blueprint.push(d),n.data.push(null);return h}function Xp(n,i,o){nl(i);try{const d=n.viewQuery;null!==d&&xd(1,d,o);const h=n.template;null!==h&&Bg(n,i,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Yp(n,i),n.staticViewQueries&&xd(2,n.viewQuery,o);const v=n.components;null!==v&&function $g(n,i){for(let o=0;o<i.length;o++)Ca(n,i[o])}(i,v)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[cr]&=-5,Zs()}}function rf(n,i,o,d){const h=i[cr];if(128!=(128&h)){nl(i);try{To(i),function qs(n){return Tr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Bg(n,i,o,2,d);const D=3==(3&h);if(D){const X=n.preOrderCheckHooks;null!==X&&Hl(i,X,null)}else{const X=n.preOrderHooks;null!==X&&vl(i,X,0,null),$(i,0)}if(function uy(n){for(let i=hi(n);null!==i;i=Si(i)){if(!i[mt])continue;const o=i[tn];for(let d=0;d<o.length;d++){const h=o[d];512&h[cr]||ia(h[ri],1),h[cr]|=512}}}(i),function cy(n){for(let i=hi(n);null!==i;i=Si(i))for(let o=dn;o<i.length;o++){const d=i[o],h=d[An];Gi(d)&&rf(h,d,h.template,d[Ur])}}(i),null!==n.contentQueries&&Yp(n,i),D){const X=n.contentCheckHooks;null!==X&&Hl(i,X)}else{const X=n.contentHooks;null!==X&&vl(i,X,1),$(i,1)}!function qp(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let d=0;d<o.length;d++){const h=o[d];if(h<0)Fs(~h);else{const v=h,D=o[++d],N=o[++d];Ta(D,v),N(2,i[v])}}}finally{Fs(-1)}}(n,i);const N=n.components;null!==N&&function iy(n,i){for(let o=0;o<i.length;o++)ig(n,i[o])}(i,N);const U=n.viewQuery;if(null!==U&&xd(2,U,d),D){const X=n.viewCheckHooks;null!==X&&Hl(i,X)}else{const X=n.viewHooks;null!==X&&vl(i,X,2),$(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[cr]&=-41,512&i[cr]&&(i[cr]&=-513,ia(i[ri],-1))}finally{Zs()}}}function Bg(n,i,o,d,h){const v=ls(),D=2&d;try{Fs(-1),D&&i.length>vr&&ch(n,i,vr,!1),zi(D?2:0,h),o(d,h)}finally{Fs(v),zi(D?3:1,h)}}function Wu(n,i,o){if(ei(i)){const h=i.directiveEnd;for(let v=i.directiveStart;v<h;v++){const D=n.data[v];D.contentQueries&&D.contentQueries(1,o[v],v)}}}function Ku(n,i,o){T()&&(function sy(n,i,o,d){const h=o.directiveStart,v=o.directiveEnd;vs(o)&&function rg(n,i,o){const d=Oi(i,n),h=af(o),v=n[be],D=jc(n,nf(n,h,null,o.onPush?32:16,d,i,v,v.createRenderer(d,o),null,null,null));n[i.index]=D}(i,o,n.data[h+o.componentOffset]),n.firstCreatePass||oc(o,i),Wt(d,i);const D=o.initialInputs;for(let N=h;N<v;N++){const U=n.data[N],X=si(i,n,N,o);Wt(X,i),null!==D&&Gg(0,N-h,X,U,0,D),_i(U)&&(Xi(o.index,i)[Ur]=si(i,n,N,o))}}(n,i,o,Oi(o,i)),64==(64&o.flags)&&eg(n,i,o))}function sf(n,i,o=Oi){const d=i.localNames;if(null!==d){let h=i.index+1;for(let v=0;v<d.length;v+=2){const D=d[v+1],N=-1===D?o(i,n):n[D];n[h++]=N}}}function af(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=qf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function qf(n,i,o,d,h,v,D,N,U,X){const fe=vr+d,Me=fe+h,ft=function ic(n,i){const o=[];for(let d=0;d<i;d++)o.push(d<n?null:Xr);return o}(fe,Me),jt="function"==typeof X?X():X;return ft[An]={type:n,blueprint:ft,template:o,queries:null,viewQuery:N,declTNode:i,data:ft.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:U,consts:jt,incompleteFirstPass:!1}}function Yf(n,i,o,d){const h=og(i);null===o?h.push(d):(h.push(o),n.firstCreatePass&&df(n).push(d,h.length-1))}function Vg(n,i,o,d){for(let h in n)if(n.hasOwnProperty(h)){o=null===o?{}:o;const v=n[h];null===d?lf(o,i,h,v):d.hasOwnProperty(h)&&lf(o,i,d[h],v)}return o}function lf(n,i,o,d){n.hasOwnProperty(o)?n[o].push(i,d):n[o]=[i,d]}function Ya(n,i,o,d,h,v,D,N){const U=Oi(i,o);let fe,X=i.inputs;!N&&null!=X&&(fe=X[d])?(ff(n,o,fe,d,h),vs(i)&&function Xf(n,i){const o=Xi(i,n);16&o[cr]||(o[cr]|=32)}(o,i.index)):3&i.type&&(d=function Hg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),h=null!=D?D(h,i.value||"",d):h,v.setProperty(U,d,h))}function cf(n,i,o,d){if(T()){const h=null===d?null:{"":-1},v=function tg(n,i){const o=n.directiveRegistry;let d=null,h=null;if(o)for(let D=0;D<o.length;D++){const N=o[D];if(bd(i,N.selectors,!1))if(d||(d=[]),_i(N))if(null!==N.findHostDirectiveDefs){const U=[];h=h||new Map,N.findHostDirectiveDefs(N,U,h),d.unshift(...U,N),ng(n,i,U.length)}else d.unshift(N),ng(n,i,0);else{var v;h=h||new Map,null===(v=N.findHostDirectiveDefs)||void 0===v||v.call(N,N,d,h),d.push(N)}}return null===d?null:[d,h]}(n,o);let D,N;null===v?D=N=null:[D,N]=v,null!==D&&Jp(n,i,o,D,h,N),h&&function oy(n,i,o){if(i){const d=n.localNames=[];for(let h=0;h<i.length;h+=2){const v=o[i[h+1]];if(null==v)throw new Se(-301,!1);d.push(i[h],v)}}}(o,d,h)}o.mergedAttrs=yo(o.mergedAttrs,o.attrs)}function Jp(n,i,o,d,h,v){for(let Me=0;Me<d.length;Me++)mi(oc(o,i),n,d[Me].type);!function ay(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,d.length);for(let Me=0;Me<d.length;Me++){const ft=d[Me];ft.providersResolver&&ft.providersResolver(ft)}let D=!1,N=!1,U=fh(n,i,d.length,null);for(let Me=0;Me<d.length;Me++){const ft=d[Me];o.mergedAttrs=yo(o.mergedAttrs,ft.hostAttrs),ly(n,o,i,U,ft),Fa(U,ft,h),null!==ft.contentQueries&&(o.flags|=4),(null!==ft.hostBindings||null!==ft.hostAttrs||0!==ft.hostVars)&&(o.flags|=64);const jt=ft.type.prototype;var X,fe;!D&&(jt.ngOnChanges||jt.ngOnInit||jt.ngDoCheck)&&((null!==(X=n.preOrderHooks)&&void 0!==X?X:n.preOrderHooks=[]).push(o.index),D=!0),N||!jt.ngOnChanges&&!jt.ngDoCheck||((null!==(fe=n.preOrderCheckHooks)&&void 0!==fe?fe:n.preOrderCheckHooks=[]).push(o.index),N=!0),U++}!function jg(n,i,o){const h=i.directiveEnd,v=n.data,D=i.attrs,N=[];let U=null,X=null;for(let fe=i.directiveStart;fe<h;fe++){const Me=v[fe],ft=o?o.get(Me):null,mn=ft?ft.outputs:null;U=Vg(Me.inputs,fe,U,ft?ft.inputs:null),X=Vg(Me.outputs,fe,X,mn);const Pn=null===U||null===D||Np(i)?null:Wg(U,fe,D);N.push(Pn)}null!==U&&(U.hasOwnProperty("class")&&(i.flags|=8),U.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=N,i.inputs=U,i.outputs=X}(n,o,v)}function eg(n,i,o){const d=o.directiveStart,h=o.directiveEnd,v=o.index,D=function ja(){return Tr.lFrame.currentDirectiveIndex}();try{Fs(v);for(let N=d;N<h;N++){const U=n.data[N],X=i[N];ns(N),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&Jf(U,X)}}finally{Fs(-1),ns(D)}}function Jf(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function ng(n,i,o){var d;i.componentOffset=o,(null!==(d=n.components)&&void 0!==d?d:n.components=[]).push(i.index)}function Fa(n,i,o){if(o){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)o[i.exportAs[d]]=n;_i(i)&&(o[""]=n)}}function ly(n,i,o,d,h){n.data[d]=h;const v=h.factory||(h.factory=ti(h.type)),D=new Le(v,_i(h),Uc);n.blueprint[d]=D,o[d]=D,function Qf(n,i,o,d,h){const v=h.hostBindings;if(v){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const N=~i.index;(function zg(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(D)!=N&&D.push(N),D.push(o,d,v)}}(n,i,d,fh(n,o,h.hostVars,Xr),h)}function pl(n,i,o,d,h,v){const D=Oi(n,i);!function uf(n,i,o,d,h,v,D){if(null==v)n.removeAttribute(i,h,o);else{const N=null==D?ue(v):D(v,d||"",h);n.setAttribute(i,h,N,o)}}(i[qe],D,v,n.value,o,d,h)}function Gg(n,i,o,d,h,v){const D=v[i];if(null!==D){const N=d.setInput;for(let U=0;U<D.length;){const X=D[U++],fe=D[U++],Me=D[U++];null!==N?d.setInput(o,Me,X,fe):o[fe]=Me}}}function Wg(n,i,o){let d=null,h=0;for(;h<o.length;){const v=o[h];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===d&&(d=[]);const D=n[v];for(let N=0;N<D.length;N+=2)if(D[N]===i){d.push(v,D[N+1],o[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function Kg(n,i,o,d){return[n,!0,!1,i,null,0,d,o,null,null]}function ig(n,i){const o=Xi(i,n);if(Gi(o)){const d=o[An];48&o[cr]?rf(d,o,d.template,o[Ur]):o[kr]>0&&Vc(o)}}function Vc(n){for(let d=hi(n);null!==d;d=Si(d))for(let h=dn;h<d.length;h++){const v=d[h];if(Gi(v))if(512&v[cr]){const D=v[An];rf(D,v,D.template,v[Ur])}else v[kr]>0&&Vc(v)}const o=n[An].components;if(null!==o)for(let d=0;d<o.length;d++){const h=Xi(o[d],n);Gi(h)&&h[kr]>0&&Vc(h)}}function Ca(n,i){const o=Xi(i,n),d=o[An];(function ba(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(d,o),Xp(d,o,o[Ur])}function jc(n,i){return n[et]?n[Qe][qi]=i:n[et]=i,n[Qe]=i,i}function gu(n){for(;n;){n[cr]|=32;const i=io(n);if(Ss(n)&&!i)return n;n=i}return null}function gh(n,i,o,d=!0){const h=i[be];h.begin&&h.begin();try{rf(n,i,n.template,o)}catch(D){throw d&&Hc(i,D),D}finally{h.end&&h.end()}}function xd(n,i,o){Sa(0),i(n,o)}function og(n){return n[Li]||(n[Li]=[])}function df(n){return n.cleanup||(n.cleanup=[])}function Hc(n,i){const o=n[se],d=o?o.get(fu,null):null;d&&d.handleError(i)}function ff(n,i,o,d,h){for(let v=0;v<o.length;){const D=o[v++],N=o[v++],U=i[D],X=n.data[D];null!==X.setInput?X.setInput(U,h,d,N):U[N]=h}}function mh(n,i,o){let d=o?n.styles:null,h=o?n.classes:null,v=0;if(null!==i)for(let D=0;D<i.length;D++){const N=i[D];"number"==typeof N?v=N:1==v?h=Ge(h,N):2==v&&(d=Ge(d,N+": "+i[++D]+";"))}o?n.styles=d:n.stylesWithoutHost=d,o?n.classes=h:n.classesWithoutHost=h}function pf(n,i,o,d,h=!1){for(;null!==o;){const v=i[o.index];if(null!==v&&d.push(Pi(v)),Ir(v))for(let N=dn;N<v.length;N++){const U=v[N],X=U[An].firstChild;null!==X&&pf(U[An],U,X,d)}const D=o.type;if(8&D)pf(n,i,o.child,d);else if(32&D){const N=nu(o,i);let U;for(;U=N();)d.push(U)}else if(16&D){const N=dd(i,o);if(Array.isArray(N))d.push(...N);else{const U=io(i[Lt]);pf(U[An],U,N,d,!0)}}o=h?o.projectionNext:o.next}return d}class Rd{get rootNodes(){const i=this._lView,o=i[An];return pf(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ur]}set context(i){this._lView[Ur]=i}get destroyed(){return 128==(128&this._lView[cr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[ri];if(Ir(i)){const o=i[xt],d=o?o.indexOf(this):-1;d>-1&&(ll(i,d),$t(o,d))}this._attachedToViewContainer=!1}Hd(this._lView[An],this._lView)}onDestroy(i){Yf(this._lView[An],this._lView,null,i)}markForCheck(){gu(this._cdRefInjectingView||this._lView)}detach(){this._lView[cr]&=-65}reattach(){this._lView[cr]|=64}detectChanges(){gh(this._lView[An],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cp(n,i){vc(n,i,i[qe],2,null,null)}(this._lView[An],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=i}}class dy extends Rd{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;gh(i[An],i,i[Ur],!1)}checkNoChanges(){}get context(){return null}}class gf extends Ka{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=wn(i);return new zc(o,this.ngModule)}}function yh(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Yg{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,d){d=Kt(d);const h=this.injector.get(i,sh,d);return h!==sh||o===sh?h:this.parentInjector.get(i,o,d)}}class zc extends Ff{get inputs(){return yh(this.componentDef.inputs)}get outputs(){return yh(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Na(n){return n.map(Dd).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,d,h){var v;let D=(h=h||this.ngModule)instanceof Fl?h:null===(v=h)||void 0===v?void 0:v.injector;D&&null!==this.componentDef.getStandaloneInjector&&(D=this.componentDef.getStandaloneInjector(D)||D);const N=D?new Yg(i,D):i,U=N.get(Bc,null);if(null===U)throw new Se(407,!1);const X=N.get(ul,null),fe=U.createRenderer(null,this.componentDef),Me=this.componentDef.selectors[0][0]||"div",ft=d?function Ug(n,i,o){return n.selectRootElement(i,o===Ot.ShadowDom)}(fe,d,this.componentDef.encapsulation):jd(fe,Me,function ep(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Me)),jt=this.componentDef.onPush?288:272,mn=qf(0,null,null,1,0,null,null,null,null,null),Pn=nf(null,mn,null,jt,null,null,U,fe,X,N,null);let nr,br;nl(Pn);try{const Gr=this.componentDef;let Sn,fi=null;Gr.findHostDirectiveDefs?(Sn=[],fi=new Map,Gr.findHostDirectiveDefs(Gr,Sn,fi),Sn.push(Gr)):Sn=[Gr];const so=function fy(n,i){const o=n[An],d=vr;return n[d]=i,Gu(o,d,2,"#host",null)}(Pn,ft),ea=function Zg(n,i,o,d,h,v,D,N){const U=h[An];!function lg(n,i,o,d){for(const h of n)i.mergedAttrs=yo(i.mergedAttrs,h.hostAttrs);null!==i.mergedAttrs&&(mh(i,i.mergedAttrs,!0),null!==o&&fd(d,o,i))}(d,n,i,D);const X=v.createRenderer(i,o),fe=nf(h,af(o),null,o.onPush?32:16,h[n.index],n,v,X,N||null,null,null);return U.firstCreatePass&&ng(U,n,d.length-1),jc(h,fe),h[n.index]=fe}(so,ft,Gr,Sn,Pn,U,fe);br=Ja(mn,vr),ft&&function cg(n,i,o,d){if(d)bi(n,o,["ng-version",Pp.full]);else{const{attrs:h,classes:v}=function $p(n){const i=[],o=[];let d=1,h=2;for(;d<n.length;){let v=n[d];if("string"==typeof v)2===h?""!==v&&i.push(v,n[++d]):8===h&&o.push(v);else{if(!hl(h))break;h=v}d++}return{attrs:i,classes:o}}(i.selectors[0]);h&&bi(n,o,h),v&&v.length>0&&js(n,o,v.join(" "))}}(fe,Gr,ft,d),void 0!==o&&function gy(n,i,o){const d=n.projection=[];for(let h=0;h<i.length;h++){const v=o[h];d.push(null!=v?Array.from(v):null)}}(br,this.ngContentSelectors,o),nr=function py(n,i,o,d,h,v){const D=vt(),N=h[An],U=Oi(D,h);Jp(N,h,D,o,null,d);for(let fe=0;fe<o.length;fe++)Wt(si(h,N,D.directiveStart+fe,D),h);eg(N,h,D),U&&Wt(U,h);const X=si(h,N,D.directiveStart+D.componentOffset,D);if(n[Ur]=h[Ur]=X,null!==v)for(const fe of v)fe(X,i);return Wu(N,D,n),X}(ea,Gr,Sn,fi,Pn,[ug]),Xp(mn,Pn,null)}finally{Zs()}return new ag(this.componentType,nr,nc(br,Pn),Pn,br)}}class ag extends Sg{constructor(i,o,d,h,v){super(),this.location=d,this._rootLView=h,this._tNode=v,this.instance=o,this.hostView=this.changeDetectorRef=new dy(h),this.componentType=i}setInput(i,o){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[i])){const v=this._rootLView;ff(v[An],v,h,i,o),gu(Xi(this._tNode.index,v))}}get injector(){return new Ra(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function ug(){const n=vt();Sr(M()[An],n)}function mf(n){let i=function Xg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const d=[n];for(;i;){let h;if(_i(n))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Se(903,!1);h=i.\u0275dir}if(h){if(o){d.push(h);const D=n;D.inputs=vh(n.inputs),D.declaredInputs=vh(n.declaredInputs),D.outputs=vh(n.outputs);const N=h.hostBindings;N&&dg(n,N);const U=h.viewQuery,X=h.contentQueries;if(U&&Qg(n,U),X&&tp(n,X),ve(n.inputs,h.inputs),ve(n.declaredInputs,h.declaredInputs),ve(n.outputs,h.outputs),_i(h)&&h.data.animation){const fe=n.data;fe.animation=(fe.animation||[]).concat(h.data.animation)}}const v=h.features;if(v)for(let D=0;D<v.length;D++){const N=v[D];N&&N.ngInherit&&N(n),N===mf&&(o=!1)}}i=Object.getPrototypeOf(i)}!function my(n){let i=0,o=null;for(let d=n.length-1;d>=0;d--){const h=n[d];h.hostVars=i+=h.hostVars,h.hostAttrs=yo(h.hostAttrs,o=yo(o,h.hostAttrs))}}(d)}function vh(n){return n===lt?{}:n===un?[]:n}function Qg(n,i){const o=n.viewQuery;n.viewQuery=o?(d,h)=>{i(d,h),o(d,h)}:i}function tp(n,i){const o=n.contentQueries;n.contentQueries=o?(d,h,v)=>{i(d,h,v),o(d,h,v)}:i}function dg(n,i){const o=n.hostBindings;n.hostBindings=o?(d,h)=>{i(d,h),o(d,h)}:i}function Ft(n){return!!Rn(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Rn(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Mr(n,i,o){return n[i]=o}function Mi(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function mu(n,i,o,d){const h=M();return Mi(h,oa(),i)&&(F(),pl(Vr(),h,n,i,o,d)),mu}function yu(n,i,o,d){return Mi(n,oa(),o)?i+ue(o)+d:Xr}function rm(n,i,o,d,h,v,D,N){const U=M(),X=F(),fe=n+vr,Me=X.firstCreatePass?function E_(n,i,o,d,h,v,D,N,U){const X=i.consts,fe=Gu(i,n,4,D||null,Ns(X,N));cf(i,o,fe,Ns(X,U)),Sr(i,fe);const Me=fe.tView=qf(2,fe,d,h,v,i.directiveRegistry,i.pipeRegistry,null,i.schemas,X);return null!==i.queries&&(i.queries.template(i,fe),Me.queries=i.queries.embeddedTView(fe)),fe}(fe,X,U,i,o,d,h,v,D):X.data[fe];ii(Me,!1);const ft=U[qe].createComment("");wo(X,U,ft,Me),Wt(ft,U),jc(U,U[fe]=Kg(ft,U,ft,Me)),Oo(Me)&&Ku(X,U,Me),null!=D&&sf(U,Me,N)}function im(n){return os(function Ao(){return Tr.lFrame.contextLView}(),vr+n)}function Ey(n,i,o){const d=M();return Mi(d,oa(),i)&&Ya(F(),Vr(),d,n,i,d[qe],o,!1),Ey}function hg(n,i,o,d,h){const D=h?"class":"style";ff(n,o,i.inputs[D],D,d)}function sp(n,i,o,d){const h=M(),v=F(),D=vr+n,N=h[qe],U=v.firstCreatePass?function Iy(n,i,o,d,h,v){const D=i.consts,U=Gu(i,n,2,d,Ns(D,h));return cf(i,o,U,Ns(D,v)),null!==U.attrs&&mh(U,U.attrs,!1),null!==U.mergedAttrs&&mh(U,U.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,U),U}(D,v,h,i,o,d):v.data[D],X=h[D]=jd(N,i,function mo(){return Tr.lFrame.currentNamespace}()),fe=Oo(U);return ii(U,!0),fd(N,X,U),32!=(32&U.flags)&&wo(v,h,X,U),0===function sa(){return Tr.lFrame.elementDepthCount}()&&Wt(X,h),function b(){Tr.lFrame.elementDepthCount++}(),fe&&(Ku(v,h,U),Wu(v,U,h)),null!==d&&sf(h,U),sp}function Md(){let n=vt();Qi()?ds():(n=n.parent,ii(n,!1));const i=n;!function q(){Tr.lFrame.elementDepthCount--}();const o=F();return o.firstCreatePass&&(Sr(o,n),ei(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Kr(n){return 0!=(8&n.flags)}(i)&&hg(o,i,M(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Br(n){return 0!=(16&n.flags)}(i)&&hg(o,i,M(),i.stylesWithoutHost,!1),Md}function sm(n,i,o,d){return sp(n,i,o,d),Md(),sm}function om(n,i,o){const d=M(),h=F(),v=n+vr,D=h.firstCreatePass?function wy(n,i,o,d,h){const v=i.consts,D=Ns(v,d),N=Gu(i,n,8,"ng-container",D);return null!==D&&mh(N,D,!0),cf(i,o,N,Ns(v,h)),null!==i.queries&&i.queries.elementStart(i,N),N}(v,h,d,i,o):h.data[v];ii(D,!0);const N=d[v]=d[qe].createComment("");return wo(h,d,N,D),Wt(N,d),Oo(D)&&(Ku(h,d,D),Wu(h,D,d)),null!=o&&sf(d,D),om}function op(){let n=vt();const i=F();return Qi()?ds():(n=n.parent,ii(n,!1)),i.firstCreatePass&&(Sr(i,n),ei(n)&&i.queries.elementEnd(n)),op}function vu(n,i,o){return om(n,i,o),op(),vu}function am(){return M()}function Cy(n){return!!n&&"function"==typeof n.then}function lm(n){return!!n&&"function"==typeof n.subscribe}const lv=lm;function by(n,i,o,d){const h=M(),v=F(),D=vt();return function um(n,i,o,d,h,v,D){const N=Oo(d),X=n.firstCreatePass&&df(n),fe=i[Ur],Me=og(i);let ft=!0;if(3&d.type||D){const Pn=Oi(d,i),nr=D?D(Pn):Pn,br=Me.length,Gr=D?fi=>D(Pi(fi[d.index])):d.index;let Sn=null;if(!D&&N&&(Sn=function w_(n,i,o,d){const h=n.cleanup;if(null!=h)for(let v=0;v<h.length-1;v+=2){const D=h[v];if(D===o&&h[v+1]===d){const N=i[Li],U=h[v+2];return N.length>U?N[U]:null}"string"==typeof D&&(v+=2)}return null}(n,i,h,d.index)),null!==Sn)(Sn.__ngLastListenerFn__||Sn).__ngNextListenerFn__=v,Sn.__ngLastListenerFn__=v,ft=!1;else{v=dm(d,i,fe,v,!1);const fi=o.listen(nr,h,v);Me.push(v,fi),X&&X.push(h,Gr,br,br+1)}}else v=dm(d,i,fe,v,!1);const jt=d.outputs;let mn;if(ft&&null!==jt&&(mn=jt[h])){const Pn=mn.length;if(Pn)for(let nr=0;nr<Pn;nr+=2){const so=i[mn[nr]][mn[nr+1]].subscribe(v),ea=Me.length;Me.push(v,so),X&&X.push(h,d.index,ea,-(ea+1))}}}(v,h,h[qe],D,n,i,d),by}function cv(n,i,o,d){try{return zi(6,i,o),!1!==o(d)}catch(h){return Hc(n,h),!1}finally{zi(7,i,o)}}function dm(n,i,o,d,h){return function v(D){if(D===Function)return d;gu(n.componentOffset>-1?Xi(n.index,i):i);let U=cv(i,o,d,D),X=v.__ngNextListenerFn__;for(;X;)U=cv(i,o,X,D)&&U,X=X.__ngNextListenerFn__;return h&&!1===U&&(D.preventDefault(),D.returnValue=!1),U}}function uv(n=1){return function hs(n){return(Tr.lFrame.contextLView=function Aa(n,i){for(;n>0;)i=i[Vt],n--;return i}(n,Tr.lFrame.contextLView))[Ur]}(n)}function Dy(n,i){let o=null;const d=function pu(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let h=0;h<i.length;h++){const v=i[h];if("*"!==v){if(null===d?bd(n,v,!0):Uu(d,v))return h}else o=h}return o}function Ty(n){const i=M()[Lt][Ci];if(!i.projection){const d=i.projection=Di(n?n.length:1,null),h=d.slice();let v=i.child;for(;null!==v;){const D=n?Dy(v,n):0;null!==D&&(h[D]?h[D].projectionNext=v:d[D]=v,h[D]=v),v=v.next}}}function hm(n,i=0,o){const d=M(),h=F(),v=Gu(h,vr+n,16,null,o||null);null===v.projection&&(v.projection=i),ds(),32!=(32&v.flags)&&function kh(n,i,o){Nh(i[qe],0,i,o,Pa(n,o,i),ld(o.parent||i[Ci],o,i))}(h,d,v)}function fm(n,i,o){return Sy(n,"",i,"",o),fm}function Sy(n,i,o,d,h){const v=M(),D=yu(v,i,o,d);return D!==Xr&&Ya(F(),Vr(),v,n,D,v[qe],h,!1),Sy}function vm(n,i){return n<<17|i<<2}function Yu(n){return n>>17&32767}function _m(n){return 2|n}function Zu(n){return(131068&n)>>2}function Ay(n,i){return-131069&n|i<<2}function xy(n){return 1|n}function Em(n,i,o,d,h){const v=n[o+1],D=null===i;let N=d?Yu(v):Zu(v),U=!1;for(;0!==N&&(!1===U||D);){const fe=n[N+1];gv(n[N],i)&&(U=!0,n[N+1]=d?xy(fe):_m(fe)),N=d?Yu(fe):Zu(fe)}U&&(n[o+1]=d?_m(v):xy(v))}function gv(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&S(n,i)>=0}function Dm(n,i){return function Gc(n,i,o,d){const h=M(),v=F(),D=function Ys(n){const i=Tr.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}(2);v.firstUpdatePass&&function $y(n,i,o,d){const h=n.data;if(null===h[o+1]){const v=h[ls()],D=function Ly(n,i){return i>=n.expandoStartIndex}(n,o);(function Am(n,i){return 0!=(n.flags&(i?8:16))})(v,d)&&null===i&&!D&&(i=!1),i=function _v(n,i,o,d){const h=function Rs(n){const i=Tr.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let v=d?i.residualClasses:i.residualStyles;if(null===h)0===(d?i.classBindings:i.styleBindings)&&(o=Pd(o=Sm(null,n,i,o,d),i.attrs,d),v=null);else{const D=i.directiveStylingLast;if(-1===D||n[D]!==h)if(o=Sm(h,n,i,o,d),null===v){let U=function Tm(n,i,o){const d=o?i.classBindings:i.styleBindings;if(0!==Zu(d))return n[Yu(d)]}(n,i,d);void 0!==U&&Array.isArray(U)&&(U=Sm(null,n,i,U[1],d),U=Pd(U,i.attrs,d),function Fi(n,i,o,d){n[Yu(o?i.classBindings:i.styleBindings)]=d}(n,i,d,U))}else v=function Ev(n,i,o){let d;const h=i.directiveEnd;for(let v=1+i.directiveStylingLast;v<h;v++)d=Pd(d,n[v].hostAttrs,o);return Pd(d,i.attrs,o)}(n,i,d)}return void 0!==v&&(d?i.residualClasses=v:i.residualStyles=v),o}(h,v,i,d),function My(n,i,o,d,h,v){let D=v?i.classBindings:i.styleBindings,N=Yu(D),U=Zu(D);n[d]=o;let fe,X=!1;if(Array.isArray(o)?(fe=o[1],(null===fe||S(o,fe)>0)&&(X=!0)):fe=o,h)if(0!==U){const ft=Yu(n[N+1]);n[d+1]=vm(ft,N),0!==ft&&(n[ft+1]=Ay(n[ft+1],d)),n[N+1]=function lp(n,i){return 131071&n|i<<17}(n[N+1],d)}else n[d+1]=vm(N,0),0!==N&&(n[N+1]=Ay(n[N+1],d)),N=d;else n[d+1]=vm(U,0),0===N?N=d:n[U+1]=Ay(n[U+1],d),U=d;X&&(n[d+1]=_m(n[d+1])),Em(n,fe,d,!0),Em(n,fe,d,!1),function Py(n,i,o,d,h){const v=h?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof i&&S(v,i)>=0&&(o[d+1]=xy(o[d+1]))}(i,fe,n,d,v),D=vm(N,U),v?i.classBindings=D:i.styleBindings=D}(h,v,i,o,D,d)}}(v,n,D,d),i!==Xr&&Mi(h,D,i)&&function By(n,i,o,d,h,v,D,N){if(!(3&i.type))return;const U=n.data,X=U[N+1],fe=function C_(n){return 1==(1&n)}(X)?wv(U,i,o,h,Zu(X),D):void 0;vf(fe)||(vf(v)||function pv(n){return 2==(2&n)}(X)&&(v=wv(U,null,o,h,N,D)),function _c(n,i,o,d,h){if(i)h?n.addClass(o,d):n.removeClass(o,d);else{let v=-1===d.indexOf("-")?void 0:Uo.DashCase;null==h?n.removeStyle(o,d,v):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),v|=Uo.Important),n.setStyle(o,d,h,v))}}(d,D,go(ls(),o),h,v))}(v,v.data[ls()],h,h[qe],n,h[D+1]=function Cv(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ue(ca(n)))),n}(i,o),d,D)}(n,i,null,!0),Dm}function Sm(n,i,o,d,h){let v=null;const D=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<D&&(v=i[N],d=Pd(d,v.hostAttrs,h),v!==n);)N++;return null!==n&&(o.directiveStylingLast=N),d}function Pd(n,i,o){const d=o?1:2;let h=-1;if(null!==i)for(let v=0;v<i.length;v++){const D=i[v];"number"==typeof D?h=D:h===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ui(n,D,!!o||i[++v]))}return void 0===n?null:n}function wv(n,i,o,d,h,v){const D=null===i;let N;for(;h>0;){const U=n[h],X=Array.isArray(U),fe=X?U[1]:U,Me=null===fe;let ft=o[h+1];ft===Xr&&(ft=Me?un:void 0);let jt=Me?Pr(ft,d):fe===d?ft:void 0;if(X&&!vf(jt)&&(jt=Pr(U,d)),vf(jt)&&(N=jt,D))return N;const mn=n[h+1];h=D?Yu(mn):Zu(mn)}if(null!==i){let U=v?i.residualClasses:i.residualStyles;null!=U&&(N=Pr(U,d))}return N}function vf(n){return void 0!==n}function bv(n,i=""){const o=M(),d=F(),h=n+vr,v=d.firstCreatePass?Gu(d,h,1,i,null):d.data[h],D=o[h]=function Kl(n,i){return n.createText(i)}(o[qe],i);wo(d,o,D,v),ii(v,!1)}function fg(n){return xm("",n,""),fg}function xm(n,i,o){const d=M(),h=yu(d,n,i,o);return h!==Xr&&function Ul(n,i,o){const d=go(i,n);!function ql(n,i,o){n.setValue(i,o)}(n[qe],d,o)}(d,ls(),h),xm}const Ef=void 0;var Gy=["en",[["a","p"],["AM","PM"],Ef],[["AM","PM"],Ef,Ef],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ef,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ef,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ef,"{1} 'at' {0}",Ef],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zy(n){const o=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===d?1:5}];let If={};function Pm(n){const i=function km(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=hp(i);if(o)return o;const d=i.split("-")[0];if(o=hp(d),o)return o;if("en"===d)return Gy;throw new Se(701,!1)}function Om(n){return Pm(n)[Fr.PluralCase]}function hp(n){return n in If||(If[n]=Gn.ng&&Gn.ng.common&&Gn.ng.common.locales&&Gn.ng.common.locales[n]),If[n]}var Fr=(()=>((Fr=Fr||{})[Fr.LocaleId=0]="LocaleId",Fr[Fr.DayPeriodsFormat=1]="DayPeriodsFormat",Fr[Fr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fr[Fr.DaysFormat=3]="DaysFormat",Fr[Fr.DaysStandalone=4]="DaysStandalone",Fr[Fr.MonthsFormat=5]="MonthsFormat",Fr[Fr.MonthsStandalone=6]="MonthsStandalone",Fr[Fr.Eras=7]="Eras",Fr[Fr.FirstDayOfWeek=8]="FirstDayOfWeek",Fr[Fr.WeekendRange=9]="WeekendRange",Fr[Fr.DateFormat=10]="DateFormat",Fr[Fr.TimeFormat=11]="TimeFormat",Fr[Fr.DateTimeFormat=12]="DateTimeFormat",Fr[Fr.NumberSymbols=13]="NumberSymbols",Fr[Fr.NumberFormats=14]="NumberFormats",Fr[Fr.CurrencyCode=15]="CurrencyCode",Fr[Fr.CurrencySymbol=16]="CurrencySymbol",Fr[Fr.CurrencyName=17]="CurrencyName",Fr[Fr.Currencies=18]="Currencies",Fr[Fr.Directionality=19]="Directionality",Fr[Fr.PluralCase=20]="PluralCase",Fr[Fr.ExtraData=21]="ExtraData",Fr))();const fp="en-US";let gp=fp;function Ig(n,i,o,d,h){if(n=ye(n),Array.isArray(n))for(let v=0;v<n.length;v++)Ig(n[v],i,o,d,h);else{const v=F(),D=M();let N=Nu(n)?n:ye(n.provide),U=Nf(n);const X=vt(),fe=1048575&X.providerIndexes,Me=X.directiveStart,ft=X.providerIndexes>>20;if(Nu(n)||!n.multi){const jt=new Le(U,h,Uc),mn=zm(N,i,h?fe:fe+ft,Me);-1===mn?(mi(oc(X,D),v,N),Jy(v,n,i.length),i.push(N),X.directiveStart++,X.directiveEnd++,h&&(X.providerIndexes+=1048576),o.push(jt),D.push(jt)):(o[mn]=jt,D[mn]=jt)}else{const jt=zm(N,i,fe+ft,Me),mn=zm(N,i,fe,fe+ft),nr=mn>=0&&o[mn];if(h&&!nr||!h&&!(jt>=0&&o[jt])){mi(oc(X,D),v,N);const br=function Qv(n,i,o,d,h){const v=new Le(n,o,Uc);return v.multi=[],v.index=i,v.componentProviders=0,Xv(v,h,d&&!o),v}(h?y0:Gm,o.length,h,d,U);!h&&nr&&(o[mn].providerFactory=br),Jy(v,n,i.length,0),i.push(N),X.directiveStart++,X.directiveEnd++,h&&(X.providerIndexes+=1048576),o.push(br),D.push(br)}else Jy(v,n,jt>-1?jt:mn,Xv(o[h?mn:jt],U,!h&&d));!h&&d&&nr&&o[mn].componentProviders++}}}function Jy(n,i,o,d){const h=Nu(i),v=function Dg(n){return!!n.useClass}(i);if(h||v){const U=(v?ye(i.useClass):i).prototype.ngOnDestroy;if(U){const X=n.destroyHooks||(n.destroyHooks=[]);if(!h&&i.multi){const fe=X.indexOf(o);-1===fe?X.push(o,[d,U]):X[fe+1].push(d,U)}else X.push(o,U)}}}function Xv(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function zm(n,i,o,d){for(let h=o;h<d;h++)if(i[h]===n)return h;return-1}function Gm(n,i,o,d){return Wm(this.multi,[])}function y0(n,i,o,d){const h=this.multi;let v;if(this.providerFactory){const D=this.providerFactory.componentProviders,N=si(o,o[An],this.providerFactory.index,d);v=N.slice(0,D),Wm(h,v);for(let U=D;U<N.length;U++)v.push(N[U])}else v=[],Wm(h,v);return v}function Wm(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function Dh(n,i=[]){return o=>{o.providersResolver=(d,h)=>function Eg(n,i,o){const d=F();if(d.firstCreatePass){const h=_i(n);Ig(o,d.data,d.blueprint,h,!0),Ig(i,d.data,d.blueprint,h,!1)}}(d,h?h(n):n,i)}}class Xa{}class gl{}function Jv(n,i){return new Ep(n,null!=i?i:null)}class Ep extends Xa{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gf(this);const d=Xn(i);this._bootstrapComponents=ka(d.bootstrap),this._r3Injector=Xh(i,o,[{provide:Xa,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver}],Ue(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Tf extends gl{constructor(i){super(),this.moduleType=i}create(i){return new Ep(this.moduleType,i)}}class Vl extends Xa{constructor(i,o,d){super(),this.componentFactoryResolver=new gf(this),this.instance=null;const h=new Hh([...i,{provide:Xa,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver}],o||du(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function ev(n,i,o=null){return new Vl(n,i,o).injector}let tv=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const d=bg(0,o.type),h=d.length>0?ev([d],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,h)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=kt({token:n,providedIn:"environment",factory:()=>new n(yr(Fl))}),n})();function Sf(n){n.getStandaloneInjector=i=>i.get(tv).getOrCreateStandaloneInjector(n)}function i_(n,i,o){const d=ts()+n,h=M();return h[d]===Xr?Mr(h,d,o?i.call(o):i()):function oi(n,i){return n[i]}(h,d)}function r(n,i,o,d,h,v,D){const N=i+o;return function Ms(n,i,o,d){const h=Mi(n,i,o);return Mi(n,i+1,d)||h}(n,N,h,v)?Mr(n,N+2,D?d.call(D,h,v):d(h,v)):function Ip(n,i){const o=n[i];return o===Xr?void 0:o}(n,N+2)}function c(n,i){const o=F();let d;const h=n+vr;var v;o.firstCreatePass?(d=function f(n,i){if(i)for(let o=i.length-1;o>=0;o--){const d=i[o];if(n===d.name)return d}}(i,o.pipeRegistry),o.data[h]=d,d.onDestroy&&(null!==(v=o.destroyHooks)&&void 0!==v?v:o.destroyHooks=[]).push(h,d.onDestroy)):d=o.data[h];const D=d.factory||(d.factory=ti(d.type)),N=Cr(Uc);try{const U=_l(!1),X=D();return _l(U),function I_(n,i,o,d){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=d}(o,M(),h,X),X}finally{Cr(N)}}function G(n,i,o,d){const h=n+vr,v=M(),D=os(v,h);return function Bt(n,i){return n[An].data[i].pure}(v,h)?r(v,ts(),i,D.transform,o,d,D):D.transform(o,d)}function Mn(n){return i=>{setTimeout(n,void 0,i)}}const Fn=class fn extends _.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,d){let h=i,v=o||(()=>null),D=d;if(i&&"object"==typeof i){var N,U,X;const Me=i;h=null===(N=Me.next)||void 0===N?void 0:N.bind(Me),v=null===(U=Me.error)||void 0===U?void 0:U.bind(Me),D=null===(X=Me.complete)||void 0===X?void 0:X.bind(Me)}this.__isAsync&&(v=Mn(v),h&&(h=Mn(h)),D&&(D=Mn(D)));const fe=super.subscribe({next:h,error:v,complete:D});return i instanceof y.w0&&i.add(fe),fe}};function gr(){return this._results[Symbol.iterator]()}class ai{get changes(){return this._changes||(this._changes=new Fn)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ai.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=gr)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const d=this;d.dirty=!1;const h=function qr(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Gl(n,i,o){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let h=n[d],v=i[d];if(o&&(h=o(h),v=o(v)),v!==h)return!1}return!0}(d._results,h,o))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ki=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ps,n})();const li=ki,La=class extends li{constructor(i,o,d){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=d}createEmbeddedView(i,o){const d=this._declarationTContainer.tView,h=nf(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,o||null);h[Qt]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[vn];return null!==D&&(h[vn]=D.createEmbeddedView(d)),Xp(d,h,i),new Rd(h)}};function Ps(){return bs(vt(),M())}function bs(n,i){return 4&n.type?new La(i,n,nc(n,i)):null}let $a=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ah,n})();function Ah(){return hE(vt(),M())}const gI=$a,uE=class extends gI{constructor(i,o,d){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=d}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new Ra(this._hostTNode,this._hostLView)}get parentInjector(){const i=Ji(this._hostTNode,this._hostLView);if(Es(i)){const o=Qs(i,this._hostLView),d=Xs(i);return new Ra(o[An].data[d+8],o)}return new Ra(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=dE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-dn}createEmbeddedView(i,o,d){let h,v;"number"==typeof d?h=d:null!=d&&(h=d.index,v=d.injector);const D=i.createEmbeddedView(o||{},v);return this.insert(D,h),D}createComponent(i,o,d,h,v){const D=i&&!function bl(n){return"function"==typeof n}(i);let N;if(D)N=o;else{const Me=o||{};N=Me.index,d=Me.injector,h=Me.projectableNodes,v=Me.environmentInjector||Me.ngModuleRef}const U=D?i:new zc(wn(i)),X=d||this.parentInjector;if(!v&&null==U.ngModule){const ft=(D?X:this.parentInjector).get(Fl,null);ft&&(v=ft)}const fe=U.create(X,h,void 0,v);return this.insert(fe.hostView,N),fe}insert(i,o){const d=i._lView,h=d[An];if(function Ua(n){return Ir(n[ri])}(d)){const fe=this.indexOf(i);if(-1!==fe)this.detach(fe);else{const Me=d[ri],ft=new uE(Me,Me[Ci],Me[ri]);ft.detach(ft.indexOf(i))}}const v=this._adjustIndex(o),D=this._lContainer;!function Rl(n,i,o,d){const h=dn+d,v=o.length;d>0&&(o[h-1][qi]=i),d<v-dn?(i[qi]=o[h],Yr(o,dn+d,i)):(o.push(i),i[qi]=null),i[ri]=o;const D=i[Qt];null!==D&&o!==D&&function Ph(n,i){const o=n[tn];i[Lt]!==i[ri][ri][Lt]&&(n[mt]=!0),null===o?n[tn]=[i]:o.push(i)}(D,i);const N=i[vn];null!==N&&N.insertView(n),i[cr]|=64}(h,d,D,v);const N=Zl(v,D),U=d[qe],X=ru(U,D[ot]);return null!==X&&function Rh(n,i,o,d,h,v){d[ji]=h,d[Ci]=i,vc(n,d,o,1,h,v)}(h,D[Ci],U,d,X,N),i.attachToViewContainerRef(),Yr(A0(D),v,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=dE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),d=ll(this._lContainer,o);d&&($t(A0(this._lContainer),o),Hd(d[An],d))}detach(i){const o=this._adjustIndex(i,-1),d=ll(this._lContainer,o);return d&&null!=$t(A0(this._lContainer),o)?new Rd(d):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function dE(n){return n[xt]}function A0(n){return n[xt]||(n[xt]=[])}function hE(n,i){let o;const d=i[n.index];if(Ir(d))o=d;else{let h;if(8&n.type)h=Pi(d);else{const v=i[qe];h=v.createComment("");const D=Oi(n,i);Ml(v,ru(v,D),h,function Pl(n,i){return n.nextSibling(i)}(v,D),!1)}i[n.index]=o=Kg(d,i,h,n),jc(i,o)}return new uE(o,n,i)}class x0{constructor(i){this.queryList=i,this.matches=null}clone(){return new x0(this.queryList)}setDirty(){this.queryList.setDirty()}}class R0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const d=null!==i.contentQueries?i.contentQueries[0]:o.length,h=[];for(let v=0;v<d;v++){const D=o.getByIndex(v);h.push(this.queries[D.indexInDeclarationView].clone())}return new R0(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==IE(i,o).matches&&this.queries[o].setDirty()}}class fE{constructor(i,o,d=null){this.predicate=i,this.flags=o,this.read=d}}class M0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let d=0;d<this.length;d++){const h=null!==o?o.length:0,v=this.getByIndex(d).embeddedTView(i,h);v&&(v.indexInDeclarationView=d,null!==o?o.push(v):o=[v])}return null!==o?new M0(o):null}template(i,o){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class P0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new P0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==o;)d=d.parent;return o===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const v=d[h];this.matchTNodeWithReadOption(i,o,mI(o,v)),this.matchTNodeWithReadOption(i,o,hn(o,i,v,!1,!1))}else d===ki?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,hn(o,i,d,!1,!1))}matchTNodeWithReadOption(i,o,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===rc||h===$a||h===ki&&4&o.type)this.addMatch(o.index,-2);else{const v=hn(o,i,h,!1,!1);null!==v&&this.addMatch(o.index,v)}else this.addMatch(o.index,d)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function mI(n,i){const o=n.localNames;if(null!==o)for(let d=0;d<o.length;d+=2)if(o[d]===i)return o[d+1];return null}function vI(n,i,o,d){return-1===o?function yI(n,i){return 11&n.type?nc(n,i):4&n.type?bs(n,i):null}(i,n):-2===o?function _I(n,i,o){return o===rc?nc(i,n):o===ki?bs(i,n):o===$a?hE(i,n):void 0}(n,i,d):si(n,n[An],o,i)}function pE(n,i,o,d){const h=i[vn].queries[d];if(null===h.matches){const v=n.data,D=o.matches,N=[];for(let U=0;U<D.length;U+=2){const X=D[U];N.push(X<0?null:vI(i,v[X],D[U+1],o.metadata.read))}h.matches=N}return h.matches}function O0(n,i,o,d){const h=n.queries.getByIndex(o),v=h.matches;if(null!==v){const D=pE(n,i,h,o);for(let N=0;N<v.length;N+=2){const U=v[N];if(U>0)d.push(D[N/2]);else{const X=v[N+1],fe=i[-U];for(let Me=dn;Me<fe.length;Me++){const ft=fe[Me];ft[Qt]===ft[ri]&&O0(ft[An],ft,X,d)}if(null!==fe[tn]){const Me=fe[tn];for(let ft=0;ft<Me.length;ft++){const jt=Me[ft];O0(jt[An],jt,X,d)}}}}}return d}function gE(n){const i=M(),o=F(),d=tl();Sa(d+1);const h=IE(o,d);if(n.dirty&&function Do(n){return 4==(4&n[cr])}(i)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const v=h.crossesNgTemplate?O0(o,i,d,[]):pE(o,i,h,d);n.reset(v,hu),n.notifyOnChanges()}return!0}return!1}function mE(n,i,o){const d=F();d.firstCreatePass&&(EE(d,new fE(n,i,o),-1),2==(2&i)&&(d.staticViewQueries=!0)),_E(d,M(),i)}function yE(n,i,o,d){const h=F();if(h.firstCreatePass){const v=vt();EE(h,new fE(i,o,d),v.index),function II(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}_E(h,M(),o)}function vE(){return function EI(n,i){return n[vn].queries[i].queryList}(M(),tl())}function _E(n,i,o){const d=new ai(4==(4&o));Yf(n,i,d,d.destroy),null===i[vn]&&(i[vn]=new R0),i[vn].queries.push(new x0(d))}function EE(n,i,o){null===n.queries&&(n.queries=new M0),n.queries.track(new P0(i,o))}function IE(n,i){return n.queries.getByIndex(i)}function k0(n){return!!Xn(n)}function f_(...n){}const BE=new Ni("Application Initializer");let p_=(()=>{class n{constructor(o){this.appInits=o,this.resolve=f_,this.reject=f_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const v=this.appInits[h]();if(Cy(v))o.push(v);else if(lv(v)){const D=new Promise((N,U)=>{v.subscribe({complete:N,error:U})});o.push(D)}}Promise.all(o).then(()=>{d()}).catch(h=>{this.reject(h)}),0===o.length&&d(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(yr(BE,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UE=new Ni("AppId",{providedIn:"root",factory:function VE(){return`${B0()}${B0()}${B0()}`}});function B0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jE=new Ni("Platform Initializer"),jI=new Ni("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let HI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const g_=new Ni("LocaleId",{providedIn:"root",factory:()=>mr(g_,bn.Optional|bn.SkipSelf)||function zI(){return typeof $localize<"u"&&$localize.locale||fp}()}),GI=new Ni("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WI{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let KI=(()=>{class n{compileModuleSync(o){return new Tf(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const d=this.compileModuleSync(o),v=ka(Xn(o).declarations).reduce((D,N)=>{const U=wn(N);return U&&D.push(new zc(U)),D},[]);return new WI(d,v)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZI=(()=>Promise.resolve(0))();function U0(n){typeof Zone>"u"?ZI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class td{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fn(!1),this.onMicrotaskEmpty=new Fn(!1),this.onStable=new Fn(!1),this.onError=new Fn(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&o,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function XI(){let n=Gn.requestAnimationFrame,i=Gn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function ew(n){const i=()=>{!function JI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Gn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j0(n),n.isCheckStableRunning=!0,V0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,d,h,v,D,N)=>{try{return GE(n),o.invokeTask(h,v,D,N)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&i(),WE(n)}},onInvoke:(o,d,h,v,D,N,U)=>{try{return GE(n),o.invoke(h,v,D,N,U)}finally{n.shouldCoalesceRunChangeDetection&&i(),WE(n)}},onHasTask:(o,d,h,v)=>{o.hasTask(h,v),d===h&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,j0(n),V0(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(o,d,h,v)=>(o.handleError(h,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!td.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(td.isInAngularZone())throw new Se(909,!1)}run(i,o,d){return this._inner.run(i,o,d)}runTask(i,o,d,h){const v=this._inner,D=v.scheduleEventTask("NgZoneEvent: "+h,i,QI,f_,f_);try{return v.runTask(D,o,d)}finally{v.cancelTask(D)}}runGuarded(i,o,d){return this._inner.runGuarded(i,o,d)}runOutsideAngular(i){return this._outer.run(i)}}const QI={};function V0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function GE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function WE(n){n._nesting--,V0(n)}class tw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fn,this.onMicrotaskEmpty=new Fn,this.onStable=new Fn,this.onError=new Fn}run(i,o,d){return i.apply(o,d)}runGuarded(i,o,d){return i.apply(o,d)}runOutsideAngular(i){return i()}runTask(i,o,d,h){return i.apply(o,d)}}const KE=new Ni(""),qE=new Ni("");let H0,nw=(()=>{class n{constructor(o,d,h){this._ngZone=o,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,H0||(function rw(n){H0=n}(h),h.addToWindow(d)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{td.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(o)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,d,h){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==v),o(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:o,timeoutId:v,updateCb:h})}whenStable(o,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,d,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(yr(td),yr(YE),yr(qE))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),YE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,d){this._applications.set(o,d)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,d=!0){var h,v;return null!==(h=null===(v=H0)||void 0===v?void 0:v.findTestabilityInTree(this,o,d))&&void 0!==h?h:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Af=!1;let wp=null;const z0=new Ni("PlatformDestroyListeners"),XE=new Ni("appBootstrapListener");class ow{constructor(i,o){this.name=i,this.token=o}}function cw(n){const{rootComponent:i,appProviders:o,platformProviders:d}=n;Af&&void 0!==i&&function $f(n){if(function Bf(n){if(!wn(n))throw new Se(906,`The ${_t(n)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(n),!wn(n).standalone)throw new Se(907,`The ${_t(n)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${_t(n)} component has the \`standalone: true\` flag in the decorator.`)}(i);const h=function lw(n=[]){if(wp)return wp;const i=function JE(n=[],i){return zu.create({name:i,providers:[{provide:jh,useValue:"platform"},{provide:z0,useValue:new Set([()=>wp=null])},...n]})}(n);return wp=i,function QE(n){const i=n.get(jE,null);i&&i.forEach(o=>o())}(i),i}(d),v=function nI(n,i){let o;return o="noop"===n?new tw:("zone.js"===n?void 0:n)||new td(i),o}("zone.js",function tI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return v.run(()=>{const N=ev([{provide:td,useValue:v},...o||[]],h,"Environment Injector"),U=N.get(fu,null);if(Af&&!U)throw new Se(402,"No `ErrorHandler` found in the Dependency Injection tree.");let X;v.runOutsideAngular(()=>{X=v.onError.subscribe({next:ft=>{U.handleError(ft)}})});const fe=()=>N.destroy(),Me=h.get(z0);return Me.add(fe),N.onDestroy(()=>{X.unsubscribe(),Me.delete(fe)}),function rI(n,i,o){try{const d=o();return Cy(d)?d.catch(h=>{throw i.runOutsideAngular(()=>n.handleError(h)),h}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}(U,v,()=>{const ft=N.get(p_);return ft.runInitializers(),ft.donePromise.then(()=>{!function kv(n){ht(n,"Expected localeId to be defined"),"string"==typeof n&&(gp=n.toLowerCase().replace(/_/g,"-"))}(N.get(g_,fp)||fp);const mn=N.get(m_);return void 0!==i&&mn.bootstrap(i),mn})})})}let m_=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,d,h){this._zone=o,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new ee.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),D=new ee.y(N=>{let U;this._zone.runOutsideAngular(()=>{U=this._zone.onStable.subscribe(()=>{td.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const X=this._zone.onUnstable.subscribe(()=>{td.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{U.unsubscribe(),X.unsubscribe()}});this.isStable=(0,le.T)(v,D.pipe((0,$e.B)()))}bootstrap(o,d){Af&&this.warnIfDestroyed();const h=o instanceof Ff;if(!this._injector.get(p_).done){const jt="Cannot bootstrap as there are still asynchronous initializers running."+(!h&&Wn(o)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new Se(405,Af&&jt)}let D;D=h?o:this._injector.get(Ka).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const N=function sw(n){return n.isBoundToModule}(D)?void 0:this._injector.get(Xa),X=D.create(zu.NULL,[],d||D.selector,N),fe=X.location.nativeElement,Me=X.injector.get(KE,null);return null==Me||Me.registerApplication(fe),X.onDestroy(()=>{this.detachView(X.hostView),y_(this.components,X),null==Me||Me.unregisterApplication(fe)}),this._loadComponent(X),X}tick(){if(Af&&this.warnIfDestroyed(),this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){Af&&this.warnIfDestroyed();const d=o;this._views.push(d),d.attachToAppRef(this)}detachView(o){Af&&this.warnIfDestroyed();const d=o;y_(this._views,d),d.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const d=this._injector.get(XE,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return Af&&this.warnIfDestroyed(),this._destroyListeners.push(o),()=>y_(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Se(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){Af&&this._destroyed&&console.warn(xe(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return n.\u0275fac=function(o){return new(o||n)(yr(td),yr(Fl),yr(fu))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y_(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function hw(){return!1}function fw(){}let pw=(()=>{class n{}return n.__NG_ELEMENT_ID__=gw,n})();function gw(n){return function mw(n,i,o){if(vs(n)&&!o){const d=Xi(n.index,i);return new Rd(d,d)}return 47&n.type?new Rd(i[Lt],i):null}(vt(),M(),16==(16&n))}class cI{constructor(){}supports(i){return Ft(i)}create(i){return new ww(i)}}const Iw=(n,i)=>i;class ww{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Iw}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,d=this._removalsHead,h=0,v=null;for(;o||d;){const D=!d||o&&o.currentIndex<dI(d,h,v)?o:d,N=dI(D,h,v),U=D.currentIndex;if(D===d)h--,d=d._nextRemoved;else if(o=o._next,null==D.previousIndex)h++;else{v||(v=[]);const X=N-h,fe=U-h;if(X!=fe){for(let ft=0;ft<X;ft++){const jt=ft<v.length?v[ft]:v[ft]=0,mn=jt+ft;fe<=mn&&mn<X&&(v[ft]=jt+1)}v[D.previousIndex]=fe-X}}N!==U&&i(D,N,U)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Ft(i))throw new Se(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,v,D,o=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let N=0;N<this.length;N++)v=i[N],D=this._trackByFn(N,v),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,v,D,N)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,D,N),d=!0),o=o._next}else h=0,function sn(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let d;for(;!(d=o.next()).done;)i(d.value)}}(i,N=>{D=this._trackByFn(h,N),null!==o&&Object.is(o.trackById,D)?(d&&(o=this._verifyReinsertion(o,N,D,h)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,D,h),d=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,d,h){let v;return null===i?v=this._itTail:(v=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,v,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,v,h)):i=this._addAfter(new Cw(o,d),v,h),i}_verifyReinsertion(i,o,d,h){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?i=this._reinsertAfter(v,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,v=i._nextRemoved;return null===h?this._removalsHead=v:h._nextRemoved=v,null===v?this._removalsTail=h:v._prevRemoved=h,this._insertAfter(i,o,d),this._addToMoves(i,d),i}_moveAfter(i,o,d){return this._unlink(i),this._insertAfter(i,o,d),this._addToMoves(i,d),i}_addAfter(i,o,d){return this._insertAfter(i,o,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,d){const h=null===o?this._itHead:o._next;return i._next=h,i._prev=o,null===h?this._itTail=i:h._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new uI),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,d=i._next;return null===o?this._itHead=d:o._next=d,null===d?this._itTail=o:d._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Cw{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===o||o<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const o=i._prevDup,d=i._nextDup;return null===o?this._head=d:o._nextDup=d,null===d?this._tail=o:d._prevDup=o,null===this._head}}class uI{constructor(){this.map=new Map}put(i){const o=i.trackById;let d=this.map.get(o);d||(d=new bw,this.map.set(o,d)),d.add(i)}get(i,o){const h=this.map.get(i);return h?h.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dI(n,i,o){const d=n.previousIndex;if(null===d)return d;let h=0;return o&&d<o.length&&(h=o[d]),d+i+h}class hI{constructor(){}supports(i){return i instanceof Map||Rn(i)}create(){return new Dw}}class Dw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Rn(i)))throw new Se(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,d),this._appendAfter=o,o=o._next;else{const v=this._getOrCreateRecordForKey(h,d);o=this._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let d=o;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const d=i._prev;return o._next=i,o._prev=d,i._prev=o,d&&(d._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,o);const v=h._prev,D=h._next;return v&&(v._next=D),D&&(D._prev=v),h._next=null,h._prev=null,h}const d=new Tw(i);return this._records.set(i,d),d.currentValue=o,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(d=>o(i[d],d))}}class Tw{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fI(){return new Z0([new cI])}let Z0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(null!=d){const h=d.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||fI()),deps:[[n,new $s,new Ii]]}}find(o){const d=this.factories.find(h=>h.supports(o));if(null!=d)return d;throw new Se(901,!1)}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:fI}),n})();function pI(){return new X0([new hI])}let X0=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(d){const h=d.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||pI()),deps:[[n,new $s,new Ii]]}}find(o){const d=this.factories.find(h=>h.supports(o));if(d)return d;throw new Se(901,!1)}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:pI}),n})();function xw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Mw(n,i){const o=wn(n),d=i.elementInjector||du();return new zc(o).create(d,i.projectableNodes,i.hostElement,i.environmentInjector)}},433:(In,Et,j)=>{"use strict";j.d(Et,{qu:()=>sa,NI:()=>Lt,u:()=>lo,sg:()=>Os,u5:()=>W,JU:()=>Je,a5:()=>yi,JJ:()=>Gn,JL:()=>qn,F:()=>et,On:()=>tn,UX:()=>ge,kI:()=>De,_Y:()=>dn});var _=j(4650),y=j(6895),ee=j(8996),le=j(9751),$e=j(4742),Ae=j(8421),ve=j(7669),Ue=j(5403),Ge=j(3268),Ee=j(1810),ye=j(4004);let We=(()=>{class M{constructor(L,ne){this._renderer=L,this._elementRef=ne,this.onChange=vt=>{},this.onTouched=()=>{}}setProperty(L,ne){this._renderer.setProperty(this._elementRef.nativeElement,L,ne)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(_.Qsj),_.Y36(_.SBq))},M.\u0275dir=_.lG2({type:M}),M})(),Oe=(()=>{class M extends We{}return M.\u0275fac=function(){let F;return function(ne){return(F||(F=_.n5z(M)))(ne||M)}}(),M.\u0275dir=_.lG2({type:M,features:[_.qOj]}),M})();const Je=new _.OlP("NgValueAccessor"),xe={provide:Je,useExisting:(0,_.Gpc)(()=>Y),multi:!0},_t=new _.OlP("CompositionEventMode");let Y=(()=>{class M extends We{constructor(L,ne,vt){super(L,ne),this._compositionMode=vt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ue(){const M=(0,y.q)()?(0,y.q)().getUserAgent():"";return/android (\d+)/.test(M.toLowerCase())}())}writeValue(L){this.setProperty("value",null==L?"":L)}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(_t,8))},M.\u0275dir=_.lG2({type:M,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,ne){1&L&&_.NdJ("input",function(Tn){return ne._handleInput(Tn.target.value)})("blur",function(){return ne.onTouched()})("compositionstart",function(){return ne._compositionStart()})("compositionend",function(Tn){return ne._compositionEnd(Tn.target.value)})},features:[_._Bn([xe]),_.qOj]}),M})();const it=!1;function tt(M){return null==M||("string"==typeof M||Array.isArray(M))&&0===M.length}function Pt(M){return null!=M&&"number"==typeof M.length}const Ve=new _.OlP("NgValidators"),ke=new _.OlP("NgAsyncValidators"),Ne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class De{static min(F){return function He(M){return F=>{if(tt(F.value)||tt(M))return null;const L=parseFloat(F.value);return!isNaN(L)&&L<M?{min:{min:M,actual:F.value}}:null}}(F)}static max(F){return function pt(M){return F=>{if(tt(F.value)||tt(M))return null;const L=parseFloat(F.value);return!isNaN(L)&&L>M?{max:{max:M,actual:F.value}}:null}}(F)}static required(F){return function Tt(M){return tt(M.value)?{required:!0}:null}(F)}static requiredTrue(F){return function dt(M){return!0===M.value?null:{required:!0}}(F)}static email(F){return function Mt(M){return tt(M.value)||Ne.test(M.value)?null:{email:!0}}(F)}static minLength(F){return function yt(M){return F=>tt(F.value)||!Pt(F.value)?null:F.value.length<M?{minlength:{requiredLength:M,actualLength:F.value.length}}:null}(F)}static maxLength(F){return function Fe(M){return F=>Pt(F.value)&&F.value.length>M?{maxlength:{requiredLength:M,actualLength:F.value.length}}:null}(F)}static pattern(F){return function je(M){if(!M)return Be;let F,L;return"string"==typeof M?(L="","^"!==M.charAt(0)&&(L+="^"),L+=M,"$"!==M.charAt(M.length-1)&&(L+="$"),F=new RegExp(L)):(L=M.toString(),F=M),ne=>{if(tt(ne.value))return null;const vt=ne.value;return F.test(vt)?null:{pattern:{requiredPattern:L,actualValue:vt}}}}(F)}static nullValidator(F){return null}static compose(F){return Re(F)}static composeAsync(F){return gn(F)}}function Be(M){return null}function ht(M){return null!=M}function Ct(M){const F=(0,_.QGY)(M)?(0,ee.D)(M):M;if(it&&!(0,_.CqO)(F)){let L="Expected async validator to return Promise or Observable.";throw"object"==typeof M&&(L+=" Are you using a synchronous validator where an async validator is expected?"),new _.vHH(-1101,L)}return F}function nn(M){let F={};return M.forEach(L=>{F=null!=L?{...F,...L}:F}),0===Object.keys(F).length?null:F}function zt(M,F){return F.map(L=>L(M))}function kt(M){return M.map(F=>function Dn(M){return!M.validate}(F)?F:L=>F.validate(L))}function Re(M){if(!M)return null;const F=M.filter(ht);return 0==F.length?null:function(L){return nn(zt(L,F))}}function At(M){return null!=M?Re(kt(M)):null}function gn(M){if(!M)return null;const F=M.filter(ht);return 0==F.length?null:function(L){return function de(...M){const F=(0,ve.jO)(M),{args:L,keys:ne}=(0,$e.D)(M),vt=new le.y(Tn=>{const{length:$r}=L;if(!$r)return void Tn.complete();const ii=new Array($r);let Qi=$r,ds=$r;for(let Ao=0;Ao<$r;Ao++){let xi=!1;(0,Ae.Xf)(L[Ao]).subscribe((0,Ue.x)(Tn,Va=>{xi||(xi=!0,ds--),ii[Ao]=Va},()=>Qi--,void 0,()=>{(!Qi||!xi)&&(ds||Tn.next(ne?(0,Ee.n)(ne,ii):ii),Tn.complete())}))}});return F?vt.pipe((0,Ge.Z)(F)):vt}(zt(L,F).map(Ct)).pipe((0,ye.U)(nn))}}function On(M){return null!=M?gn(kt(M)):null}function Yn(M,F){return null===M?[F]:Array.isArray(M)?[...M,F]:[M,F]}function xn(M){return M._rawValidators}function cn(M){return M._rawAsyncValidators}function Cn(M){return M?Array.isArray(M)?M:[M]:[]}function hr(M,F){return Array.isArray(M)?M.includes(F):M===F}function _r(M,F){const L=Cn(F);return Cn(M).forEach(vt=>{hr(L,vt)||L.push(vt)}),L}function tr(M,F){return Cn(F).filter(L=>!hr(M,L))}class bn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(F){this._rawValidators=F||[],this._composedValidatorFn=At(this._rawValidators)}_setAsyncValidators(F){this._rawAsyncValidators=F||[],this._composedAsyncValidatorFn=On(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(F){this._onDestroyCallbacks.push(F)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(F=>F()),this._onDestroyCallbacks=[]}reset(F){this.control&&this.control.reset(F)}hasError(F,L){return!!this.control&&this.control.hasError(F,L)}getError(F,L){return this.control?this.control.getError(F,L):null}}class zn extends bn{get formDirective(){return null}get path(){return null}}class yi extends bn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cr{constructor(F){this._cd=F}get isTouched(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.touched)}get isUntouched(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.untouched)}get isPristine(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.pristine)}get isDirty(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.dirty)}get isValid(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.valid)}get isInvalid(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.invalid)}get isPending(){var F,L;return!(null===(F=this._cd)||void 0===F||null===(L=F.control)||void 0===L||!L.pending)}get isSubmitted(){var F;return!(null===(F=this._cd)||void 0===F||!F.submitted)}}let Gn=(()=>{class M extends Cr{constructor(L){super(L)}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(yi,2))},M.\u0275dir=_.lG2({type:M,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,ne){2&L&&_.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)},features:[_.qOj]}),M})(),qn=(()=>{class M extends Cr{constructor(L){super(L)}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(zn,10))},M.\u0275dir=_.lG2({type:M,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,ne){2&L&&_.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)("ng-submitted",ne.isSubmitted)},features:[_.qOj]}),M})();function Ai(M,F){return M?`with name: '${F}'`:`at index: ${F}`}const rt=!1,Jt="VALID",qt="INVALID",we="PENDING",Ie="DISABLED";function Ye(M){return(ut(M)?M.validators:M)||null}function lt(M,F){return(ut(F)?F.asyncValidators:M)||null}function ut(M){return null!=M&&!Array.isArray(M)&&"object"==typeof M}function Ke(M,F,L){const ne=M.controls;if(!(F?Object.keys(ne):ne).length)throw new _.vHH(1e3,rt?function mr(M){return`\n    There are no form controls registered with this ${M?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(F):"");if(!ne[L])throw new _.vHH(1001,rt?function Kt(M,F){return`Cannot find form control ${Ai(M,F)}`}(F,L):"")}function _e(M,F,L){M._forEachChild((ne,vt)=>{if(void 0===L[vt])throw new _.vHH(1002,rt?function Ze(M,F){return`Must supply a value for form control ${Ai(M,F)}`}(F,vt):"")})}class gt{constructor(F,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(F),this._assignAsyncValidators(L)}get validator(){return this._composedValidatorFn}set validator(F){this._rawValidators=this._composedValidatorFn=F}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(F){this._rawAsyncValidators=this._composedAsyncValidatorFn=F}get parent(){return this._parent}get valid(){return this.status===Jt}get invalid(){return this.status===qt}get pending(){return this.status==we}get disabled(){return this.status===Ie}get enabled(){return this.status!==Ie}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(F){this._assignValidators(F)}setAsyncValidators(F){this._assignAsyncValidators(F)}addValidators(F){this.setValidators(_r(F,this._rawValidators))}addAsyncValidators(F){this.setAsyncValidators(_r(F,this._rawAsyncValidators))}removeValidators(F){this.setValidators(tr(F,this._rawValidators))}removeAsyncValidators(F){this.setAsyncValidators(tr(F,this._rawAsyncValidators))}hasValidator(F){return hr(this._rawValidators,F)}hasAsyncValidator(F){return hr(this._rawAsyncValidators,F)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(F={}){this.touched=!0,this._parent&&!F.onlySelf&&this._parent.markAsTouched(F)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(F=>F.markAllAsTouched())}markAsUntouched(F={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}markAsDirty(F={}){this.pristine=!1,this._parent&&!F.onlySelf&&this._parent.markAsDirty(F)}markAsPristine(F={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}markAsPending(F={}){this.status=we,!1!==F.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!F.onlySelf&&this._parent.markAsPending(F)}disable(F={}){const L=this._parentMarkedDirty(F.onlySelf);this.status=Ie,this.errors=null,this._forEachChild(ne=>{ne.disable({...F,onlySelf:!0})}),this._updateValue(),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...F,skipPristineCheck:L}),this._onDisabledChange.forEach(ne=>ne(!0))}enable(F={}){const L=this._parentMarkedDirty(F.onlySelf);this.status=Jt,this._forEachChild(ne=>{ne.enable({...F,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent}),this._updateAncestors({...F,skipPristineCheck:L}),this._onDisabledChange.forEach(ne=>ne(!1))}_updateAncestors(F){this._parent&&!F.onlySelf&&(this._parent.updateValueAndValidity(F),F.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(F){this._parent=F}getRawValue(){return this.value}updateValueAndValidity(F={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jt||this.status===we)&&this._runAsyncValidator(F.emitEvent)),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!F.onlySelf&&this._parent.updateValueAndValidity(F)}_updateTreeValidity(F={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(F)),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ie:Jt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(F){if(this.asyncValidator){this.status=we,this._hasOwnPendingAsyncValidator=!0;const L=Ct(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(ne=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ne,{emitEvent:F})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(F,L={}){this.errors=F,this._updateControlsErrors(!1!==L.emitEvent)}get(F){let L=F;return null==L||(Array.isArray(L)||(L=L.split(".")),0===L.length)?null:L.reduce((ne,vt)=>ne&&ne._find(vt),this)}getError(F,L){const ne=L?this.get(L):this;return ne&&ne.errors?ne.errors[F]:null}hasError(F,L){return!!this.getError(F,L)}get root(){let F=this;for(;F._parent;)F=F._parent;return F}_updateControlsErrors(F){this.status=this._calculateStatus(),F&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(F)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Ie:this.errors?qt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(we)?we:this._anyControlsHaveStatus(qt)?qt:Jt}_anyControlsHaveStatus(F){return this._anyControls(L=>L.status===F)}_anyControlsDirty(){return this._anyControls(F=>F.dirty)}_anyControlsTouched(){return this._anyControls(F=>F.touched)}_updatePristine(F={}){this.pristine=!this._anyControlsDirty(),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}_updateTouched(F={}){this.touched=this._anyControlsTouched(),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}_registerOnCollectionChange(F){this._onCollectionChange=F}_setUpdateStrategy(F){ut(F)&&null!=F.updateOn&&(this._updateOn=F.updateOn)}_parentMarkedDirty(F){return!F&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(F){return null}_assignValidators(F){this._rawValidators=Array.isArray(F)?F.slice():F,this._composedValidatorFn=function Ot(M){return Array.isArray(M)?At(M):M||null}(this._rawValidators)}_assignAsyncValidators(F){this._rawAsyncValidators=Array.isArray(F)?F.slice():F,this._composedAsyncValidatorFn=function un(M){return Array.isArray(M)?On(M):M||null}(this._rawAsyncValidators)}}class Nt extends gt{constructor(F,L,ne){super(Ye(L),lt(ne,L)),this.controls=F,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(F,L){return this.controls[F]?this.controls[F]:(this.controls[F]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(F,L,ne={}){this.registerControl(F,L),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}removeControl(F,L={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(F,L,ne={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],L&&this.registerControl(F,L),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}contains(F){return this.controls.hasOwnProperty(F)&&this.controls[F].enabled}setValue(F,L={}){_e(this,!0,F),Object.keys(F).forEach(ne=>{Ke(this,!0,ne),this.controls[ne].setValue(F[ne],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(F,L={}){null!=F&&(Object.keys(F).forEach(ne=>{const vt=this.controls[ne];vt&&vt.patchValue(F[ne],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(F={},L={}){this._forEachChild((ne,vt)=>{ne.reset(F[vt],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(F,L,ne)=>(F[ne]=L.getRawValue(),F))}_syncPendingControls(){let F=this._reduceChildren(!1,(L,ne)=>!!ne._syncPendingControls()||L);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){Object.keys(this.controls).forEach(L=>{const ne=this.controls[L];ne&&F(ne,L)})}_setUpControls(){this._forEachChild(F=>{F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(F){for(const[L,ne]of Object.entries(this.controls))if(this.contains(L)&&F(ne))return!0;return!1}_reduceValue(){return this._reduceChildren({},(L,ne,vt)=>((ne.enabled||this.disabled)&&(L[vt]=ne.value),L))}_reduceChildren(F,L){let ne=F;return this._forEachChild((vt,Tn)=>{ne=L(ne,vt,Tn)}),ne}_allControlsDisabled(){for(const F of Object.keys(this.controls))if(this.controls[F].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(F){return this.controls.hasOwnProperty(F)?this.controls[F]:null}}class St extends Nt{}const Xt=new _.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Xe}),Xe="always";function ze(M,F){return[...F.path,M]}function bt(M,F,L=Xe){var ne,vt;wn(M,F),F.valueAccessor.writeValue(M.value),(M.disabled||"always"===L)&&(null===(ne=(vt=F.valueAccessor).setDisabledState)||void 0===ne||ne.call(vt,M.disabled)),function Jn(M,F){F.valueAccessor.registerOnChange(L=>{M._pendingValue=L,M._pendingChange=!0,M._pendingDirty=!0,"change"===M.updateOn&&Xn(M,F)})}(M,F),function ys(M,F){const L=(ne,vt)=>{F.valueAccessor.writeValue(ne),vt&&F.viewToModelUpdate(ne)};M.registerOnChange(L),F._registerOnDestroy(()=>{M._unregisterOnChange(L)})}(M,F),function Wn(M,F){F.valueAccessor.registerOnTouched(()=>{M._pendingTouched=!0,"blur"===M.updateOn&&M._pendingChange&&Xn(M,F),"submit"!==M.updateOn&&M.markAsTouched()})}(M,F),function kn(M,F){if(F.valueAccessor.setDisabledState){const L=ne=>{F.valueAccessor.setDisabledState(ne)};M.registerOnDisabledChange(L),F._registerOnDestroy(()=>{M._unregisterOnDisabledChange(L)})}}(M,F)}function Gt(M,F,L=!0){const ne=()=>{};F.valueAccessor&&(F.valueAccessor.registerOnChange(ne),F.valueAccessor.registerOnTouched(ne)),Qn(M,F),M&&(F._invokeOnDestroyCallbacks(),M._registerOnCollectionChange(()=>{}))}function pn(M,F){M.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(F)})}function wn(M,F){const L=xn(M);null!==F.validator?M.setValidators(Yn(L,F.validator)):"function"==typeof L&&M.setValidators([L]);const ne=cn(M);null!==F.asyncValidator?M.setAsyncValidators(Yn(ne,F.asyncValidator)):"function"==typeof ne&&M.setAsyncValidators([ne]);const vt=()=>M.updateValueAndValidity();pn(F._rawValidators,vt),pn(F._rawAsyncValidators,vt)}function Qn(M,F){let L=!1;if(null!==M){if(null!==F.validator){const vt=xn(M);if(Array.isArray(vt)&&vt.length>0){const Tn=vt.filter($r=>$r!==F.validator);Tn.length!==vt.length&&(L=!0,M.setValidators(Tn))}}if(null!==F.asyncValidator){const vt=cn(M);if(Array.isArray(vt)&&vt.length>0){const Tn=vt.filter($r=>$r!==F.asyncValidator);Tn.length!==vt.length&&(L=!0,M.setAsyncValidators(Tn))}}}const ne=()=>{};return pn(F._rawValidators,ne),pn(F._rawAsyncValidators,ne),L}function Xn(M,F){M._pendingDirty&&M.markAsDirty(),M.setValue(M._pendingValue,{emitModelToViewChange:!1}),F.viewToModelUpdate(M._pendingValue),M._pendingChange=!1}function vi(M,F){wn(M,F)}function kr(M,F){if(!M.hasOwnProperty("model"))return!1;const L=M.model;return!!L.isFirstChange()||!Object.is(F,L.currentValue)}function Li(M,F){M._syncPendingControls(),F.forEach(L=>{const ne=L.control;"submit"===ne.updateOn&&ne._pendingChange&&(L.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1)})}function Ur(M,F){if(!F)return null;let L,ne,vt;return Array.isArray(F),F.forEach(Tn=>{Tn.constructor===Y?L=Tn:function Ci(M){return Object.getPrototypeOf(M.constructor)===Oe}(Tn)?ne=Tn:vt=Tn}),vt||ne||L||null}const qe={provide:zn,useExisting:(0,_.Gpc)(()=>et)},me=(()=>Promise.resolve())();let et=(()=>{class M extends zn{constructor(L,ne,vt){super(),this.callSetDisabledState=vt,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _.vpe,this.form=new Nt({},At(L),On(ne))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){me.then(()=>{const ne=this._findContainer(L.path);L.control=ne.registerControl(L.name,L.control),bt(L.control,L,this.callSetDisabledState),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){me.then(()=>{const ne=this._findContainer(L.path);ne&&ne.removeControl(L.name),this._directives.delete(L)})}addFormGroup(L){me.then(()=>{const ne=this._findContainer(L.path),vt=new Nt({});vi(vt,L),ne.registerControl(L.name,vt),vt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){me.then(()=>{const ne=this._findContainer(L.path);ne&&ne.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,ne){me.then(()=>{this.form.get(L.path).setValue(ne)})}setValue(L){this.control.setValue(L)}onSubmit(L){var ne;return this.submitted=!0,Li(this.form,this._directives),this.ngSubmit.emit(L),"dialog"===(null==L||null===(ne=L.target)||void 0===ne?void 0:ne.method)}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(Ve,10),_.Y36(ke,10),_.Y36(Xt,8))},M.\u0275dir=_.lG2({type:M,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(L,ne){1&L&&_.NdJ("submit",function(Tn){return ne.onSubmit(Tn)})("reset",function(){return ne.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([qe]),_.qOj]}),M})();function Qe(M,F){const L=M.indexOf(F);L>-1&&M.splice(L,1)}function Vt(M){return"object"==typeof M&&null!==M&&2===Object.keys(M).length&&"value"in M&&"disabled"in M}const Lt=class extends gt{constructor(F=null,L,ne){super(Ye(L),lt(ne,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(F),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ut(L)&&(L.nonNullable||L.initialValueIsDefault)&&(this.defaultValue=Vt(F)?F.value:F)}setValue(F,L={}){this.value=this._pendingValue=F,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(ne=>ne(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(F,L={}){this.setValue(F,L)}reset(F=this.defaultValue,L={}){this._applyFormState(F),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(F){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(F){this._onChange.push(F)}_unregisterOnChange(F){Qe(this._onChange,F)}registerOnDisabledChange(F){this._onDisabledChange.push(F)}_unregisterOnDisabledChange(F){Qe(this._onDisabledChange,F)}_forEachChild(F){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(F){Vt(F)?(this.value=this._pendingValue=F.value,F.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=F}},ot={provide:yi,useExisting:(0,_.Gpc)(()=>tn)},xt=(()=>Promise.resolve())();let tn=(()=>{class M extends yi{constructor(L,ne,vt,Tn,$r,ii){super(),this._changeDetectorRef=$r,this.callSetDisabledState=ii,this.control=new Lt,this._registered=!1,this.update=new _.vpe,this._parent=L,this._setValidators(ne),this._setAsyncValidators(vt),this.valueAccessor=Ur(0,Tn)}ngOnChanges(L){if(this._checkForErrors(),!this._registered||"name"in L){if(this._registered&&(this._checkName(),this.formDirective)){const ne=L.name.previousValue;this.formDirective.removeControl({name:ne,path:this._getPath(ne)})}this._setUpControl()}"isDisabled"in L&&this._updateDisabled(L),kr(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){xt.then(()=>{var ne;this.control.setValue(L,{emitViewToModelChange:!1}),null===(ne=this._changeDetectorRef)||void 0===ne||ne.markForCheck()})}_updateDisabled(L){const ne=L.isDisabled.currentValue,vt=0!==ne&&(0,_.D6c)(ne);xt.then(()=>{var Tn;vt&&!this.control.disabled?this.control.disable():!vt&&this.control.disabled&&this.control.enable(),null===(Tn=this._changeDetectorRef)||void 0===Tn||Tn.markForCheck()})}_getPath(L){return this._parent?ze(L,this._parent):[L]}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(zn,9),_.Y36(Ve,10),_.Y36(ke,10),_.Y36(Je,10),_.Y36(_.sBO,8),_.Y36(Xt,8))},M.\u0275dir=_.lG2({type:M,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([ot]),_.qOj,_.TTD]}),M})(),dn=(()=>{class M{}return M.\u0275fac=function(L){return new(L||M)},M.\u0275dir=_.lG2({type:M,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),M})(),vs=(()=>{class M{}return M.\u0275fac=function(L){return new(L||M)},M.\u0275mod=_.oAB({type:M}),M.\u0275inj=_.cJS({}),M})();const jo=new _.OlP("NgModelWithFormControlWarning"),oo={provide:zn,useExisting:(0,_.Gpc)(()=>Os)};let Os=(()=>{class M extends zn{constructor(L,ne,vt){super(),this.callSetDisabledState=vt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(L),this._setAsyncValidators(ne)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const ne=this.form.get(L.path);return bt(ne,L,this.callSetDisabledState),ne.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),ne}getControl(L){return this.form.get(L.path)}removeControl(L){Gt(L.control||null,L,!1),function se(M,F){const L=M.indexOf(F);L>-1&&M.splice(L,1)}(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,ne){this.form.get(L.path).setValue(ne)}onSubmit(L){var ne;return this.submitted=!0,Li(this.form,this.directives),this.ngSubmit.emit(L),"dialog"===(null==L||null===(ne=L.target)||void 0===ne?void 0:ne.method)}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const ne=L.control,vt=this.form.get(L.path);ne!==vt&&(Gt(ne||null,L),(M=>M instanceof Lt)(vt)&&(bt(vt,L,this.callSetDisabledState),L.control=vt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const ne=this.form.get(L.path);vi(ne,L),ne.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const ne=this.form.get(L.path);ne&&function Vi(M,F){return Qn(M,F)}(ne,L)&&ne.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wn(this.form,this),this._oldForm&&Qn(this._oldForm,this)}_checkFormPresent(){}}return M.\u0275fac=function(L){return new(L||M)(_.Y36(Ve,10),_.Y36(ke,10),_.Y36(Xt,8))},M.\u0275dir=_.lG2({type:M,selectors:[["","formGroup",""]],hostBindings:function(L,ne){1&L&&_.NdJ("submit",function(Tn){return ne.onSubmit(Tn)})("reset",function(){return ne.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([oo]),_.qOj,_.TTD]}),M})();const Qa={provide:yi,useExisting:(0,_.Gpc)(()=>lo)};let lo=(()=>{class M extends yi{set isDisabled(L){}constructor(L,ne,vt,Tn,$r){super(),this._ngModelWarningConfig=$r,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(ne),this._setAsyncValidators(vt),this.valueAccessor=Ur(0,Tn)}ngOnChanges(L){this._added||this._setUpControl(),kr(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return ze(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return M._ngModelWarningSentOnce=!1,M.\u0275fac=function(L){return new(L||M)(_.Y36(zn,13),_.Y36(Ve,10),_.Y36(ke,10),_.Y36(Je,10),_.Y36(jo,8))},M.\u0275dir=_.lG2({type:M,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([Qa]),_.qOj,_.TTD]}),M})(),To=(()=>{class M{}return M.\u0275fac=function(L){return new(L||M)},M.\u0275mod=_.oAB({type:M}),M.\u0275inj=_.cJS({imports:[vs]}),M})();class ia extends gt{constructor(F,L,ne){super(Ye(L),lt(ne,L)),this.controls=F,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(F){return this.controls[this._adjustIndex(F)]}push(F,L={}){this.controls.push(F),this._registerControl(F),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(F,L,ne={}){this.controls.splice(F,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:ne.emitEvent})}removeAt(F,L={}){let ne=this._adjustIndex(F);ne<0&&(ne=0),this.controls[ne]&&this.controls[ne]._registerOnCollectionChange(()=>{}),this.controls.splice(ne,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(F,L,ne={}){let vt=this._adjustIndex(F);vt<0&&(vt=0),this.controls[vt]&&this.controls[vt]._registerOnCollectionChange(()=>{}),this.controls.splice(vt,1),L&&(this.controls.splice(vt,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(F,L={}){_e(this,!1,F),F.forEach((ne,vt)=>{Ke(this,!1,vt),this.at(vt).setValue(ne,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(F,L={}){null!=F&&(F.forEach((ne,vt)=>{this.at(vt)&&this.at(vt).patchValue(ne,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(F=[],L={}){this._forEachChild((ne,vt)=>{ne.reset(F[vt],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(F=>F.getRawValue())}clear(F={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:F.emitEvent}))}_adjustIndex(F){return F<0?F+this.length:F}_syncPendingControls(){let F=this.controls.reduce((L,ne)=>!!ne._syncPendingControls()||L,!1);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){this.controls.forEach((L,ne)=>{F(L,ne)})}_updateValue(){this.value=this.controls.filter(F=>F.enabled||this.disabled).map(F=>F.value)}_anyControls(F){return this.controls.some(L=>L.enabled&&F(L))}_setUpControls(){this._forEachChild(F=>this._registerControl(F))}_allControlsDisabled(){for(const F of this.controls)if(F.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(F){F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)}_find(F){var L;return null!==(L=this.at(F))&&void 0!==L?L:null}}function pa(M){return!!M&&(void 0!==M.asyncValidators||void 0!==M.validators||void 0!==M.updateOn)}let sa=(()=>{class M{constructor(){this.useNonNullable=!1}get nonNullable(){const L=new M;return L.useNonNullable=!0,L}group(L,ne=null){const vt=this._reduceControls(L);let Tn={};return pa(ne)?Tn=ne:null!==ne&&(Tn.validators=ne.validator,Tn.asyncValidators=ne.asyncValidator),new Nt(vt,Tn)}record(L,ne=null){const vt=this._reduceControls(L);return new St(vt,ne)}control(L,ne,vt){let Tn={};return this.useNonNullable?(pa(ne)?Tn=ne:(Tn.validators=ne,Tn.asyncValidators=vt),new Lt(L,{...Tn,nonNullable:!0})):new Lt(L,ne,vt)}array(L,ne,vt){const Tn=L.map($r=>this._createControl($r));return new ia(Tn,ne,vt)}_reduceControls(L){const ne={};return Object.keys(L).forEach(vt=>{ne[vt]=this._createControl(L[vt])}),ne}_createControl(L){return L instanceof Lt||L instanceof gt?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}}return M.\u0275fac=function(L){return new(L||M)},M.\u0275prov=_.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})(),W=(()=>{class M{static withConfig(L){var ne;return{ngModule:M,providers:[{provide:Xt,useValue:null!==(ne=L.callSetDisabledState)&&void 0!==ne?ne:Xe}]}}}return M.\u0275fac=function(L){return new(L||M)},M.\u0275mod=_.oAB({type:M}),M.\u0275inj=_.cJS({imports:[To]}),M})(),ge=(()=>{class M{static withConfig(L){var ne,vt;return{ngModule:M,providers:[{provide:jo,useValue:null!==(ne=L.warnOnNgModelWithFormControl)&&void 0!==ne?ne:"always"},{provide:Xt,useValue:null!==(vt=L.callSetDisabledState)&&void 0!==vt?vt:Xe}]}}}return M.\u0275fac=function(L){return new(L||M)},M.\u0275mod=_.oAB({type:M}),M.\u0275inj=_.cJS({imports:[To]}),M})()},1481:(In,Et,j)=>{"use strict";j.d(Et,{Cg:()=>At,Dx:()=>qn});var _=j(6895),y=j(4650);class ee extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class le extends ee{static makeCurrent(){(0,_.HT)(new le)}onAndCancel(Ke,_e,gt){return Ke.addEventListener(_e,gt,!1),()=>{Ke.removeEventListener(_e,gt,!1)}}dispatchEvent(Ke,_e){Ke.dispatchEvent(_e)}remove(Ke){Ke.parentNode&&Ke.parentNode.removeChild(Ke)}createElement(Ke,_e){return(_e=_e||this.getDefaultDocument()).createElement(Ke)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ke){return Ke.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ke){return Ke instanceof DocumentFragment}getGlobalEventTarget(Ke,_e){return"window"===_e?window:"document"===_e?Ke:"body"===_e?Ke.body:null}getBaseHref(Ke){const _e=function Ae(){return $e=$e||document.querySelector("base"),$e?$e.getAttribute("href"):null}();return null==_e?null:function Ue(ut){ve=ve||document.createElement("a"),ve.setAttribute("href",ut);const Ke=ve.pathname;return"/"===Ke.charAt(0)?Ke:`/${Ke}`}(_e)}resetBaseElement(){$e=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ke){return(0,_.Mx)(document.cookie,Ke)}}let ve,$e=null,We=(()=>{class ut{build(){return new XMLHttpRequest}}return ut.\u0275fac=function(_e){return new(_e||ut)},ut.\u0275prov=y.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const Oe=new y.OlP("EventManagerPlugins");let Je=(()=>{class ut{constructor(_e,gt){this._zone=gt,this._eventNameToPlugin=new Map,_e.forEach(Nt=>{Nt.manager=this}),this._plugins=_e.slice().reverse()}addEventListener(_e,gt,Nt){return this._findPluginFor(gt).addEventListener(_e,gt,Nt)}addGlobalEventListener(_e,gt,Nt){return this._findPluginFor(gt).addGlobalEventListener(_e,gt,Nt)}getZone(){return this._zone}_findPluginFor(_e){const gt=this._eventNameToPlugin.get(_e);if(gt)return gt;const Nt=this._plugins;for(let he=0;he<Nt.length;he++){const Ce=Nt[he];if(Ce.supports(_e))return this._eventNameToPlugin.set(_e,Ce),Ce}throw new Error(`No event manager plugin found for event ${_e}`)}}return ut.\u0275fac=function(_e){return new(_e||ut)(y.LFG(Oe),y.LFG(y.R0b))},ut.\u0275prov=y.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class wt{constructor(Ke){this._doc=Ke}addGlobalEventListener(Ke,_e,gt){const Nt=(0,_.q)().getGlobalEventTarget(this._doc,Ke);if(!Nt)throw new Error(`Unsupported event target ${Nt} for event ${_e}`);return this.addEventListener(Nt,_e,gt)}}let Se=(()=>{class ut{constructor(){this.usageCount=new Map}addStyles(_e){for(const gt of _e)1===this.changeUsageCount(gt,1)&&this.onStyleAdded(gt)}removeStyles(_e){for(const gt of _e)0===this.changeUsageCount(gt,-1)&&this.onStyleRemoved(gt)}onStyleRemoved(_e){}onStyleAdded(_e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(_e,gt){var Nt;const he=this.usageCount;let Ce=null!==(Nt=he.get(_e))&&void 0!==Nt?Nt:0;return Ce+=gt,Ce>0?he.set(_e,Ce):he.delete(_e),Ce}ngOnDestroy(){for(const _e of this.getAllStyles())this.onStyleRemoved(_e);this.usageCount.clear()}}return ut.\u0275fac=function(_e){return new(_e||ut)},ut.\u0275prov=y.Yz7({token:ut,factory:ut.\u0275fac}),ut})(),xe=(()=>{class ut extends Se{constructor(_e){super(),this.doc=_e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(_e){for(const gt of this.hostNodes)this.addStyleToHost(gt,_e)}onStyleRemoved(_e){const gt=this.styleRef,Nt=gt.get(_e);null==Nt||Nt.forEach(he=>he.remove()),gt.delete(_e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(_e){this.hostNodes.add(_e);for(const gt of this.getAllStyles())this.addStyleToHost(_e,gt)}removeHost(_e){this.hostNodes.delete(_e)}addStyleToHost(_e,gt){const Nt=this.doc.createElement("style");Nt.textContent=gt,_e.appendChild(Nt);const he=this.styleRef.get(gt);he?he.push(Nt):this.styleRef.set(gt,[Nt])}resetHostNodes(){const _e=this.hostNodes;_e.clear(),_e.add(this.doc.head)}}return ut.\u0275fac=function(_e){return new(_e||ut)(y.LFG(_.K0))},ut.\u0275prov=y.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const ue={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_t=/%COMP%/g,ke=new y.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function He(ut,Ke){return Ke.flat(100).map(_e=>_e.replace(_t,ut))}function pt(ut){return Ke=>{if("__ngUnwrap__"===Ke)return ut;!1===ut(Ke)&&(Ke.preventDefault(),Ke.returnValue=!1)}}let Tt=(()=>{class ut{constructor(_e,gt,Nt,he){this.eventManager=_e,this.sharedStylesHost=gt,this.appId=Nt,this.removeStylesOnCompDestory=he,this.rendererByCompId=new Map,this.defaultRenderer=new dt(_e)}createRenderer(_e,gt){if(!_e||!gt)return this.defaultRenderer;const Nt=this.getOrCreateRenderer(_e,gt);return Nt instanceof ht?Nt.applyToHost(_e):Nt instanceof Be&&Nt.applyStyles(),Nt}getOrCreateRenderer(_e,gt){const Nt=this.rendererByCompId;let he=Nt.get(gt.id);if(!he){const Ce=this.eventManager,St=this.sharedStylesHost,It=this.removeStylesOnCompDestory;switch(gt.encapsulation){case y.ifc.Emulated:he=new ht(Ce,St,gt,this.appId,It);break;case y.ifc.ShadowDom:return new je(Ce,St,_e,gt);default:he=new Be(Ce,St,gt,It)}he.onDestroy=()=>Nt.delete(gt.id),Nt.set(gt.id,he)}return he}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return ut.\u0275fac=function(_e){return new(_e||ut)(y.LFG(Je),y.LFG(xe),y.LFG(y.AFp),y.LFG(ke))},ut.\u0275prov=y.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class dt{constructor(Ke){this.eventManager=Ke,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ke,_e){return _e?document.createElementNS(ue[_e]||_e,Ke):document.createElement(Ke)}createComment(Ke){return document.createComment(Ke)}createText(Ke){return document.createTextNode(Ke)}appendChild(Ke,_e){(Fe(Ke)?Ke.content:Ke).appendChild(_e)}insertBefore(Ke,_e,gt){Ke&&(Fe(Ke)?Ke.content:Ke).insertBefore(_e,gt)}removeChild(Ke,_e){Ke&&Ke.removeChild(_e)}selectRootElement(Ke,_e){let gt="string"==typeof Ke?document.querySelector(Ke):Ke;if(!gt)throw new Error(`The selector "${Ke}" did not match any elements`);return _e||(gt.textContent=""),gt}parentNode(Ke){return Ke.parentNode}nextSibling(Ke){return Ke.nextSibling}setAttribute(Ke,_e,gt,Nt){if(Nt){_e=Nt+":"+_e;const he=ue[Nt];he?Ke.setAttributeNS(he,_e,gt):Ke.setAttribute(_e,gt)}else Ke.setAttribute(_e,gt)}removeAttribute(Ke,_e,gt){if(gt){const Nt=ue[gt];Nt?Ke.removeAttributeNS(Nt,_e):Ke.removeAttribute(`${gt}:${_e}`)}else Ke.removeAttribute(_e)}addClass(Ke,_e){Ke.classList.add(_e)}removeClass(Ke,_e){Ke.classList.remove(_e)}setStyle(Ke,_e,gt,Nt){Nt&(y.JOm.DashCase|y.JOm.Important)?Ke.style.setProperty(_e,gt,Nt&y.JOm.Important?"important":""):Ke.style[_e]=gt}removeStyle(Ke,_e,gt){gt&y.JOm.DashCase?Ke.style.removeProperty(_e):Ke.style[_e]=""}setProperty(Ke,_e,gt){Ke[_e]=gt}setValue(Ke,_e){Ke.nodeValue=_e}listen(Ke,_e,gt){return"string"==typeof Ke?this.eventManager.addGlobalEventListener(Ke,_e,pt(gt)):this.eventManager.addEventListener(Ke,_e,pt(gt))}}function Fe(ut){return"TEMPLATE"===ut.tagName&&void 0!==ut.content}class je extends dt{constructor(Ke,_e,gt,Nt){super(Ke),this.sharedStylesHost=_e,this.hostEl=gt,this.shadowRoot=gt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const he=He(Nt.id,Nt.styles);for(const Ce of he){const St=document.createElement("style");St.textContent=Ce,this.shadowRoot.appendChild(St)}}nodeOrShadowRoot(Ke){return Ke===this.hostEl?this.shadowRoot:Ke}appendChild(Ke,_e){return super.appendChild(this.nodeOrShadowRoot(Ke),_e)}insertBefore(Ke,_e,gt){return super.insertBefore(this.nodeOrShadowRoot(Ke),_e,gt)}removeChild(Ke,_e){return super.removeChild(this.nodeOrShadowRoot(Ke),_e)}parentNode(Ke){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ke)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Be extends dt{constructor(Ke,_e,gt,Nt,he=gt.id){super(Ke),this.sharedStylesHost=_e,this.removeStylesOnCompDestory=Nt,this.rendererUsageCount=0,this.styles=He(he,gt.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Ke;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Ke=this.onDestroy)||void 0===Ke||Ke.call(this))}}class ht extends Be{constructor(Ke,_e,gt,Nt,he){const Ce=Nt+"-"+gt.id;super(Ke,_e,gt,he,Ce),this.contentAttr=function Ne(ut){return"_ngcontent-%COMP%".replace(_t,ut)}(Ce),this.hostAttr=function De(ut){return"_nghost-%COMP%".replace(_t,ut)}(Ce)}applyToHost(Ke){this.applyStyles(),this.setAttribute(Ke,this.hostAttr,"")}createElement(Ke,_e){const gt=super.createElement(Ke,_e);return super.setAttribute(gt,this.contentAttr,""),gt}}let Ct=(()=>{class ut extends wt{constructor(_e){super(_e)}supports(_e){return!0}addEventListener(_e,gt,Nt){return _e.addEventListener(gt,Nt,!1),()=>this.removeEventListener(_e,gt,Nt)}removeEventListener(_e,gt,Nt){return _e.removeEventListener(gt,Nt)}}return ut.\u0275fac=function(_e){return new(_e||ut)(y.LFG(_.K0))},ut.\u0275prov=y.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const nn=["alt","control","meta","shift"],zt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dn={alt:ut=>ut.altKey,control:ut=>ut.ctrlKey,meta:ut=>ut.metaKey,shift:ut=>ut.shiftKey};let kt=(()=>{class ut extends wt{constructor(_e){super(_e)}supports(_e){return null!=ut.parseEventName(_e)}addEventListener(_e,gt,Nt){const he=ut.parseEventName(gt),Ce=ut.eventCallback(he.fullKey,Nt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(_e,he.domEventName,Ce))}static parseEventName(_e){const gt=_e.toLowerCase().split("."),Nt=gt.shift();if(0===gt.length||"keydown"!==Nt&&"keyup"!==Nt)return null;const he=ut._normalizeKey(gt.pop());let Ce="",St=gt.indexOf("code");if(St>-1&&(gt.splice(St,1),Ce="code."),nn.forEach(Xt=>{const Xe=gt.indexOf(Xt);Xe>-1&&(gt.splice(Xe,1),Ce+=Xt+".")}),Ce+=he,0!=gt.length||0===he.length)return null;const It={};return It.domEventName=Nt,It.fullKey=Ce,It}static matchEventFullKeyCode(_e,gt){let Nt=zt[_e.key]||_e.key,he="";return gt.indexOf("code.")>-1&&(Nt=_e.code,he="code."),!(null==Nt||!Nt)&&(Nt=Nt.toLowerCase()," "===Nt?Nt="space":"."===Nt&&(Nt="dot"),nn.forEach(Ce=>{Ce!==Nt&&(0,Dn[Ce])(_e)&&(he+=Ce+".")}),he+=Nt,he===gt)}static eventCallback(_e,gt,Nt){return he=>{ut.matchEventFullKeyCode(he,_e)&&Nt.runGuarded(()=>gt(he))}}static _normalizeKey(_e){return"esc"===_e?"escape":_e}}return ut.\u0275fac=function(_e){return new(_e||ut)(y.LFG(_.K0))},ut.\u0275prov=y.Yz7({token:ut,factory:ut.\u0275fac}),ut})();function At(ut,Ke){return(0,y.iPO)({rootComponent:ut,...On(Ke)})}function On(ut){var Ke;return{appProviders:[...zn,...null!==(Ke=null==ut?void 0:ut.providers)&&void 0!==Ke?Ke:[]],platformProviders:hr}}const hr=[{provide:y.Lbi,useValue:_.bD},{provide:y.g9A,useValue:function xn(){le.makeCurrent()},multi:!0},{provide:_.K0,useFactory:function Cn(){return(0,y.RDi)(document),document},deps:[]}],zn=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function cn(){return new y.qLn},deps:[]},{provide:Oe,useClass:Ct,multi:!0,deps:[_.K0,y.R0b,y.Lbi]},{provide:Oe,useClass:kt,multi:!0,deps:[_.K0]},{provide:Tt,useClass:Tt,deps:[Je,xe,y.AFp,ke]},{provide:y.FYo,useExisting:Tt},{provide:Se,useExisting:xe},{provide:xe,useClass:xe,deps:[_.K0]},{provide:Je,useClass:Je,deps:[Oe,y.R0b]},{provide:_.JF,useClass:We,deps:[]},[]];let qn=(()=>{class ut{constructor(_e){this._doc=_e}getTitle(){return this._doc.title}setTitle(_e){this._doc.title=_e||""}}return ut.\u0275fac=function(_e){return new(_e||ut)(y.LFG(_.K0))},ut.\u0275prov=y.Yz7({token:ut,factory:function(_e){let gt=null;return gt=_e?new _e:function Gn(){return new qn((0,y.LFG)(_.K0))}(),gt},providedIn:"root"}),ut})();typeof window<"u"&&window},1194:(In,Et,j)=>{"use strict";j.d(Et,{gz:()=>As,y6:()=>ta,OD:()=>Lt,eC:()=>cn,wN:()=>Js,F0:()=>hn,rH:()=>il,Bz:()=>Yr,Hx:()=>Ze,bU:()=>aa});var _=j(4650),y=j(8996),ee=j(9646),le=j(1135),$e=j(6805),Ae=j(9751),ve=j(4742),Ue=j(4671),Ge=j(3268),Ee=j(7669),de=j(1810),ye=j(5403),We=j(9672);function Oe(...S){const x=(0,Ee.yG)(S),w=(0,Ee.jO)(S),{args:O,keys:z}=(0,ve.D)(S);if(0===O.length)return(0,y.D)([],x);const re=new Ae.y(function Je(S,x,w=Ue.y){return O=>{wt(x,()=>{const{length:z}=S,re=new Array(z);let ae=z,at=z;for(let Ut=0;Ut<z;Ut++)wt(x,()=>{const En=(0,y.D)(S[Ut],x);let Hn=!1;En.subscribe((0,ye.x)(O,$n=>{re[Ut]=$n,Hn||(Hn=!0,at--),at||O.next(w(re.slice()))},()=>{--ae||O.complete()}))},O)},O)}}(O,x,z?ae=>(0,de.n)(z,ae):Ue.y));return w?re.pipe((0,Ge.Z)(w)):re}function wt(S,x,w){S?(0,We.f)(w,S,x):x()}var Se=j(7272),xe=j(8421);function ue(S){return new Ae.y(x=>{(0,xe.Xf)(S()).subscribe(x)})}var _t=j(9635),Y=j(576);function it(S,x){const w=(0,Y.m)(S)?S:()=>S,O=z=>z.error(w());return new Ae.y(x?z=>x.schedule(O,0,z):O)}var tt=j(515),Pt=j(727),Ve=j(4482);function ke(){return(0,Ve.e)((S,x)=>{let w=null;S._refCount++;const O=(0,ye.x)(x,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(w=null);const z=S._connection,re=w;w=null,z&&(!re||z===re)&&z.unsubscribe(),x.unsubscribe()});S.subscribe(O),O.closed||(w=S.connect())})}class Ne extends Ae.y{constructor(x,w){super(),this.source=x,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,Ve.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,null==x||x.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new Pt.w0;const w=this.getSubject();x.add(this.source.subscribe((0,ye.x)(w,void 0,()=>{this._teardown(),w.complete()},O=>{this._teardown(),w.error(O)},()=>this._teardown()))),x.closed&&(this._connection=null,x=Pt.w0.EMPTY)}return x}refCount(){return ke()(this)}}var De=j(7579),He=j(6895),pt=j(4004),Tt=j(3900),dt=j(5698),Mt=j(8675),yt=j(9300),Fe=j(5577),je=j(590),Be=j(4351),ht=j(8505);function Ct(S){return(0,Ve.e)((x,w)=>{let re,O=null,z=!1;O=x.subscribe((0,ye.x)(w,void 0,void 0,ae=>{re=(0,xe.Xf)(S(ae,Ct(S)(x))),O?(O.unsubscribe(),O=null,re.subscribe(w)):z=!0})),z&&(O.unsubscribe(),O=null,re.subscribe(w))})}var nn=j(5026);function zt(S){return S<=0?()=>tt.E:(0,Ve.e)((x,w)=>{let O=[];x.subscribe((0,ye.x)(w,z=>{O.push(z),S<O.length&&O.shift()},()=>{for(const z of O)w.next(z);w.complete()},void 0,()=>{O=null}))})}var Dn=j(8068),kt=j(6590);function Re(S,x){const w=arguments.length>=2;return O=>O.pipe(S?(0,yt.h)((z,re)=>S(z,re,O)):Ue.y,zt(1),w?(0,kt.d)(x):(0,Dn.T)(()=>new $e.K))}function On(S){return(0,Ve.e)((x,w)=>{try{x.subscribe(w)}finally{w.add(S)}})}var Yn=j(8189),xn=j(1481);const cn="primary",Cn=Symbol("RouteTitle");class hr{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w[0]:w}return null}getAll(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function _r(S){return new hr(S)}function tr(S,x,w){const O=w.path.split("/");if(O.length>S.length||"full"===w.pathMatch&&(x.hasChildren()||O.length<S.length))return null;const z={};for(let re=0;re<O.length;re++){const ae=O[re],at=S[re];if(ae.startsWith(":"))z[ae.substring(1)]=at;else if(ae!==at.path)return null}return{consumed:S.slice(0,O.length),posParams:z}}function zn(S,x){const w=S?Object.keys(S):void 0,O=x?Object.keys(x):void 0;if(!w||!O||w.length!=O.length)return!1;let z;for(let re=0;re<w.length;re++)if(z=w[re],!yi(S[z],x[z]))return!1;return!0}function yi(S,x){if(Array.isArray(S)&&Array.isArray(x)){if(S.length!==x.length)return!1;const w=[...S].sort(),O=[...x].sort();return w.every((z,re)=>O[re]===z)}return S===x}function Cr(S){return Array.prototype.concat.apply([],S)}function di(S){return S.length>0?S[S.length-1]:null}function Gn(S,x){for(const w in S)S.hasOwnProperty(w)&&x(S[w],w)}function qn(S){return(0,_.CqO)(S)?S:(0,_.QGY)(S)?(0,y.D)(Promise.resolve(S)):(0,ee.of)(S)}const ln=!1,yn={exact:function Qr(S,x,w){if(!mr(S.segments,x.segments)||!gi(S.segments,x.segments,w)||S.numberOfChildren!==x.numberOfChildren)return!1;for(const O in x.children)if(!S.children[O]||!Qr(S.children[O],x.children[O],w))return!1;return!0},subset:pi},on={exact:function Dr(S,x){return zn(S,x)},subset:function zr(S,x){return Object.keys(x).length<=Object.keys(S).length&&Object.keys(x).every(w=>yi(S[w],x[w]))},ignored:()=>!0};function Jr(S,x,w){return yn[w.paths](S.root,x.root,w.matrixParams)&&on[w.queryParams](S.queryParams,x.queryParams)&&!("exact"===w.fragment&&S.fragment!==x.fragment)}function pi(S,x,w){return Lr(S,x,x.segments,w)}function Lr(S,x,w,O){if(S.segments.length>w.length){const z=S.segments.slice(0,w.length);return!(!mr(z,w)||x.hasChildren()||!gi(z,w,O))}if(S.segments.length===w.length){if(!mr(S.segments,w)||!gi(S.segments,w,O))return!1;for(const z in x.children)if(!S.children[z]||!pi(S.children[z],x.children[z],O))return!1;return!0}{const z=w.slice(0,S.segments.length),re=w.slice(S.segments.length);return!!(mr(S.segments,z)&&gi(S.segments,z,O)&&S.children[cn])&&Lr(S.children[cn],x,re,O)}}function gi(S,x,w){return x.every((O,z)=>on[w](S[z].parameters,O.parameters))}class ur{constructor(x=new lr([],{}),w={},O=null){this.root=x,this.queryParams=w,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_r(this.queryParams)),this._queryParamMap}toString(){return Jt.serialize(this)}}class lr{constructor(x,w){this.segments=x,this.children=w,this.parent=null,Gn(w,(O,z)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qt(this)}}class yr{constructor(x,w){this.path=x,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=_r(this.parameters)),this._parameterMap}toString(){return Ke(this)}}function mr(S,x){return S.length===x.length&&S.every((w,O)=>w.path===x[O].path)}let Ze=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return new rt},providedIn:"root"}),S})();class rt{parse(x){const w=new Xe(x);return new ur(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(x){const w=`/${we(x.root,!0)}`,O=function gt(S){const x=Object.keys(S).map(w=>{const O=S[w];return Array.isArray(O)?O.map(z=>`${Ye(w)}=${Ye(z)}`).join("&"):`${Ye(w)}=${Ye(O)}`}).filter(w=>!!w);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${w}${O}${"string"==typeof x.fragment?`#${function Ot(S){return encodeURI(S)}(x.fragment)}`:""}`}}const Jt=new rt;function qt(S){return S.segments.map(x=>Ke(x)).join("/")}function we(S,x){if(!S.hasChildren())return qt(S);if(x){const w=S.children[cn]?we(S.children[cn],!1):"",O=[];return Gn(S.children,(z,re)=>{re!==cn&&O.push(`${re}:${we(z,!1)}`)}),O.length>0?`${w}(${O.join("//")})`:w}{const w=function Kt(S,x){let w=[];return Gn(S.children,(O,z)=>{z===cn&&(w=w.concat(x(O,z)))}),Gn(S.children,(O,z)=>{z!==cn&&(w=w.concat(x(O,z)))}),w}(S,(O,z)=>z===cn?[we(S.children[cn],!1)]:[`${z}:${we(O,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[cn]?`${qt(S)}/${w[0]}`:`${qt(S)}/(${w.join("//")})`}}function Ie(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ye(S){return Ie(S).replace(/%3B/gi,";")}function lt(S){return Ie(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function un(S){return decodeURIComponent(S)}function ut(S){return un(S.replace(/\+/g,"%20"))}function Ke(S){return`${lt(S.path)}${function _e(S){return Object.keys(S).map(x=>`;${lt(x)}=${lt(S[x])}`).join("")}(S.parameters)}`}const Nt=/^[^\/()?;=#]+/;function he(S){const x=S.match(Nt);return x?x[0]:""}const Ce=/^[^=?&#]+/,It=/^[^&#]+/;class Xe{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new lr([],{}):new lr([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(x.length>0||Object.keys(w).length>0)&&(O[cn]=new lr(x,w)),O}parseSegment(){const x=he(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new _.vHH(4009,ln);return this.capture(x),new yr(un(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const w=he(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const z=he(this.remaining);z&&(O=z,this.capture(O))}x[un(w)]=un(O)}parseQueryParam(x){const w=function St(S){const x=S.match(Ce);return x?x[0]:""}(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const ae=function Xt(S){const x=S.match(It);return x?x[0]:""}(this.remaining);ae&&(O=ae,this.capture(O))}const z=ut(w),re=ut(O);if(x.hasOwnProperty(z)){let ae=x[z];Array.isArray(ae)||(ae=[ae],x[z]=ae),ae.push(re)}else x[z]=re}parseParens(x){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=he(this.remaining),z=this.remaining[O.length];if("/"!==z&&")"!==z&&";"!==z)throw new _.vHH(4010,ln);let re;O.indexOf(":")>-1?(re=O.slice(0,O.indexOf(":")),this.capture(re),this.capture(":")):x&&(re=cn);const ae=this.parseChildren();w[re]=1===Object.keys(ae).length?ae[cn]:new lr([],ae),this.consumeOptional("//")}return w}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new _.vHH(4011,ln)}}function ze(S){return S.segments.length>0?new lr([],{[cn]:S}):S}function bt(S){const x={};for(const O of Object.keys(S.children)){const re=bt(S.children[O]);(re.segments.length>0||re.hasChildren())&&(x[O]=re)}return function Gt(S){if(1===S.numberOfChildren&&S.children[cn]){const x=S.children[cn];return new lr(S.segments.concat(x.segments),x.children)}return S}(new lr(S.segments,x))}function pn(S){return S instanceof ur}const kn=!1;function Wn(S,x,w,O,z){var re;if(0===w.length)return vi(x.root,x.root,x.root,O,z);const ae=function An(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new ji(!0,0,S);let x=0,w=!1;const O=S.reduce((z,re,ae)=>{if("object"==typeof re&&null!=re){if(re.outlets){const at={};return Gn(re.outlets,(Ut,En)=>{at[En]="string"==typeof Ut?Ut.split("/"):Ut}),[...z,{outlets:at}]}if(re.segmentPath)return[...z,re.segmentPath]}return"string"!=typeof re?[...z,re]:0===ae?(re.split("/").forEach((at,Ut)=>{0==Ut&&"."===at||(0==Ut&&""===at?w=!0:".."===at?x++:""!=at&&z.push(at))}),z):[...z,re]},[]);return new ji(w,x,O)}(w);return ae.toRoot()?vi(x.root,x.root,new lr([],{}),O,z):function at(En){var Hn;const $n=function qi(S,x,w,O){if(S.isAbsolute)return new cr(x.root,!0,0);if(-1===O)return new cr(w,w===x.root,0);return function kr(S,x,w){let O=S,z=x,re=w;for(;re>z;){if(re-=z,O=O.parent,!O)throw new _.vHH(4005,kn&&"Invalid number of '../'");z=O.segments.length}return new cr(O,!1,z-re)}(w,O+(Xn(S.commands[0])?0:1),S.numberOfDoubleDots)}(ae,x,null===(Hn=S.snapshot)||void 0===Hn?void 0:Hn._urlSegment,En),Ii=$n.processChildren?Ur($n.segmentGroup,$n.index,ae.commands):Li($n.segmentGroup,$n.index,ae.commands);return vi(x.root,$n.segmentGroup,Ii,O,z)}(null===(re=S.snapshot)||void 0===re?void 0:re._lastPathIndex)}function Xn(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function ys(S){return"object"==typeof S&&null!=S&&S.outlets}function vi(S,x,w,O,z){let ae,re={};O&&Gn(O,(Ut,En)=>{re[En]=Array.isArray(Ut)?Ut.map(Hn=>`${Hn}`):`${Ut}`}),ae=S===x?w:Vi(S,x,w);const at=ze(bt(ae));return new ur(at,re,z)}function Vi(S,x,w){const O={};return Gn(S.children,(z,re)=>{O[re]=z===x?w:Vi(z,x,w)}),new lr(S.segments,O)}class ji{constructor(x,w,O){if(this.isAbsolute=x,this.numberOfDoubleDots=w,this.commands=O,x&&O.length>0&&Xn(O[0]))throw new _.vHH(4003,kn&&"Root segment cannot have matrix parameters");const z=O.find(ys);if(z&&z!==di(O))throw new _.vHH(4004,kn&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cr{constructor(x,w,O){this.segmentGroup=x,this.processChildren=w,this.index=O}}function Li(S,x,w){if(S||(S=new lr([],{})),0===S.segments.length&&S.hasChildren())return Ur(S,x,w);const O=function se(S,x,w){let O=0,z=x;const re={match:!1,pathIndex:0,commandIndex:0};for(;z<S.segments.length;){if(O>=w.length)return re;const ae=S.segments[z],at=w[O];if(ys(at))break;const Ut=`${at}`,En=O<w.length-1?w[O+1]:null;if(z>0&&void 0===Ut)break;if(Ut&&En&&"object"==typeof En&&void 0===En.outlets){if(!et(Ut,En,ae))return re;O+=2}else{if(!et(Ut,{},ae))return re;O++}z++}return{match:!0,pathIndex:z,commandIndex:O}}(S,x,w),z=w.slice(O.commandIndex);if(O.match&&O.pathIndex<S.segments.length){const re=new lr(S.segments.slice(0,O.pathIndex),{});return re.children[cn]=new lr(S.segments.slice(O.pathIndex),S.children),Ur(re,0,z)}return O.match&&0===z.length?new lr(S.segments,{}):O.match&&!S.hasChildren()?be(S,x,w):O.match?Ur(S,0,z):be(S,x,w)}function Ur(S,x,w){if(0===w.length)return new lr(S.segments,{});{const O=function Ci(S){return ys(S[0])?S[0].outlets:{[cn]:S}}(w),z={};if(!O[cn]&&S.children[cn]&&1===S.numberOfChildren&&0===S.children[cn].segments.length){const re=Ur(S.children[cn],x,w);return new lr(S.segments,re.children)}return Gn(O,(re,ae)=>{"string"==typeof re&&(re=[re]),null!==re&&(z[ae]=Li(S.children[ae],x,re))}),Gn(S.children,(re,ae)=>{void 0===O[ae]&&(z[ae]=re)}),new lr(S.segments,z)}}function be(S,x,w){const O=S.segments.slice(0,x);let z=0;for(;z<w.length;){const re=w[z];if(ys(re)){const Ut=qe(re.outlets);return new lr(O,Ut)}if(0===z&&Xn(w[0])){O.push(new yr(S.segments[x].path,me(w[0]))),z++;continue}const ae=ys(re)?re.outlets[cn]:`${re}`,at=z<w.length-1?w[z+1]:null;ae&&at&&Xn(at)?(O.push(new yr(ae,me(at))),z+=2):(O.push(new yr(ae,{})),z++)}return new lr(O,{})}function qe(S){const x={};return Gn(S,(w,O)=>{"string"==typeof w&&(w=[w]),null!==w&&(x[O]=be(new lr([],{}),0,w))}),x}function me(S){const x={};return Gn(S,(w,O)=>x[O]=`${w}`),x}function et(S,x,w){return S==w.path&&zn(x,w.parameters)}const Qe="imperative";class Vt{constructor(x,w){this.id=x,this.url=w}}class Lt extends Vt{constructor(x,w,O="imperative",z=null){super(x,w),this.type=0,this.navigationTrigger=O,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qt extends Vt{constructor(x,w,O){super(x,w),this.urlAfterRedirects=O,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class an extends Vt{constructor(x,w,O,z){super(x,w),this.reason=O,this.code=z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vn extends Vt{constructor(x,w,O,z){super(x,w),this.reason=O,this.code=z,this.type=16}}class rr extends Vt{constructor(x,w,O,z){super(x,w),this.error=O,this.target=z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class er extends Vt{constructor(x,w,O,z){super(x,w),this.urlAfterRedirects=O,this.state=z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vr extends Vt{constructor(x,w,O,z){super(x,w),this.urlAfterRedirects=O,this.state=z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wr extends Vt{constructor(x,w,O,z,re){super(x,w),this.urlAfterRedirects=O,this.state=z,this.shouldActivate=re,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $i extends Vt{constructor(x,w,O,z){super(x,w),this.urlAfterRedirects=O,this.state=z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mt extends Vt{constructor(x,w,O,z){super(x,w),this.urlAfterRedirects=O,this.state=z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ot{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xt{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tn{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dn{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fr{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Er{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ir{constructor(x,w,O){this.routerEvent=x,this.position=w,this.anchor=O,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Oo=(()=>{class S{createUrlTree(w,O,z,re,ae,at){return Wn(w||O.root,z,re,ae,at)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})(),Ss=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(x){return Oo.\u0275fac(x)},providedIn:"root"}),S})();class Hi{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const w=this.pathFromRoot(x);return w.length>1?w[w.length-2]:null}children(x){const w=jo(x,this._root);return w?w.children.map(O=>O.value):[]}firstChild(x){const w=jo(x,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(x){const w=ua(x,this._root);return w.length<2?[]:w[w.length-2].children.map(z=>z.value).filter(z=>z!==x)}pathFromRoot(x){return ua(x,this._root).map(w=>w.value)}}function jo(S,x){if(S===x.value)return x;for(const w of x.children){const O=jo(S,w);if(O)return O}return null}function ua(S,x){if(S===x.value)return[x];for(const w of x.children){const O=ua(S,w);if(O.length)return O.unshift(x),O}return[]}class Yi{constructor(x,w){this.value=x,this.children=w}toString(){return`TreeNode(${this.value})`}}function oo(S){const x={};return S&&S.children.forEach(w=>x[w.value.outlet]=w),x}class Os extends Hi{constructor(x,w){super(x),this.snapshot=w,us(this,x)}toString(){return this.snapshot.toString()}}function Da(S,x){const w=function ko(S,x){const ae=new Qa([],{},{},"",{},cn,x,null,S.root,-1,{});return new lo("",new Yi(ae,[]))}(S,x),O=new le.X([new yr("",{})]),z=new le.X({}),re=new le.X({}),ae=new le.X({}),at=new le.X(""),Ut=new As(O,z,ae,at,re,cn,x,w.root);return Ut.snapshot=w.root,new Os(new Yi(Ut,[]),w)}class As{constructor(x,w,O,z,re,ae,at,Ut){var En,Hn;this.url=x,this.params=w,this.queryParams=O,this.fragment=z,this.data=re,this.outlet=ae,this.component=at,this.title=null!==(En=null===(Hn=this.data)||void 0===Hn?void 0:Hn.pipe((0,pt.U)($n=>$n[Cn])))&&void 0!==En?En:(0,ee.of)(void 0),this._futureSnapshot=Ut}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(x=>_r(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(x=>_r(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ao(S,x="emptyOnly"){const w=S.pathFromRoot;let O=0;if("always"!==x)for(O=w.length-1;O>=1;){const z=w[O],re=w[O-1];if(z.routeConfig&&""===z.routeConfig.path)O--;else{if(re.component)break;O--}}return function da(S){return S.reduce((x,w)=>{var O;return{params:{...x.params,...w.params},data:{...x.data,...w.data},resolve:{...w.data,...x.resolve,...null===(O=w.routeConfig)||void 0===O?void 0:O.data,...w._resolvedData}}},{params:{},data:{},resolve:{}})}(w.slice(O))}class Qa{get title(){var x;return null===(x=this.data)||void 0===x?void 0:x[Cn]}constructor(x,w,O,z,re,ae,at,Ut,En,Hn,$n){this.url=x,this.params=w,this.queryParams=O,this.fragment=z,this.data=re,this.outlet=ae,this.component=at,this.routeConfig=Ut,this._urlSegment=En,this._lastPathIndex=Hn,this._resolve=$n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_r(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_r(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lo extends Hi{constructor(x,w){super(w),this.url=x,us(this,w)}toString(){return ha(this._root)}}function us(S,x){x.value._routerState=S,x.children.forEach(w=>us(S,w))}function ha(S){const x=S.children.length>0?` { ${S.children.map(ha).join(", ")} } `:"";return`${S.value}${x}`}function Ws(S){if(S.snapshot){const x=S.snapshot,w=S._futureSnapshot;S.snapshot=w,zn(x.queryParams,w.queryParams)||S.queryParams.next(w.queryParams),x.fragment!==w.fragment&&S.fragment.next(w.fragment),zn(x.params,w.params)||S.params.next(w.params),function bn(S,x){if(S.length!==x.length)return!1;for(let w=0;w<S.length;++w)if(!zn(S[w],x[w]))return!1;return!0}(x.url,w.url)||S.url.next(w.url),zn(x.data,w.data)||S.data.next(w.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function ss(S,x){const w=zn(S.params,x.params)&&function Ai(S,x){return mr(S,x)&&S.every((w,O)=>zn(w.parameters,x[O].parameters))}(S.url,x.url);return w&&!(!S.parent!=!x.parent)&&(!S.parent||ss(S.parent,x.parent))}function Ho(S,x,w){if(w&&S.shouldReuseRoute(x.value,w.value.snapshot)){const O=w.value;O._futureSnapshot=x.value;const z=function co(S,x,w){return x.children.map(O=>{for(const z of w.children)if(S.shouldReuseRoute(O.value,z.value.snapshot))return Ho(S,O,z);return Ho(S,O)})}(S,x,w);return new Yi(O,z)}{if(S.shouldAttach(x.value)){const re=S.retrieve(x.value);if(null!==re){const ae=re.route;return ae.value._futureSnapshot=x.value,ae.children=x.children.map(at=>Ho(S,at)),ae}}const O=function ti(S){return new As(new le.X(S.url),new le.X(S.params),new le.X(S.queryParams),new le.X(S.fragment),new le.X(S.data),S.outlet,S.component,S)}(x.value),z=x.children.map(re=>Ho(S,re));return new Yi(O,z)}}const ks="ngNavigationCancelingError";function uo(S,x){const{redirectTo:w,navigationBehaviorOptions:O}=pn(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,z=ho(!1,0,x);return z.url=w,z.navigationBehaviorOptions=O,z}function ho(S,x,w){const O=new Error("NavigationCancelingError: "+(S||""));return O[ks]=!0,O.cancellationCode=x,w&&(O.url=w),O}function fa(S){return fo(S)&&pn(S.url)}function fo(S){return S&&S[ks]}class _s{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ta,this.attachRef=null}}let ta=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(w,O){const z=this.getOrCreateContext(w);z.outlet=O,this.contexts.set(w,z)}onChildOutletDestroyed(w){const O=this.getContext(w);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let O=this.getContext(w);return O||(O=new _s,this.contexts.set(w,O)),O}getContext(w){return this.contexts.get(w)||null}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const No=!1;let na=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=cn,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.parentContexts=(0,_.f3M)(ta),this.location=(0,_.f3M)(_.s_b),this.changeDetector=(0,_.f3M)(_.sBO),this.environmentInjector=(0,_.f3M)(_.lqb)}ngOnChanges(w){if(w.name){const{firstChange:O,previousValue:z}=w.name;if(O)return;this.isTrackedInParentContexts(z)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(z)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(w){var O;return(null===(O=this.parentContexts.getContext(w))||void 0===O?void 0:O.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);null!=w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,No);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,No);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,No);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,O){this.activated=w,this._activatedRoute=O,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,O){if(this.isActivated)throw new _.vHH(4013,No);this._activatedRoute=w;const z=this.location,ae=w.snapshot.component,at=this.parentContexts.getOrCreateContext(this.name).children,Ut=new xs(w,at,z.injector);if(O&&function zi(S){return!!S.resolveComponentFactory}(O)){const En=O.resolveComponentFactory(ae);this.activated=z.createComponent(En,z.length,Ut)}else this.activated=z.createComponent(ae,{index:z.length,injector:Ut,environmentInjector:null!=O?O:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275dir=_.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.TTD]}),S})();class xs{constructor(x,w,O){this.route=x,this.childContexts=w,this.parent=O}get(x,w){return x===As?this.route:x===ta?this.childContexts:this.parent.get(x,w)}}let Zi=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275cmp=_.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(w,O){1&w&&_._UZ(0,"router-outlet")},dependencies:[na],encapsulation:2}),S})();function bo(S,x){var w;return S.providers&&!S._injector&&(S._injector=(0,_.MMx)(S.providers,x,`Route: ${S.path}`)),null!==(w=S._injector)&&void 0!==w?w:x}function Do(S){const x=S.children&&S.children.map(Do),w=x?{...S,children:x}:{...S};return!w.component&&!w.loadComponent&&(x||w.loadChildren)&&w.outlet&&w.outlet!==cn&&(w.component=Zi),w}function Gi(S){return S.outlet||cn}function Ua(S,x){const w=S.filter(O=>Gi(O)===x);return w.push(...S.filter(O=>Gi(O)!==x)),w}function Ns(S){var x;if(!S)return null;if(null!==(x=S.routeConfig)&&void 0!==x&&x._injector)return S.routeConfig._injector;for(let w=S.parent;w;w=w.parent){const O=w.routeConfig;if(null!=O&&O._loadedInjector)return O._loadedInjector;if(null!=O&&O._injector)return O._injector}return null}class ia{constructor(x,w,O,z){this.routeReuseStrategy=x,this.futureState=w,this.currState=O,this.forwardEvent=z}activate(x){const w=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,O,x),Ws(this.futureState.root),this.activateChildRoutes(w,O,x)}deactivateChildRoutes(x,w,O){const z=oo(w);x.children.forEach(re=>{const ae=re.value.outlet;this.deactivateRoutes(re,z[ae],O),delete z[ae]}),Gn(z,(re,ae)=>{this.deactivateRouteAndItsChildren(re,O)})}deactivateRoutes(x,w,O){const z=x.value,re=w?w.value:null;if(z===re)if(z.component){const ae=O.getContext(z.outlet);ae&&this.deactivateChildRoutes(x,w,ae.children)}else this.deactivateChildRoutes(x,w,O);else re&&this.deactivateRouteAndItsChildren(w,O)}deactivateRouteAndItsChildren(x,w){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,w):this.deactivateRouteAndOutlet(x,w)}detachAndStoreRouteSubtree(x,w){const O=w.getContext(x.value.outlet),z=O&&x.value.component?O.children:w,re=oo(x);for(const ae of Object.keys(re))this.deactivateRouteAndItsChildren(re[ae],z);if(O&&O.outlet){const ae=O.outlet.detach(),at=O.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:ae,route:x,contexts:at})}}deactivateRouteAndOutlet(x,w){const O=w.getContext(x.value.outlet),z=O&&x.value.component?O.children:w,re=oo(x);for(const ae of Object.keys(re))this.deactivateRouteAndItsChildren(re[ae],z);O&&(O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated()),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(x,w,O){const z=oo(w);x.children.forEach(re=>{this.activateRoutes(re,z[re.value.outlet],O),this.forwardEvent(new Er(re.value.snapshot))}),x.children.length&&this.forwardEvent(new dn(x.value.snapshot))}activateRoutes(x,w,O){const z=x.value,re=w?w.value:null;if(Ws(z),z===re)if(z.component){const at=O.getOrCreateContext(z.outlet);this.activateChildRoutes(x,w,at.children)}else this.activateChildRoutes(x,w,O);else if(z.component){const at=O.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const Ut=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),at.children.onOutletReAttached(Ut.contexts),at.attachRef=Ut.componentRef,at.route=Ut.route.value,at.outlet&&at.outlet.attach(Ut.componentRef,Ut.route.value),Ws(Ut.route.value),this.activateChildRoutes(x,null,at.children)}else{var ae;const Ut=Ns(z.snapshot),En=null!==(ae=null==Ut?void 0:Ut.get(_._Vd))&&void 0!==ae?ae:null;at.attachRef=null,at.route=z,at.resolver=En,at.injector=Ut,at.outlet&&at.outlet.activateWith(z,at.injector),this.activateChildRoutes(x,null,at.children)}}else this.activateChildRoutes(x,null,O)}}class Tr{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class So{constructor(x,w){this.component=x,this.route=w}}function pa(S,x,w){const O=S._root;return q(O,x?x._root:null,w,[O.value])}function b(S,x){const w=Symbol(),O=x.get(S,w);return O===w?"function"!=typeof S||(0,_.Z0I)(S)?x.get(S):S:O}function q(S,x,w,O,z={canDeactivateChecks:[],canActivateChecks:[]}){const re=oo(x);return S.children.forEach(ae=>{(function T(S,x,w,O,z={canDeactivateChecks:[],canActivateChecks:[]}){const re=S.value,ae=x?x.value:null,at=w?w.getContext(S.value.outlet):null;if(ae&&re.routeConfig===ae.routeConfig){const Ut=function W(S,x,w){if("function"==typeof w)return w(S,x);switch(w){case"pathParamsChange":return!mr(S.url,x.url);case"pathParamsOrQueryParamsChange":return!mr(S.url,x.url)||!zn(S.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ss(S,x)||!zn(S.queryParams,x.queryParams);default:return!ss(S,x)}}(ae,re,re.routeConfig.runGuardsAndResolvers);Ut?z.canActivateChecks.push(new Tr(O)):(re.data=ae.data,re._resolvedData=ae._resolvedData),q(S,x,re.component?at?at.children:null:w,O,z),Ut&&at&&at.outlet&&at.outlet.isActivated&&z.canDeactivateChecks.push(new So(at.outlet.component,ae))}else ae&&ge(x,at,z),z.canActivateChecks.push(new Tr(O)),q(S,null,re.component?at?at.children:null:w,O,z)})(ae,re[ae.value.outlet],w,O.concat([ae.value]),z),delete re[ae.value.outlet]}),Gn(re,(ae,at)=>ge(ae,w.getContext(at),z)),z}function ge(S,x,w){const O=oo(S),z=S.value;Gn(O,(re,ae)=>{ge(re,z.component?x?x.children.getContext(ae):null:x,w)}),w.canDeactivateChecks.push(new So(z.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,z))}function M(S){return"function"==typeof S}function ds(S){return S instanceof $e.K||"EmptyError"===(null==S?void 0:S.name)}const Ao=Symbol("INITIAL_VALUE");function xi(){return(0,Tt.w)(S=>Oe(S.map(x=>x.pipe((0,dt.q)(1),(0,Mt.O)(Ao)))).pipe((0,pt.U)(x=>{for(const w of x)if(!0!==w){if(w===Ao)return Ao;if(!1===w||w instanceof ur)return w}return!0}),(0,yt.h)(x=>x!==Ao),(0,dt.q)(1)))}function ja(S){return(0,_t.z)((0,ht.b)(x=>{if(pn(x))throw uo(0,x)}),(0,pt.U)(x=>!0===x))}const Rs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tl(S,x,w,O,z){const re=Sa(S,x,w);return re.matched?function ns(S,x,w,O){const z=x.canMatch;if(!z||0===z.length)return(0,ee.of)(!0);const re=z.map(ae=>{const at=b(ae,S);return qn(function $r(S){return S&&M(S.canMatch)}(at)?at.canMatch(x,w):S.runInContext(()=>at(x,w)))});return(0,ee.of)(re).pipe(xi(),ja())}(O=bo(x,O),x,w).pipe((0,pt.U)(ae=>!0===ae?re:{...Rs})):(0,ee.of)(re)}function Sa(S,x,w){var O;if(""===x.path)return"full"===x.pathMatch&&(S.hasChildren()||w.length>0)?{...Rs}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const re=(x.matcher||tr)(w,S,x);if(!re)return{...Rs};const ae={};Gn(re.posParams,(Ut,En)=>{ae[En]=Ut.path});const at=re.consumed.length>0?{...ae,...re.consumed[re.consumed.length-1].parameters}:ae;return{matched:!0,consumedSegments:re.consumed,remainingSegments:w.slice(re.consumed.length),parameters:at,positionalParamSegments:null!==(O=re.posParams)&&void 0!==O?O:{}}}function zo(S,x,w,O){if(w.length>0&&function ga(S,x,w){return w.some(O=>xo(S,x,O)&&Gi(O)!==cn)}(S,w,O)){const re=new lr(x,function nl(S,x,w,O){const z={};z[cn]=O,O._sourceSegment=S,O._segmentIndexShift=x.length;for(const re of w)if(""===re.path&&Gi(re)!==cn){const ae=new lr([],{});ae._sourceSegment=S,ae._segmentIndexShift=x.length,z[Gi(re)]=ae}return z}(S,x,O,new lr(w,S.children)));return re._sourceSegment=S,re._segmentIndexShift=x.length,{segmentGroup:re,slicedSegments:[]}}if(0===w.length&&function as(S,x,w){return w.some(O=>xo(S,x,O))}(S,w,O)){const re=new lr(S.segments,function Fo(S,x,w,O,z){const re={};for(const ae of O)if(xo(S,w,ae)&&!z[Gi(ae)]){const at=new lr([],{});at._sourceSegment=S,at._segmentIndexShift=x.length,re[Gi(ae)]=at}return{...z,...re}}(S,x,w,O,S.children));return re._sourceSegment=S,re._segmentIndexShift=x.length,{segmentGroup:re,slicedSegments:w}}const z=new lr(S.segments,S.children);return z._sourceSegment=S,z._segmentIndexShift=x.length,{segmentGroup:z,slicedSegments:w}}function xo(S,x,w){return(!(S.hasChildren()||x.length>0)||"full"!==w.pathMatch)&&""===w.path}function Go(S,x,w,O){return!!(Gi(S)===O||O!==cn&&xo(x,w,S))&&("**"===S.path||Sa(x,S,w).matched)}function Zs(S,x,w){return 0===x.length&&!S.children[w]}const hs=!1;class Aa{constructor(x){this.segmentGroup=x||null}}class ls{constructor(x){this.urlTree=x}}function Fs(S){return it(new Aa(S))}function Vr(S){return it(new ls(S))}class yl{constructor(x,w,O,z,re){this.injector=x,this.configLoader=w,this.urlSerializer=O,this.urlTree=z,this.config=re,this.allowRedirects=!0}apply(){const x=zo(this.urlTree.root,[],[],this.config).segmentGroup,w=new lr(x.segments,x.children);return this.expandSegmentGroup(this.injector,this.config,w,cn).pipe((0,pt.U)(re=>this.createUrlTree(bt(re),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ct(re=>{if(re instanceof ls)return this.allowRedirects=!1,this.match(re.urlTree);throw re instanceof Aa?this.noMatchError(re):re}))}match(x){return this.expandSegmentGroup(this.injector,this.config,x.root,cn).pipe((0,pt.U)(z=>this.createUrlTree(bt(z),x.queryParams,x.fragment))).pipe(Ct(z=>{throw z instanceof Aa?this.noMatchError(z):z}))}noMatchError(x){return new _.vHH(4002,hs)}createUrlTree(x,w,O){const z=ze(x);return new ur(z,w,O)}expandSegmentGroup(x,w,O,z){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(x,w,O).pipe((0,pt.U)(re=>new lr([],re))):this.expandSegment(x,O,w,O.segments,z,!0)}expandChildren(x,w,O){const z=[];for(const re of Object.keys(O.children))"primary"===re?z.unshift(re):z.push(re);return(0,y.D)(z).pipe((0,Be.b)(re=>{const ae=O.children[re],at=Ua(w,re);return this.expandSegmentGroup(x,at,ae,re).pipe((0,pt.U)(Ut=>({segment:Ut,outlet:re})))}),(0,nn.R)((re,ae)=>(re[ae.outlet]=ae.segment,re),{}),Re())}expandSegment(x,w,O,z,re,ae){return(0,y.D)(O).pipe((0,Be.b)(at=>this.expandSegmentAgainstRoute(x,w,O,at,z,re,ae).pipe(Ct(En=>{if(En instanceof Aa)return(0,ee.of)(null);throw En}))),(0,je.P)(at=>!!at),Ct((at,Ut)=>{if(ds(at))return Zs(w,z,re)?(0,ee.of)(new lr([],{})):Fs(w);throw at}))}expandSegmentAgainstRoute(x,w,O,z,re,ae,at){return Go(z,w,re,ae)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(x,w,z,re,ae):at&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,w,O,z,re,ae):Fs(w):Fs(w)}expandSegmentAgainstRouteUsingRedirect(x,w,O,z,re,ae){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,O,z,ae):this.expandRegularSegmentAgainstRouteUsingRedirect(x,w,O,z,re,ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,w,O,z){const re=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?Vr(re):this.lineralizeSegments(O,re).pipe((0,Fe.z)(ae=>{const at=new lr(ae,{});return this.expandSegment(x,at,w,ae,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,w,O,z,re,ae){const{matched:at,consumedSegments:Ut,remainingSegments:En,positionalParamSegments:Hn}=Sa(w,z,re);if(!at)return Fs(w);const $n=this.applyRedirectCommands(Ut,z.redirectTo,Hn);return z.redirectTo.startsWith("/")?Vr($n):this.lineralizeSegments(z,$n).pipe((0,Fe.z)(Ii=>this.expandSegment(x,w,O,Ii.concat(En),ae,!1)))}matchSegmentAgainstRoute(x,w,O,z,re){return"**"===O.path?(x=bo(O,x),O.loadChildren?(O._loadedRoutes?(0,ee.of)({routes:O._loadedRoutes,injector:O._loadedInjector}):this.configLoader.loadChildren(x,O)).pipe((0,pt.U)(at=>(O._loadedRoutes=at.routes,O._loadedInjector=at.injector,new lr(z,{})))):(0,ee.of)(new lr(z,{}))):tl(w,O,z,x).pipe((0,Tt.w)(({matched:ae,consumedSegments:at,remainingSegments:Ut})=>{var En;return ae?(x=null!==(En=O._injector)&&void 0!==En?En:x,this.getChildConfig(x,O,z).pipe((0,Fe.z)($n=>{var Ii;const rs=null!==(Ii=$n.injector)&&void 0!==Ii?Ii:x,$s=$n.routes,{segmentGroup:ya,slicedSegments:Mo}=zo(w,at,Ut,$s),Is=new lr(ya.segments,ya.children);if(0===Mo.length&&Is.hasChildren())return this.expandChildren(rs,$s,Is).pipe((0,pt.U)(Qc=>new lr(at,Qc)));if(0===$s.length&&0===Mo.length)return(0,ee.of)(new lr(at,{}));const Or=Gi(O)===re;return this.expandSegment(rs,Is,$s,Mo,Or?cn:re,!0).pipe((0,pt.U)(_o=>new lr(at.concat(_o.segments),_o.children)))}))):Fs(w)}))}getChildConfig(x,w,O){return w.children?(0,ee.of)({routes:w.children,injector:x}):w.loadChildren?void 0!==w._loadedRoutes?(0,ee.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Ta(S,x,w,O){const z=x.canLoad;if(void 0===z||0===z.length)return(0,ee.of)(!0);const re=z.map(ae=>{const at=b(ae,S);return qn(function L(S){return S&&M(S.canLoad)}(at)?at.canLoad(x,w):S.runInContext(()=>at(x,w)))});return(0,ee.of)(re).pipe(xi(),ja())}(x,w,O).pipe((0,Fe.z)(z=>z?this.configLoader.loadChildren(x,w).pipe((0,ht.b)(re=>{w._loadedRoutes=re.routes,w._loadedInjector=re.injector})):function xa(S){return it(ho(hs,3))}())):(0,ee.of)({routes:[],injector:x})}lineralizeSegments(x,w){let O=[],z=w.root;for(;;){if(O=O.concat(z.segments),0===z.numberOfChildren)return(0,ee.of)(O);if(z.numberOfChildren>1||!z.children[cn])return x.redirectTo,it(new _.vHH(4e3,hs));z=z.children[cn]}}applyRedirectCommands(x,w,O){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),x,O)}applyRedirectCreateUrlTree(x,w,O,z){const re=this.createSegmentGroup(x,w.root,O,z);return new ur(re,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(x,w){const O={};return Gn(x,(z,re)=>{if("string"==typeof z&&z.startsWith(":")){const at=z.substring(1);O[re]=w[at]}else O[re]=z}),O}createSegmentGroup(x,w,O,z){const re=this.createSegments(x,w.segments,O,z);let ae={};return Gn(w.children,(at,Ut)=>{ae[Ut]=this.createSegmentGroup(x,at,O,z)}),new lr(re,ae)}createSegments(x,w,O,z){return w.map(re=>re.path.startsWith(":")?this.findPosParam(x,re,z):this.findOrReturn(re,O))}findPosParam(x,w,O){const z=O[w.path.substring(1)];if(!z)throw new _.vHH(4001,hs);return z}findOrReturn(x,w){let O=0;for(const z of w){if(z.path===x.path)return w.splice(O),z;O++}return x}}class Sr{}class ${constructor(x,w,O,z,re,ae,at){this.injector=x,this.rootComponentType=w,this.config=O,this.urlTree=z,this.url=re,this.paramsInheritanceStrategy=ae,this.urlSerializer=at}recognize(){const x=zo(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,cn).pipe((0,pt.U)(w=>{if(null===w)return null;const O=new Qa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},cn,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new Yi(O,w),re=new lo(this.url,z);return this.inheritParamsAndData(re._root),re}))}inheritParamsAndData(x){const w=x.value,O=ao(w,this.paramsInheritanceStrategy);w.params=Object.freeze(O.params),w.data=Object.freeze(O.data),x.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(x,w,O,z){return 0===O.segments.length&&O.hasChildren()?this.processChildren(x,w,O):this.processSegment(x,w,O,O.segments,z)}processChildren(x,w,O){return(0,y.D)(Object.keys(O.children)).pipe((0,Be.b)(z=>{const re=O.children[z],ae=Ua(w,z);return this.processSegmentGroup(x,ae,re,z)}),(0,nn.R)((z,re)=>z&&re?(z.push(...re),z):null),function At(S,x=!1){return(0,Ve.e)((w,O)=>{let z=0;w.subscribe((0,ye.x)(O,re=>{const ae=S(re,z++);(ae||x)&&O.next(re),!ae&&O.complete()}))})}(z=>null!==z),(0,kt.d)(null),Re(),(0,pt.U)(z=>{if(null===z)return null;const re=Le(z);return function Q(S){S.sort((x,w)=>x.value.outlet===cn?-1:w.value.outlet===cn?1:x.value.outlet.localeCompare(w.value.outlet))}(re),re}))}processSegment(x,w,O,z,re){return(0,y.D)(w).pipe((0,Be.b)(ae=>{var at;return this.processSegmentAgainstRoute(null!==(at=ae._injector)&&void 0!==at?at:x,ae,O,z,re)}),(0,je.P)(ae=>!!ae),Ct(ae=>{if(ds(ae))return Zs(O,z,re)?(0,ee.of)([]):(0,ee.of)(null);throw ae}))}processSegmentAgainstRoute(x,w,O,z,re){if(w.redirectTo||!Go(w,O,z,re))return(0,ee.of)(null);let ae;if("**"===w.path){var at,Ut;const En=z.length>0?di(z).parameters:{},Hn=Vn(O)+z.length,$n=new Qa(z,En,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kr(w),Gi(w),null!==(at=null!==(Ut=w.component)&&void 0!==Ut?Ut:w._loadedComponent)&&void 0!==at?at:null,w,en(O),Hn,Br(w));ae=(0,ee.of)({snapshot:$n,consumedSegments:[],remainingSegments:[]})}else ae=tl(O,w,z,x).pipe((0,pt.U)(({matched:En,consumedSegments:Hn,remainingSegments:$n,parameters:Ii})=>{var rs,$s;if(!En)return null;const ya=Vn(O)+Hn.length;return{snapshot:new Qa(Hn,Ii,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kr(w),Gi(w),null!==(rs=null!==($s=w.component)&&void 0!==$s?$s:w._loadedComponent)&&void 0!==rs?rs:null,w,en(O),ya,Br(w)),consumedSegments:Hn,remainingSegments:$n}}));return ae.pipe((0,Tt.w)(En=>{var Hn,$n;if(null===En)return(0,ee.of)(null);const{snapshot:Ii,consumedSegments:rs,remainingSegments:$s}=En;x=null!==(Hn=w._injector)&&void 0!==Hn?Hn:x;const ya=null!==($n=w._loadedInjector)&&void 0!==$n?$n:x,Mo=function H(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(w),{segmentGroup:Is,slicedSegments:Or}=zo(O,rs,$s,Mo.filter(_o=>void 0===_o.redirectTo));if(0===Or.length&&Is.hasChildren())return this.processChildren(ya,Mo,Is).pipe((0,pt.U)(_o=>null===_o?null:[new Yi(Ii,_o)]));if(0===Mo.length&&0===Or.length)return(0,ee.of)([new Yi(Ii,[])]);const hc=Gi(w)===re;return this.processSegment(ya,Mo,Is,Or,hc?cn:re).pipe((0,pt.U)(_o=>null===_o?null:[new Yi(Ii,_o)]))}))}}function ie(S){const x=S.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function Le(S){const x=[],w=new Set;for(const O of S){if(!ie(O)){x.push(O);continue}const z=x.find(re=>O.value.routeConfig===re.value.routeConfig);void 0!==z?(z.children.push(...O.children),w.add(z)):x.push(O)}for(const O of w){const z=Le(O.children);x.push(new Yi(O.value,z))}return x.filter(O=>!w.has(O))}function en(S){let x=S;for(;x._sourceSegment;)x=x._sourceSegment;return x}function Vn(S){var x;let w=S,O=null!==(x=w._segmentIndexShift)&&void 0!==x?x:0;for(;w._sourceSegment;){var z;w=w._sourceSegment,O+=null!==(z=w._segmentIndexShift)&&void 0!==z?z:0}return O-1}function Kr(S){return S.data||{}}function Br(S){return S.resolve||{}}function Ko(S){return"string"==typeof S.title||null===S.title}function Es(S){return(0,Tt.w)(x=>{const w=S(x);return w?(0,y.D)(w).pipe((0,pt.U)(()=>x)):(0,ee.of)(x)})}const Ls=new _.OlP("ROUTES");let Qs=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.f3M)(_.Sil)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,ee.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const O=qn(w.loadComponent()).pipe((0,pt.U)(_l),(0,ht.b)(re=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=re}),On(()=>{this.componentLoaders.delete(w)})),z=new Ne(O,()=>new De.x).pipe(ke());return this.componentLoaders.set(w,z),z}loadChildren(w,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,ee.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const re=this.loadModuleFactoryOrRoutes(O.loadChildren).pipe((0,pt.U)(at=>{this.onLoadEndListener&&this.onLoadEndListener(O);let Ut,En,Hn=!1;Array.isArray(at)?En=at:(Ut=at.create(w).injector,En=Cr(Ut.get(Ls,[],_.XFs.Self|_.XFs.Optional)));return{routes:En.map(Do),injector:Ut}}),On(()=>{this.childrenLoaders.delete(O)})),ae=new Ne(re,()=>new De.x).pipe(ke());return this.childrenLoaders.set(O,ae),ae}loadModuleFactoryOrRoutes(w){return qn(w()).pipe((0,pt.U)(_l),(0,Fe.z)(O=>O instanceof _.YKP||Array.isArray(O)?(0,ee.of)(O):(0,y.D)(this.compiler.compileModuleAsync(O))))}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function _l(S){return function rl(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let qo=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new De.x,this.configLoader=(0,_.f3M)(Qs),this.environmentInjector=(0,_.f3M)(_.lqb),this.urlSerializer=(0,_.f3M)(Ze),this.rootContexts=(0,_.f3M)(ta),this.navigationId=0,this.afterPreactivation=()=>(0,ee.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=z=>this.events.next(new xt(z)),this.configLoader.onLoadStartListener=z=>this.events.next(new ot(z))}complete(){var w;null===(w=this.transitions)||void 0===w||w.complete()}handleNavigationRequest(w){var O;const z=++this.navigationId;null===(O=this.transitions)||void 0===O||O.next({...this.transitions.value,...w,id:z})}setupNavigations(w){return this.transitions=new le.X({id:0,targetPageId:0,currentUrlTree:w.currentUrlTree,currentRawUrl:w.currentUrlTree,extractedUrl:w.urlHandlingStrategy.extract(w.currentUrlTree),urlAfterRedirects:w.urlHandlingStrategy.extract(w.currentUrlTree),rawUrl:w.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qe,restoredState:null,currentSnapshot:w.routerState.snapshot,targetSnapshot:null,currentRouterState:w.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,yt.h)(O=>0!==O.id),(0,pt.U)(O=>({...O,extractedUrl:w.urlHandlingStrategy.extract(O.rawUrl)})),(0,Tt.w)(O=>{let z=!1,re=!1;return(0,ee.of)(O).pipe((0,ht.b)(ae=>{this.currentNavigation={id:ae.id,initialUrl:ae.rawUrl,extractedUrl:ae.extractedUrl,trigger:ae.source,extras:ae.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Tt.w)(ae=>{var at;const Ut=w.browserUrlTree.toString(),En=!w.navigated||ae.extractedUrl.toString()!==Ut||Ut!==w.currentUrlTree.toString(),Hn=null!==(at=ae.extras.onSameUrlNavigation)&&void 0!==at?at:w.onSameUrlNavigation;if(!En&&"reload"!==Hn){const $n="";return this.events.next(new vn(ae.id,w.serializeUrl(O.rawUrl),$n,0)),w.rawUrlTree=ae.rawUrl,ae.resolve(null),tt.E}if(w.urlHandlingStrategy.shouldProcessUrl(ae.rawUrl))return Wc(ae.source)&&(w.browserUrlTree=ae.extractedUrl),(0,ee.of)(ae).pipe((0,Tt.w)($n=>{var Ii,rs;const $s=null===(Ii=this.transitions)||void 0===Ii?void 0:Ii.getValue();return this.events.next(new Lt($n.id,this.urlSerializer.serialize($n.extractedUrl),$n.source,$n.restoredState)),$s!==(null===(rs=this.transitions)||void 0===rs?void 0:rs.getValue())?tt.E:Promise.resolve($n)}),function mo(S,x,w,O){return(0,Tt.w)(z=>function Lo(S,x,w,O,z){return new yl(S,x,w,O,z).apply()}(S,x,w,z.extractedUrl,O).pipe((0,pt.U)(re=>({...z,urlAfterRedirects:re}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,w.config),(0,ht.b)($n=>{this.currentNavigation={...this.currentNavigation,finalUrl:$n.urlAfterRedirects},O.urlAfterRedirects=$n.urlAfterRedirects}),function wr(S,x,w,O,z){return(0,Fe.z)(re=>function vl(S,x,w,O,z,re,ae="emptyOnly"){return new $(S,x,w,O,z,ae,re).recognize().pipe((0,Tt.w)(at=>null===at?function Hl(S){return new Ae.y(x=>x.error(S))}(new Sr):(0,ee.of)(at)))}(S,x,w,re.urlAfterRedirects,O.serialize(re.urlAfterRedirects),O,z).pipe((0,pt.U)(ae=>({...re,targetSnapshot:ae}))))}(this.environmentInjector,this.rootComponentType,w.config,this.urlSerializer,w.paramsInheritanceStrategy),(0,ht.b)($n=>{if(O.targetSnapshot=$n.targetSnapshot,"eager"===w.urlUpdateStrategy){if(!$n.extras.skipLocationChange){const rs=w.urlHandlingStrategy.merge($n.urlAfterRedirects,$n.rawUrl);w.setBrowserUrl(rs,$n)}w.browserUrlTree=$n.urlAfterRedirects}const Ii=new er($n.id,this.urlSerializer.serialize($n.extractedUrl),this.urlSerializer.serialize($n.urlAfterRedirects),$n.targetSnapshot);this.events.next(Ii)}));if(En&&w.urlHandlingStrategy.shouldProcessUrl(w.rawUrlTree)){const{id:$n,extractedUrl:Ii,source:rs,restoredState:$s,extras:ya}=ae,Mo=new Lt($n,this.urlSerializer.serialize(Ii),rs,$s);this.events.next(Mo);const Is=Da(Ii,this.rootComponentType).snapshot;return O={...ae,targetSnapshot:Is,urlAfterRedirects:Ii,extras:{...ya,skipLocationChange:!1,replaceUrl:!1}},(0,ee.of)(O)}{const $n="";return this.events.next(new vn(ae.id,w.serializeUrl(O.extractedUrl),$n,1)),w.rawUrlTree=ae.rawUrl,ae.resolve(null),tt.E}}),(0,ht.b)(ae=>{const at=new vr(ae.id,this.urlSerializer.serialize(ae.extractedUrl),this.urlSerializer.serialize(ae.urlAfterRedirects),ae.targetSnapshot);this.events.next(at)}),(0,pt.U)(ae=>O={...ae,guards:pa(ae.targetSnapshot,ae.currentSnapshot,this.rootContexts)}),function Va(S,x){return(0,Fe.z)(w=>{const{targetSnapshot:O,currentSnapshot:z,guards:{canActivateChecks:re,canDeactivateChecks:ae}}=w;return 0===ae.length&&0===re.length?(0,ee.of)({...w,guardsResult:!0}):function ts(S,x,w,O){return(0,y.D)(S).pipe((0,Fe.z)(z=>function el(S,x,w,O,z){const re=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!re||0===re.length)return(0,ee.of)(!0);const ae=re.map(at=>{var Ut;const En=null!==(Ut=Ns(x))&&void 0!==Ut?Ut:z,Hn=b(at,En);return qn(function Tn(S){return S&&M(S.canDeactivate)}(Hn)?Hn.canDeactivate(S,x,w,O):En.runInContext(()=>Hn(S,x,w,O))).pipe((0,je.P)())});return(0,ee.of)(ae).pipe(xi())}(z.component,z.route,w,x,O)),(0,je.P)(z=>!0!==z,!0))}(ae,O,z,S).pipe((0,Fe.z)(at=>at&&function F(S){return"boolean"==typeof S}(at)?function Ks(S,x,w,O){return(0,y.D)(x).pipe((0,Be.b)(z=>(0,Se.z)(function oa(S,x){return null!==S&&x&&x(new tn(S)),(0,ee.of)(!0)}(z.route.parent,O),function qs(S,x){return null!==S&&x&&x(new fr(S)),(0,ee.of)(!0)}(z.route,O),function ml(S,x,w){const O=x[x.length-1],re=x.slice(0,x.length-1).reverse().map(ae=>function sa(S){const x=S.routeConfig?S.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:S,guards:x}:null}(ae)).filter(ae=>null!==ae).map(ae=>ue(()=>{const at=ae.guards.map(Ut=>{var En;const Hn=null!==(En=Ns(ae.node))&&void 0!==En?En:w,$n=b(Ut,Hn);return qn(function vt(S){return S&&M(S.canActivateChild)}($n)?$n.canActivateChild(O,S):Hn.runInContext(()=>$n(O,S))).pipe((0,je.P)())});return(0,ee.of)(at).pipe(xi())}));return(0,ee.of)(re).pipe(xi())}(S,z.path,w),function Ys(S,x,w){const O=x.routeConfig?x.routeConfig.canActivate:null;if(!O||0===O.length)return(0,ee.of)(!0);const z=O.map(re=>ue(()=>{var ae;const at=null!==(ae=Ns(x))&&void 0!==ae?ae:w,Ut=b(re,at);return qn(function ne(S){return S&&M(S.canActivate)}(Ut)?Ut.canActivate(x,S):at.runInContext(()=>Ut(x,S))).pipe((0,je.P)())}));return(0,ee.of)(z).pipe(xi())}(S,z.route,w))),(0,je.P)(z=>!0!==z,!0))}(O,re,S,x):(0,ee.of)(at)),(0,pt.U)(at=>({...w,guardsResult:at})))})}(this.environmentInjector,ae=>this.events.next(ae)),(0,ht.b)(ae=>{if(O.guardsResult=ae.guardsResult,pn(ae.guardsResult))throw uo(0,ae.guardsResult);const at=new Wr(ae.id,this.urlSerializer.serialize(ae.extractedUrl),this.urlSerializer.serialize(ae.urlAfterRedirects),ae.targetSnapshot,!!ae.guardsResult);this.events.next(at)}),(0,yt.h)(ae=>!!ae.guardsResult||(w.restoreHistory(ae),this.cancelNavigationTransition(ae,"",3),!1)),Es(ae=>{if(ae.guards.canActivateChecks.length)return(0,ee.of)(ae).pipe((0,ht.b)(at=>{const Ut=new $i(at.id,this.urlSerializer.serialize(at.extractedUrl),this.urlSerializer.serialize(at.urlAfterRedirects),at.targetSnapshot);this.events.next(Ut)}),(0,Tt.w)(at=>{let Ut=!1;return(0,ee.of)(at).pipe(function Ri(S,x){return(0,Fe.z)(w=>{const{targetSnapshot:O,guards:{canActivateChecks:z}}=w;if(!z.length)return(0,ee.of)(w);let re=0;return(0,y.D)(z).pipe((0,Be.b)(ae=>function bi(S,x,w,O){const z=S.routeConfig,re=S._resolve;return void 0!==(null==z?void 0:z.title)&&!Ko(z)&&(re[Cn]=z.title),function Bi(S,x,w,O){const z=function Wo(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===z.length)return(0,ee.of)({});const re={};return(0,y.D)(z).pipe((0,Fe.z)(ae=>function yo(S,x,w,O){var z;const re=null!==(z=Ns(x))&&void 0!==z?z:O,ae=b(S,re);return qn(ae.resolve?ae.resolve(x,w):re.runInContext(()=>ae(x,w)))}(S[ae],x,w,O).pipe((0,je.P)(),(0,ht.b)(at=>{re[ae]=at}))),zt(1),function gn(S){return(0,pt.U)(()=>S)}(re),Ct(ae=>ds(ae)?tt.E:it(ae)))}(re,S,x,O).pipe((0,pt.U)(ae=>(S._resolvedData=ae,S.data=ao(S,w).resolve,z&&Ko(z)&&(S.data[Cn]=z.title),null)))}(ae.route,O,S,x)),(0,ht.b)(()=>re++),zt(1),(0,Fe.z)(ae=>re===z.length?(0,ee.of)(w):tt.E))})}(w.paramsInheritanceStrategy,this.environmentInjector),(0,ht.b)({next:()=>Ut=!0,complete:()=>{Ut||(w.restoreHistory(at),this.cancelNavigationTransition(at,"",2))}}))}),(0,ht.b)(at=>{const Ut=new mt(at.id,this.urlSerializer.serialize(at.extractedUrl),this.urlSerializer.serialize(at.urlAfterRedirects),at.targetSnapshot);this.events.next(Ut)}))}),Es(ae=>{const at=Ut=>{var En;const Hn=[];null!==(En=Ut.routeConfig)&&void 0!==En&&En.loadComponent&&!Ut.routeConfig._loadedComponent&&Hn.push(this.configLoader.loadComponent(Ut.routeConfig).pipe((0,ht.b)($n=>{Ut.component=$n}),(0,pt.U)(()=>{})));for(const $n of Ut.children)Hn.push(...at($n));return Hn};return Oe(at(ae.targetSnapshot.root)).pipe((0,kt.d)(),(0,dt.q)(1))}),Es(()=>this.afterPreactivation()),(0,pt.U)(ae=>{const at=function Ba(S,x,w){const O=Ho(S,x._root,w?w._root:void 0);return new Os(O,x)}(w.routeReuseStrategy,ae.targetSnapshot,ae.currentRouterState);return O={...ae,targetRouterState:at}}),(0,ht.b)(ae=>{w.currentUrlTree=ae.urlAfterRedirects,w.rawUrlTree=w.urlHandlingStrategy.merge(ae.urlAfterRedirects,ae.rawUrl),w.routerState=ae.targetRouterState,"deferred"===w.urlUpdateStrategy&&(ae.extras.skipLocationChange||w.setBrowserUrl(w.rawUrlTree,ae),w.browserUrlTree=ae.urlAfterRedirects)}),((S,x,w)=>(0,pt.U)(O=>(new ia(x,O.targetRouterState,O.currentRouterState,w).activate(S),O)))(this.rootContexts,w.routeReuseStrategy,ae=>this.events.next(ae)),(0,dt.q)(1),(0,ht.b)({next:ae=>{var at;z=!0,this.lastSuccessfulNavigation=this.currentNavigation,w.navigated=!0,this.events.next(new Qt(ae.id,this.urlSerializer.serialize(ae.extractedUrl),this.urlSerializer.serialize(w.currentUrlTree))),null===(at=w.titleStrategy)||void 0===at||at.updateTitle(ae.targetRouterState.snapshot),ae.resolve(!0)},complete:()=>{z=!0}}),On(()=>{var ae;z||re||this.cancelNavigationTransition(O,"",1),(null===(ae=this.currentNavigation)||void 0===ae?void 0:ae.id)===O.id&&(this.currentNavigation=null)}),Ct(ae=>{if(re=!0,fo(ae)){fa(ae)||(w.navigated=!0,w.restoreHistory(O,!0));const Ut=new an(O.id,this.urlSerializer.serialize(O.extractedUrl),ae.message,ae.cancellationCode);if(this.events.next(Ut),fa(ae)){const En=w.urlHandlingStrategy.merge(ae.url,w.rawUrlTree),Hn={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===w.urlUpdateStrategy||Wc(O.source)};w.scheduleNavigation(En,Qe,null,Hn,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{var at;w.restoreHistory(O,!0);const Ut=new rr(O.id,this.urlSerializer.serialize(O.extractedUrl),ae,null!==(at=O.targetSnapshot)&&void 0!==at?at:void 0);this.events.next(Ut);try{O.resolve(w.errorHandler(ae))}catch(En){O.reject(En)}}return tt.E}))}))}cancelNavigationTransition(w,O,z){const re=new an(w.id,this.urlSerializer.serialize(w.extractedUrl),O,z);this.events.next(re),w.resolve(!1)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Wc(S){return S!==Qe}let Wi=(()=>{class S{buildTitle(w){let O,z=w.root;for(;void 0!==z;){var re;O=null!==(re=this.getResolvedTitleForRoute(z))&&void 0!==re?re:O,z=z.children.find(ae=>ae.outlet===cn)}return O}getResolvedTitleForRoute(w){return w.data[Cn]}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(vo)},providedIn:"root"}),S})(),vo=(()=>{class S extends Wi{constructor(w){super(),this.title=w}updateTitle(w){const O=this.buildTitle(w);void 0!==O&&this.title.setTitle(O)}}return S.\u0275fac=function(w){return new(w||S)(_.LFG(xn.Dx))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Js=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(ac)},providedIn:"root"}),S})();class oc{shouldDetach(x){return!1}store(x,w){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,w){return x.routeConfig===w.routeConfig}}let ac=(()=>{class S extends oc{}return S.\u0275fac=function(){let x;return function(O){return(x||(x=_.n5z(S)))(O||S)}}(),S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ji=new _.OlP("",{providedIn:"root",factory:()=>({})});let mi=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(Kc)},providedIn:"root"}),S})(),Kc=(()=>{class S{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,O){return w}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function dr(S){throw S}function lc(S,x,w){return x.parse("/")}const jn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ht={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hn=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var w;if("computed"===this.canceledNavigationResolution)return null===(w=this.location.getState())||void 0===w?void 0:w.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var w;this.disposed=!1,this.currentPageId=0,this.console=(0,_.f3M)(_.c2e),this.isNgZoneEnabled=!1,this.options=(0,_.f3M)(Ji,{optional:!0})||{},this.errorHandler=this.options.errorHandler||dr,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||lc,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,_.f3M)(mi),this.routeReuseStrategy=(0,_.f3M)(Js),this.urlCreationStrategy=(0,_.f3M)(Ss),this.titleStrategy=(0,_.f3M)(Wi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Cr(null!==(w=(0,_.f3M)(Ls,{optional:!0}))&&void 0!==w?w:[]),this.navigationTransitions=(0,_.f3M)(qo),this.urlSerializer=(0,_.f3M)(Ze),this.location=(0,_.f3M)(He.Ye),this.isNgZoneEnabled=(0,_.f3M)(_.R0b)instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ur,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Da(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(O=>{var z;this.lastSuccessfulId=O.id,this.currentPageId=null!==(z=this.browserPageId)&&void 0!==z?z:0},O=>{this.console.warn(`Unhandled Navigation Error: ${O}`)})}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const w=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Qe,w)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const O="popstate"===w.type?"popstate":"hashchange";"popstate"===O&&setTimeout(()=>{this.navigateToSyncWithBrowser(w.url,O,w.state)},0)}))}navigateToSyncWithBrowser(w,O,z){const re={replaceUrl:!0},ae=null!=z&&z.navigationId?z:null;if(z){const Ut={...z};delete Ut.navigationId,delete Ut.\u0275routerPageId,0!==Object.keys(Ut).length&&(re.state=Ut)}const at=this.parseUrl(w);this.scheduleNavigation(at,O,ae,re)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(w){this.config=w.map(Do),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,O={}){const{relativeTo:z,queryParams:re,fragment:ae,queryParamsHandling:at,preserveFragment:Ut}=O,En=Ut?this.currentUrlTree.fragment:ae;let Hn=null;switch(at){case"merge":Hn={...this.currentUrlTree.queryParams,...re};break;case"preserve":Hn=this.currentUrlTree.queryParams;break;default:Hn=re||null}return null!==Hn&&(Hn=this.removeEmptyProps(Hn)),this.urlCreationStrategy.createUrlTree(z,this.routerState,this.currentUrlTree,w,Hn,null!=En?En:null)}navigateByUrl(w,O={skipLocationChange:!1}){const z=pn(w)?w:this.parseUrl(w),re=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(re,Qe,null,O)}navigate(w,O={skipLocationChange:!1}){return function si(S){for(let x=0;x<S.length;x++){const w=S[x];if(null==w)throw new _.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,O),O)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let O;try{O=this.urlSerializer.parse(w)}catch(z){O=this.malformedUriErrorHandler(z,this.urlSerializer,w)}return O}isActive(w,O){let z;if(z=!0===O?{...jn}:!1===O?{...Ht}:O,pn(w))return Jr(this.currentUrlTree,w,z);const re=this.parseUrl(w);return Jr(this.currentUrlTree,re,z)}removeEmptyProps(w){return Object.keys(w).reduce((O,z)=>{const re=w[z];return null!=re&&(O[z]=re),O},{})}scheduleNavigation(w,O,z,re,ae){if(this.disposed)return Promise.resolve(!1);let at,Ut,En,Hn;if(ae?(at=ae.resolve,Ut=ae.reject,En=ae.promise):En=new Promise((Ii,rs)=>{at=Ii,Ut=rs}),"computed"===this.canceledNavigationResolution)if(z&&z.\u0275routerPageId)Hn=z.\u0275routerPageId;else{var $n;Hn=(null!==($n=this.browserPageId)&&void 0!==$n?$n:0)+1}else Hn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Hn,source:O,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:re,resolve:at,reject:Ut,promise:En,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),En.catch(Ii=>Promise.reject(Ii))}setBrowserUrl(w,O){const z=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(z)||O.extras.replaceUrl){const ae={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId)};this.location.replaceState(z,"",ae)}else{const re={...O.extras.state,...this.generateNgRouterState(O.id,O.targetPageId)};this.location.go(z,"",re)}}restoreHistory(w,O=!1){if("computed"===this.canceledNavigationResolution){var z,re;const ae=null!==(z=this.browserPageId)&&void 0!==z?z:this.currentPageId,at=this.currentPageId-ae;0!==at?this.location.historyGo(at):this.currentUrlTree===(null===(re=this.getCurrentNavigation())||void 0===re?void 0:re.finalUrl)&&0===at&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,O){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:O}:{navigationId:w}}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),il=(()=>{class S{constructor(w,O,z,re,ae,at){var Ut;this.router=w,this.route=O,this.tabIndexAttribute=z,this.renderer=re,this.el=ae,this.locationStrategy=at,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new De.x;const En=null===(Ut=ae.nativeElement.tagName)||void 0===Ut?void 0:Ut.toLowerCase();this.isAnchorElement="a"===En||"area"===En,this.isAnchorElement?this.subscription=w.events.subscribe(Hn=>{Hn instanceof Qt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,_.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,_.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,_.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,O,z,re,ae){return!!(null===this.urlTree||this.isAnchorElement&&(0!==w||O||z||re||ae||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var w;null===(w=this.subscription)||void 0===w||w.unsubscribe()}updateHref(){var w;this.href=null!==this.urlTree&&this.locationStrategy?null===(w=this.locationStrategy)||void 0===w?void 0:w.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const O=null===this.href?null:(0,_.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",O)}applyAttributeValue(w,O){const z=this.renderer,re=this.el.nativeElement;null!==O?z.setAttribute(re,w,O):z.removeAttribute(re,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(w){return new(w||S)(_.Y36(hn),_.Y36(As),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(He.S$))},S.\u0275dir=_.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(w,O){1&w&&_.NdJ("click",function(re){return O.onClick(re.button,re.ctrlKey,re.shiftKey,re.altKey,re.metaKey)}),2&w&&_.uIk("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[_.TTD]}),S})();class Ra{}let $o=(()=>{class S{constructor(w,O,z,re,ae){this.router=w,this.injector=z,this.preloadingStrategy=re,this.loader=ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,yt.h)(w=>w instanceof Qt),(0,Be.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,O){const z=[];for(const Ut of O){var re,ae;Ut.providers&&!Ut._injector&&(Ut._injector=(0,_.MMx)(Ut.providers,w,`Route: ${Ut.path}`));const En=null!==(re=Ut._injector)&&void 0!==re?re:w,Hn=null!==(ae=Ut._loadedInjector)&&void 0!==ae?ae:En;var at;(Ut.loadChildren&&!Ut._loadedRoutes&&void 0===Ut.canLoad||Ut.loadComponent&&!Ut._loadedComponent)&&z.push(this.preloadConfig(En,Ut)),(Ut.children||Ut._loadedRoutes)&&z.push(this.processRoutes(Hn,null!==(at=Ut.children)&&void 0!==at?at:Ut._loadedRoutes))}return(0,y.D)(z).pipe((0,Yn.J)())}preloadConfig(w,O){return this.preloadingStrategy.preload(O,()=>{let z;z=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(w,O):(0,ee.of)(null);const re=z.pipe((0,Fe.z)(ae=>{var at;return null===ae?(0,ee.of)(void 0):(O._loadedRoutes=ae.routes,O._loadedInjector=ae.injector,this.processRoutes(null!==(at=ae.injector)&&void 0!==at?at:w,ae.routes))}));if(O.loadComponent&&!O._loadedComponent){const ae=this.loader.loadComponent(O);return(0,y.D)([re,ae]).pipe((0,Yn.J)())}return re})}}return S.\u0275fac=function(w){return new(w||S)(_.LFG(hn),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(Ra),_.LFG(Qs))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Il=new _.OlP("");let Mc=(()=>{class S{constructor(w,O,z,re,ae={}){this.urlSerializer=w,this.transitions=O,this.viewportScroller=z,this.zone=re,this.options=ae,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ae.scrollPositionRestoration=ae.scrollPositionRestoration||"disabled",ae.anchorScrolling=ae.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Lt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Qt&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Ir&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,O){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ir(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))})},0)})}ngOnDestroy(){var w,O;null===(w=this.routerEventsSubscription)||void 0===w||w.unsubscribe(),null===(O=this.scrollEventsSubscription)||void 0===O||O.unsubscribe()}}return S.\u0275fac=function(w){_.$Z()},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})();var eo=(()=>((eo=eo||{})[eo.COMPLETE=0]="COMPLETE",eo[eo.FAILED=1]="FAILED",eo[eo.REDIRECTING=2]="REDIRECTING",eo))();const pr=!1;function aa(S,...x){return(0,_.MR2)([{provide:Ls,multi:!0,useValue:S},pr?{provide:sr,useValue:!0}:[],{provide:As,useFactory:Yc,deps:[hn]},{provide:_.tb,multi:!0,useFactory:fs},x.map(w=>w.\u0275providers)])}function Yc(S){return S.routerState.root}function ci(S,x){return{\u0275kind:S,\u0275providers:x}}const sr=new _.OlP("",{providedIn:"root",factory:()=>!1});function fs(){const S=(0,_.f3M)(_.zs3);return x=>{var w,O;const z=S.get(_.z2F);if(x!==z.components[0])return;const re=S.get(hn),ae=S.get(Ln);1===S.get(zl)&&re.initialNavigation(),null===(w=S.get(dc,null,_.XFs.Optional))||void 0===w||w.setUpPreloading(),null===(O=S.get(Il,null,_.XFs.Optional))||void 0===O||O.init(),re.resetRootComponentType(z.componentTypes[0]),ae.closed||(ae.next(),ae.complete(),ae.unsubscribe())}}const Ln=new _.OlP(pr?"bootstrap done indicator":"",{factory:()=>new De.x}),zl=new _.OlP(pr?"initial navigation":"",{providedIn:"root",factory:()=>1});function Zc(){let S=[];return S=pr?[{provide:_.Xts,multi:!0,useFactory:()=>{const x=(0,_.f3M)(hn);return()=>x.events.subscribe(w=>{var O,z,re,ae;null===(O=(z=console).group)||void 0===O||O.call(z,`Router Event: ${w.constructor.name}`),console.log(function ei(S){var x,w,O,z;if(!("type"in S))return`Unknown Router Event: ${S.constructor.name}`;switch(S.type){case 14:return`ActivationEnd(path: '${(null===(x=S.snapshot.routeConfig)||void 0===x?void 0:x.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(w=S.snapshot.routeConfig)||void 0===w?void 0:w.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(O=S.snapshot.routeConfig)||void 0===O?void 0:O.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(z=S.snapshot.routeConfig)||void 0===z?void 0:z.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state}, shouldActivate: ${S.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 2:return`NavigationCancel(id: ${S.id}, url: '${S.url}')`;case 16:return`NavigationSkipped(id: ${S.id}, url: '${S.url}')`;case 1:return`NavigationEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${S.id}, url: '${S.url}', error: ${S.error})`;case 0:return`NavigationStart(id: ${S.id}, url: '${S.url}')`;case 6:return`ResolveEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 5:return`ResolveStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 10:return`RouteConfigLoadEnd(path: ${S.route.path})`;case 9:return`RouteConfigLoadStart(path: ${S.route.path})`;case 4:return`RoutesRecognized(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 15:return`Scroll(anchor: '${S.anchor}', position: '${S.position?`${S.position[0]}, ${S.position[1]}`:null}')`}}(w)),console.log(w),null===(re=(ae=console).groupEnd)||void 0===re||re.call(ae)})}}]:[],ci(1,S)}const dc=new _.OlP(pr?"router preloader":"");function Cl(S){return ci(0,[{provide:dc,useExisting:$o},{provide:Ra,useExisting:S}])}const es=!1,Gl=new _.OlP(es?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),qr=[He.Ye,{provide:Ze,useClass:rt},hn,ta,{provide:As,useFactory:Yc,deps:[hn]},Qs,es?{provide:sr,useValue:!0}:[]];function Rr(){return new _.PXZ("Router",hn)}let Yr=(()=>{class S{constructor(w){}static forRoot(w,O){return{ngModule:S,providers:[qr,es&&null!=O&&O.enableTracing?Zc().\u0275providers:[],{provide:Ls,multi:!0,useValue:w},{provide:Gl,useFactory:_u,deps:[[hn,new _.FiY,new _.tp0]]},{provide:Ji,useValue:O||{}},null!=O&&O.useHash?{provide:He.S$,useClass:He.Do}:{provide:He.S$,useClass:He.b0},{provide:Il,useFactory:()=>{const S=(0,_.f3M)(He.EM),x=(0,_.f3M)(_.R0b),w=(0,_.f3M)(Ji),O=(0,_.f3M)(qo),z=(0,_.f3M)(Ze);return w.scrollOffset&&S.setOffset(w.scrollOffset),new Mc(z,O,S,x,w)}},null!=O&&O.preloadingStrategy?Cl(O.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:Rr},null!=O&&O.initialNavigation?la(O):[],[{provide:Yo,useFactory:fs},{provide:_.tb,multi:!0,useExisting:Yo}]]}}static forChild(w){return{ngModule:S,providers:[{provide:Ls,multi:!0,useValue:w}]}}}return S.\u0275fac=function(w){return new(w||S)(_.LFG(Gl,8))},S.\u0275mod=_.oAB({type:S}),S.\u0275inj=_.cJS({imports:[Zi]}),S})();function _u(S){if(es&&S)throw new _.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function la(S){return["disabled"===S.initialNavigation?ci(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const x=(0,_.f3M)(hn);return()=>{x.setUpLocationChangeListener()}}},{provide:zl,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?ci(2,[{provide:zl,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:x=>{const w=x.get(He.V_,Promise.resolve());return()=>w.then(()=>new Promise(O=>{const z=x.get(hn),re=x.get(Ln);(function ma(S,x){S.events.pipe((0,yt.h)(w=>w instanceof Qt||w instanceof an||w instanceof rr||w instanceof vn),(0,pt.U)(w=>w instanceof Qt||w instanceof vn?eo.COMPLETE:w instanceof an&&(0===w.code||1===w.code)?eo.REDIRECTING:eo.FAILED),(0,yt.h)(w=>w!==eo.REDIRECTING),(0,dt.q)(1)).subscribe(()=>{x()})})(z,()=>{O(!0)}),x.get(qo).afterPreactivation=()=>(O(!0),re.closed?(0,ee.of)(void 0):re),z.initialNavigation()}))}}]).\u0275providers:[]]}const Yo=new _.OlP(es?"Router Initializer":"")},3942:(In,Et,j)=>{"use strict";j.d(Et,{Z:()=>Je});var _=j(2090),y=j(4859),ee=j(6881),le=j(1877);class $e{constructor(Se,xe){this._delegate=Se,this.firebase=xe,(0,ee._addComponent)(Se,new y.wA("app-compat",()=>this,"PUBLIC")),this.container=Se.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this._delegate.automaticDataCollectionEnabled=Se}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Se=>{this._delegate.checkDestroyed(),Se()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(Se,xe=ee._DEFAULT_ENTRY_NAME){var ue;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(Se);return!_t.isInitialized()&&"EXPLICIT"===(null===(ue=_t.getComponent())||void 0===ue?void 0:ue.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:xe})}_removeServiceInstance(Se,xe=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Se).clearInstance(xe)}_addComponent(Se){(0,ee._addComponent)(this._delegate,Se)}_addOrOverwriteComponent(Se){(0,ee._addOrOverwriteComponent)(this._delegate,Se)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ee=function Ge(){const wt=function Ue(wt){const Se={},xe={__esModule:!0,initializeApp:function Y(Ve,ke={}){const Ne=ee.initializeApp(Ve,ke);if((0,_.r3)(Se,Ne.name))return Se[Ne.name];const De=new wt(Ne,xe);return Se[Ne.name]=De,De},app:_t,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function tt(Ve){const ke=Ve.name,Ne=ke.replace("-compat","");if(ee._registerComponent(Ve)&&"PUBLIC"===Ve.type){const De=(He=_t())=>{if("function"!=typeof He[Ne])throw ve.create("invalid-app-argument",{appName:ke});return He[Ne]()};void 0!==Ve.serviceProps&&(0,_.ZB)(De,Ve.serviceProps),xe[Ne]=De,wt.prototype[Ne]=function(...He){return this._getService.bind(this,ke).apply(this,Ve.multipleInstances?He:[])}}return"PUBLIC"===Ve.type?xe[Ne]:null},removeApp:function ue(Ve){delete Se[Ve]},useAsService:function Pt(Ve,ke){return"serverAuth"===ke?null:ke},modularAPIs:ee}};function _t(Ve){if(!(0,_.r3)(Se,Ve=Ve||ee._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:Ve});return Se[Ve]}return xe.default=xe,Object.defineProperty(xe,"apps",{get:function it(){return Object.keys(Se).map(Ve=>Se[Ve])}}),_t.App=wt,xe}($e);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:Ge,extendNamespace:function Se(xe){(0,_.ZB)(wt,xe)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),wt}(),de=new le.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=Ee;!function Oe(wt){(0,ee.registerVersion)("@firebase/app-compat","0.2.9",wt)}()},6881:(In,Et,j)=>{"use strict";j.r(Et),j.d(Et,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>gi,_DEFAULT_ENTRY_NAME:()=>di,_addComponent:()=>ln,_addOrOverwriteComponent:()=>yn,_apps:()=>Gn,_clearComponents:()=>Qr,_components:()=>qn,_getProvider:()=>Jr,_registerComponent:()=>on,_removeServiceInstance:()=>Dr,deleteApp:()=>Ai,getApp:()=>lr,getApps:()=>yr,initializeApp:()=>ur,onLog:()=>Ze,registerVersion:()=>Kt,setLogLevel:()=>rt});var _=j(5861),y=j(4859),ee=j(1877),le=j(2090);const $e=(Xe,ze)=>ze.some(bt=>Xe instanceof bt);let Ae,ve;const Ee=new WeakMap,de=new WeakMap,ye=new WeakMap,We=new WeakMap,Oe=new WeakMap;let Se={get(Xe,ze,bt){if(Xe instanceof IDBTransaction){if("done"===ze)return de.get(Xe);if("objectStoreNames"===ze)return Xe.objectStoreNames||ye.get(Xe);if("store"===ze)return bt.objectStoreNames[1]?void 0:bt.objectStore(bt.objectStoreNames[0])}return Y(Xe[ze])},set:(Xe,ze,bt)=>(Xe[ze]=bt,!0),has:(Xe,ze)=>Xe instanceof IDBTransaction&&("done"===ze||"store"===ze)||ze in Xe};function _t(Xe){return"function"==typeof Xe?function ue(Xe){return Xe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ge(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Xe)?function(...ze){return Xe.apply(it(this),ze),Y(Ee.get(this))}:function(...ze){return Y(Xe.apply(it(this),ze))}:function(ze,...bt){const Gt=Xe.call(it(this),ze,...bt);return ye.set(Gt,ze.sort?ze.sort():[ze]),Y(Gt)}}(Xe):(Xe instanceof IDBTransaction&&function wt(Xe){if(de.has(Xe))return;const ze=new Promise((bt,Gt)=>{const pn=()=>{Xe.removeEventListener("complete",kn),Xe.removeEventListener("error",wn),Xe.removeEventListener("abort",wn)},kn=()=>{bt(),pn()},wn=()=>{Gt(Xe.error||new DOMException("AbortError","AbortError")),pn()};Xe.addEventListener("complete",kn),Xe.addEventListener("error",wn),Xe.addEventListener("abort",wn)});de.set(Xe,ze)}(Xe),$e(Xe,function Ue(){return Ae||(Ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Xe,Se):Xe)}function Y(Xe){if(Xe instanceof IDBRequest)return function Je(Xe){const ze=new Promise((bt,Gt)=>{const pn=()=>{Xe.removeEventListener("success",kn),Xe.removeEventListener("error",wn)},kn=()=>{bt(Y(Xe.result)),pn()},wn=()=>{Gt(Xe.error),pn()};Xe.addEventListener("success",kn),Xe.addEventListener("error",wn)});return ze.then(bt=>{bt instanceof IDBCursor&&Ee.set(bt,Xe)}).catch(()=>{}),Oe.set(ze,Xe),ze}(Xe);if(We.has(Xe))return We.get(Xe);const ze=_t(Xe);return ze!==Xe&&(We.set(Xe,ze),Oe.set(ze,Xe)),ze}const it=Xe=>Oe.get(Xe),Ve=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],Ne=new Map;function De(Xe,ze){if(!(Xe instanceof IDBDatabase)||ze in Xe||"string"!=typeof ze)return;if(Ne.get(ze))return Ne.get(ze);const bt=ze.replace(/FromIndex$/,""),Gt=ze!==bt,pn=ke.includes(bt);if(!(bt in(Gt?IDBIndex:IDBObjectStore).prototype)||!pn&&!Ve.includes(bt))return;const kn=function(){var wn=(0,_.Z)(function*(Qn,...Jn){const Wn=this.transaction(Qn,pn?"readwrite":"readonly");let Xn=Wn.store;return Gt&&(Xn=Xn.index(Jn.shift())),(yield Promise.all([Xn[bt](...Jn),pn&&Wn.done]))[0]});return function(Jn){return wn.apply(this,arguments)}}();return Ne.set(ze,kn),kn}!function xe(Xe){Se=Xe(Se)}(Xe=>({...Xe,get:(ze,bt,Gt)=>De(ze,bt)||Xe.get(ze,bt,Gt),has:(ze,bt)=>!!De(ze,bt)||Xe.has(ze,bt)}));class He{constructor(ze){this.container=ze}getPlatformInfoString(){return this.container.getProviders().map(bt=>{if(function pt(Xe){const ze=Xe.getComponent();return"VERSION"===(null==ze?void 0:ze.type)}(bt)){const Gt=bt.getImmediate();return`${Gt.library}/${Gt.version}`}return null}).filter(bt=>bt).join(" ")}}const Tt="@firebase/app",Mt=new ee.Yd("@firebase/app"),di="[DEFAULT]",wi={[Tt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gn=new Map,qn=new Map;function ln(Xe,ze){try{Xe.container.addComponent(ze)}catch(bt){Mt.debug(`Component ${ze.name} failed to register with FirebaseApp ${Xe.name}`,bt)}}function yn(Xe,ze){Xe.container.addOrOverwriteComponent(ze)}function on(Xe){const ze=Xe.name;if(qn.has(ze))return Mt.debug(`There were multiple attempts to register component ${ze}.`),!1;qn.set(ze,Xe);for(const bt of Gn.values())ln(bt,Xe);return!0}function Jr(Xe,ze){const bt=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return bt&&bt.triggerHeartbeat(),Xe.container.getProvider(ze)}function Dr(Xe,ze,bt=di){Jr(Xe,ze).clearInstance(bt)}function Qr(){qn.clear()}const pi=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Lr{constructor(ze,bt,Gt){this._isDeleted=!1,this._options=Object.assign({},ze),this._config=Object.assign({},bt),this._name=bt.name,this._automaticDataCollectionEnabled=bt.automaticDataCollectionEnabled,this._container=Gt,this.container.addComponent(new y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ze){this._isDeleted=ze}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}const gi="9.21.0";function ur(Xe,ze={}){let bt=Xe;"object"!=typeof ze&&(ze={name:ze});const Gt=Object.assign({name:di,automaticDataCollectionEnabled:!1},ze),pn=Gt.name;if("string"!=typeof pn||!pn)throw pi.create("bad-app-name",{appName:String(pn)});if(bt||(bt=(0,le.aH)()),!bt)throw pi.create("no-options");const kn=Gn.get(pn);if(kn){if((0,le.vZ)(bt,kn.options)&&(0,le.vZ)(Gt,kn.config))return kn;throw pi.create("duplicate-app",{appName:pn})}const wn=new y.H0(pn);for(const Jn of qn.values())wn.addComponent(Jn);const Qn=new Lr(bt,Gt,wn);return Gn.set(pn,Qn),Qn}function lr(Xe=di){const ze=Gn.get(Xe);if(!ze&&Xe===di)return ur();if(!ze)throw pi.create("no-app",{appName:Xe});return ze}function yr(){return Array.from(Gn.values())}function Ai(Xe){return mr.apply(this,arguments)}function mr(){return(mr=(0,_.Z)(function*(Xe){const ze=Xe.name;Gn.has(ze)&&(Gn.delete(ze),yield Promise.all(Xe.container.getProviders().map(bt=>bt.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function Kt(Xe,ze,bt){var Gt;let pn=null!==(Gt=wi[Xe])&&void 0!==Gt?Gt:Xe;bt&&(pn+=`-${bt}`);const kn=pn.match(/\s|\//),wn=ze.match(/\s|\//);if(kn||wn){const Qn=[`Unable to register library "${pn}" with version "${ze}":`];return kn&&Qn.push(`library name "${pn}" contains illegal characters (whitespace or "/")`),kn&&wn&&Qn.push("and"),wn&&Qn.push(`version name "${ze}" contains illegal characters (whitespace or "/")`),void Mt.warn(Qn.join(" "))}on(new y.wA(`${pn}-version`,()=>({library:pn,version:ze}),"VERSION"))}function Ze(Xe,ze){if(null!==Xe&&"function"!=typeof Xe)throw pi.create("invalid-log-argument");(0,ee.Am)(Xe,ze)}function rt(Xe){(0,ee.Ub)(Xe)}const Jt="firebase-heartbeat-database",qt=1,we="firebase-heartbeat-store";let Ie=null;function Ye(){return Ie||(Ie=function tt(Xe,ze,{blocked:bt,upgrade:Gt,blocking:pn,terminated:kn}={}){const wn=indexedDB.open(Xe,ze),Qn=Y(wn);return Gt&&wn.addEventListener("upgradeneeded",Jn=>{Gt(Y(wn.result),Jn.oldVersion,Jn.newVersion,Y(wn.transaction),Jn)}),bt&&wn.addEventListener("blocked",Jn=>bt(Jn.oldVersion,Jn.newVersion,Jn)),Qn.then(Jn=>{kn&&Jn.addEventListener("close",()=>kn()),pn&&Jn.addEventListener("versionchange",Wn=>pn(Wn.oldVersion,Wn.newVersion,Wn))}).catch(()=>{}),Qn}(Jt,qt,{upgrade:(Xe,ze)=>{0===ze&&Xe.createObjectStore(we)}}).catch(Xe=>{throw pi.create("idb-open",{originalErrorMessage:Xe.message})})),Ie}function lt(){return(lt=(0,_.Z)(function*(Xe){try{return(yield Ye()).transaction(we).objectStore(we).get(Ke(Xe))}catch(ze){if(ze instanceof le.ZR)Mt.warn(ze.message);else{const bt=pi.create("idb-get",{originalErrorMessage:null==ze?void 0:ze.message});Mt.warn(bt.message)}}})).apply(this,arguments)}function un(Xe,ze){return ut.apply(this,arguments)}function ut(){return(ut=(0,_.Z)(function*(Xe,ze){try{const Gt=(yield Ye()).transaction(we,"readwrite");return yield Gt.objectStore(we).put(ze,Ke(Xe)),Gt.done}catch(bt){if(bt instanceof le.ZR)Mt.warn(bt.message);else{const Gt=pi.create("idb-set",{originalErrorMessage:null==bt?void 0:bt.message});Mt.warn(Gt.message)}}})).apply(this,arguments)}function Ke(Xe){return`${Xe.name}!${Xe.options.appId}`}class Nt{constructor(ze){this.container=ze,this._heartbeatsCache=null;const bt=this.container.getProvider("app").getImmediate();this._storage=new St(bt),this._heartbeatsCachePromise=this._storage.read().then(Gt=>(this._heartbeatsCache=Gt,Gt))}triggerHeartbeat(){var ze=this;return(0,_.Z)(function*(){const Gt=ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pn=he();if(null===ze._heartbeatsCache&&(ze._heartbeatsCache=yield ze._heartbeatsCachePromise),ze._heartbeatsCache.lastSentHeartbeatDate!==pn&&!ze._heartbeatsCache.heartbeats.some(kn=>kn.date===pn))return ze._heartbeatsCache.heartbeats.push({date:pn,agent:Gt}),ze._heartbeatsCache.heartbeats=ze._heartbeatsCache.heartbeats.filter(kn=>{const wn=new Date(kn.date).valueOf();return Date.now()-wn<=2592e6}),ze._storage.overwrite(ze._heartbeatsCache)})()}getHeartbeatsHeader(){var ze=this;return(0,_.Z)(function*(){if(null===ze._heartbeatsCache&&(yield ze._heartbeatsCachePromise),null===ze._heartbeatsCache||0===ze._heartbeatsCache.heartbeats.length)return"";const bt=he(),{heartbeatsToSend:Gt,unsentEntries:pn}=function Ce(Xe,ze=1024){const bt=[];let Gt=Xe.slice();for(const pn of Xe){const kn=bt.find(wn=>wn.agent===pn.agent);if(kn){if(kn.dates.push(pn.date),It(bt)>ze){kn.dates.pop();break}}else if(bt.push({agent:pn.agent,dates:[pn.date]}),It(bt)>ze){bt.pop();break}Gt=Gt.slice(1)}return{heartbeatsToSend:bt,unsentEntries:Gt}}(ze._heartbeatsCache.heartbeats),kn=(0,le.L)(JSON.stringify({version:2,heartbeats:Gt}));return ze._heartbeatsCache.lastSentHeartbeatDate=bt,pn.length>0?(ze._heartbeatsCache.heartbeats=pn,yield ze._storage.overwrite(ze._heartbeatsCache)):(ze._heartbeatsCache.heartbeats=[],ze._storage.overwrite(ze._heartbeatsCache)),kn})()}}function he(){return(new Date).toISOString().substring(0,10)}class St{constructor(ze){this.app=ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ze=this;return(0,_.Z)(function*(){return(yield ze._canUseIndexedDBPromise)&&(yield function Ot(Xe){return lt.apply(this,arguments)}(ze.app))||{heartbeats:[]}})()}overwrite(ze){var bt=this;return(0,_.Z)(function*(){var Gt;if(yield bt._canUseIndexedDBPromise){const kn=yield bt.read();return un(bt.app,{lastSentHeartbeatDate:null!==(Gt=ze.lastSentHeartbeatDate)&&void 0!==Gt?Gt:kn.lastSentHeartbeatDate,heartbeats:ze.heartbeats})}})()}add(ze){var bt=this;return(0,_.Z)(function*(){var Gt;if(yield bt._canUseIndexedDBPromise){const kn=yield bt.read();return un(bt.app,{lastSentHeartbeatDate:null!==(Gt=ze.lastSentHeartbeatDate)&&void 0!==Gt?Gt:kn.lastSentHeartbeatDate,heartbeats:[...kn.heartbeats,...ze.heartbeats]})}})()}}function It(Xe){return(0,le.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function Xt(Xe){on(new y.wA("platform-logger",ze=>new He(ze),"PRIVATE")),on(new y.wA("heartbeat",ze=>new Nt(ze),"PRIVATE")),Kt(Tt,"0.9.9",Xe),Kt(Tt,"0.9.9","esm2017"),Kt("fire-js","")}("")},4859:(In,Et,j)=>{"use strict";j.d(Et,{H0:()=>Ue,wA:()=>ee,zt:()=>$e});var _=j(5861),y=j(2090);class ee{constructor(Ee,de,ye){this.name=Ee,this.instanceFactory=de,this.type=ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ee){return this.instantiationMode=Ee,this}setMultipleInstances(Ee){return this.multipleInstances=Ee,this}setServiceProps(Ee){return this.serviceProps=Ee,this}setInstanceCreatedCallback(Ee){return this.onInstanceCreated=Ee,this}}const le="[DEFAULT]";class $e{constructor(Ee,de){this.name=Ee,this.container=de,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ee){const de=this.normalizeInstanceIdentifier(Ee);if(!this.instancesDeferred.has(de)){const ye=new y.BH;if(this.instancesDeferred.set(de,ye),this.isInitialized(de)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:de});We&&ye.resolve(We)}catch{}}return this.instancesDeferred.get(de).promise}getImmediate(Ee){var de;const ye=this.normalizeInstanceIdentifier(null==Ee?void 0:Ee.identifier),We=null!==(de=null==Ee?void 0:Ee.optional)&&void 0!==de&&de;if(!this.isInitialized(ye)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ye})}catch(Oe){if(We)return null;throw Oe}}getComponent(){return this.component}setComponent(Ee){if(Ee.name!==this.name)throw Error(`Mismatching Component ${Ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ee,this.shouldAutoInitialize()){if(function ve(Ge){return"EAGER"===Ge.instantiationMode}(Ee))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[de,ye]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(de);try{const Oe=this.getOrInitializeService({instanceIdentifier:We});ye.resolve(Oe)}catch{}}}}clearInstance(Ee=le){this.instancesDeferred.delete(Ee),this.instancesOptions.delete(Ee),this.instances.delete(Ee)}delete(){var Ee=this;return(0,_.Z)(function*(){const de=Array.from(Ee.instances.values());yield Promise.all([...de.filter(ye=>"INTERNAL"in ye).map(ye=>ye.INTERNAL.delete()),...de.filter(ye=>"_delete"in ye).map(ye=>ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ee=le){return this.instances.has(Ee)}getOptions(Ee=le){return this.instancesOptions.get(Ee)||{}}initialize(Ee={}){const{options:de={}}=Ee,ye=this.normalizeInstanceIdentifier(Ee.instanceIdentifier);if(this.isInitialized(ye))throw Error(`${this.name}(${ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:ye,options:de});for(const[Oe,Je]of this.instancesDeferred.entries())ye===this.normalizeInstanceIdentifier(Oe)&&Je.resolve(We);return We}onInit(Ee,de){var ye;const We=this.normalizeInstanceIdentifier(de),Oe=null!==(ye=this.onInitCallbacks.get(We))&&void 0!==ye?ye:new Set;Oe.add(Ee),this.onInitCallbacks.set(We,Oe);const Je=this.instances.get(We);return Je&&Ee(Je,We),()=>{Oe.delete(Ee)}}invokeOnInitCallbacks(Ee,de){const ye=this.onInitCallbacks.get(de);if(ye)for(const We of ye)try{We(Ee,de)}catch{}}getOrInitializeService({instanceIdentifier:Ee,options:de={}}){let ye=this.instances.get(Ee);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:(Ge=Ee,Ge===le?void 0:Ge),options:de}),this.instances.set(Ee,ye),this.instancesOptions.set(Ee,de),this.invokeOnInitCallbacks(ye,Ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ee,ye)}catch{}var Ge;return ye||null}normalizeInstanceIdentifier(Ee=le){return this.component?this.component.multipleInstances?Ee:le:Ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ue{constructor(Ee){this.name=Ee,this.providers=new Map}addComponent(Ee){const de=this.getProvider(Ee.name);if(de.isComponentSet())throw new Error(`Component ${Ee.name} has already been registered with ${this.name}`);de.setComponent(Ee)}addOrOverwriteComponent(Ee){this.getProvider(Ee.name).isComponentSet()&&this.providers.delete(Ee.name),this.addComponent(Ee)}getProvider(Ee){if(this.providers.has(Ee))return this.providers.get(Ee);const de=new $e(Ee,this);return this.providers.set(Ee,de),de}getProviders(){return Array.from(this.providers.values())}}},1877:(In,Et,j)=>{"use strict";j.d(Et,{Am:()=>Ge,Ub:()=>Ue,Yd:()=>ve,in:()=>y});const _=[];var y=(()=>{return(Ee=y||(y={}))[Ee.DEBUG=0]="DEBUG",Ee[Ee.VERBOSE=1]="VERBOSE",Ee[Ee.INFO=2]="INFO",Ee[Ee.WARN=3]="WARN",Ee[Ee.ERROR=4]="ERROR",Ee[Ee.SILENT=5]="SILENT",y;var Ee})();const ee={debug:y.DEBUG,verbose:y.VERBOSE,info:y.INFO,warn:y.WARN,error:y.ERROR,silent:y.SILENT},le=y.INFO,$e={[y.DEBUG]:"log",[y.VERBOSE]:"log",[y.INFO]:"info",[y.WARN]:"warn",[y.ERROR]:"error"},Ae=(Ee,de,...ye)=>{if(de<Ee.logLevel)return;const We=(new Date).toISOString(),Oe=$e[de];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${de})`);console[Oe](`[${We}]  ${Ee.name}:`,...ye)};class ve{constructor(de){this.name=de,this._logLevel=le,this._logHandler=Ae,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(de){if(!(de in y))throw new TypeError(`Invalid value "${de}" assigned to \`logLevel\``);this._logLevel=de}setLogLevel(de){this._logLevel="string"==typeof de?ee[de]:de}get logHandler(){return this._logHandler}set logHandler(de){if("function"!=typeof de)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=de}get userLogHandler(){return this._userLogHandler}set userLogHandler(de){this._userLogHandler=de}debug(...de){this._userLogHandler&&this._userLogHandler(this,y.DEBUG,...de),this._logHandler(this,y.DEBUG,...de)}log(...de){this._userLogHandler&&this._userLogHandler(this,y.VERBOSE,...de),this._logHandler(this,y.VERBOSE,...de)}info(...de){this._userLogHandler&&this._userLogHandler(this,y.INFO,...de),this._logHandler(this,y.INFO,...de)}warn(...de){this._userLogHandler&&this._userLogHandler(this,y.WARN,...de),this._logHandler(this,y.WARN,...de)}error(...de){this._userLogHandler&&this._userLogHandler(this,y.ERROR,...de),this._logHandler(this,y.ERROR,...de)}}function Ue(Ee){_.forEach(de=>{de.setLogLevel(Ee)})}function Ge(Ee,de){for(const ye of _){let We=null;de&&de.level&&(We=ee[de.level]),ye.userLogHandler=null===Ee?null:(Oe,Je,...wt)=>{const Se=wt.map(xe=>{if(null==xe)return null;if("string"==typeof xe)return xe;if("number"==typeof xe||"boolean"==typeof xe)return xe.toString();if(xe instanceof Error)return xe.message;try{return JSON.stringify(xe)}catch{return null}}).filter(xe=>xe).join(" ");Je>=(null!=We?We:Oe.logLevel)&&Ee({level:y[Je].toLowerCase(),message:Se,args:wt,type:Oe.name})}}}},650:(In,Et,j)=>{"use strict";j.d(Et,{Br:()=>go,dr:()=>pi,oU:()=>gi,cs:()=>No,YG:()=>mr,Sm:()=>Kt,PM:()=>Ze,FN:()=>rt,Zi:()=>Jt,tO:()=>qt,Dq:()=>we,hM:()=>Ye,W2:()=>lt,x4:()=>un,IJ:()=>Ke,W4:()=>_e,zq:()=>gt,jY:()=>he,Gu:()=>Ce,gu:()=>St,Xz:()=>It,ju:()=>Xt,MB:()=>Xe,pK:()=>ze,Ie:()=>bt,Q$:()=>Jn,q_:()=>Wn,ki:()=>Zi,I_:()=>Ur,nJ:()=>se,Wo:()=>be,jP:()=>fo,Nd:()=>Qe,VI:()=>Vt,cJ:()=>Lt,GO:()=>Qt,PQ:()=>er,g2:()=>ot,wd:()=>tn,sr:()=>Er,Pc:()=>sa,r4:()=>ia,SH:()=>Hi,YI:()=>xs,QI:()=>di,j9:()=>wi,yF:()=>Do});var _=j(5861),y=j(4650),ee=j(433),le=j(655),$e=j(8421),Ae=j(9751),ve=j(5577),Ue=j(1144),Ge=j(576),Ee=j(3268);const de=["addListener","removeListener"],ye=["addEventListener","removeEventListener"],We=["on","off"];function Oe(b,q,T,W){if((0,Ge.m)(T)&&(W=T,T=void 0),W)return Oe(b,q,T).pipe((0,Ee.Z)(W));const[ge,M]=function xe(b){return(0,Ge.m)(b.addEventListener)&&(0,Ge.m)(b.removeEventListener)}(b)?ye.map(F=>L=>b[F](q,L,T)):function wt(b){return(0,Ge.m)(b.addListener)&&(0,Ge.m)(b.removeListener)}(b)?de.map(Je(b,q)):function Se(b){return(0,Ge.m)(b.on)&&(0,Ge.m)(b.off)}(b)?We.map(Je(b,q)):[];if(!ge&&(0,Ue.z)(b))return(0,ve.z)(F=>Oe(F,q,T))((0,$e.Xf)(b));if(!ge)throw new TypeError("Invalid event target");return new Ae.y(F=>{const L=(...ne)=>F.next(1<ne.length?ne:ne[0]);return ge(L),()=>M(L)})}function Je(b,q){return T=>W=>b[T](q,W)}var ue=j(7579),_t=j(1135),Y=j(1194),ke=(j(9613),j(3551),j(1138),j(1898),j(5273)),Ne=j(3577),De=j(3982),He=j(9866),Tt=(j(8126),j(2583)),yt=(j(3457),j(4349),j(4083)),je=j(9300),Be=j(3900),ht=j(1884),Ct=j(6895);const zt=ke.i,Re=["*"];function Yn(b,q){if(1&b&&(y.TgZ(0,"div",1),y.GkF(1,2),y.qZA()),2&b){const T=y.oxw();y.xp6(1),y.Q6J("ngTemplateOutlet",T.template)}}const cn=b=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(b):"function"==typeof requestAnimationFrame?requestAnimationFrame(b):setTimeout(b);let Cn=(()=>{class b{constructor(T,W){this.injector=T,this.el=W,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(T){this.el.nativeElement.value=this.lastValue=T,hr(this.el)}handleValueChange(T,W){T===this.el.nativeElement&&(W!==this.lastValue&&(this.lastValue=W,this.onChange(W)),hr(this.el))}_handleBlurEvent(T){T===this.el.nativeElement&&(this.onTouched(),hr(this.el))}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.el.nativeElement.disabled=T}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let T;try{T=this.injector.get(ee.a5)}catch{}if(!T)return;T.statusChanges&&(this.statusChanges=T.statusChanges.subscribe(()=>hr(this.el)));const W=T.control;W&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(M=>{if(typeof W[M]<"u"){const F=W[M].bind(W);W[M]=(...L)=>{F(...L),hr(this.el)}}})}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.zs3),y.Y36(y.SBq))},b.\u0275dir=y.lG2({type:b,hostBindings:function(T,W){1&T&&y.NdJ("ionBlur",function(M){return W._handleBlurEvent(M.target)})}}),b})();const hr=b=>{cn(()=>{const q=b.nativeElement,T=null!=q.value&&q.value.toString().length>0,W=_r(q);tr(q,W);const ge=q.closest("ion-item");ge&&tr(ge,T?[...W,"item-has-value"]:W)})},_r=b=>{const q=b.classList,T=[];for(let W=0;W<q.length;W++){const ge=q.item(W);null!==ge&&bn(ge,"ng-")&&T.push(`ion-${ge.substring(3)}`)}return T},tr=(b,q)=>{const T=b.classList;T.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),T.add(...q)},bn=(b,q)=>b.substring(0,q.length)===q;let di=(()=>{class b extends Cn{constructor(T,W){super(T,W)}_handleChangeEvent(T){this.handleValueChange(T,T.value)}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.zs3),y.Y36(y.SBq))},b.\u0275dir=y.lG2({type:b,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(T,W){1&T&&y.NdJ("ionChange",function(M){return W._handleChangeEvent(M.target)})},features:[y._Bn([{provide:ee.JU,useExisting:b,multi:!0}]),y.qOj]}),b})(),wi=(()=>{class b extends Cn{constructor(T,W){super(T,W)}_handleInputEvent(T){this.handleValueChange(T,T.value)}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.zs3),y.Y36(y.SBq))},b.\u0275dir=y.lG2({type:b,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(T,W){1&T&&y.NdJ("ionInput",function(M){return W._handleInputEvent(M.target)})},features:[y._Bn([{provide:ee.JU,useExisting:b,multi:!0}]),y.qOj]}),b})();const Gn=(b,q)=>{const T=b.prototype;q.forEach(W=>{Object.defineProperty(T,W,{get(){return this.el[W]},set(ge){this.z.runOutsideAngular(()=>this.el[W]=ge)}})})},qn=(b,q)=>{const T=b.prototype;q.forEach(W=>{T[W]=function(){const ge=arguments;return this.z.runOutsideAngular(()=>this.el[W].apply(this.el,ge))}})},ln=(b,q,T)=>{T.forEach(W=>b[W]=Oe(q,W))};function on(b){return function(T){const{defineCustomElementFn:W,inputs:ge,methods:M}=b;return void 0!==W&&W(),ge&&Gn(T,ge),M&&qn(T,M),T}}let pi=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-app"]],ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({})],b),b})(),gi=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],b),b})(),mr=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionFocus","ionBlur"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],b),b})(),Kt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["collapse"]})],b),b})(),Ze=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],b),b})(),rt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["mode"]})],b),b})(),Jt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","mode","translucent"]})],b),b})(),qt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","mode"]})],b),b})(),we=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","mode"]})],b),b})(),Ye=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-chip"]],inputs:{color:"color",disabled:"disabled",mode:"mode",outline:"outline"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","disabled","mode","outline"]})],b),b})(),lt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],b),b})(),un=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionCancel","ionChange","ionFocus","ionBlur"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-datetime"]],inputs:{cancelText:"cancelText",clearText:"clearText",color:"color",dayValues:"dayValues",disabled:"disabled",doneText:"doneText",firstDayOfWeek:"firstDayOfWeek",highlightedDates:"highlightedDates",hourCycle:"hourCycle",hourValues:"hourValues",isDateEnabled:"isDateEnabled",locale:"locale",max:"max",min:"min",minuteValues:"minuteValues",mode:"mode",monthValues:"monthValues",multiple:"multiple",name:"name",preferWheel:"preferWheel",presentation:"presentation",readonly:"readonly",showClearButton:"showClearButton",showDefaultButtons:"showDefaultButtons",showDefaultTimeLabel:"showDefaultTimeLabel",showDefaultTitle:"showDefaultTitle",size:"size",titleSelectedDatesFormatter:"titleSelectedDatesFormatter",value:"value",yearValues:"yearValues"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["cancelText","clearText","color","dayValues","disabled","doneText","firstDayOfWeek","highlightedDates","hourCycle","hourValues","isDateEnabled","locale","max","min","minuteValues","mode","monthValues","multiple","name","preferWheel","presentation","readonly","showClearButton","showDefaultButtons","showDefaultTimeLabel","showDefaultTitle","size","titleSelectedDatesFormatter","value","yearValues"],methods:["confirm","reset","cancel"]})],b),b})(),Ke=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],b),b})(),_e=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionFocus","ionBlur"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],b),b})(),gt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-fab-list"]],inputs:{activated:"activated",side:"side"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["activated","side"]})],b),b})(),he=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["fixed"]})],b),b})(),Ce=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["collapse","mode","translucent"]})],b),b})(),St=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],b),b})(),It=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["alt","src"]})],b),b})(),Xt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionInfinite"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-infinite-scroll"]],inputs:{disabled:"disabled",position:"position",threshold:"threshold"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["disabled","position","threshold"],methods:["complete"]})],b),b})(),Xe=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-infinite-scroll-content"]],inputs:{loadingSpinner:"loadingSpinner",loadingText:"loadingText"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["loadingSpinner","loadingText"]})],b),b})(),ze=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],b),b})(),bt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],b),b})(),Jn=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","mode","position"]})],b),b})(),Wn=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],b),b})(),Ur=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionChange","ionInput","ionFocus","ionBlur","ionKnobMoveStart","ionKnobMoveEnd"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-range"]],inputs:{activeBarStart:"activeBarStart",color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",pinFormatter:"pinFormatter",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["activeBarStart","color","debounce","disabled","dualKnobs","labelPlacement","legacy","max","min","mode","name","pin","pinFormatter","snaps","step","ticks","value"]})],b),b})(),se=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionRefresh","ionPull","ionStart"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-refresher"]],inputs:{closeDuration:"closeDuration",disabled:"disabled",pullFactor:"pullFactor",pullMax:"pullMax",pullMin:"pullMin",snapbackDuration:"snapbackDuration"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["closeDuration","disabled","pullFactor","pullMax","pullMin","snapbackDuration"],methods:["complete","cancel","getProgress"]})],b),b})(),be=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-refresher-content"]],inputs:{pullingIcon:"pullingIcon",pullingText:"pullingText",refreshingSpinner:"refreshingSpinner",refreshingText:"refreshingText"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["pullingIcon","pullingText","refreshingSpinner","refreshingText"]})],b),b})(),Qe=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-row"]],ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({})],b),b})(),Vt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],b),b})(),Lt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionChange"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-segment"]],inputs:{color:"color",disabled:"disabled",mode:"mode",scrollable:"scrollable",selectOnFocus:"selectOnFocus",swipeGesture:"swipeGesture",value:"value"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","disabled","mode","scrollable","selectOnFocus","swipeGesture","value"]})],b),b})(),Qt=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-segment-button"]],inputs:{disabled:"disabled",layout:"layout",mode:"mode",type:"type",value:"value"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["disabled","layout","mode","type","value"]})],b),b})(),er=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","duration","name","paused"]})],b),b})(),ot=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,ln(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",shape:"shape",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","maxlength","minlength","mode","name","placeholder","readonly","required","rows","shape","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],b),b})(),tn=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","size"]})],b),b})(),Er=(()=>{let b=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Re,decls:1,vars:0,template:function(T,W){1&T&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["color","mode"]})],b),b})(),Ir=(()=>{class b{get(T,W){const ge=vs();return ge?ge.get(T,W):null}getBoolean(T,W){const ge=vs();return!!ge&&ge.getBoolean(T,W)}getNumber(T,W){const ge=vs();return ge?ge.getNumber(T,W):0}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const ei=new y.OlP("USERCONFIG"),vs=()=>{if(typeof window<"u"){const b=window.Ionic;if(null!=b&&b.config)return b.config}return null};let Oo=(()=>{class b{constructor(T,W){this.doc=T,this.backButton=new ue.x,this.keyboardDidShow=new ue.x,this.keyboardDidHide=new ue.x,this.pause=new ue.x,this.resume=new ue.x,this.resize=new ue.x,W.run(()=>{var ge;let M;this.win=T.defaultView,this.backButton.subscribeWithPriority=function(F,L){return this.subscribe(ne=>ne.register(F,vt=>W.run(()=>L(vt))))},Ss(this.pause,T,"pause"),Ss(this.resume,T,"resume"),Ss(this.backButton,T,"ionBackButton"),Ss(this.resize,this.win,"resize"),Ss(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Ss(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(F=>{M=F}),null!==(ge=this.win)&&void 0!==ge&&ge.cordova?T.addEventListener("deviceready",()=>{M("cordova")},{once:!0}):M("dom")})}is(T){return(0,ke.a)(this.win,T)}platforms(){return(0,ke.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(T){return _i(this.win.location.href,T)}isLandscape(){return!this.isPortrait()}isPortrait(){var T,W;return null===(T=(W=this.win).matchMedia)||void 0===T?void 0:T.call(W,"(orientation: portrait)").matches}testUserAgent(T){const W=this.win.navigator;return!!(null!=W&&W.userAgent&&W.userAgent.indexOf(T)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return b.\u0275fac=function(T){return new(T||b)(y.LFG(Ct.K0),y.LFG(y.R0b))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const _i=(b,q)=>{q=q.replace(/[[\]\\]/g,"\\$&");const W=new RegExp("[\\?&]"+q+"=([^&#]*)").exec(b);return W?decodeURIComponent(W[1].replace(/\+/g," ")):null},Ss=(b,q,T)=>{q&&q.addEventListener(T,W=>{b.next(null!=W?W.detail:void 0)})};let Hi=(()=>{class b{constructor(T,W,ge,M){this.location=W,this.serializer=ge,this.router=M,this.direction=ua,this.animated=Yi,this.guessDirection="forward",this.lastNavId=-1,M&&M.events.subscribe(F=>{if(F instanceof Y.OD){const L=F.restoredState?F.restoredState.navigationId:F.id;this.guessDirection=L<this.lastNavId?"back":"forward",this.guessAnimation=F.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?F.id:L}}),T.backButton.subscribeWithPriority(0,F=>{this.pop(),F()})}navigateForward(T,W={}){return this.setDirection("forward",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}navigateBack(T,W={}){return this.setDirection("back",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}navigateRoot(T,W={}){return this.setDirection("root",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}back(T={animated:!0,animationDirection:"back"}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.location.back()}pop(){var T=this;return(0,_.Z)(function*(){let W=T.topOutlet;for(;W&&!(yield W.pop());)W=W.parentOutlet})()}setDirection(T,W,ge,M){this.direction=T,this.animated=jo(T,W,ge),this.animationBuilder=M}setTopOutlet(T){this.topOutlet=T}consumeTransition(){let W,T="root";const ge=this.animationBuilder;return"auto"===this.direction?(T=this.guessDirection,W=this.guessAnimation):(W=this.animated,T=this.direction),this.direction=ua,this.animated=Yi,this.animationBuilder=void 0,{direction:T,animation:W,animationBuilder:ge}}navigate(T,W){if(Array.isArray(T))return this.router.navigate(T,W);{const ge=this.serializer.parse(T.toString());return void 0!==W.queryParams&&(ge.queryParams={...W.queryParams}),void 0!==W.fragment&&(ge.fragment=W.fragment),this.router.navigateByUrl(ge,W)}}}return b.\u0275fac=function(T){return new(T||b)(y.LFG(Oo),y.LFG(Ct.Ye),y.LFG(Y.Hx),y.LFG(Y.F0,8))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const jo=(b,q,T)=>{if(!1!==q){if(void 0!==T)return T;if("forward"===b||"back"===b)return b;if("root"===b&&!0===q)return"forward"}},ua="auto",Yi=void 0;class oo{constructor(q={}){this.data=q}get(q){return this.data[q]}}let Os=(()=>{class b{constructor(){this.zone=(0,y.f3M)(y.R0b),this.applicationRef=(0,y.f3M)(y.z2F)}create(T,W,ge){return new Da(T,W,this.applicationRef,this.zone,ge)}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();class Da{constructor(q,T,W,ge,M){this.environmentInjector=q,this.injector=T,this.applicationRef=W,this.zone=ge,this.elementReferenceKey=M,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(q,T,W,ge){return this.zone.run(()=>new Promise(M=>{const F={...W};void 0!==this.elementReferenceKey&&(F[this.elementReferenceKey]=q),M(ko(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,q,T,F,ge))}))}removeViewFromDom(q,T){return this.zone.run(()=>new Promise(W=>{const ge=this.elRefMap.get(T);if(ge){ge.destroy(),this.elRefMap.delete(T);const M=this.elEventsMap.get(T);M&&(M(),this.elEventsMap.delete(T))}W()}))}}const ko=(b,q,T,W,ge,M,F,L,ne,vt)=>{const Tn=y.zs3.create({providers:Qa(ne),parent:T}),$r=(0,y.LMc)(L,{environmentInjector:q,elementInjector:Tn}),ii=$r.instance,Qi=$r.location.nativeElement;if(ne&&Object.assign(ii,ne),vt)for(const Ao of vt)Qi.classList.add(Ao);const ds=ao(b,ii,Qi);return F.appendChild(Qi),W.attachView($r.hostView),ge.set(Qi,$r),M.set(Qi,ds),Qi},As=[He.L,He.a,He.b,He.c,He.d],ao=(b,q,T)=>b.run(()=>{const W=As.filter(ge=>"function"==typeof q[ge]).map(ge=>{const M=F=>q[ge](F.detail);return T.addEventListener(ge,M),()=>T.removeEventListener(ge,M)});return()=>W.forEach(ge=>ge())}),da=new y.OlP("NavParamsToken"),Qa=b=>[{provide:da,useValue:b},{provide:oo,useFactory:lo,deps:[da]}],lo=b=>new oo(b),ha=(b,q)=>((b=b.filter(T=>T.stackId!==q.stackId)).push(q),b),Ba=(b,q)=>{const T=b.createUrlTree(["."],{relativeTo:q});return b.serializeUrl(T)},co=(b,q)=>{if(!b)return;const T=ti(q);for(let W=0;W<T.length;W++){if(W>=b.length)return T[W];if(T[W]!==b[W])return}},ti=b=>b.split("/").map(q=>q.trim()).filter(q=>""!==q),ks=b=>{b&&(b.ref.destroy(),b.unlistenEvents())};class uo{constructor(q,T,W,ge,M,F){this.containerEl=T,this.router=W,this.navCtrl=ge,this.zone=M,this.location=F,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==q?ti(q):void 0}createView(q,T){var W;const ge=Ba(this.router,T),M=null==q||null===(W=q.location)||void 0===W?void 0:W.nativeElement,F=ao(this.zone,q.instance,M);return{id:this.nextId++,stackId:co(this.tabsPrefix,ge),unlistenEvents:F,element:M,ref:q,url:ge}}getExistingView(q){const T=Ba(this.router,q),W=this.views.find(ge=>ge.url===T);return W&&W.ref.changeDetectorRef.reattach(),W}setActive(q){var T,W,ge;const M=this.navCtrl.consumeTransition();let{direction:F,animation:L,animationBuilder:ne}=M;const vt=this.activeView,Tn=((b,q)=>!q||b.stackId!==q.stackId)(q,vt);Tn&&(F="back",L=void 0);const $r=this.views.slice();let ii;const Qi=this.router;Qi.getCurrentNavigation?ii=Qi.getCurrentNavigation():null!==(T=Qi.navigations)&&void 0!==T&&T.value&&(ii=Qi.navigations.value),null!==(W=ii)&&void 0!==W&&null!==(ge=W.extras)&&void 0!==ge&&ge.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const ds=this.views.includes(q),Ao=this.insertView(q,F);ds||q.ref.changeDetectorRef.detectChanges();const xi=q.animationBuilder;return void 0===ne&&"back"===F&&!Tn&&void 0!==xi&&(ne=xi),vt&&(vt.animationBuilder=ne),this.zone.runOutsideAngular(()=>this.wait(()=>(vt&&vt.ref.changeDetectorRef.detach(),q.ref.changeDetectorRef.reattach(),this.transition(q,vt,L,this.canGoBack(1),!1,ne).then(()=>ho(q,Ao,$r,this.location,this.zone)).then(()=>({enteringView:q,direction:F,animation:L,tabSwitch:Tn})))))}canGoBack(q,T=this.getActiveStackId()){return this.getStack(T).length>q}pop(q,T=this.getActiveStackId()){return this.zone.run(()=>{const W=this.getStack(T);if(W.length<=q)return Promise.resolve(!1);const ge=W[W.length-q-1];let M=ge.url;const F=ge.savedData;if(F){var L,ne;const Tn=F.get("primary");null!=Tn&&null!==(L=Tn.route)&&void 0!==L&&null!==(ne=L._routerState)&&void 0!==ne&&ne.snapshot.url&&(M=Tn.route._routerState.snapshot.url)}const{animationBuilder:vt}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(M,{...ge.savedExtras,animation:vt}).then(()=>!0)})}startBackTransition(){const q=this.activeView;if(q){const T=this.getStack(q.stackId),W=T[T.length-2],ge=W.animationBuilder;return this.wait(()=>this.transition(W,q,"back",this.canGoBack(2),!0,ge))}return Promise.resolve()}endBackTransition(q){q?(this.skipTransition=!0,this.pop(1)):this.activeView&&fa(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(q){const T=this.getStack(q);return T.length>0?T[T.length-1]:void 0}getRootUrl(q){const T=this.getStack(q);return T.length>0?T[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(ks),this.activeView=void 0,this.views=[]}getStack(q){return this.views.filter(T=>T.stackId===q)}insertView(q,T){return this.activeView=q,this.views=((b,q,T)=>"root"===T?ha(b,q):"forward"===T?((b,q)=>(b.indexOf(q)>=0?b=b.filter(W=>W.stackId!==q.stackId||W.id<=q.id):b.push(q),b))(b,q):((b,q)=>b.indexOf(q)>=0?b.filter(W=>W.stackId!==q.stackId||W.id<=q.id):ha(b,q))(b,q))(this.views,q,T),this.views.slice()}transition(q,T,W,ge,M,F){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(T===q)return Promise.resolve(!1);const L=q?q.element:void 0,ne=T?T.element:void 0,vt=this.containerEl;return L&&L!==ne&&(L.classList.add("ion-page"),L.classList.add("ion-page-invisible"),L.parentElement!==vt&&vt.appendChild(L),vt.commit)?vt.commit(L,ne,{duration:void 0===W?0:void 0,direction:W,showGoBack:ge,progressAnimation:M,animationBuilder:F}):Promise.resolve(!1)}wait(q){var T=this;return(0,_.Z)(function*(){void 0!==T.runningTask&&(yield T.runningTask,T.runningTask=void 0);const W=T.runningTask=q();return W.finally(()=>T.runningTask=void 0),W})()}}const ho=(b,q,T,W,ge)=>"function"==typeof requestAnimationFrame?new Promise(M=>{requestAnimationFrame(()=>{fa(b,q,T,W,ge),M()})}):Promise.resolve(),fa=(b,q,T,W,ge)=>{ge.run(()=>T.filter(M=>!q.includes(M)).forEach(ks)),q.forEach(M=>{const L=W.path().split("?")[0].split("#")[0];if(M!==b&&M.url!==L){const ne=M.element;ne.setAttribute("aria-hidden","true"),ne.classList.add("ion-page-hidden"),M.ref.changeDetectorRef.detach()}})};let fo=(()=>{class b{constructor(T,W,ge,M,F,L,ne,vt){this.parentOutlet=vt,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new _t.X(null),this.stackEvents=new y.vpe,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.parentContexts=(0,y.f3M)(Y.y6),this.location=(0,y.f3M)(y.s_b),this.environmentInjector=(0,y.f3M)(y.lqb),this.config=(0,y.f3M)(Ir),this.navCtrl=(0,y.f3M)(Hi),this.nativeEl=M.nativeElement,this.name=T||Y.eC,this.tabsPrefix="true"===W?Ba(F,ne):void 0,this.stackCtrl=new uo(this.tabsPrefix,this.nativeEl,F,this.navCtrl,L,ge),this.parentContexts.onChildOutletCreated(this.name,this)}set animation(T){this.nativeEl.animation=T}set animated(T){this.nativeEl.animated=T}set swipeGesture(T){this._swipeGesture=T,this.nativeEl.swipeHandler=T?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:W=>this.stackCtrl.endBackTransition(W)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const T=this.getContext();null!=T&&T.route&&this.activateWith(T.route,T.injector)}new Promise(T=>(0,Ne.c)(this.nativeEl,T)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(T,W){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const W=this.getContext();this.activatedView.savedData=new Map(W.children.contexts);const ge=this.activatedView.savedData.get("primary");if(ge&&W.route&&(ge.route={...W.route}),this.activatedView.savedExtras={},W.route){const M=W.route.snapshot;this.activatedView.savedExtras.queryParams=M.queryParams,this.activatedView.savedExtras.fragment=M.fragment}}const T=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,W){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;let ge,M=this.stackCtrl.getExistingView(T);if(M){ge=this.activated=M.ref;const L=M.savedData;L&&(this.getContext().children.contexts=L),this.updateActivatedRouteProxy(ge.instance,T)}else{var F;const L=T._futureSnapshot,ne=this.parentContexts.getOrCreateContext(this.name).children,vt=new _t.X(null),Tn=this.createActivatedRouteProxy(vt,T),$r=new _s(Tn,ne,this.location.injector),ii=null!==(F=L.routeConfig.component)&&void 0!==F?F:L.component;ge=this.activated=this.location.createComponent(ii,{index:this.location.length,injector:$r,environmentInjector:null!=W?W:this.environmentInjector}),vt.next(ge.instance),M=this.stackCtrl.createView(this.activated,T),this.proxyMap.set(ge.instance,Tn),this.currentActivatedRoute$.next({component:ge.instance,activatedRoute:T})}this.activatedView=M,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(M).then(L=>{this.activateEvents.emit(ge.instance),this.stackEvents.emit(L)})}canGoBack(T=1,W){return this.stackCtrl.canGoBack(T,W)}pop(T=1,W){return this.stackCtrl.pop(T,W)}getLastUrl(T){const W=this.stackCtrl.getLastUrl(T);return W?W.url:void 0}getLastRouteView(T){return this.stackCtrl.getLastUrl(T)}getRootView(T){return this.stackCtrl.getRootUrl(T)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(T,W){const ge=new Y.gz;return ge._futureSnapshot=W._futureSnapshot,ge._routerState=W._routerState,ge.snapshot=W.snapshot,ge.outlet=W.outlet,ge.component=W.component,ge._paramMap=this.proxyObservable(T,"paramMap"),ge._queryParamMap=this.proxyObservable(T,"queryParamMap"),ge.url=this.proxyObservable(T,"url"),ge.params=this.proxyObservable(T,"params"),ge.queryParams=this.proxyObservable(T,"queryParams"),ge.fragment=this.proxyObservable(T,"fragment"),ge.data=this.proxyObservable(T,"data"),ge}proxyObservable(T,W){return T.pipe((0,je.h)(ge=>!!ge),(0,Be.w)(ge=>this.currentActivatedRoute$.pipe((0,je.h)(M=>null!==M&&M.component===ge),(0,Be.w)(M=>M&&M.activatedRoute[W]),(0,ht.x)())))}updateActivatedRouteProxy(T,W){const ge=this.proxyMap.get(T);if(!ge)throw new Error("Could not find activated route proxy for view");ge._futureSnapshot=W._futureSnapshot,ge._routerState=W._routerState,ge.snapshot=W.snapshot,ge.outlet=W.outlet,ge.component=W.component,this.currentActivatedRoute$.next({component:T,activatedRoute:W})}}return b.\u0275fac=function(T){return new(T||b)(y.$8M("name"),y.$8M("tabs"),y.Y36(Ct.Ye),y.Y36(y.SBq),y.Y36(Y.F0),y.Y36(y.R0b),y.Y36(Y.gz),y.Y36(b,12))},b.\u0275dir=y.lG2({type:b,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),b})();class _s{constructor(q,T,W){this.route=q,this.childContexts=T,this.parent=W}get(q,T){return q===Y.gz?this.route:q===Y.y6?this.childContexts:this.parent.get(q,T)}}let No=(()=>{class b{constructor(T,W,ge){this.routerOutlet=T,this.navCtrl=W,this.config=ge}onClick(T){var W;const ge=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(W=this.routerOutlet)&&void 0!==W&&W.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),T.preventDefault()):null!=ge&&(this.navCtrl.navigateBack(ge,{animation:this.routerAnimation}),T.preventDefault())}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(fo,8),y.Y36(Hi),y.Y36(Ir))},b.\u0275dir=y.lG2({type:b,selectors:[["ion-back-button"]],hostBindings:function(T,W){1&T&&y.NdJ("click",function(M){return W.onClick(M)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),b})(),xs=(()=>{class b{constructor(T,W,ge,M,F){this.locationStrategy=T,this.navCtrl=W,this.elementRef=ge,this.router=M,this.routerLink=F,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var T;if(null!==(T=this.routerLink)&&void 0!==T&&T.urlTree){const W=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=W}}onClick(T){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),T.preventDefault()}}return b.\u0275fac=function(T){return new(T||b)(y.Y36(Ct.S$),y.Y36(Hi),y.Y36(y.SBq),y.Y36(Y.F0),y.Y36(Y.rH,8))},b.\u0275dir=y.lG2({type:b,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,W){1&T&&y.NdJ("click",function(M){return W.onClick(M)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[y.TTD]}),b})(),Zi=(()=>{let b=class{constructor(T,W,ge){this.z=ge,this.isCmpOpen=!1,this.el=W.nativeElement,this.el.addEventListener("willPresent",()=>{this.isCmpOpen=!0,T.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,T.detectChanges()}),ln(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}};return b.\u0275fac=function(T){return new(T||b)(y.Y36(y.sBO),y.Y36(y.SBq),y.Y36(y.R0b))},b.\u0275cmp=y.Xpm({type:b,selectors:[["ion-modal"]],contentQueries:function(T,W,ge){if(1&T&&y.Suo(ge,y.Rgc,5),2&T){let M;y.iGM(M=y.CRH())&&(W.template=M.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"},decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(T,W){1&T&&y.YNc(0,Yn,2,1,"div",0),2&T&&y.Q6J("ngIf",W.isCmpOpen||W.keepContentsMounted)},dependencies:[Ct.O5,Ct.tP],encapsulation:2,changeDetection:0}),b=(0,le.gn)([on({inputs:["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],methods:["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"]})],b),b})();class Pi{constructor(q){this.ctrl=q}create(q){return this.ctrl.create(q||{})}dismiss(q,T,W){return this.ctrl.dismiss(q,T,W)}getTop(){return this.ctrl.getTop()}}let go=(()=>{class b extends Pi{constructor(){super(Tt.a)}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),os=(()=>{class b extends Pi{constructor(){super(Tt.m),this.angularDelegate=(0,y.f3M)(Os),this.injector=(0,y.f3M)(y.zs3),this.environmentInjector=(0,y.f3M)(y.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})(),Xi=(()=>{class b extends Pi{constructor(){super(Tt.c),this.angularDelegate=(0,y.f3M)(Os),this.injector=(0,y.f3M)(y.zs3),this.environmentInjector=(0,y.f3M)(y.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})(),Do=(()=>{class b extends Pi{constructor(){super(Tt.t)}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class ia{shouldDetach(q){return!1}shouldAttach(q){return!1}store(q,T){}retrieve(q){return null}shouldReuseRoute(q,T){if(q.routeConfig!==T.routeConfig)return!1;const W=q.params,ge=T.params,M=Object.keys(W),F=Object.keys(ge);if(M.length!==F.length)return!1;for(const L of M)if(ge[L]!==W[L])return!1;return!0}}const Tr=(b,q,T)=>()=>{if(q.defaultView&&typeof window<"u"){(0,De.s)({...b,_zoneGate:M=>T.run(M)});const ge="__zone_symbol__addEventListener"in q.body?"__zone_symbol__addEventListener":"addEventListener";return function nn(){var b=[];if(typeof window<"u"){var q=window;(!q.customElements||q.Element&&(!q.Element.prototype.closest||!q.Element.prototype.matches||!q.Element.prototype.remove||!q.Element.prototype.getRootNode))&&b.push(j.e(6748).then(j.t.bind(j,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||q.NodeList&&!q.NodeList.prototype.forEach||!q.fetch||!function(){try{var W=new URL("b","http://a");return W.pathname="c%20d","http://a/c%20d"===W.href&&W.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&b.push(j.e(2214).then(j.t.bind(j,4144,23)))}return Promise.all(b)}().then(()=>((b,q)=>typeof window>"u"?Promise.resolve():(0,yt.p)().then(()=>(zt(),(0,yt.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[34,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),q))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:cn,jmp:M=>T.runOutsideAngular(M),ael(M,F,L,ne){M[ge](F,L,ne)},rel(M,F,L,ne){M.removeEventListener(F,L,ne)}}))}};let sa=(()=>{class b{static forRoot(T){return{ngModule:b,providers:[{provide:ei,useValue:T},{provide:y.ip1,useFactory:Tr,multi:!0,deps:[ei,Ct.K0,y.R0b]}]}}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275mod=y.oAB({type:b}),b.\u0275inj=y.cJS({providers:[Os,os,Xi],imports:[Ct.ez]}),b})()},259:(In,Et,j)=>{"use strict";j.d(Et,{C6:()=>_.getApps,Mq:()=>_.getApp,ZR:()=>_.FirebaseError});var _=j(6881);(0,_.registerVersion)("firebase","9.21.0","app")},9260:(In,Et,j)=>{"use strict";j.d(Et,{Z:()=>_.Z});var _=j(3942);_.Z.registerVersion("firebase","9.21.0","app-compat")},3042:(In,Et,j)=>{"use strict";j.r(Et);var _=j(5861),y=j(3942),ee=j(2090),le=j(6881),$e=j(655),Ae=j(1877),ve=j(4859);const Ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ye_EMAIL_SIGNIN="EMAIL_SIGNIN",ye_PASSWORD_RESET="PASSWORD_RESET",ye_RECOVER_EMAIL="RECOVER_EMAIL",ye_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",ye_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",ye_VERIFY_EMAIL="VERIFY_EMAIL";const Je=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},wt=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Se=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ue=new Ae.Yd("@firebase/auth");function Y(C,...g){ue.logLevel<=Ae.in.ERROR&&ue.error(`Auth (${le.SDK_VERSION}): ${C}`,...g)}function it(C,...g){throw ke(C,...g)}function tt(C,...g){return ke(C,...g)}function Pt(C,g,m){const A=Object.assign(Object.assign({},wt()),{[g]:m});return new ee.LL("auth","Firebase",A).create(g,{appName:C.name})}function Ve(C,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&it(C,"argument-error"),Pt(C,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(C,...g){if("string"!=typeof C){const m=g[0],A=[...g.slice(1)];return A[0]&&(A[0].appName=C.name),C._errorFactory.create(m,...A)}return Se.create(C,...g)}function Ne(C,g,...m){if(!C)throw ke(g,...m)}function De(C){const g="INTERNAL ASSERTION FAILED: "+C;throw Y(g),new Error(g)}function He(C,g){C||De(g)}function pt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Tt(){return"http:"===dt()||"https:"===dt()}function dt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Fe{constructor(g,m){this.shortDelay=g,this.longDelay=m,He(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function Mt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tt()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function je(C,g){He(C.emulator,"Emulator should always be set here");const{url:m}=C.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Be{static initialize(g,m,A){this.fetchImpl=g,m&&(this.headersImpl=m),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ht={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ct=new Fe(3e4,6e4);function nn(C,g){return C.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:C.tenantId}):g}function zt(C,g,m,A){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,_.Z)(function*(C,g,m,A,K={}){return kt(C,K,(0,_.Z)(function*(){let oe={},st={};A&&("GET"===g?st=A:oe={body:JSON.stringify(A)});const Dt=(0,ee.xO)(Object.assign({key:C.config.apiKey},st)).slice(1),rn=yield C._getAdditionalHeaders();return rn["Content-Type"]="application/json",C.languageCode&&(rn["X-Firebase-Locale"]=C.languageCode),Be.fetch()(On(C,C.config.apiHost,m,Dt),Object.assign({method:g,headers:rn,referrerPolicy:"no-referrer"},oe))}))})).apply(this,arguments)}function kt(C,g,m){return Re.apply(this,arguments)}function Re(){return(Re=(0,_.Z)(function*(C,g,m){C._canInitEmulator=!1;const A=Object.assign(Object.assign({},ht),g);try{const K=new Yn(C),oe=yield Promise.race([m(),K.promise]);K.clearNetworkTimeout();const st=yield oe.json();if("needConfirmation"in st)throw xn(C,"account-exists-with-different-credential",st);if(oe.ok&&!("errorMessage"in st))return st;{const Dt=oe.ok?st.errorMessage:st.error.message,[rn,Bn]=Dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rn)throw xn(C,"credential-already-in-use",st);if("EMAIL_EXISTS"===rn)throw xn(C,"email-already-in-use",st);if("USER_DISABLED"===rn)throw xn(C,"user-disabled",st);const or=A[rn]||rn.toLowerCase().replace(/[_\s]+/g,"-");if(Bn)throw Pt(C,or,Bn);it(C,or)}}catch(K){if(K instanceof ee.ZR)throw K;it(C,"network-request-failed",{message:String(K)})}})).apply(this,arguments)}function At(C,g,m,A){return gn.apply(this,arguments)}function gn(){return(gn=(0,_.Z)(function*(C,g,m,A,K={}){const oe=yield zt(C,g,m,A,K);return"mfaPendingCredential"in oe&&it(C,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function On(C,g,m,A){const K=`${g}${m}?${A}`;return C.config.emulator?je(C.config,K):`${C.config.apiScheme}://${K}`}class Yn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,A)=>{this.timer=setTimeout(()=>A(tt(this.auth,"network-request-failed")),Ct.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xn(C,g,m){const A={appName:C.name};m.email&&(A.email=m.email),m.phoneNumber&&(A.phoneNumber=m.phoneNumber);const K=tt(C,g,A);return K.customData._tokenResponse=m,K}function Cn(){return(Cn=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function _r(){return(_r=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function bn(){return(bn=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function zn(C){if(C)try{const g=new Date(Number(C));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function di(){return(di=(0,_.Z)(function*(C,g=!1){const m=(0,ee.m9)(C),A=yield m.getIdToken(g),K=Gn(A);Ne(K&&K.exp&&K.auth_time&&K.iat,m.auth,"internal-error");const oe="object"==typeof K.firebase?K.firebase:void 0,st=null==oe?void 0:oe.sign_in_provider;return{claims:K,token:A,authTime:zn(wi(K.auth_time)),issuedAtTime:zn(wi(K.iat)),expirationTime:zn(wi(K.exp)),signInProvider:st||null,signInSecondFactor:(null==oe?void 0:oe.sign_in_second_factor)||null}})).apply(this,arguments)}function wi(C){return 1e3*Number(C)}function Gn(C){const[g,m,A]=C.split(".");if(void 0===g||void 0===m||void 0===A)return Y("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,ee.tV)(m);return K?JSON.parse(K):(Y("Failed to decode base64 JWT payload"),null)}catch(K){return Y("Caught error parsing JWT payload as JSON",null==K?void 0:K.toString()),null}}function ln(C,g){return yn.apply(this,arguments)}function yn(){return(yn=(0,_.Z)(function*(C,g,m=!1){if(m)return g;try{return yield g}catch(A){throw A instanceof ee.ZR&&function on({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}(A)&&C.auth.currentUser===C&&(yield C.auth.signOut()),A}})).apply(this,arguments)}class Jr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const K=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const A=this.getInterval(g);this.timerId=setTimeout((0,_.Z)(function*(){yield m.iteration()}),A)}iteration(){var g=this;return(0,_.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===(null==m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class Dr{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=zn(this.lastLoginAt),this.creationTime=zn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qr(C){return zr.apply(this,arguments)}function zr(){return zr=(0,_.Z)(function*(C){var g;const m=C.auth,A=yield C.getIdToken(),K=yield ln(C,function tr(C,g){return bn.apply(this,arguments)}(m,{idToken:A}));Ne(null==K?void 0:K.users.length,m,"internal-error");const oe=K.users[0];C._notifyReloadListener(oe);const st=null!==(g=oe.providerUserInfo)&&void 0!==g&&g.length?function ur(C){return C.map(g=>{var{providerId:m}=g,A=(0,$e._T)(g,["providerId"]);return{providerId:m,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}(oe.providerUserInfo):[],Dt=function gi(C,g){return[...C.filter(A=>!g.some(K=>K.providerId===A.providerId)),...g]}(C.providerData,st),or=!!C.isAnonymous&&!(C.email&&oe.passwordHash||null!=Dt&&Dt.length),ar={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:Dt,metadata:new Dr(oe.createdAt,oe.lastLoginAt),isAnonymous:or};Object.assign(C,ar)}),zr.apply(this,arguments)}function Lr(){return(Lr=(0,_.Z)(function*(C){const g=(0,ee.m9)(C);yield Qr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function yr(){return(yr=(0,_.Z)(function*(C,g){const m=yield kt(C,{},(0,_.Z)(function*(){const A=(0,ee.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:K,apiKey:oe}=C.config,st=On(C,K,"/v1/token",`key=${oe}`),Dt=yield C._getAdditionalHeaders();return Dt["Content-Type"]="application/x-www-form-urlencoded",Be.fetch()(st,{method:"POST",headers:Dt,body:A})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ne(g.idToken,"internal-error"),Ne(typeof g.idToken<"u","internal-error"),Ne(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function qn(C){const g=Gn(C);return Ne(g,"internal-error"),Ne(typeof g.exp<"u","internal-error"),Ne(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var A=this;return(0,_.Z)(function*(){return Ne(!A.accessToken||A.refreshToken,g,"user-token-expired"),m||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(g,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var A=this;return(0,_.Z)(function*(){const{accessToken:K,refreshToken:oe,expiresIn:st}=yield function lr(C,g){return yr.apply(this,arguments)}(g,m);A.updateTokensAndExpiration(K,oe,Number(st))})()}updateTokensAndExpiration(g,m,A){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(g,m){const{refreshToken:A,accessToken:K,expirationTime:oe}=m,st=new Ai;return A&&(Ne("string"==typeof A,"internal-error",{appName:g}),st.refreshToken=A),K&&(Ne("string"==typeof K,"internal-error",{appName:g}),st.accessToken=K),oe&&(Ne("number"==typeof oe,"internal-error",{appName:g}),st.expirationTime=oe),st}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return De("not implemented")}}function mr(C,g){Ne("string"==typeof C||typeof C>"u","internal-error",{appName:g})}class Kt{constructor(g){var{uid:m,auth:A,stsTokenManager:K}=g,oe=(0,$e._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=A,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new Dr(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,_.Z)(function*(){const A=yield ln(m,m.stsTokenManager.getToken(m.auth,g));return Ne(A,m.auth,"internal-error"),m.accessToken!==A&&(m.accessToken=A,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),A})()}getIdTokenResult(g){return function Cr(C){return di.apply(this,arguments)}(this,g)}reload(){return function pi(C){return Lr.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const m=new Kt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(g){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var A=this;return(0,_.Z)(function*(){let K=!1;g.idToken&&g.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(g),K=!0),m&&(yield Qr(A)),yield A.auth._persistUserIfCurrent(A),K&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var g=this;return(0,_.Z)(function*(){const m=yield g.getIdToken();return yield ln(g,function cn(C,g){return Cn.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var A,K,oe,st,Dt,rn,Bn,or;const ar=null!==(A=m.displayName)&&void 0!==A?A:void 0,Ki=null!==(K=m.email)&&void 0!==K?K:void 0,Oa=null!==(oe=m.phoneNumber)&&void 0!==oe?oe:void 0,Ru=null!==(st=m.photoURL)&&void 0!==st?st:void 0,Jl=null!==(Dt=m.tenantId)&&void 0!==Dt?Dt:void 0,cs=null!==(rn=m._redirectEventId)&&void 0!==rn?rn:void 0,Yd=null!==(Bn=m.createdAt)&&void 0!==Bn?Bn:void 0,Mu=null!==(or=m.lastLoginAt)&&void 0!==or?or:void 0,{uid:Cc,emailVerified:ec,isAnonymous:Pu,providerData:Zd,stsTokenManager:vd}=m;Ne(Cc&&vd,g,"internal-error");const _d=Ai.fromJSON(this.name,vd);Ne("string"==typeof Cc,g,"internal-error"),mr(ar,g.name),mr(Ki,g.name),Ne("boolean"==typeof ec,g,"internal-error"),Ne("boolean"==typeof Pu,g,"internal-error"),mr(Oa,g.name),mr(Ru,g.name),mr(Jl,g.name),mr(cs,g.name),mr(Yd,g.name),mr(Mu,g.name);const Xd=new Kt({uid:Cc,auth:g,email:Ki,emailVerified:ec,displayName:ar,isAnonymous:Pu,photoURL:Ru,phoneNumber:Oa,tenantId:Jl,stsTokenManager:_d,createdAt:Yd,lastLoginAt:Mu});return Zd&&Array.isArray(Zd)&&(Xd.providerData=Zd.map(Ou=>Object.assign({},Ou))),cs&&(Xd._redirectEventId=cs),Xd}static _fromIdTokenResponse(g,m,A=!1){return(0,_.Z)(function*(){const K=new Ai;K.updateFromServerResponse(m);const oe=new Kt({uid:m.localId,auth:g,stsTokenManager:K,isAnonymous:A});return yield Qr(oe),oe})()}}const Ze=new Map;function rt(C){He(C instanceof Function,"Expected a class definition");let g=Ze.get(C);return g?(He(g instanceof C,"Instance stored in cache mismatched with class"),g):(g=new C,Ze.set(C,g),g)}const qt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(m,A){var K=this;return(0,_.Z)(function*(){K.storage[m]=A})()}_get(m){var A=this;return(0,_.Z)(function*(){const K=A.storage[m];return void 0===K?null:K})()}_remove(m){var A=this;return(0,_.Z)(function*(){delete A.storage[m]})()}_addListener(m,A){}_removeListener(m,A){}}return C.type="NONE",C})();function we(C,g,m){return`firebase:${C}:${g}:${m}`}class Ie{constructor(g,m,A){this.persistence=g,this.auth=m,this.userKey=A;const{config:K,name:oe}=this.auth;this.fullUserKey=we(this.userKey,K.apiKey,oe),this.fullPersistenceKey=we("persistence",K.apiKey,oe),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,_.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?Kt._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,_.Z)(function*(){if(m.persistence===g)return;const A=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,A?m.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,A="authUser"){return(0,_.Z)(function*(){if(!m.length)return new Ie(rt(qt),g,A);const K=(yield Promise.all(m.map(function(){var Bn=(0,_.Z)(function*(or){if(yield or._isAvailable())return or});return function(or){return Bn.apply(this,arguments)}}()))).filter(Bn=>Bn);let oe=K[0]||rt(qt);const st=we(A,g.config.apiKey,g.name);let Dt=null;for(const Bn of m)try{const or=yield Bn._get(st);if(or){const ar=Kt._fromJSON(g,or);Bn!==oe&&(Dt=ar),oe=Bn;break}}catch{}const rn=K.filter(Bn=>Bn._shouldAllowMigration);return oe._shouldAllowMigration&&rn.length?(oe=rn[0],Dt&&(yield oe._set(st,Dt.toJSON())),yield Promise.all(m.map(function(){var Bn=(0,_.Z)(function*(or){if(or!==oe)try{yield or._remove(st)}catch{}});return function(or){return Bn.apply(this,arguments)}}())),new Ie(oe,g,A)):new Ie(oe,g,A)})()}}function Ye(C){const g=C.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ut(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Ot(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(_e(g))return"Blackberry";if(gt(g))return"Webos";if(lt(g))return"Safari";if((g.includes("chrome/")||un(g))&&!g.includes("edge/"))return"Chrome";if(Ke(g))return"Android";{const A=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function Ot(C=(0,ee.z$)()){return/firefox\//i.test(C)}function lt(C=(0,ee.z$)()){const g=C.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function un(C=(0,ee.z$)()){return/crios\//i.test(C)}function ut(C=(0,ee.z$)()){return/iemobile/i.test(C)}function Ke(C=(0,ee.z$)()){return/android/i.test(C)}function _e(C=(0,ee.z$)()){return/blackberry/i.test(C)}function gt(C=(0,ee.z$)()){return/webos/i.test(C)}function Nt(C=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function It(C=(0,ee.z$)()){return Nt(C)||Ke(C)||gt(C)||_e(C)||/windows phone/i.test(C)||ut(C)}function Xe(C,g=[]){let m;switch(C){case"Browser":m=Ye((0,ee.z$)());break;case"Worker":m=`${Ye((0,ee.z$)())}-${C}`;break;default:m=C}const A=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${le.SDK_VERSION}/${A}`}function bt(){return(bt=(0,_.Z)(function*(C){return(yield zt(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Gt(C,g){return pn.apply(this,arguments)}function pn(){return(pn=(0,_.Z)(function*(C,g){return zt(C,"GET","/v2/recaptchaConfig",nn(C,g))})).apply(this,arguments)}function kn(C){return void 0!==C&&void 0!==C.getResponse}function wn(C){return void 0!==C&&void 0!==C.enterprise}class Qn{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Wn(C){return new Promise((g,m)=>{const A=document.createElement("script");A.setAttribute("src",C),A.onload=g,A.onerror=K=>{const oe=tt("internal-error");oe.customData=K,m(oe)},A.type="text/javascript",A.charset="UTF-8",function Jn(){var C,g;return null!==(g=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==g?g:document}().appendChild(A)})}function Xn(C){return`__${C}${Math.floor(1e6*Math.random())}`}const Vi="NO_RECAPTCHA";class ji{constructor(g){this.type="recaptcha-enterprise",this.auth=kr(g)}verify(g="verify",m=!1){var A=this;return(0,_.Z)(function*(){function oe(){return oe=(0,_.Z)(function*(Dt){if(!m){if(null==Dt.tenantId&&null!=Dt._agentRecaptchaConfig)return Dt._agentRecaptchaConfig.siteKey;if(null!=Dt.tenantId&&void 0!==Dt._tenantRecaptchaConfigs[Dt.tenantId])return Dt._tenantRecaptchaConfigs[Dt.tenantId].siteKey}return new Promise(function(){var rn=(0,_.Z)(function*(Bn,or){Gt(Dt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ar=>{if(void 0!==ar.recaptchaKey){const Ki=new Qn(ar);return null==Dt.tenantId?Dt._agentRecaptchaConfig=Ki:Dt._tenantRecaptchaConfigs[Dt.tenantId]=Ki,Bn(Ki.siteKey)}or(new Error("recaptcha Enterprise site key undefined"))}).catch(ar=>{or(ar)})});return function(Bn,or){return rn.apply(this,arguments)}}())}),oe.apply(this,arguments)}function st(Dt,rn,Bn){const or=window.grecaptcha;wn(or)?or.enterprise.ready(()=>{or.enterprise.execute(Dt,{action:g}).then(ar=>{rn(ar)}).catch(()=>{rn(Vi)})}):Bn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Dt,rn)=>{(function K(Dt){return oe.apply(this,arguments)})(A.auth).then(Bn=>{if(!m&&wn(window.grecaptcha))st(Bn,Dt,rn);else{if(typeof window>"u")return void rn(new Error("RecaptchaVerifier is only supported in browser"));Wn("https://www.google.com/recaptcha/enterprise.js?render="+Bn).then(()=>{st(Bn,Dt,rn)}).catch(or=>{rn(or)})}}).catch(Bn=>{rn(Bn)})})})()}}function An(C,g,m){return cr.apply(this,arguments)}function cr(){return(cr=(0,_.Z)(function*(C,g,m,A=!1){const K=new ji(C);let oe;try{oe=yield K.verify(m)}catch{oe=yield K.verify(m,!0)}const st=Object.assign({},g);return Object.assign(st,A?{captchaResp:oe}:{captchaResponse:oe}),Object.assign(st,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(st,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),st})).apply(this,arguments)}class ri{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const A=oe=>new Promise((st,Dt)=>{try{st(g(oe))}catch(rn){Dt(rn)}});A.onAbort=m,this.queue.push(A);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,_.Z)(function*(){if(m.auth.currentUser===g)return;const A=[];try{for(const K of m.queue)yield K(g),K.onAbort&&A.push(K.onAbort)}catch(K){A.reverse();for(const oe of A)try{oe()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null==K?void 0:K.message})}})()}}class qi{constructor(g,m,A,K){this.app=g,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=A,this.config=K,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ci(this),this.idTokenSubscription=new Ci(this),this.beforeStateQueue=new ri(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Se,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=K.sdkClientVersion}_initializeWithPersistence(g,m){var A=this;return m&&(this._popupRedirectResolver=rt(m)),this._initializationPromise=this.queue((0,_.Z)(function*(){var K,oe;if(!A._deleted&&(A.persistenceManager=yield Ie.create(A,g),!A._deleted)){if(null!==(K=A._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch{}yield A.initializeCurrentUser(m),A.lastNotifiedUid=(null===(oe=A.currentUser)||void 0===oe?void 0:oe.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,_.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,_.Z)(function*(){var A;const K=yield m.assertedPersistence.getCurrentUser();let oe=K,st=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Dt=null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId,rn=null==oe?void 0:oe._redirectEventId,Bn=yield m.tryRedirectSignIn(g);(!Dt||Dt===rn)&&null!=Bn&&Bn.user&&(oe=Bn.user,st=!0)}if(!oe)return m.directlySetCurrentUser(null);if(!oe._redirectEventId){if(st)try{yield m.beforeStateQueue.runMiddleware(oe)}catch(Dt){oe=K,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Dt))}return oe?m.reloadAndSetCurrentUserOrClear(oe):m.directlySetCurrentUser(null)}return Ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===oe._redirectEventId?m.directlySetCurrentUser(oe):m.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(g){var m=this;return(0,_.Z)(function*(){let A=null;try{A=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,_.Z)(function*(){try{yield Qr(g)}catch(A){if("auth/network-request-failed"!==(null==A?void 0:A.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function yt(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var g=this;return(0,_.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,_.Z)(function*(){const A=g?(0,ee.m9)(g):null;return A&&Ne(A.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(A&&A._clone(m))})()}_updateCurrentUser(g,m=!1){var A=this;return(0,_.Z)(function*(){if(!A._deleted)return g&&Ne(A.tenantId===g.tenantId,A,"tenant-id-mismatch"),m||(yield A.beforeStateQueue.runMiddleware(g)),A.queue((0,_.Z)(function*(){yield A.directlySetCurrentUser(g),A.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,_.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,_.Z)(function*(){yield m.assertedPersistence.setPersistence(rt(g))}))}initializeRecaptchaConfig(){var g=this;return(0,_.Z)(function*(){const m=yield Gt(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),A=new Qn(m);null==g.tenantId?g._agentRecaptchaConfig=A:g._tenantRecaptchaConfigs[g.tenantId]=A,A.emailPasswordEnabled&&new ji(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new ee.LL("auth","Firebase",g())}onAuthStateChanged(g,m,A){return this.registerStateListener(this.authStateSubscription,g,m,A)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,A){return this.registerStateListener(this.idTokenSubscription,g,m,A)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var A=this;return(0,_.Z)(function*(){const K=yield A.getOrInitRedirectPersistenceManager(m);return null===g?K.removeCurrentUser():K.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,_.Z)(function*(){if(!m.redirectPersistenceManager){const A=g&&rt(g)||m._popupRedirectResolver;Ne(A,m,"argument-error"),m.redirectPersistenceManager=yield Ie.create(m,[rt(A._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,_.Z)(function*(){var A,K;return m._isInitialized&&(yield m.queue((0,_.Z)(function*(){}))),(null===(A=m._currentUser)||void 0===A?void 0:A._redirectEventId)===g?m._currentUser:(null===(K=m.redirectUser)||void 0===K?void 0:K._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,_.Z)(function*(){if(g===m.currentUser)return m.queue((0,_.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,A,K){if(this._deleted)return()=>{};const oe="function"==typeof m?m:m.next.bind(m),st=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(st,this,"internal-error"),st.then(()=>oe(this.currentUser)),"function"==typeof m?g.addObserver(m,A,K):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,_.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,_.Z)(function*(){var m;const A={"X-Client-Version":g.clientVersion};g.app.options.appId&&(A["X-Firebase-gmpid"]=g.app.options.appId);const K=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();K&&(A["X-Firebase-Client"]=K);const oe=yield g._getAppCheckToken();return oe&&(A["X-Firebase-AppCheck"]=oe),A})()}_getAppCheckToken(){var g=this;return(0,_.Z)(function*(){var m;const A=yield null===(m=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return null!=A&&A.error&&function _t(C,...g){ue.logLevel<=Ae.in.WARN&&ue.warn(`Auth (${le.SDK_VERSION}): ${C}`,...g)}(`Error while retrieving App Check token: ${A.error}`),null==A?void 0:A.token})()}}function kr(C){return(0,ee.m9)(C)}class Ci{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,ee.ne)(m=>this.observer=m)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function be(C){const g=C.indexOf(":");return g<0?"":C.substr(0,g+1)}function me(C){if(!C)return null;const g=Number(C);return isNaN(g)?null:g}class Qe{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return De("not implemented")}_getIdTokenResponse(g){return De("not implemented")}_linkToIdToken(g,m){return De("not implemented")}_getReauthenticationResolver(g){return De("not implemented")}}function Vt(C,g){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:resetPassword",nn(C,g))})).apply(this,arguments)}function Qt(C,g){return an.apply(this,arguments)}function an(){return(an=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function rr(){return(rr=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:update",nn(C,g))})).apply(this,arguments)}function er(C,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,_.Z)(function*(C,g){return At(C,"POST","/v1/accounts:signInWithPassword",nn(C,g))})).apply(this,arguments)}function Wr(C,g){return $i.apply(this,arguments)}function $i(){return($i=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:sendOobCode",nn(C,g))})).apply(this,arguments)}function ot(){return(ot=(0,_.Z)(function*(C,g){return Wr(C,g)})).apply(this,arguments)}function xt(C,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,_.Z)(function*(C,g){return Wr(C,g)})).apply(this,arguments)}function dn(C,g){return fr.apply(this,arguments)}function fr(){return(fr=(0,_.Z)(function*(C,g){return Wr(C,g)})).apply(this,arguments)}function Ir(){return(Ir=(0,_.Z)(function*(C,g){return Wr(C,g)})).apply(this,arguments)}function vs(){return(vs=(0,_.Z)(function*(C,g){return At(C,"POST","/v1/accounts:signInWithEmailLink",nn(C,g))})).apply(this,arguments)}function _i(){return(_i=(0,_.Z)(function*(C,g){return At(C,"POST","/v1/accounts:signInWithEmailLink",nn(C,g))})).apply(this,arguments)}class Ss extends Qe{constructor(g,m,A,K=null){super("password",A),this._email=g,this._password=m,this._tenantId=K}static _fromEmailAndPassword(g,m){return new Ss(g,m,"password")}static _fromEmailAndCode(g,m,A=null){return new Ss(g,m,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(null!=m&&m.email&&null!=m&&m.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,_.Z)(function*(){var A;switch(m.signInMethod){case"password":const K={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(A=g._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const oe=yield An(g,K,"signInWithPassword");return er(g,oe)}return er(g,K).catch(function(){var oe=(0,_.Z)(function*(st){if("auth/missing-recaptcha-token"===st.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Dt=yield An(g,K,"signInWithPassword");return er(g,Dt)}return Promise.reject(st)});return function(st){return oe.apply(this,arguments)}}());case"emailLink":return function ei(C,g){return vs.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:it(g,"internal-error")}})()}_linkToIdToken(g,m){var A=this;return(0,_.Z)(function*(){switch(A.signInMethod){case"password":return Qt(g,{idToken:m,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function Oo(C,g){return _i.apply(this,arguments)}(g,{idToken:m,email:A._email,oobCode:A._password});default:it(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Hi(C,g){return jo.apply(this,arguments)}function jo(){return(jo=(0,_.Z)(function*(C,g){return At(C,"POST","/v1/accounts:signInWithIdp",nn(C,g))})).apply(this,arguments)}class Yi extends Qe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Yi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):it("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K}=m,oe=(0,$e._T)(m,["providerId","signInMethod"]);if(!A||!K)return null;const st=new Yi(A,K);return st.idToken=oe.idToken||void 0,st.accessToken=oe.accessToken||void 0,st.secret=oe.secret,st.nonce=oe.nonce,st.pendingToken=oe.pendingToken||null,st}_getIdTokenResponse(g){return Hi(g,this.buildRequest())}_linkToIdToken(g,m){const A=this.buildRequest();return A.idToken=m,Hi(g,A)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Hi(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,ee.xO)(m)}return g}}function Os(){return(Os=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:sendVerificationCode",nn(C,g))})).apply(this,arguments)}function ko(){return(ko=(0,_.Z)(function*(C,g){return At(C,"POST","/v1/accounts:signInWithPhoneNumber",nn(C,g))})).apply(this,arguments)}function ao(){return(ao=(0,_.Z)(function*(C,g){const m=yield At(C,"POST","/v1/accounts:signInWithPhoneNumber",nn(C,g));if(m.temporaryProof)throw xn(C,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const da={USER_NOT_FOUND:"user-not-found"};function lo(){return(lo=(0,_.Z)(function*(C,g){return At(C,"POST","/v1/accounts:signInWithPhoneNumber",nn(C,Object.assign(Object.assign({},g),{operation:"REAUTH"})),da)})).apply(this,arguments)}class us extends Qe{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new us({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new us({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function Da(C,g){return ko.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function As(C,g){return ao.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Qa(C,g){return lo.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:A,verificationCode:K}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:A,code:K}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:A,phoneNumber:K,temporaryProof:oe}=g;return A||m||K||oe?new us({verificationId:m,verificationCode:A,phoneNumber:K,temporaryProof:oe}):null}}class ss{constructor(g){var m,A,K,oe,st,Dt;const rn=(0,ee.zd)((0,ee.pd)(g)),Bn=null!==(m=rn.apiKey)&&void 0!==m?m:null,or=null!==(A=rn.oobCode)&&void 0!==A?A:null,ar=function ha(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=rn.mode)&&void 0!==K?K:null);Ne(Bn&&or&&ar,"argument-error"),this.apiKey=Bn,this.operation=ar,this.code=or,this.continueUrl=null!==(oe=rn.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(st=rn.languageCode)&&void 0!==st?st:null,this.tenantId=null!==(Dt=rn.tenantId)&&void 0!==Dt?Dt:null}static parseLink(g){const m=function Ws(C){const g=(0,ee.zd)((0,ee.pd)(C)).link,m=g?(0,ee.zd)((0,ee.pd)(g)).deep_link_id:null,A=(0,ee.zd)((0,ee.pd)(C)).deep_link_id;return(A?(0,ee.zd)((0,ee.pd)(A)).link:null)||A||m||g||C}(g);try{return new ss(m)}catch{return null}}}let Ho=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(m,A){return Ss._fromEmailAndPassword(m,A)}static credentialWithLink(m,A){const K=ss.parseLink(A);return Ne(K,"argument-error"),Ss._fromEmailAndCode(m,K.code,K.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class co{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ti extends co{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ks extends ti{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return Ne("providerId"in m&&"signInMethod"in m,"argument-error"),Yi._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ne(g.idToken||g.accessToken,"argument-error"),Yi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ks.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ks.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:A,oauthTokenSecret:K,pendingToken:oe,nonce:st,providerId:Dt}=g;if(!A&&!K&&!m&&!oe||!Dt)return null;try{return new ks(Dt)._credential({idToken:m,accessToken:A,nonce:st,pendingToken:oe})}catch{return null}}}let uo=(()=>{class C extends ti{constructor(){super("facebook.com")}static credential(m){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return C.credential(m.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),ho=(()=>{class C extends ti{constructor(){super("google.com"),this.addScope("profile")}static credential(m,A){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:A})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:A,oauthAccessToken:K}=m;if(!A&&!K)return null;try{return C.credential(A,K)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),fa=(()=>{class C extends ti{constructor(){super("github.com")}static credential(m){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return C.credential(m.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class _s extends Qe{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Hi(g,this.buildRequest())}_linkToIdToken(g,m){const A=this.buildRequest();return A.idToken=m,Hi(g,A)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Hi(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K,pendingToken:oe}=m;return A&&K&&oe&&A===K?new _s(A,oe):null}static _create(g,m){return new _s(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class No extends co{constructor(g){Ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return No.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return No.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=_s.fromJSON(g);return Ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:A}=g;if(!m||!A)return null;try{return _s._create(A,m)}catch{return null}}}let na=(()=>{class C extends ti{constructor(){super("twitter.com")}static credential(m,A){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:A})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:A,oauthTokenSecret:K}=m;if(!A||!K)return null;try{return C.credential(A,K)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function xs(C,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,_.Z)(function*(C,g){return At(C,"POST","/v1/accounts:signUp",nn(C,g))})).apply(this,arguments)}class Zi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,A,K=!1){return(0,_.Z)(function*(){const oe=yield Kt._fromIdTokenResponse(g,A,K),st=bo(A);return new Zi({user:oe,providerId:st,_tokenResponse:A,operationType:m})})()}static _forOperation(g,m,A){return(0,_.Z)(function*(){yield g._updateTokensIfNecessary(A,!0);const K=bo(A);return new Zi({user:g,providerId:K,_tokenResponse:A,operationType:m})})()}}function bo(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function po(){return(po=(0,_.Z)(function*(C){var g;const m=kr(C);if(yield m._initializationPromise,null!==(g=m.currentUser)&&void 0!==g&&g.isAnonymous)return new Zi({user:m.currentUser,providerId:null,operationType:"signIn"});const A=yield xs(m,{returnSecureToken:!0}),K=yield Zi._fromIdTokenResponse(m,"signIn",A,!0);return yield m._updateCurrentUser(K.user),K})).apply(this,arguments)}class go extends ee.ZR{constructor(g,m,A,K){var oe;super(m.code,m.message),this.operationType=A,this.user=K,Object.setPrototypeOf(this,go.prototype),this.customData={appName:g.name,tenantId:null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:m.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(g,m,A,K){return new go(g,m,A,K)}}function Oi(C,g,m,A){return("reauthenticate"===g?m._getReauthenticationResolver(C):m._getIdTokenResponse(C)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?go._fromErrorAndOperation(C,oe,g,A):oe})}function ra(C){return new Set(C.map(({providerId:g})=>g).filter(g=>!!g))}function os(){return os=(0,_.Z)(function*(C,g){const m=(0,ee.m9)(C);yield Gi(!0,m,g);const{providerUserInfo:A}=yield function hr(C,g){return _r.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),K=ra(A||[]);return m.providerData=m.providerData.filter(oe=>K.has(oe.providerId)),K.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),os.apply(this,arguments)}function Xi(C,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,_.Z)(function*(C,g,m=!1){const A=yield ln(C,g._linkToIdToken(C.auth,yield C.getIdToken()),m);return Zi._forOperation(C,"link",A)})).apply(this,arguments)}function Gi(C,g,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,_.Z)(function*(C,g,m){yield Qr(g);const K=!1===C?"provider-already-linked":"no-such-provider";Ne(ra(g.providerData).has(m)===C,g.auth,K)})).apply(this,arguments)}function Ns(C,g){return To.apply(this,arguments)}function To(){return(To=(0,_.Z)(function*(C,g,m=!1){const{auth:A}=C,K="reauthenticate";try{const oe=yield ln(C,Oi(A,K,g,C),m);Ne(oe.idToken,A,"internal-error");const st=Gn(oe.idToken);Ne(st,A,"internal-error");const{sub:Dt}=st;return Ne(C.uid===Dt,A,"user-mismatch"),Zi._forOperation(C,K,oe)}catch(oe){throw"auth/user-not-found"===(null==oe?void 0:oe.code)&&it(A,"user-mismatch"),oe}})).apply(this,arguments)}function ia(C,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,_.Z)(function*(C,g,m=!1){const A="signIn",K=yield Oi(C,A,g),oe=yield Zi._fromIdTokenResponse(C,A,K);return m||(yield C._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function So(C,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,_.Z)(function*(C,g){return ia(kr(C),g)})).apply(this,arguments)}function sa(C,g){return b.apply(this,arguments)}function b(){return(b=(0,_.Z)(function*(C,g){const m=(0,ee.m9)(C);return yield Gi(!1,m,g.providerId),Xi(m,g)})).apply(this,arguments)}function q(C,g){return T.apply(this,arguments)}function T(){return(T=(0,_.Z)(function*(C,g){return Ns((0,ee.m9)(C),g)})).apply(this,arguments)}function ge(){return(ge=(0,_.Z)(function*(C,g){return At(C,"POST","/v1/accounts:signInWithCustomToken",nn(C,g))})).apply(this,arguments)}function F(){return F=(0,_.Z)(function*(C,g){const m=kr(C),A=yield function W(C,g){return ge.apply(this,arguments)}(m,{token:g,returnSecureToken:!0}),K=yield Zi._fromIdTokenResponse(m,"signIn",A);return yield m._updateCurrentUser(K.user),K}),F.apply(this,arguments)}class L{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?ne._fromServerResponse(g,m):"totpInfo"in m?vt._fromServerResponse(g,m):it(g,"internal-error")}}class ne extends L{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new ne(m)}}class vt extends L{constructor(g){super("totp",g)}static _fromServerResponse(g,m){return new vt(m)}}function Tn(C,g,m){var A;Ne((null===(A=m.url)||void 0===A?void 0:A.length)>0,C,"invalid-continue-uri"),Ne(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Ne(m.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(Ne(m.android.packageName.length>0,C,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function ii(){return ii=(0,_.Z)(function*(C,g,m){var A;const K=kr(C),oe={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(A=K._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const st=yield An(K,oe,"getOobCode",!0);m&&Tn(K,st,m),yield xt(K,st)}else m&&Tn(K,oe,m),yield xt(K,oe).catch(function(){var st=(0,_.Z)(function*(Dt){if("auth/missing-recaptcha-token"!==Dt.code)return Promise.reject(Dt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const rn=yield An(K,oe,"getOobCode",!0);m&&Tn(K,rn,m),yield xt(K,rn)}});return function(Dt){return st.apply(this,arguments)}}())}),ii.apply(this,arguments)}function ds(){return(ds=(0,_.Z)(function*(C,g,m){yield Vt((0,ee.m9)(C),{oobCode:g,newPassword:m})})).apply(this,arguments)}function xi(){return xi=(0,_.Z)(function*(C,g){yield function vn(C,g){return rr.apply(this,arguments)}((0,ee.m9)(C),{oobCode:g})}),xi.apply(this,arguments)}function Va(C,g){return ts.apply(this,arguments)}function ts(){return(ts=(0,_.Z)(function*(C,g){const m=(0,ee.m9)(C),A=yield Vt(m,{oobCode:g}),K=A.requestType;switch(Ne(K,m,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(A.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(A.mfaInfo,m,"internal-error");default:Ne(A.email,m,"internal-error")}let oe=null;return A.mfaInfo&&(oe=L._fromServerResponse(kr(m),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:oe},operation:K}})).apply(this,arguments)}function qs(){return(qs=(0,_.Z)(function*(C,g){const{data:m}=yield Va((0,ee.m9)(C),g);return m.email})).apply(this,arguments)}function Ys(){return Ys=(0,_.Z)(function*(C,g,m){var A;const K=kr(C),oe={returnSecureToken:!0,email:g,password:m,clientType:"CLIENT_TYPE_WEB"};let st;if(null!==(A=K._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const Bn=yield An(K,oe,"signUpPassword");st=xs(K,Bn)}else st=xs(K,oe).catch(function(){var Bn=(0,_.Z)(function*(or){if("auth/missing-recaptcha-token"===or.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ar=yield An(K,oe,"signUpPassword");return xs(K,ar)}return Promise.reject(or)});return function(or){return Bn.apply(this,arguments)}}());const Dt=yield st.catch(Bn=>Promise.reject(Bn)),rn=yield Zi._fromIdTokenResponse(K,"signIn",Dt);return yield K._updateCurrentUser(rn.user),rn}),Ys.apply(this,arguments)}function Ta(){return Ta=(0,_.Z)(function*(C,g,m){var A;const K=kr(C),oe={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function st(Dt,rn){Ne(rn.handleCodeInApp,K,"argument-error"),rn&&Tn(K,Dt,rn)}if(null!==(A=K._getRecaptchaConfig())&&void 0!==A&&A.emailPasswordEnabled){const Dt=yield An(K,oe,"getOobCode",!0);st(Dt,m),yield dn(K,Dt)}else st(oe,m),yield dn(K,oe).catch(function(){var Dt=(0,_.Z)(function*(rn){if("auth/missing-recaptcha-token"!==rn.code)return Promise.reject(rn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Bn=yield An(K,oe,"getOobCode",!0);st(Bn,m),yield dn(K,Bn)}});return function(rn){return Dt.apply(this,arguments)}}())}),Ta.apply(this,arguments)}function Rs(){return(Rs=(0,_.Z)(function*(C,g,m){const A=(0,ee.m9)(C),K=Ho.credentialWithLink(g,m||pt());return Ne(K._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),So(A,K)})).apply(this,arguments)}function Sa(){return(Sa=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:createAuthUri",nn(C,g))})).apply(this,arguments)}function Fo(){return Fo=(0,_.Z)(function*(C,g){const A={identifier:g,continueUri:Tt()?pt():"http://localhost"},{signinMethods:K}=yield function tl(C,g){return Sa.apply(this,arguments)}((0,ee.m9)(C),A);return K||[]}),Fo.apply(this,arguments)}function ga(){return ga=(0,_.Z)(function*(C,g){const m=(0,ee.m9)(C),K={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};g&&Tn(m.auth,K,g);const{email:oe}=yield function mt(C,g){return ot.apply(this,arguments)}(m.auth,K);oe!==C.email&&(yield C.reload())}),ga.apply(this,arguments)}function xo(){return xo=(0,_.Z)(function*(C,g,m){const A=(0,ee.m9)(C),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:g};m&&Tn(A.auth,oe,m);const{email:st}=yield function Er(C,g){return Ir.apply(this,arguments)}(A.auth,oe);st!==C.email&&(yield C.reload())}),xo.apply(this,arguments)}function Zs(){return(Zs=(0,_.Z)(function*(C,g){return zt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Aa(){return Aa=(0,_.Z)(function*(C,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const A=(0,ee.m9)(C),oe={idToken:yield A.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},st=yield ln(A,function Go(C,g){return Zs.apply(this,arguments)}(A.auth,oe));A.displayName=st.displayName||null,A.photoURL=st.photoUrl||null;const Dt=A.providerData.find(({providerId:rn})=>"password"===rn);Dt&&(Dt.displayName=A.displayName,Dt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(st)}),Aa.apply(this,arguments)}function Vr(C,g,m){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,_.Z)(function*(C,g,m){const{auth:A}=C,oe={idToken:yield C.getIdToken(),returnSecureToken:!0};g&&(oe.email=g),m&&(oe.password=m);const st=yield ln(C,Qt(A,oe));yield C._updateTokensIfNecessary(st,!0)})).apply(this,arguments)}class Lo{constructor(g,m,A={}){this.isNewUser=g,this.providerId=m,this.profile=A}}class yl extends Lo{constructor(g,m,A,K){super(g,m,A),this.username=K}}class mo extends Lo{constructor(g,m){super(g,"facebook.com",m)}}class jl extends yl{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Sr extends Lo{constructor(g,m){super(g,"google.com",m)}}class Hl extends yl{constructor(g,m,A){super(g,"twitter.com",m,A)}}function vl(C){const{user:g,_tokenResponse:m}=C;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function xa(C){var g,m;if(!C)return null;const{providerId:A}=C,K=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},oe=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!A&&null!=C&&C.idToken){const st=null===(m=null===(g=Gn(C.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(st)return new Lo(oe,"anonymous"!==st&&"custom"!==st?st:null)}if(!A)return null;switch(A){case"facebook.com":return new mo(oe,K);case"github.com":return new jl(oe,K);case"google.com":return new Sr(oe,K);case"twitter.com":return new Hl(oe,K,C.screenName||null);case"custom":case"anonymous":return new Lo(oe,null);default:return new Lo(oe,A,K)}}(m)}class Br{constructor(g,m,A){this.type=g,this.credential=m,this.auth=A}static _fromIdtoken(g,m){return new Br("enroll",g,m)}static _fromMfaPendingCredential(g){return new Br("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,A;if(null!=g&&g.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Br._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(A=g.multiFactorSession)&&void 0!==A&&A.idToken)return Br._fromIdtoken(g.multiFactorSession.idToken)}return null}}class wr{constructor(g,m,A){this.session=g,this.hints=m,this.signInResolver=A}static _fromError(g,m){const A=kr(g),K=m.customData._serverResponse,oe=(K.mfaInfo||[]).map(Dt=>L._fromServerResponse(A,Dt));Ne(K.mfaPendingCredential,A,"internal-error");const st=Br._fromMfaPendingCredential(K.mfaPendingCredential);return new wr(st,oe,function(){var Dt=(0,_.Z)(function*(rn){const Bn=yield rn._process(A,st);delete K.mfaInfo,delete K.mfaPendingCredential;const or=Object.assign(Object.assign({},K),{idToken:Bn.idToken,refreshToken:Bn.refreshToken});switch(m.operationType){case"signIn":const ar=yield Zi._fromIdTokenResponse(A,m.operationType,or);return yield A._updateCurrentUser(ar.user),ar;case"reauthenticate":return Ne(m.user,A,"internal-error"),Zi._forOperation(m.user,m.operationType,or);default:it(A,"internal-error")}});return function(rn){return Dt.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,_.Z)(function*(){return m.signInResolver(g)})()}}class Es{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(A=>L._fromServerResponse(g.auth,A)))})}static _fromUser(g){return new Es(g)}getSession(){var g=this;return(0,_.Z)(function*(){return Br._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var A=this;return(0,_.Z)(function*(){const K=g,oe=yield A.getSession(),st=yield ln(A.user,K._process(A.user.auth,oe,m));return yield A.user._updateTokensIfNecessary(st),A.user.reload()})()}unenroll(g){var m=this;return(0,_.Z)(function*(){const A="string"==typeof g?g:g.uid,K=yield m.user.getIdToken();try{const oe=yield ln(m.user,function Ko(C,g){return zt(C,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(C,g))}(m.user.auth,{idToken:K,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:st})=>st!==A),yield m.user._updateTokensIfNecessary(oe),yield m.user.reload()}catch(oe){throw oe}})()}}const Xs=new WeakMap,Qs="__sak";class rl{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Qs,"1"),this.storage.removeItem(Qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wi=(()=>{class C extends rl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,A)=>this.onStorageEvent(m,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _l(){const C=(0,ee.z$)();return lt(C)||Nt(C)}()&&function Xt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=It(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const A of Object.keys(this.listeners)){const K=this.storage.getItem(A),oe=this.localCache[A];K!==oe&&m(A,oe,K)}}onStorageEvent(m,A=!1){if(!m.key)return void this.forAllChangedKeys((Dt,rn,Bn)=>{this.notifyListeners(Dt,Bn)});const K=m.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Dt=this.storage.getItem(K);if(m.newValue!==Dt)null!==m.newValue?this.storage.setItem(K,m.newValue):this.storage.removeItem(K);else if(this.localCache[K]===m.newValue&&!A)return}const oe=()=>{const Dt=this.storage.getItem(K);!A&&this.localCache[K]===Dt||this.notifyListeners(K,Dt)},st=this.storage.getItem(K);!function St(){return(0,ee.w1)()&&10===document.documentMode}()||st===m.newValue||m.newValue===m.oldValue?oe():setTimeout(oe,10)}notifyListeners(m,A){this.localCache[m]=A;const K=this.listeners[m];if(K)for(const oe of Array.from(K))oe(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,A,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:A,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(A)}_removeListener(m,A){this.listeners[m]&&(this.listeners[m].delete(A),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,A){var K=()=>super._set,oe=this;return(0,_.Z)(function*(){yield K().call(oe,m,A),oe.localCache[m]=JSON.stringify(A)})()}_get(m){var A=()=>super._get,K=this;return(0,_.Z)(function*(){const oe=yield A().call(K,m);return K.localCache[m]=JSON.stringify(oe),oe})()}_remove(m){var A=()=>super._remove,K=this;return(0,_.Z)(function*(){yield A().call(K,m),delete K.localCache[m]})()}}return C.type="LOCAL",C})(),Js=(()=>{class C extends rl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,A){}_removeListener(m,A){}}return C.type="SESSION",C})();let ac=(()=>{class C{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const A=this.receivers.find(oe=>oe.isListeningto(m));if(A)return A;const K=new C(m);return this.receivers.push(K),K}isListeningto(m){return this.eventTarget===m}handleEvent(m){var A=this;return(0,_.Z)(function*(){const K=m,{eventId:oe,eventType:st,data:Dt}=K.data,rn=A.handlersMap[st];if(null==rn||!rn.size)return;K.ports[0].postMessage({status:"ack",eventId:oe,eventType:st});const Bn=Array.from(rn).map(function(){var ar=(0,_.Z)(function*(Ki){return Ki(K.origin,Dt)});return function(Ki){return ar.apply(this,arguments)}}()),or=yield function oc(C){return Promise.all(C.map(function(){var g=(0,_.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(A){return{fulfilled:!1,reason:A}}});return function(m){return g.apply(this,arguments)}}()))}(Bn);K.ports[0].postMessage({status:"done",eventId:oe,eventType:st,response:or})})()}_subscribe(m,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(A)}_unsubscribe(m,A){this.handlersMap[m]&&A&&this.handlersMap[m].delete(A),(!A||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function _n(C="",g=10){let m="";for(let A=0;A<g;A++)m+=Math.floor(10*Math.random());return C+m}class Ji{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,A=50){var K=this;return(0,_.Z)(function*(){const oe=typeof MessageChannel<"u"?new MessageChannel:null;if(!oe)throw new Error("connection_unavailable");let st,Dt;return new Promise((rn,Bn)=>{const or=_n("",20);oe.port1.start();const ar=setTimeout(()=>{Bn(new Error("unsupported_event"))},A);Dt={messageChannel:oe,onMessage(Ki){const Oa=Ki;if(Oa.data.eventId===or)switch(Oa.data.status){case"ack":clearTimeout(ar),st=setTimeout(()=>{Bn(new Error("timeout"))},3e3);break;case"done":clearTimeout(st),rn(Oa.data.response);break;default:clearTimeout(ar),clearTimeout(st),Bn(new Error("invalid_response"))}}},K.handlers.add(Dt),oe.port1.addEventListener("message",Dt.onMessage),K.target.postMessage({eventType:g,eventId:or,data:m},[oe.port2])}).finally(()=>{Dt&&K.removeMessageHandler(Dt)})})()}}function mi(){return window}function Kn(){return typeof mi().WorkerGlobalScope<"u"&&"function"==typeof mi().importScripts}function lc(){return(lc=(0,_.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const hn="firebaseLocalStorageDb",si=1,il="firebaseLocalStorage",cc="fbase_key";class El{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Ra(C,g){return C.transaction([il],g?"readwrite":"readonly").objectStore(il)}function qc(){const C=indexedDB.open(hn,si);return new Promise((g,m)=>{C.addEventListener("error",()=>{m(C.error)}),C.addEventListener("upgradeneeded",()=>{const A=C.result;try{A.createObjectStore(il,{keyPath:cc})}catch(K){m(K)}}),C.addEventListener("success",(0,_.Z)(function*(){const A=C.result;A.objectStoreNames.contains(il)?g(A):(A.close(),yield function Ld(){const C=indexedDB.deleteDatabase(hn);return new El(C).toPromise()}(),g(yield qc()))}))})}function $o(C,g,m){return Il.apply(this,arguments)}function Il(){return(Il=(0,_.Z)(function*(C,g,m){const A=Ra(C,!0).put({[cc]:g,value:m});return new El(A).toPromise()})).apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(C,g){const m=Ra(C,!1).get(g),A=yield new El(m).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function ma(C,g){const m=Ra(C,!0).delete(g);return new El(m).toPromise()}const ci=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,_.Z)(function*(){return m.db||(m.db=yield qc()),m.db})()}_withRetries(m){var A=this;return(0,_.Z)(function*(){let K=0;for(;;)try{const oe=yield A._openDb();return yield m(oe)}catch(oe){if(K++>3)throw oe;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,_.Z)(function*(){return Kn()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,_.Z)(function*(){m.receiver=ac._getInstance(function Ht(){return Kn()?self:null}()),m.receiver._subscribe("keyChanged",function(){var A=(0,_.Z)(function*(K,oe){return{keyProcessed:(yield m._poll()).includes(oe.key)}});return function(K,oe){return A.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var A=(0,_.Z)(function*(K,oe){return["keyChanged"]});return function(K,oe){return A.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,_.Z)(function*(){var A,K;if(m.activeServiceWorker=yield function dr(){return lc.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ji(m.activeServiceWorker);const oe=yield m.sender._send("ping",{},800);oe&&null!==(A=oe[0])&&void 0!==A&&A.fulfilled&&null!==(K=oe[0])&&void 0!==K&&K.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var A=this;return(0,_.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function jn(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:m},A.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const m=yield qc();return yield $o(m,Qs,"1"),yield ma(m,Qs),!0}catch{}return!1})()}_withPendingWrite(m){var A=this;return(0,_.Z)(function*(){A.pendingWrites++;try{yield m()}finally{A.pendingWrites--}})()}_set(m,A){var K=this;return(0,_.Z)(function*(){return K._withPendingWrite((0,_.Z)(function*(){return yield K._withRetries(oe=>$o(oe,m,A)),K.localCache[m]=A,K.notifyServiceWorker(m)}))})()}_get(m){var A=this;return(0,_.Z)(function*(){const K=yield A._withRetries(oe=>function Mc(C,g){return eo.apply(this,arguments)}(oe,m));return A.localCache[m]=K,K})()}_remove(m){var A=this;return(0,_.Z)(function*(){return A._withPendingWrite((0,_.Z)(function*(){return yield A._withRetries(K=>ma(K,m)),delete A.localCache[m],A.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,_.Z)(function*(){const A=yield m._withRetries(st=>{const Dt=Ra(st,!1).getAll();return new El(Dt).toPromise()});if(!A)return[];if(0!==m.pendingWrites)return[];const K=[],oe=new Set;for(const{fbase_key:st,value:Dt}of A)oe.add(st),JSON.stringify(m.localCache[st])!==JSON.stringify(Dt)&&(m.notifyListeners(st,Dt),K.push(st));for(const st of Object.keys(m.localCache))m.localCache[st]&&!oe.has(st)&&(m.notifyListeners(st,null),K.push(st));return K})()}notifyListeners(m,A){this.localCache[m]=A;const K=this.listeners[m];if(K)for(const oe of Array.from(K))oe(A)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(A)}_removeListener(m,A){this.listeners[m]&&(this.listeners[m].delete(A),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})(),Ln=1e12;class zl{constructor(g){this.auth=g,this.counter=Ln,this._widgets=new Map}render(g,m){const A=this.counter;return this._widgets.set(A,new uc(g,this.auth.name,m||{})),this.counter++,A}reset(g){var m;const A=g||Ln;null===(m=this._widgets.get(A))||void 0===m||m.delete(),this._widgets.delete(A)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Ln))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,_.Z)(function*(){var A;return null===(A=m._widgets.get(g||Ln))||void 0===A||A.execute(),""})()}}class uc{constructor(g,m,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof g?document.getElementById(g):g;Ne(K,"argument-error",{appName:m}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function wl(C){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<C;A++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zc=Xn("rcb"),dc=new Fe(3e4,6e4);class Oc{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=mi().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return Ne(function Xc(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(m),g,"argument-error"),this.shouldResolveImmediately(m)&&kn(mi().grecaptcha)?Promise.resolve(mi().grecaptcha):new Promise((A,K)=>{const oe=mi().setTimeout(()=>{K(tt(g,"network-request-failed"))},dc.get());mi()[Zc]=()=>{mi().clearTimeout(oe),delete mi()[Zc];const Dt=mi().grecaptcha;if(!Dt||!kn(Dt))return void K(tt(g,"internal-error"));const rn=Dt.render;Dt.render=(Bn,or)=>{const ar=rn(Bn,or);return this.counter++,ar},this.hostLanguage=m,A(Dt)},Wn(`https://www.google.com/recaptcha/api.js??${(0,ee.xO)({onload:Zc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(oe),K(tt(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=mi().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ds{load(g){return(0,_.Z)(function*(){return new zl(g)})()}clearedOneInstance(){}}const es="recaptcha",bl={theme:"light",type:"image"};class Gl{constructor(g,m=Object.assign({},bl),A){this.parameters=m,this.type=es,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kr(A),this.isInvisible="invisible"===this.parameters.size,Ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof g?document.getElementById(g):g;Ne(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ds:new Oc,this.validateStartingState()}verify(){var g=this;return(0,_.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),A=g.getAssertedRecaptcha();return A.getResponse(m)||new Promise(oe=>{const st=Dt=>{Dt&&(g.tokenChangeListeners.delete(st),oe(Dt))};g.tokenChangeListeners.add(st),g.isInvisible&&A.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(A=>A(m)),"function"==typeof g)g(m);else if("string"==typeof g){const A=mi()[g];"function"==typeof A&&A(m)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,_.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const A=document.createElement("div");m.appendChild(A),m=A}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,_.Z)(function*(){Ne(Tt()&&!Kn(),g.auth,"internal-error"),yield function qr(){let C=null;return new Promise(g=>{"complete"!==document.readyState?(C=()=>g(),window.addEventListener("load",C)):g()}).catch(g=>{throw C&&window.removeEventListener("load",C),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function ze(C){return bt.apply(this,arguments)}(g.auth);Ne(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Rr{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=us._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function $t(){return($t=(0,_.Z)(function*(C,g,m){const A=kr(C),K=yield Yo(A,g,(0,ee.m9)(m));return new Rr(K,oe=>So(A,oe))})).apply(this,arguments)}function to(){return(to=(0,_.Z)(function*(C,g,m){const A=(0,ee.m9)(C);yield Gi(!1,A,"phone");const K=yield Yo(A.auth,g,(0,ee.m9)(m));return new Rr(K,oe=>sa(A,oe))})).apply(this,arguments)}function la(){return(la=(0,_.Z)(function*(C,g,m){const A=(0,ee.m9)(C),K=yield Yo(A.auth,g,(0,ee.m9)(m));return new Rr(K,oe=>q(A,oe))})).apply(this,arguments)}function Yo(C,g,m){return ui.apply(this,arguments)}function ui(){return ui=(0,_.Z)(function*(C,g,m){var A;const K=yield m.verify();try{let oe;if(Ne("string"==typeof K,C,"argument-error"),Ne(m.type===es,C,"argument-error"),oe="string"==typeof g?{phoneNumber:g}:g,"session"in oe){const st=oe.session;if("phoneNumber"in oe)return Ne("enroll"===st.type,C,"internal-error"),(yield function bi(C,g){return zt(C,"POST","/v2/accounts/mfaEnrollment:start",nn(C,g))}(C,{idToken:st.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{Ne("signin"===st.type,C,"internal-error");const Dt=(null===(A=oe.multiFactorHint)||void 0===A?void 0:A.uid)||oe.multiFactorUid;return Ne(Dt,C,"missing-multi-factor-info"),(yield function sr(C,g){return zt(C,"POST","/v2/accounts/mfaSignIn:start",nn(C,g))}(C,{mfaPendingCredential:st.credential,mfaEnrollmentId:Dt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:st}=yield function oo(C,g){return Os.apply(this,arguments)}(C,{phoneNumber:oe.phoneNumber,recaptchaToken:K});return st}}finally{m._reset()}}),ui.apply(this,arguments)}function S(){return(S=(0,_.Z)(function*(C,g){yield Xi((0,ee.m9)(C),g)})).apply(this,arguments)}let x=(()=>{class C{constructor(m){this.providerId=C.PROVIDER_ID,this.auth=kr(m)}verifyPhoneNumber(m,A){return Yo(this.auth,m,(0,ee.m9)(A))}static credential(m,A){return us._fromVerification(m,A)}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:A,temporaryProof:K}=m;return A&&K?us._fromTokenResponse(A,K):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function w(C,g){return g?rt(g):(Ne(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class O extends Qe{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Hi(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Hi(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Hi(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function z(C){return ia(C.auth,new O(C),C.bypassAuthState)}function re(C){const{auth:g,user:m}=C;return Ne(m,g,"internal-error"),Ns(m,new O(C),C.bypassAuthState)}function ae(C){return at.apply(this,arguments)}function at(){return(at=(0,_.Z)(function*(C){const{auth:g,user:m}=C;return Ne(m,g,"internal-error"),Xi(m,new O(C),C.bypassAuthState)})).apply(this,arguments)}class Ut{constructor(g,m,A,K,oe=!1){this.auth=g,this.resolver=A,this.user=K,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,_.Z)(function*(A,K){g.pendingPromise={resolve:A,reject:K};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(oe){g.reject(oe)}});return function(A,K){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,_.Z)(function*(){const{urlResponse:A,sessionId:K,postBody:oe,tenantId:st,error:Dt,type:rn}=g;if(Dt)return void m.reject(Dt);const Bn={auth:m.auth,requestUri:A,sessionId:K,tenantId:st||void 0,postBody:oe||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(rn)(Bn))}catch(or){m.reject(or)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return z;case"linkViaPopup":case"linkViaRedirect":return ae;case"reauthViaPopup":case"reauthViaRedirect":return re;default:it(this.auth,"internal-error")}}resolve(g){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const En=new Fe(2e3,1e4);function $n(){return($n=(0,_.Z)(function*(C,g,m){const A=kr(C);Ve(C,g,co);const K=w(A,m);return new Mo(A,"signInViaPopup",g,K).executeNotNull()})).apply(this,arguments)}function rs(){return(rs=(0,_.Z)(function*(C,g,m){const A=(0,ee.m9)(C);Ve(A.auth,g,co);const K=w(A.auth,m);return new Mo(A.auth,"reauthViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}function ya(){return(ya=(0,_.Z)(function*(C,g,m){const A=(0,ee.m9)(C);Ve(A.auth,g,co);const K=w(A.auth,m);return new Mo(A.auth,"linkViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}let Mo=(()=>{class C extends Ut{constructor(m,A,K,oe,st){super(m,A,oe,st),this.provider=K,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var m=this;return(0,_.Z)(function*(){const A=yield m.execute();return Ne(A,m.auth,"internal-error"),A})()}onExecution(){var m=this;return(0,_.Z)(function*(){He(1===m.filter.length,"Popup operations only handle one event");const A=_n();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],A),m.authWindow.associatedEvent=A,m.resolver._originValidation(m.auth).catch(K=>{m.reject(K)}),m.resolver._isIframeWebStorageSupported(m.auth,K=>{K||m.reject(tt(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const m=()=>{var A,K;this.pollId=null!==(K=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(tt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,En.get())};m()}}return C.currentPopupAction=null,C})();const Is="pendingRedirect",Or=new Map;class hc extends Ut{constructor(g,m,A=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,A),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,_.Z)(function*(){let A=Or.get(m.auth._key());if(!A){try{const oe=(yield function _o(C,g){return Qc.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;A=()=>Promise.resolve(oe)}catch(K){A=()=>Promise.reject(K)}Or.set(m.auth._key(),A)}return m.bypassAuthState||Or.set(m.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,A=this;return(0,_.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(A,g);if("unknown"!==g.type){if(g.eventId){const K=yield A.auth._redirectUserForId(g.eventId);if(K)return A.user=K,m().call(A,g);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Qc(){return(Qc=(0,_.Z)(function*(C,g){const m=nd(g),A=Zo(C);if(!(yield A._isAvailable()))return!1;const K="true"===(yield A._get(m));return yield A._remove(m),K})).apply(this,arguments)}function Bo(C,g){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,_.Z)(function*(C,g){return Zo(C)._set(nd(g),"true")})).apply(this,arguments)}function $d(C,g){Or.set(C._key(),g)}function Zo(C){return rt(C._redirectPersistence)}function nd(C){return we(Is,C.config.apiKey,C.name)}function rd(C,g,m){return function id(C,g,m){return Eu.apply(this,arguments)}(C,g,m)}function Eu(){return(Eu=(0,_.Z)(function*(C,g,m){const A=kr(C);Ve(C,g,co),yield A._initializationPromise;const K=w(A,m);return yield Bo(K,A),K._openRedirect(A,g,"signInViaRedirect")})).apply(this,arguments)}function Bd(C,g,m){return function kc(C,g,m){return Nc.apply(this,arguments)}(C,g,m)}function Nc(){return(Nc=(0,_.Z)(function*(C,g,m){const A=(0,ee.m9)(C);Ve(A.auth,g,co),yield A.auth._initializationPromise;const K=w(A.auth,m);yield Bo(K,A.auth);const oe=yield Tl(A);return K._openRedirect(A.auth,g,"reauthViaRedirect",oe)})).apply(this,arguments)}function Fc(C,g,m){return function Iu(C,g,m){return Bs.apply(this,arguments)}(C,g,m)}function Bs(){return(Bs=(0,_.Z)(function*(C,g,m){const A=(0,ee.m9)(C);Ve(A.auth,g,co),yield A.auth._initializationPromise;const K=w(A.auth,m);yield Gi(!1,A,g.providerId),yield Bo(K,A.auth);const oe=yield Tl(A);return K._openRedirect(A.auth,g,"linkViaRedirect",oe)})).apply(this,arguments)}function ol(){return(ol=(0,_.Z)(function*(C,g){return yield kr(C)._initializationPromise,Jc(C,g,!1)})).apply(this,arguments)}function Jc(C,g){return xr.apply(this,arguments)}function xr(){return(xr=(0,_.Z)(function*(C,g,m=!1){const A=kr(C),K=w(A,g),st=yield new hc(A,K,m).execute();return st&&!m&&(delete st.user._redirectEventId,yield A._persistUserIfCurrent(st.user),yield A._setRedirectUser(null,g)),st})).apply(this,arguments)}function Tl(C){return Us.apply(this,arguments)}function Us(){return(Us=(0,_.Z)(function*(C){const g=_n(`${C.uid}:::`);return C._redirectEventId=g,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),g})).apply(this,arguments)}class Sl{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(g,A)&&(m=!0,this.sendToConsumer(g,A),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function fc(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ps(C);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var A;if(g.error&&!ps(g)){const K=(null===(A=g.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";m.onError(tt(this.auth,K))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const A=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&A}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(va(g))}saveEventToCache(g){this.cachedEventUids.add(va(g)),this.lastProcessedEventTime=Date.now()}}function va(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(g=>g).join("-")}function ps({type:C,error:g}){return"unknown"===C&&"auth/no-auth-event"===(null==g?void 0:g.code)}function ni(C){return no.apply(this,arguments)}function no(){return(no=(0,_.Z)(function*(C,g={}){return zt(C,"GET","/v1/projects",g)})).apply(this,arguments)}const wu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Al=/^https?/;function ro(){return(ro=(0,_.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:g}=yield ni(C);for(const m of g)try{if(Lc(m))return}catch{}it(C,"unauthorized-domain")})).apply(this,arguments)}function Lc(C){const g=pt(),{protocol:m,hostname:A}=new URL(g);if(C.startsWith("chrome-extension://")){const st=new URL(C);return""===st.hostname&&""===A?"chrome-extension:"===m&&C.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&st.hostname===A}if(!Al.test(m))return!1;if(wu.test(C))return A===C;const K=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(A)}const pc=new Fe(3e4,6e4);function Uo(){const C=mi().___jsl;if(null!=C&&C.H)for(const g of Object.keys(C.H))if(C.H[g].r=C.H[g].r||[],C.H[g].L=C.H[g].L||[],C.H[g].r=[...C.H[g].L],C.CP)for(let m=0;m<C.CP.length;m++)C.CP[m]=null}let Xo=null;const eu=new Fe(5e3,15e3),Ha="__/auth/iframe",Qo="emulator/auth/iframe",tu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},za=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ud(C){const g=C.config;Ne(g.authDomain,C,"auth-domain-config-required");const m=g.emulator?je(g,Qo):`https://${C.config.authDomain}/${Ha}`,A={apiKey:g.apiKey,appName:C.name,v:le.SDK_VERSION},K=za.get(C.config.apiHost);K&&(A.eid=K);const oe=C._getFrameworks();return oe.length&&(A.fw=oe.join(",")),`${m}?${(0,ee.xO)(A).slice(1)}`}function B(){return B=(0,_.Z)(function*(C){const g=yield function Eo(C){return Xo=Xo||function Ma(C){return new Promise((g,m)=>{var A,K,oe;function st(){Uo(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Uo(),m(tt(C,"network-request-failed"))},timeout:pc.get()})}if(null!==(K=null===(A=mi().gapi)||void 0===A?void 0:A.iframes)&&void 0!==K&&K.Iframe)g(gapi.iframes.getContext());else{if(null===(oe=mi().gapi)||void 0===oe||!oe.load){const Dt=Xn("iframefcb");return mi()[Dt]=()=>{gapi.load?st():m(tt(C,"network-request-failed"))},Wn(`https://apis.google.com/js/api.js?onload=${Dt}`).catch(rn=>m(rn))}st()}}).catch(g=>{throw Xo=null,g})}(C),Xo}(C),m=mi().gapi;return Ne(m,C,"internal-error"),g.open({where:document.body,url:Ud(C),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tu,dontclear:!0},A=>new Promise(function(){var K=(0,_.Z)(function*(oe,st){yield A.restyle({setHideOnLeave:!1});const Dt=tt(C,"network-request-failed"),rn=mi().setTimeout(()=>{st(Dt)},eu.get());function Bn(){mi().clearTimeout(rn),oe(A)}A.ping(Bn).then(Bn,()=>{st(Dt)})});return function(oe,st){return K.apply(this,arguments)}}()))}),B.apply(this,arguments)}const Z={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Te=500,ct=600,Rt="_blank",Wt="http://localhost";class Un{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const jr="__/auth/handler",Nr="emulator/auth/handler",Po=encodeURIComponent("fac");function ws(C,g,m,A,K,oe){return xl.apply(this,arguments)}function xl(){return(xl=(0,_.Z)(function*(C,g,m,A,K,oe){Ne(C.config.authDomain,C,"auth-domain-config-required"),Ne(C.config.apiKey,C,"invalid-api-key");const st={apiKey:C.config.apiKey,appName:C.name,authType:m,redirectUrl:A,v:le.SDK_VERSION,eventId:K};if(g instanceof co){g.setDefaultLanguage(C.languageCode),st.providerId=g.providerId||"",(0,ee.xb)(g.getCustomParameters())||(st.customParameters=JSON.stringify(g.getCustomParameters()));for(const[or,ar]of Object.entries(oe||{}))st[or]=ar}if(g instanceof ti){const or=g.getScopes().filter(ar=>""!==ar);or.length>0&&(st.scopes=or.join(","))}C.tenantId&&(st.tid=C.tenantId);const Dt=st;for(const or of Object.keys(Dt))void 0===Dt[or]&&delete Dt[or];const rn=yield C._getAppCheckToken(),Bn=rn?`#${Po}=${encodeURIComponent(rn)}`:"";return`${function Vs({config:C}){return C.emulator?je(C,Nr):`https://${C.authDomain}/${jr}`}(C)}?${(0,ee.xO)(Dt).slice(1)}${Bn}`})).apply(this,arguments)}const Wl="webStorageSupport",Io=class Ti{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Js,this._completeRedirectFn=Jc,this._overrideRedirectResult=$d}_openPopup(g,m,A,K){var oe=this;return(0,_.Z)(function*(){var st;He(null===(st=oe.eventManagers[g._key()])||void 0===st?void 0:st.manager,"_initialize() not called before _openPopup()");const Dt=yield ws(g,m,A,pt(),K);return function Nn(C,g,m,A=Te,K=ct){const oe=Math.max((window.screen.availHeight-K)/2,0).toString(),st=Math.max((window.screen.availWidth-A)/2,0).toString();let Dt="";const rn=Object.assign(Object.assign({},Z),{width:A.toString(),height:K.toString(),top:oe,left:st}),Bn=(0,ee.z$)().toLowerCase();m&&(Dt=un(Bn)?Rt:m),Ot(Bn)&&(g=g||Wt,rn.scrollbars="yes");const or=Object.entries(rn).reduce((Ki,[Oa,Ru])=>`${Ki}${Oa}=${Ru},`,"");if(function Ce(C=(0,ee.z$)()){var g;return Nt(C)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Bn)&&"_self"!==Dt)return function ir(C,g){const m=document.createElement("a");m.href=C,m.target=g;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(A)}(g||"",Dt),new Un(null);const ar=window.open(g||"",Dt,or);Ne(ar,C,"popup-blocked");try{ar.focus()}catch{}return new Un(ar)}(g,Dt,_n())})()}_openRedirect(g,m,A,K){var oe=this;return(0,_.Z)(function*(){return yield oe._originValidation(g),function Kc(C){mi().location.href=C}(yield ws(g,m,A,pt(),K)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:K,promise:oe}=this.eventManagers[m];return K?Promise.resolve(K):(He(oe,"If manager is not set, promise should be"),oe)}const A=this.initAndGetManager(g);return this.eventManagers[m]={promise:A},A.catch(()=>{delete this.eventManagers[m]}),A}initAndGetManager(g){var m=this;return(0,_.Z)(function*(){const A=yield function P(C){return B.apply(this,arguments)}(g),K=new Sl(g);return A.register("authEvent",oe=>(Ne(null==oe?void 0:oe.authEvent,g,"invalid-auth-event"),{status:K.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:K},m.iframes[g._key()]=A,K})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Wl,{type:Wl},K=>{var oe;const st=null===(oe=null==K?void 0:K[0])||void 0===oe?void 0:oe[Wl];void 0!==st&&m(!!st),it(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Hr(C){return ro.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return It()||lt()||Nt()}};class nu{constructor(g){this.factorId=g}_process(g,m,A){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,A);case"signin":return this._finalizeSignIn(g,m.credential);default:return De("unexpected MultiFactorSessionType")}}}class Vd extends nu{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Vd(g)}_finalizeEnroll(g,m,A){return function Bi(C,g){return zt(C,"POST","/v2/accounts/mfaEnrollment:finalize",nn(C,g))}(g,{idToken:m,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Pc(C,g){return zt(C,"POST","/v2/accounts/mfaSignIn:finalize",nn(C,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let io=(()=>{class C{constructor(){}static assertion(m){return Vd._fromCredential(m)}}return C.FACTOR_ID="phone",C})();var al="@firebase/auth";class Kl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,_.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(A=>{g((null==A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);m&&(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Rl(){return window}(0,ee.Pz)("authIdTokenMaxAge"),function xh(C){(0,le._registerComponent)(new ve.wA("auth",(g,{options:m})=>{const A=g.getProvider("app").getImmediate(),K=g.getProvider("heartbeat"),oe=g.getProvider("app-check-internal"),{apiKey:st,authDomain:Dt}=A.options;Ne(st&&!st.includes(":"),"invalid-api-key",{appName:A.name}),Ne(!(null!=Dt&&Dt.includes(":")),"argument-error",{appName:A.name});const rn={apiKey:st,authDomain:Dt,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(C)},Bn=new qi(A,K,oe,rn);return function Ur(C,g){const m=(null==g?void 0:g.persistence)||[],A=(Array.isArray(m)?m:[m]).map(rt);null!=g&&g.errorMap&&C._updateErrorMap(g.errorMap),C._initializeWithPersistence(A,null==g?void 0:g.popupRedirectResolver)}(Bn,m),Bn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,A)=>{g.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new ve.wA("auth-internal",g=>{const m=kr(g.getProvider("auth").getImmediate());return new Kl(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(al,"0.23.1",function ql(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,le.registerVersion)(al,"0.23.1","esm2017")}("Browser");const Ph=2e3;function ll(){return ll=(0,_.Z)(function*(C,g,m){var A;const{BuildInfo:K}=Rl();He(g.sessionId,"AuthEvent did not contain a session ID");const oe=yield function Ml(C){return gc.apply(this,arguments)}(g.sessionId),st={};return Nt()?st.ibi=K.packageName:Ke()?st.apn=K.packageName:it(C,"operation-not-supported-in-this-environment"),K.displayName&&(st.appDisplayName=K.displayName),st.sessionId=oe,ws(C,m,g.type,void 0,null!==(A=g.eventId)&&void 0!==A?A:void 0,st)}),ll.apply(this,arguments)}function ad(){return(ad=(0,_.Z)(function*(C){const{BuildInfo:g}=Rl(),m={};Nt()?m.iosBundleId=g.packageName:Ke()?m.androidPackageName=g.packageName:it(C,"operation-not-supported-in-this-environment"),yield ni(C,m)})).apply(this,arguments)}function Pa(){return(Pa=(0,_.Z)(function*(C,g,m){const{cordova:A}=Rl();let K=()=>{};try{yield new Promise((oe,st)=>{let Dt=null;function rn(){var ar;oe();const Ki=null===(ar=A.plugins.browsertab)||void 0===ar?void 0:ar.close;"function"==typeof Ki&&Ki(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Bn(){Dt||(Dt=window.setTimeout(()=>{st(tt(C,"redirect-cancelled-by-user"))},Ph))}function or(){"visible"===(null==document?void 0:document.visibilityState)&&Bn()}g.addPassiveListener(rn),document.addEventListener("resume",Bn,!1),Ke()&&document.addEventListener("visibilitychange",or,!1),K=()=>{g.removePassiveListener(rn),document.removeEventListener("resume",Bn,!1),document.removeEventListener("visibilitychange",or,!1),Dt&&window.clearTimeout(Dt)}})}finally{K()}})).apply(this,arguments)}function gc(){return(gc=(0,_.Z)(function*(C){const g=function mc(C){if(He(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const g=new ArrayBuffer(C.length),m=new Uint8Array(g);for(let A=0;A<C.length;A++)m[A]=C.charCodeAt(A);return m}(C),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Oh=20;class Ea extends Sl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,_.Z)(function*(){yield g.initPromise})()}}function ld(C){return yc.apply(this,arguments)}function yc(){return(yc=(0,_.Z)(function*(C){const g=yield Yl()._get(wo(C));return g&&(yield Yl()._remove(wo(C))),g})).apply(this,arguments)}function ud(){const C=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<Oh;m++){const A=Math.floor(Math.random()*g.length);C.push(g.charAt(A))}return C.join("")}function Yl(){return rt(Wi)}function wo(C){return we("authEvent",C.config.apiKey,C.name)}function Zl(C){if(null==C||!C.includes("?"))return{};const[g,...m]=C.split("?");return(0,ee.zd)(m.join("?"))}const vc=class Tu{constructor(){this._redirectPersistence=Js,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jc,this._overrideRedirectResult=$d}_initialize(g){var m=this;return(0,_.Z)(function*(){const A=g._key();let K=m.eventManagers.get(A);return K||(K=new Ea(g),m.eventManagers.set(A,K),m.attachCallbackListeners(g,K)),K})()}_openPopup(g){it(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,A,K){var oe=this;return(0,_.Z)(function*(){!function $c(C){var g,m,A,K,oe,st,Dt,rn,Bn,or;const ar=Rl();Ne("function"==typeof(null===(g=null==ar?void 0:ar.universalLinks)||void 0===g?void 0:g.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ne(typeof(null===(m=null==ar?void 0:ar.BuildInfo)||void 0===m?void 0:m.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ne("function"==typeof(null===(oe=null===(K=null===(A=null==ar?void 0:ar.cordova)||void 0===A?void 0:A.plugins)||void 0===K?void 0:K.browsertab)||void 0===oe?void 0:oe.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(rn=null===(Dt=null===(st=null==ar?void 0:ar.cordova)||void 0===st?void 0:st.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===rn?void 0:rn.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(or=null===(Bn=null==ar?void 0:ar.cordova)||void 0===Bn?void 0:Bn.InAppBrowser)||void 0===or?void 0:or.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const st=yield oe._initialize(g);yield st.initialized(),st.resetRedirect(),function sl(){Or.clear()}(),yield oe._originValidation(g);const Dt=function ru(C,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:ud(),postBody:null,tenantId:C.tenantId,error:tt(C,"no-auth-event")}}(g,A,K);yield function Pl(C,g){return Yl()._set(wo(C),g)}(g,Dt);const rn=yield function od(C,g,m){return ll.apply(this,arguments)}(g,Dt,m),Bn=yield function gs(C){const{cordova:g}=Rl();return new Promise(m=>{g.plugins.browsertab.isAvailable(A=>{let K=null;A?g.plugins.browsertab.openUrl(C):K=g.InAppBrowser.open(C,function he(C=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),m(K)})})}(rn);return function Ga(C,g,m){return Pa.apply(this,arguments)}(g,st,Bn)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Hd(C){return ad.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:A,handleOpenURL:K,BuildInfo:oe}=Rl(),st=setTimeout((0,_.Z)(function*(){yield ld(g),m.onEvent(kh())}),500),Dt=function(){var or=(0,_.Z)(function*(ar){clearTimeout(st);const Ki=yield ld(g);let Oa=null;Ki&&null!=ar&&ar.url&&(Oa=function cd(C,g){var m,A;const K=function dd(C){const g=Zl(C),m=g.link?decodeURIComponent(g.link):void 0,A=Zl(m).link,K=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Zl(K).link||K||A||m||C}(g);if(K.includes("/__/auth/callback")){const oe=Zl(K),st=oe.firebaseError?function Du(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(oe.firebaseError)):null,Dt=null===(A=null===(m=null==st?void 0:st.code)||void 0===m?void 0:m.split("auth/"))||void 0===A?void 0:A[1],rn=Dt?tt(Dt):null;return rn?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:rn,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:K,postBody:null}}return null}(Ki,ar.url)),m.onEvent(Oa||kh())});return function(Ki){return or.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,Dt);const rn=K,Bn=`${oe.packageName.toLowerCase()}://`;Rl().handleOpenURL=function(){var or=(0,_.Z)(function*(ar){if(ar.toLowerCase().startsWith(Bn)&&Dt({url:ar}),"function"==typeof rn)try{rn(ar)}catch(Ki){console.error(Ki)}});return function(ar){return or.apply(this,arguments)}}()}};function kh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:tt("no-auth-event")}}const Dp=1e3;function js(){var C;return(null===(C=null==self?void 0:self.location)||void 0===C?void 0:C.protocol)||null}function Xl(C=(0,ee.z$)()){return!("file:"!==js()&&"ionic:"!==js()&&"capacitor:"!==js()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rf(){try{const C=self.localStorage,g=_n();if(C)return C.setItem(g,"1"),C.removeItem(g),!function Su(C=(0,ee.z$)()){return function Ia(){return(0,ee.w1)()&&11===(null==document?void 0:document.documentMode)}()||function zd(C=(0,ee.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,ee.hl)()}catch{return Fh()&&(0,ee.hl)()}return!1}function Fh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zr(){return(function fd(){return"http:"===js()||"https:"===js()}()||(0,ee.ru)()||Xl())&&!function iu(){return(0,ee.b$)()||(0,ee.UG)()}()&&Rf()&&!Fh()}function Lh(){return Xl()&&typeof document<"u"}function su(){return(su=(0,_.Z)(function*(){return!!Lh()&&new Promise(C=>{const g=setTimeout(()=>{C(!1)},Dp);document.addEventListener("deviceready",()=>{clearTimeout(g),C(!0)})})})).apply(this,arguments)}const wa={LOCAL:"local",NONE:"none",SESSION:"session"},Ec=Ne,Wd="persistence";function xu(C){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,_.Z)(function*(C){yield C._initializationPromise;const g=Kd(),m=we(Wd,C.config.apiKey,C.name);g&&g.setItem(m,C._getPersistence())})).apply(this,arguments)}function Kd(){var C;try{return(null===(C=function Gd(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const wc=Ne;class ca{constructor(){this.browserResolver=rt(Io),this.cordovaResolver=rt(vc),this.underlyingResolver=null,this._redirectPersistence=Js,this._completeRedirectFn=Jc,this._overrideRedirectResult=$d}_initialize(g){var m=this;return(0,_.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,A,K){var oe=this;return(0,_.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openPopup(g,m,A,K)})()}_openRedirect(g,m,A,K){var oe=this;return(0,_.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openRedirect(g,m,A,K)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Lh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,_.Z)(function*(){if(g.underlyingResolver)return;const m=yield function Au(){return su.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function Ol(C){return C.unwrap()}function Tp(C){return Sp(C)}function Sp(C){const{_tokenResponse:g}=C instanceof ee.ZR?C.customData:C;if(!g)return null;if(!(C instanceof ee.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return x.credentialFromResult(C);const m=g.providerId;if(!m||m===Ge.PASSWORD)return null;let A;switch(m){case Ge.GOOGLE:A=ho;break;case Ge.FACEBOOK:A=uo;break;case Ge.GITHUB:A=fa;break;case Ge.TWITTER:A=na;break;default:const{oauthIdToken:K,oauthAccessToken:oe,oauthTokenSecret:st,pendingToken:Dt,nonce:rn}=g;return oe||st||K||Dt?Dt?m.startsWith("saml.")?_s._create(m,Dt):Yi._fromParams({providerId:m,signInMethod:m,pendingToken:Dt,idToken:K,accessToken:oe}):new ks(m).credential({idToken:K,accessToken:oe,rawNonce:rn}):null}return C instanceof ee.ZR?A.credentialFromError(C):A.credentialFromResult(C)}function Wa(C,g){return g.catch(m=>{throw m instanceof ee.ZR&&function qd(C,g){var m;const A=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null==g?void 0:g.code))g.resolver=new gd(C,function Ri(C,g){var m;const A=(0,ee.m9)(C),K=g;return Ne(g.customData.operationType,A,"argument-error"),Ne(null===(m=K.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,A,"argument-error"),wr._fromError(A,K)}(C,g));else if(A){const K=Sp(g),oe=g;K&&(oe.credential=K,oe.tenantId=A.tenantId||void 0,oe.email=A.email||void 0,oe.phoneNumber=A.phoneNumber||void 0)}}(C,m),m}).then(m=>{const K=m.user;return{operationType:m.operationType,credential:Tp(m),additionalUserInfo:vl(m),user:kl.getOrCreate(K)}})}function ms(C,g){return au.apply(this,arguments)}function au(){return(au=(0,_.Z)(function*(C,g){const m=yield g;return{verificationId:m.verificationId,confirm:A=>Wa(C,m.confirm(A))}})).apply(this,arguments)}class gd{constructor(g,m){this.resolver=m,this.auth=function Mf(C){return C.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Wa(Ol(this.auth),this.resolver.resolveSignIn(g))}}class kl{constructor(g){this._delegate=g,this.multiFactor=function Ls(C){const g=(0,ee.m9)(C);return Xs.has(g)||Xs.set(g,Es._fromUser(g)),Xs.get(g)}(g)}static getOrCreate(g){return kl.USER_MAP.has(g)||kl.USER_MAP.set(g,new kl(g)),kl.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,_.Z)(function*(){return Wa(m.auth,sa(m._delegate,g))})()}linkWithPhoneNumber(g,m){var A=this;return(0,_.Z)(function*(){return ms(A.auth,function Di(C,g,m){return to.apply(this,arguments)}(A._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,_.Z)(function*(){return Wa(m.auth,function $s(C,g,m){return ya.apply(this,arguments)}(m._delegate,g,ca))})()}linkWithRedirect(g){var m=this;return(0,_.Z)(function*(){return yield xu(kr(m.auth)),Fc(m._delegate,g,ca)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,_.Z)(function*(){return Wa(m.auth,q(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return ms(this.auth,function _u(C,g,m){return la.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return Wa(this.auth,function Ii(C,g,m){return rs.apply(this,arguments)}(this._delegate,g,ca))}reauthenticateWithRedirect(g){var m=this;return(0,_.Z)(function*(){return yield xu(kr(m.auth)),Bd(m._delegate,g,ca)})()}sendEmailVerification(g){return function nl(C,g){return ga.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,_.Z)(function*(){return yield function Ja(C,g){return os.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function ls(C,g){return Vr((0,ee.m9)(C),g,null)}(this._delegate,g)}updatePassword(g){return function Fs(C,g){return Vr((0,ee.m9)(C),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Pr(C,g){return S.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function hs(C,g){return Aa.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function as(C,g,m){return xo.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}kl.USER_MAP=new WeakMap;const md=Ne;let lu=(()=>{class C{constructor(m,A){if(this.app=m,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=m.options;md(K,"invalid-api-key",{appName:m.name}),md(K,"invalid-api-key",{appName:m.name});const oe=typeof window<"u"?ca:void 0;this._delegate=A.initialize({options:{persistence:Nl(K,m.name),popupRedirectResolver:oe}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?kl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,A){!function se(C,g,m){const A=kr(C);Ne(A._canInitEmulator,A,"emulator-config-failed"),Ne(/^https?:\/\//.test(g),A,"invalid-emulator-scheme");const K=!(null==m||!m.disableWarnings),oe=be(g),{host:st,port:Dt}=function qe(C){const g=be(C),m=/(\/\/)?([^?#/]+)/.exec(C.substr(g.length));if(!m)return{host:"",port:null};const A=m[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(A);if(K){const oe=K[1];return{host:oe,port:me(A.substr(oe.length+1))}}{const[oe,st]=A.split(":");return{host:oe,port:me(st)}}}(g);A.config.emulator={url:`${oe}//${st}${null===Dt?"":`:${Dt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:st,port:Dt,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function et(){function C(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,m,A)}applyActionCode(m){return function Ao(C,g){return xi.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Va(this._delegate,m)}confirmPasswordReset(m,A){return function Qi(C,g,m){return ds.apply(this,arguments)}(this._delegate,m,A)}createUserWithEmailAndPassword(m,A){var K=this;return(0,_.Z)(function*(){return Wa(K._delegate,function oa(C,g,m){return Ys.apply(this,arguments)}(K._delegate,m,A))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function zo(C,g){return Fo.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function ja(C,g){const m=ss.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,_.Z)(function*(){md(Zr(),m._delegate,"operation-not-supported-in-this-environment");const A=yield function sd(C,g){return ol.apply(this,arguments)}(m._delegate,ca);return A?Wa(m._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Nh(C,g){kr(C)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,A,K){const{next:oe,error:st,complete:Dt}=cu(m,A,K);return this._delegate.onAuthStateChanged(oe,st,Dt)}onIdTokenChanged(m,A,K){const{next:oe,error:st,complete:Dt}=cu(m,A,K);return this._delegate.onIdTokenChanged(oe,st,Dt)}sendSignInLinkToEmail(m,A){return function el(C,g,m){return Ta.apply(this,arguments)}(this._delegate,m,A)}sendPasswordResetEmail(m,A){return function $r(C,g,m){return ii.apply(this,arguments)}(this._delegate,m,A||void 0)}setPersistence(m){var A=this;return(0,_.Z)(function*(){let K;switch(function pd(C,g){Ec(Object.values(wa).includes(g),C,"invalid-persistence-type"),(0,ee.b$)()?Ec(g!==wa.SESSION,C,"unsupported-persistence-type"):(0,ee.UG)()?Ec(g===wa.NONE,C,"unsupported-persistence-type"):Fh()?Ec(g===wa.NONE||g===wa.LOCAL&&(0,ee.hl)(),C,"unsupported-persistence-type"):Ec(g===wa.NONE||Rf(),C,"unsupported-persistence-type")}(A._delegate,m),m){case wa.SESSION:K=Js;break;case wa.LOCAL:K=(yield rt(ci)._isAvailable())?ci:Wi;break;case wa.NONE:K=qt;break;default:return it("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Wa(this._delegate,function Pi(C){return po.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Wa(this._delegate,So(this._delegate,m))}signInWithCustomToken(m){return Wa(this._delegate,function M(C,g){return F.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,A){return Wa(this._delegate,function ml(C,g,m){return So((0,ee.m9)(C),Ho.credential(g,m))}(this._delegate,m,A))}signInWithEmailLink(m,A){return Wa(this._delegate,function ns(C,g,m){return Rs.apply(this,arguments)}(this._delegate,m,A))}signInWithPhoneNumber(m,A){return ms(this._delegate,function Yr(C,g,m){return $t.apply(this,arguments)}(this._delegate,m,A))}signInWithPopup(m){var A=this;return(0,_.Z)(function*(){return md(Zr(),A._delegate,"operation-not-supported-in-this-environment"),Wa(A._delegate,function Hn(C,g,m){return $n.apply(this,arguments)}(A._delegate,m,ca))})()}signInWithRedirect(m){var A=this;return(0,_.Z)(function*(){return md(Zr(),A._delegate,"operation-not-supported-in-this-environment"),yield xu(A._delegate),rd(A._delegate,m,ca)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Ks(C,g){return qs.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=wa,C})();function cu(C,g,m){let A=C;"function"!=typeof C&&({next:A,error:g,complete:m}=C);const K=A;return{next:st=>K(st&&kl.getOrCreate(st)),error:g,complete:m}}function Nl(C,g){const m=function ou(C,g){const m=Kd();if(!m)return[];const A=we(Wd,C,g);switch(m.getItem(A)){case wa.NONE:return[qt];case wa.LOCAL:return[ci,Js];case wa.SESSION:return[Js];default:return[]}}(C,g);if(typeof self<"u"&&!m.includes(ci)&&m.push(ci),typeof window<"u")for(const A of[Wi,Js])m.includes(A)||m.push(A);return m.includes(qt)||m.push(qt),m}class cl{constructor(){this.providerId="phone",this._delegate=new x(Ol(y.Z.auth()))}static credential(g,m){return x.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}cl.PHONE_SIGN_IN_METHOD=x.PHONE_SIGN_IN_METHOD,cl.PROVIDER_ID=x.PROVIDER_ID;const Ql=Ne;class $h{constructor(g,m,A=y.Z.app()){var K;Ql(null===(K=A.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Gl(g,m,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Pf(C){C.INTERNAL.registerComponent(new ve.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),A=g.getProvider("auth");return new lu(m,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ye_EMAIL_SIGNIN,PASSWORD_RESET:ye_PASSWORD_RESET,RECOVER_EMAIL:ye_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ye_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ye_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ye_VERIFY_EMAIL}},EmailAuthProvider:Ho,FacebookAuthProvider:uo,GithubAuthProvider:fa,GoogleAuthProvider:ho,OAuthProvider:ks,SAMLAuthProvider:No,PhoneAuthProvider:cl,PhoneMultiFactorGenerator:io,RecaptchaVerifier:$h,TwitterAuthProvider:na,Auth:lu,AuthCredential:Qe,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.4.1")}(y.Z)},5861:(In,Et,j)=>{"use strict";function _(ee,le,$e,Ae,ve,Ue,Ge){try{var Ee=ee[Ue](Ge),de=Ee.value}catch(ye){return void $e(ye)}Ee.done?le(de):Promise.resolve(de).then(Ae,ve)}function y(ee){return function(){var le=this,$e=arguments;return new Promise(function(Ae,ve){var Ue=ee.apply(le,$e);function Ge(de){_(Ue,Ae,ve,Ge,Ee,"next",de)}function Ee(de){_(Ue,Ae,ve,Ge,Ee,"throw",de)}Ge(void 0)})}}j.d(Et,{Z:()=>y})}},In=>{In(In.s=1183)}]);